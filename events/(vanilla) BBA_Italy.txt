add_namespace = BBA_italy_missiolinis
add_namespace = BBA_italy_communist_events
add_namespace = BBA_italy_democratic_events
add_namespace = BBA_italy_anti_colonialism_events
add_namespace = BBA_italy_interaction_events
add_namespace = BBA_italy_research_agreement
add_namespace = BBA_italy_pact
add_namespace = BBA_italy_purge_the_party
add_namespace = BBA_italy_decide_the_fate_of_mussolini
add_namespace = BBA_italy_recognize_the_empire
add_namespace = BBA_italy_council_deposes_duce
add_namespace = BBA_italy_sends_military_support
add_namespace = BBA_italy_local_rulers
add_namespace = BBA_italy_human_torpedo_raid
add_namespace = BBA_italy_naval_cooperation_programs
add_namespace = BBA_italy_colonial_management



### PROGRESS IN ETHIOPIA ###

# Progress in Ethiopia - FAILURE (North)
country_event = {
	id = BBA_italy_missiolinis.02_north #First Missiolini is in the Italo-Ethiopian War file
	title = BBA_italy_missiolinis.02_north.t
	desc = BBA_italy_missiolinis.02_north.desc
	picture = GFX_report_event_generic_soldiers_surrendering
	is_triggered_only = yes

	immediate = {log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event BBA_italy_missiolinis.02_north"}

	# Oops (No focus to complete)
	option = {
		name = BBA_italy_missiolinis.02_north.a
		ITA_missiolini_progress_in_ethiopia_failure_effect = yes
		if = {
			limit = { has_dynamic_modifier = { modifier = NW_THE_CULT_OF_PERSONALITY_modifier } }
			add_to_variable = { NW_THE_CULT_OF_PERSONALITY_VAR = -5 tooltip = NW_THE_CULT_OF_PERSONALITY_VAR_tt }
			NW_THE_CULT_OF_PERSONALITY_effect = yes
		}
	}
}

# Progress in Ethiopia - FAILURE (South)
country_event = {
	id = BBA_italy_missiolinis.04_south #First Missiolini is in the Italo-Ethiopian War file
	title = BBA_italy_missiolinis.04_south.t
	desc = BBA_italy_missiolinis.04_south.desc
	picture = GFX_report_event_generic_soldiers_surrendering
	is_triggered_only = yes

	immediate = {log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event BBA_italy_missiolinis.04_south"}

	# Oops (No focus to complete)
	option = {
		name = BBA_italy_missiolinis.04_south.a
		ITA_missiolini_progress_in_ethiopia_failure_effect = yes
		if = {
			limit = { has_dynamic_modifier = { modifier = NW_THE_CULT_OF_PERSONALITY_modifier } }
			add_to_variable = { NW_THE_CULT_OF_PERSONALITY_VAR = -5 tooltip = NW_THE_CULT_OF_PERSONALITY_VAR_tt }
			NW_THE_CULT_OF_PERSONALITY_effect = yes
		}
	}
}

# Progress in Ethiopia - SUCCESS (North)
country_event = {
	id = BBA_italy_missiolinis.03_north
	title = BBA_italy_missiolinis.03_north.t
	desc = BBA_italy_missiolinis.03_north.desc
	picture = GFX_report_event_generic_military_parade
	is_triggered_only = yes
	
	immediate = {log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event BBA_italy_missiolinis.03_north"}

	# Nice
	option = { 
		name = BBA_italy_missiolinis.03_north.a
		ai_chance = {
			base = 10
		}
		ITA_missiolini_progress_in_ethiopia_success_effect = yes
		if = {
			limit = { has_dynamic_modifier = { modifier = NW_THE_CULT_OF_PERSONALITY_modifier } }
			add_to_variable = { NW_THE_CULT_OF_PERSONALITY_VAR = 3 tooltip = NW_THE_CULT_OF_PERSONALITY_VAR_tt }
			NW_THE_CULT_OF_PERSONALITY_effect = yes
		}
	}
}

# Progress in Ethiopia - SUCCESS (South)
country_event = {
	id = BBA_italy_missiolinis.05_south
	title = BBA_italy_missiolinis.05_south.t
	desc = BBA_italy_missiolinis.05_south.desc
	picture = GFX_report_event_generic_military_parade
	is_triggered_only = yes
	
	immediate = {log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event BBA_italy_missiolinis.05_south"}
	
	# Nice
	option = { 
		name = BBA_italy_missiolinis.05_south.a
		ITA_missiolini_progress_in_ethiopia_success_effect = yes
		if = {
			limit = { has_dynamic_modifier = { modifier = NW_THE_CULT_OF_PERSONALITY_modifier } }
			add_to_variable = { NW_THE_CULT_OF_PERSONALITY_VAR = 3 tooltip = NW_THE_CULT_OF_PERSONALITY_VAR_tt }
			NW_THE_CULT_OF_PERSONALITY_effect = yes
		}
	}
}


### CONQUER ETHIOPIA ###

# Conquer Ethiopia - Missiolini
unit_leader_event = {
	id = BBA_italy_missiolinis.11
	title = BBA_italy_missiolinis.11.t
	desc = BBA_italy_missiolinis.11.desc
	picture = GFX_report_event_generic_mussolini
	
	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = {
		has_country_leader = {
			character = ITA_benito_mussolini
			ruling_only = yes
		}
		NOT = {
			has_global_flag = italo_ethiopian_war_over
			has_active_mission = ITA_missiolini_conquer_ethiopia
		}
	}
	
	immediate = {log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): unit_leader_event BBA_italy_missiolinis.11"}

	# OK dude
	option = {
		name = BBA_italy_missiolinis.11.a
		activate_mission = ITA_missiolini_conquer_ethiopia
		hidden_effect = {
			ETH = { activate_mission = ETH_hold_addis_ababa_mission }
		}
	}
}


# Conquer Ethiopia - FAILURE 
country_event = {
	id = BBA_italy_missiolinis.12
	title = BBA_italy_missiolinis.12.t
	desc = BBA_italy_missiolinis.12.desc
	picture = GFX_report_event_generic_destroyed_vehicles
	
	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = {
		has_country_leader = {
			character = ITA_benito_mussolini
			ruling_only = yes
		}
	}
	
	immediate = {log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event BBA_italy_missiolinis.12"}

	# Ooops
	option = {
		name = BBA_italy_missiolinis.12.a
		ITA_missiolini_conquer_ethiopia_failure_effect = yes
		if = {
			limit = { has_dynamic_modifier = { modifier = NW_THE_CULT_OF_PERSONALITY_modifier } }
			custom_effect_tooltip = NW_THE_CULT_OF_PERSONALITY_remove_old_aspiration_tt
			show_ideas_tooltip = NW_THE_CULT_OF_PERSONALITY_duce_ita_idea
			hidden_effect = { remove_ideas = NW_THE_CULT_OF_PERSONALITY_duce_ita_idea }
			add_to_variable = { NW_THE_CULT_OF_PERSONALITY_VAR = -25 tooltip = NW_THE_CULT_OF_PERSONALITY_VAR_tt }
			NW_THE_CULT_OF_PERSONALITY_effect = yes
		}
	}
}

# Conquer Ethiopia - SUCCESS 
country_event = {
	id = BBA_italy_missiolinis.13
	title = BBA_italy_missiolinis.13.t
	desc = BBA_italy_missiolinis.13.desc
	picture = GFX_report_event_generic_italian_celebration
	
	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = {
		has_country_leader = {
			character = ITA_benito_mussolini
			ruling_only = yes
		}
	}
	
	immediate = {log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): event BBA_italy_missiolinis.13"}

	# Nice
	option = {
		name = BBA_italy_missiolinis.13.a
		ITA_missiolini_conquer_ethiopia_success_effect = yes
		if = {
			limit = { has_dynamic_modifier = { modifier = NW_THE_CULT_OF_PERSONALITY_modifier } }
			custom_effect_tooltip = NW_THE_CULT_OF_PERSONALITY_remove_old_aspiration_tt
			show_ideas_tooltip = NW_THE_CULT_OF_PERSONALITY_duce_ita_idea
			hidden_effect = { remove_ideas = NW_THE_CULT_OF_PERSONALITY_duce_ita_idea }
			add_to_variable = { NW_THE_CULT_OF_PERSONALITY_VAR = 10 tooltip = NW_THE_CULT_OF_PERSONALITY_VAR_tt }
			NW_THE_CULT_OF_PERSONALITY_effect = yes
		}
	}
}



########  ######## ##     ##  #######   ######  ########     ###    ######## ####  ######  
##     ## ##       ###   ### ##     ## ##    ## ##     ##   ## ##      ##     ##  ##    ## 
##     ## ##       #### #### ##     ## ##       ##     ##  ##   ##     ##     ##  ##       
##     ## ######   ## ### ## ##     ## ##       ########  ##     ##    ##     ##  ##       
##     ## ##       ##     ## ##     ## ##       ##   ##   #########    ##     ##  ##       
##     ## ##       ##     ## ##     ## ##    ## ##    ##  ##     ##    ##     ##  ##    ## 
########  ######## ##     ##  #######   ######  ##     ## ##     ##    ##    ####  ######  


#Democratic Leadership - Event for ITA
country_event = {
	id = BBA_italy_democratic_events.01
	title = BBA_italy_democratic_events.01.t
	desc = BBA_italy_democratic_events.01.desc
	picture = GFX_report_event_ITA_democratic_parlament

	is_triggered_only = yes

	#PARRI (Popolare)
	option = {
		name = BBA_italy_democratic_events.01.a

		ai_chance = {
			base = 1
		}

		hidden_effect = {
			if = {
				limit = {
					ITA_comitato_di_liberazione_nazionale = {
						has_ideology = marxism
					}
				}
				remove_country_leader_role = {
					character = ITA_comitato_di_liberazione_nazionale
					ideology = marxism
				}
			}
			if = {
				limit = {
					ITA_comitato_di_liberazione_nazionale = {
						has_ideology = socialism
					}
				}
				remove_country_leader_role = {
					character = ITA_comitato_di_liberazione_nazionale
					ideology = socialism
				}
			}
		}
		promote_character = ITA_ferruccio_parri
	}

	#BONOMI (Lavoro)
	option = {
		name = BBA_italy_democratic_events.01.b

		ai_chance = {
			base = 1
		}

		hidden_effect = {
			remove_country_leader_role = {
				character = ITA_comitato_di_liberazione_nazionale
				ideology = marxism
			} 
		}
		promote_character = ITA_ivanoe_bonomi
		set_party_name = {
			ideology = democratic
			name = ITA_partito_democratico_del_lavoro
			long_name = ITA_partito_democratico_del_lavoro_long
		}
	}
}

#Scientific Cooperation - Event for Italian allies
country_event = {
	id = BBA_italy_democratic_events.02
	title = BBA_italy_democratic_events.02.t
	desc = BBA_italy_democratic_events.02.desc
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	#
	option = {
		name = BBA_italy_democratic_events.02.a

		add_ideas = ITA_scientific_cooperation_ns
	}
}

#Mafia Spawns - Event for ITA
country_event = {
	id = BBA_italy_democratic_events.03
	title = BBA_italy_democratic_events.03.t
	desc = BBA_italy_democratic_events.03.desc
	picture = GFX_report_event_gathering_protest

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_country_flag = ITA_country_is_aware_of_mafia_flag
			country_event = { id = BBA_italy_democratic_events.04 days = 40 random_days = 20 }
		}
	}

	#Su vieja
	option = {
		name = BBA_italy_democratic_events.03.a

		if = { #SICILIA PRIO
			limit = {
				115 = {
					controller = {
						original_tag = ITA
					}
				}
			}
			115 = {
				ITA_add_correct_mafia_rising_modifier_version = yes
				set_variable = { ROOT.ITA_mafia_epicenter_state = THIS }
			}
		}
		else_if = { #CAMPANIA next - Camorra Napolitana
			limit = {
				117 = {
					controller = {
						original_tag = ITA
					}
				}
			}
			117 = {
				ITA_add_correct_mafia_rising_modifier_version = yes
				set_variable = { ROOT.ITA_mafia_epicenter_state = THIS }
			}
		}
		else_if = { #CALABRIA
			limit = {
				156 = {
					controller = {
						original_tag = ITA
					}
				}
			}
			156 = {
				ITA_add_correct_mafia_rising_modifier_version = yes
				set_variable = { ROOT.ITA_mafia_epicenter_state = THIS }
			}
		}
		else = { #FALLBACK
			random_state = {
				limit = {
					is_core_of = ITA
					controller = {
						original_tag = ITA
					}
				}
				ITA_add_correct_mafia_rising_modifier_version = yes
				set_variable = { ROOT.ITA_mafia_epicenter_state = THIS }
			}
		}
	}
}


#Mafia Spreads - HIDDEN event for ITA to add Mafia state modifier to a new state
country_event = {
	id = BBA_italy_democratic_events.04

	hidden = yes
	is_triggered_only = yes

	trigger = {
		original_tag = ITA
		has_civil_war = yes
	}

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					any_of_scopes = {
						array = ITA.core_states
						ITA_state_has_any_version_of_mafia_rising_modifier = no
						any_neighbor_state = {
							state = ITA_mafia_epicenter_state
						}
					}
				}
				var:ITA_mafia_epicenter_state = {
					random_neighbor_state = {
						limit = {
							is_core_of = ITA
							ITA_state_has_any_version_of_mafia_rising_modifier = no
						}
						ITA_add_correct_mafia_rising_modifier_version = yes
						if = {
							limit = {
								controller = {
									NOT = { has_country_flag = ITA_country_is_aware_of_mafia_flag }
								}
							}
							controller = { country_event = { id = BBA_italy_democratic_events.05 hours = 1 } }
						}
					}
				}
			}
			else = {
				random_state = {
					limit = {
						is_core_of = ITA
						ITA_state_has_any_version_of_mafia_rising_modifier = no
					}
					prioritize = { 117 156 } #CAMPANIA CALABRIA
					ITA_add_correct_mafia_rising_modifier_version = yes
					if= {
						limit = {
							controller = {
								NOT = { has_country_flag = ITA_country_is_aware_of_mafia_flag }
							}
						}
						controller = { country_event = { id = BBA_italy_democratic_events.05 hours = 1 } }
					}
				}
			}

			#REPEAT EVENT
			if = {
				limit = {
					any_of_scopes = {
						array = ITA.core_states
						ITA_state_has_any_version_of_mafia_rising_modifier = no
					}
				}
				country_event = { id = BBA_italy_democratic_events.04 days = 40 random_days = 20 }
			}
		}
	}
}

#Mafia Abroad - Event for people getting Mafia
country_event = {
	id = BBA_italy_democratic_events.05
	title = BBA_italy_democratic_events.05.t
	desc = BBA_italy_democratic_events.05.desc
	picture = GFX_report_event_gathering_protest

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			set_country_flag = ITA_country_is_aware_of_mafia_flag
		}
	}

	#Wtf
	option = {
		name = BBA_italy_democratic_events.05.a

		custom_effect_tooltip = generic_states_affected_tt
		effect_tooltip = {
			every_controlled_state = { #Only for tooltip purposes, effects applied in the event above
				limit = {
					ITA_state_has_any_version_of_mafia_rising_modifier = yes
				}
				ITA_add_correct_mafia_rising_modifier_version = yes
			}
		}
	}
}

 ######   #######  ##        #######  ##    ## ####    ###    ##          ##     ##    ###    ##    ##    ###     ######   ######## ##     ## ######## ##    ## ######## 
##    ## ##     ## ##       ##     ## ###   ##  ##    ## ##   ##          ###   ###   ## ##   ###   ##   ## ##   ##    ##  ##       ###   ### ##       ###   ##    ##    
##       ##     ## ##       ##     ## ####  ##  ##   ##   ##  ##          #### ####  ##   ##  ####  ##  ##   ##  ##        ##       #### #### ##       ####  ##    ##    
##       ##     ## ##       ##     ## ## ## ##  ##  ##     ## ##          ## ### ## ##     ## ## ## ## ##     ## ##   #### ######   ## ### ## ######   ## ## ##    ##    
##       ##     ## ##       ##     ## ##  ####  ##  ######### ##          ##     ## ######### ##  #### ######### ##    ##  ##       ##     ## ##       ##  ####    ##    
##    ## ##     ## ##       ##     ## ##   ###  ##  ##     ## ##          ##     ## ##     ## ##   ### ##     ## ##    ##  ##       ##     ## ##       ##   ###    ##    
 ######   #######  ########  #######  ##    ## #### ##     ## ########    ##     ## ##     ## ##    ## ##     ##  ######   ######## ##     ## ######## ##    ##    ##    


# Colonial Police occupation law available, Wanna apply it everywhere possible? - Event for ITA
country_event = {
	id = BBA_italy_colonial_management.1
	title = BBA_italy_colonial_management.1.t
	desc = BBA_italy_colonial_management.1.desc
	picture = GFX_report_event_spr_italian_volunteers
	
	is_triggered_only = yes

	# APPLY IT EVERYWHERE TACK!
	option = { 
		name = BBA_italy_colonial_management.1.a

		ai_chance = {
			base = 10
		}
		ITA = { set_occupation_law_where_available = colonial_police } # Set law in all countries/states where it's available.
	}

	# NOT INTERESTED
	option = { 
		name = BBA_italy_colonial_management.1.b

		ai_chance = {
			base = 0
		}

		custom_effect_tooltip = BBA_italy_colonial_management.1_do_not_apply_tt
	}
}

 ######   #######  ##     ## ##     ## ##     ## ##    ## ####  ######  ######## 
##    ## ##     ## ###   ### ###   ### ##     ## ###   ##  ##  ##    ##    ##    
##       ##     ## #### #### #### #### ##     ## ####  ##  ##  ##          ##    
##       ##     ## ## ### ## ## ### ## ##     ## ## ## ##  ##   ######     ##    
##       ##     ## ##     ## ##     ## ##     ## ##  ####  ##        ##    ##    
##    ## ##     ## ##     ## ##     ## ##     ## ##   ###  ##  ##    ##    ##    
 ######   #######  ##     ## ##     ##  #######  ##    ## ####  ######     ##    


#Communist Leadership - Event for ITA
country_event = {
	id = BBA_italy_communist_events.01
	title = BBA_italy_communist_events.01.t
	desc = BBA_italy_communist_events.01.desc
	picture = GFX_report_event_communists_in_riga

	is_triggered_only = yes

	#GRAMSCI (COMMIE)
	option = {
		name = BBA_italy_communist_events.01.a

		ai_chance = {
			base = 3
		}

		trigger = {
			has_completed_focus = ITA_liberate_gramsci
		}

		hidden_effect = {
			if = {
				limit = {
					ITA_comitato_di_liberazione_nazionale = {
						has_ideology = marxism
					}
				}
				remove_country_leader_role = {
					character = ITA_comitato_di_liberazione_nazionale
					ideology = marxism
				}
			}
			if = {
				limit = {
					ITA_comitato_di_liberazione_nazionale = {
						has_ideology = socialism
					}
				}
				remove_country_leader_role = {
					character = ITA_comitato_di_liberazione_nazionale
					ideology = socialism
				}
			}
		}
		ITA_add_country_leader_role_to_gramsci = yes		
	}

	#TOGLIATTI (COMMUNIST)
	option = {
		name = BBA_italy_communist_events.01.b

		ai_chance = {
			base = 1
		}

		hidden_effect = {
			remove_country_leader_role = {
				character = ITA_comitato_di_liberazione_nazionale
				ideology = marxism
			} 
		}
		promote_character = ITA_palmiro_togliatti
	}

	#PERTINI (SOCIALIST)
	option = {
		name = BBA_italy_communist_events.01.c

		ai_chance = {
			base = 1
		}

		hidden_effect = {
			remove_country_leader_role = {
				character = ITA_comitato_di_liberazione_nazionale
				ideology = marxism
			} 
		}
		promote_character = ITA_sandro_pertini
		set_party_name = {
			ideology = communism
			name = ITA_partito_socialista_italiano
			long_name = ITA_partito_socialista_italiano_long
		}
	}
}

# The New Italian Republic calls for aid - Event for communist an socialist countries
country_event = {
	id = BBA_italy_communist_events.02
	title = BBA_italy_communist_events.02.t
	desc = BBA_italy_communist_events.02.desc
	picture = GFX_report_event_generic_rifles

	is_triggered_only = yes

	#Send Help
	option = {
		name = BBA_italy_communist_events.02.a

		ai_chance = {
			base = 10
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 25
				}
			}
			modifier = {
				factor = 2
				has_opinion = {
					target = FROM
					value > 50
				}
			}
		}

		custom_effect_tooltip = ITA_country_supports_new_italian_government_tt
		hidden_effect = {
			FROM = {
				add_to_variable = { ITA_infantry_equipment_from_leftist_aid = 1000 }
				add_to_variable = { ITA_support_equipment_from_leftist_aid = 100 }
				add_to_variable = { ITA_trucks_from_leftist_aid = 50 }
				add_to_variable = { ITA_consumer_goods_from_leftist_aid = -0.005 }
			}
		}
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = ITA_supported_the_new_government
			}
		}
	}

	#Nej tack my comrade
	option = {
		name = BBA_italy_communist_events.02.b

		ai_chance = {
			base = 10
			modifier = {
				factor = 0
				is_subject_of = FROM
			}
		}


	}
}

# International Aid arrives! - Event dispatcher
country_event = {
	id = BBA_italy_communist_events.300
	title = BBA_italy_communist_events.300.t
	desc = BBA_italy_communist_events.300.desc

	hidden = yes

	is_triggered_only = yes

	immediate = {
		if = { #People are supporting
			limit = {
				check_variable = { ITA_trucks_from_leftist_aid > 0 }
			}
			country_event = BBA_italy_communist_events.03
		}
		else = { #No one supported T_T
			country_event = BBA_italy_communist_events.04
		}
	}
}

# International Aid arrives! - Event for ITA
country_event = {
	id = BBA_italy_communist_events.03
	title = BBA_italy_communist_events.03.t
	desc = BBA_italy_communist_events.03.desc
	picture = GFX_report_event_generic_rifles

	is_triggered_only = yes

	#Send Help
	option = {
		name = BBA_italy_communist_events.03.a

		custom_effect_tooltip = ITA_international_support_arrives_tt
		add_equipment_to_stockpile = { 
			type = infantry_equipment
			amount = ROOT.ITA_infantry_equipment_from_leftist_aid
			producer = ROOT
		}
		add_equipment_to_stockpile = { 
			type = support_equipment
			amount = ROOT.ITA_support_equipment_from_leftist_aid
			producer = ROOT
		}
		add_equipment_to_stockpile = { 
			type = motorized_equipment
			amount = ROOT.ITA_trucks_from_leftist_aid
			producer = ROOT
		}
		custom_effect_tooltip = ITA_international_support_consumer_goods_tt
		hidden_effect = {
			add_dynamic_modifier = { modifier = ITA_international_aid days = 730 } #WARNING this days value needs to match the one in the tooltip ITA_international_support_arrives_tt
		}
	}
}

# No International Aid received - Event for ITA
country_event = {
	id = BBA_italy_communist_events.04
	title = BBA_italy_communist_events.04.t
	desc = BBA_italy_communist_events.04.desc
	picture = GFX_report_event_generic_rifles

	is_triggered_only = yes

	#Send Help
	option = {
		name = BBA_italy_communist_events.04.a

		add_political_power = 25
	}
}

# Military Cooperation - Event for Italian allies
country_event = {
	id = BBA_italy_communist_events.05
	title = BBA_italy_communist_events.05.t
	desc = BBA_italy_communist_events.05.desc
	picture = GFX_report_event_soldiers_marching

	is_triggered_only = yes

	#Military Cooperation
	option = {
		name = BBA_italy_communist_events.05.a

		if = {
			limit = {
				is_faction_leader = yes
			}
			army_experience = 25
			air_experience = 25
			navy_experience = 25

			add_doctrine_cost_reduction = {
				name = ITA_army_modernization
				cost_reduction = 1
				uses = 1
				category = land_doctrine
			}
		}
		else = {
			army_experience = 15
			air_experience = 15
			navy_experience = 15

			add_doctrine_cost_reduction = {
				name = ITA_army_modernization
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
		}
	}
}

# United Anarchist Confederations - Event for SPC
country_event = {
	id = BBA_italy_communist_events.06
	title = BBA_italy_communist_events.06.t
	desc = BBA_italy_communist_events.06.desc
	picture = GFX_report_event_spr_anarchists

	is_triggered_only = yes

	#Accept
	option = {
		name = BBA_italy_communist_events.06.a

		ai_chance = {
			base = 1
		}

		add_political_power = 35

		effect_tooltip = {
			give_guarantee = FROM
			FROM = { give_guarantee = ROOT }

			add_opinion_modifier = {
				target = FROM
				modifier = ITA_united_anarchist_confederations
			}
			FROM = {
				add_opinion_modifier = {
					target = ROOT
					modifier = ITA_united_anarchist_confederations
				}
			}
		}

		hidden_effect = {
			country_event = { id = BBA_italy_communist_events.07 hours = 24 random_hours = 12 }
		}
	}

	#Refuse
	option = {
		name = BBA_italy_communist_events.06.b

		ai_chance = {
			base = 0
		}

		hidden_effect = {
			country_event = { id = BBA_italy_communist_events.08 hours = 24 random_hours = 12 }
		}
	}
}

# United Anarchist Confederations - SPC Accepts - Event for ITA
country_event = {
	id = BBA_italy_communist_events.07
	title = BBA_italy_communist_events.07.t
	desc = BBA_italy_communist_events.07.desc
	picture = GFX_report_event_spr_anarchists

	is_triggered_only = yes

	#Ok
	option = {
		name = BBA_italy_communist_events.06.a #intentional

		add_political_power = 35

		give_guarantee = FROM
		FROM = { give_guarantee = ROOT }

		add_opinion_modifier = {
			target = FROM
			modifier = ITA_united_anarchist_confederations
		}
		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = ITA_united_anarchist_confederations
			}
		}
		hidden_effect = {
			news_event = { id = bba_news.111 hours = 24 random_hours = 12 }
		}
	}
}

# United Anarchist Confederations - SPC Refuses - Event for ITA
country_event = {
	id = BBA_italy_communist_events.08
	title = BBA_italy_communist_events.08.t
	desc = BBA_italy_communist_events.08.desc
	picture = GFX_report_event_spr_anarchists

	is_triggered_only = yes

	#Ok
	option = {
		name = BBA_italy_communist_events.08.a

		
	}
}

#Gramsci gets a new leader trait
country_event = {
	id = BBA_italy_communist_events.09
	title = BBA_italy_communist_events.09.t
	desc = BBA_italy_communist_events.09.desc
	picture = GFX_report_event_ITA_gramsci

	fire_only_once = yes

	is_triggered_only = yes

	trigger = {
		has_character = ITA_antonio_gramsci
	}

	#Ok
	option = {
		name = BBA_italy_communist_events.09.a
		if = {	
			limit = {
				ITA_antonio_gramsci = { 
					is_country_leader = yes
				}
			}
			ITA_antonio_gramsci = {
				swap_country_leader_traits = {
					remove = indisposed_political_scientist
					add = cultural_hegemony_theorist
				}
			}
		}
		else = {
			effect_tooltip = {
				remove_trait = {
					character = ITA_antonio_gramsci
					ideology = marxism
					trait = indisposed_political_scientist
				}
				add_trait = {
					character = ITA_antonio_gramsci
					ideology = marxism
					trait = cultural_hegemony_theorist
				}
			}
			hidden_effect = {
				ITA_antonio_gramsci = {
					set_character_flag = ITA_improve_gramscis_trait_flag
				}
			}
		}
	}
}






   ###    ##    ## ######## ####          ######   #######  ##        #######  ##    ## ####    ###    ##       ####  ######  ##     ## 
  ## ##   ###   ##    ##     ##          ##    ## ##     ## ##       ##     ## ###   ##  ##    ## ##   ##        ##  ##    ## ###   ### 
 ##   ##  ####  ##    ##     ##          ##       ##     ## ##       ##     ## ####  ##  ##   ##   ##  ##        ##  ##       #### #### 
##     ## ## ## ##    ##     ##  ####### ##       ##     ## ##       ##     ## ## ## ##  ##  ##     ## ##        ##   ######  ## ### ## 
######### ##  ####    ##     ##          ##       ##     ## ##       ##     ## ##  ####  ##  ######### ##        ##        ## ##     ## 
##     ## ##   ###    ##     ##          ##    ## ##     ## ##       ##     ## ##   ###  ##  ##     ## ##        ##  ##    ## ##     ## 
##     ## ##    ##    ##    ####          ######   #######  ########  #######  ##    ## #### ##     ## ######## ####  ######  ##     ## 


#The Ethiopian Question - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.01
	title = BBA_italy_anti_colonialism_events.01.t
	desc = BBA_italy_anti_colonialism_events.01.desc
	picture = GFX_report_event_journalists_speech

	is_triggered_only = yes

	#Let's Peace out - ETH is at war with ITA
	option = {
		name = BBA_italy_anti_colonialism_events.01.a

		ai_chance = {
			base = 1
		}

		trigger = {
			has_war_with = ETH
		}

		ETH = { country_event = { id = BBA_italy_anti_colonialism_events.02 hours = 4 random_hours = 2 } }

		custom_effect_tooltip = if_they_accept_tt
		effect_tooltip = {
			if = {
				limit = {
					ETH = {
						OR = {
							is_ai = no
							surrender_progress < 0.5
						}
					}
				}
				white_peace = FROM
			}
			else = {
				white_peace = FROM
				FROM = { puppet = ROOT }
			}
		}
	}

	#Nothing - We need to finish this war first
	option = {
		name = BBA_italy_anti_colonialism_events.01.b

		ai_chance = {
			base = 0
		}

		trigger = {
			has_war_with = ETH
		}

		custom_effect_tooltip = BBA_italy_anti_colonialism_events_war_will_continue_tt
	}

	#Annex - ETH is Italian puppet
	option = {
		name = BBA_italy_anti_colonialism_events.01.c

		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				ETH = { is_ai = no }
			}
		}

		trigger = {
			ETH = { is_subject_of = ROOT }
		}
		
		ETH = { country_event = { id = BBA_italy_anti_colonialism_events.05 hours = 4 random_hours = 2 } }

		custom_effect_tooltip = if_they_accept_tt
		effect_tooltip = {
			annex_country = {
				target = ETH
				transfer_troops = yes
			}
		}
	}

	#Some Investment - Development + less autonomy
	option = {
		name = BBA_italy_anti_colonialism_events.01.d

		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				ETH = { is_ai = no }
			}
		}

		trigger = {
			ETH = { is_subject_of = ROOT }
		}
		
		ETH = { country_event = { id = BBA_italy_anti_colonialism_events.08 hours = 4 random_hours = 2 } }

		effect_tooltip = {
			ETH = {
				capital_scope = {
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				add_autonomy_score = {
					value = -75
					localization = BBA_italy_anti_colonialism_events.08.t
				}
			}
		}
	}

	#Nothing - Keep puppet
	option = {
		name = BBA_italy_anti_colonialism_events.01.e

		ai_chance = {
			base = 1
		}

		trigger = {
			ETH = { is_subject_of = ROOT }
		}
	}

	#Closer ties - Change government AND/OR puppet
	option = {
		name = BBA_italy_anti_colonialism_events.01.f

		ai_chance = {
			base = 1
			modifier = {
				factor = 0
				ETH = { is_ai = no }
			}
		}

		trigger = {
			NOT = { has_war_with = ETH }
			NOT = { ETH = { is_subject_of = ROOT } }
		}
		
		ETH = { country_event = { id = BBA_italy_anti_colonialism_events.09 hours = 4 random_hours = 2 } }

		custom_effect_tooltip = if_they_accept_tt
		effect_tooltip = {
			puppet = ETH
			if = {
				limit = {
					is_in_faction = yes
				}
				faction_leader = {
					add_to_faction = ROOT
				}
			}
		}
	}

	#NAP + Guarantee
	option = {
		name = BBA_italy_anti_colonialism_events.01.g

		ai_chance = {
			base = 3
		}
		
		trigger = {
			NOT = { has_war_with = ETH }
			NOT = { ETH = { is_subject_of = ROOT } }
		}
		
		ETH = { country_event = { id = BBA_italy_anti_colonialism_events.13 hours = 4 random_hours = 2 } }

		custom_effect_tooltip = if_they_accept_tt
		effect_tooltip = {
			diplomatic_relation = { 
				country = ETH #target country
				relation = non_aggression_pact
				active = yes #yes to add relation, no to cancel existing one
			}

			give_guarantee = ETH
			ETH = { give_guarantee = ROOT }
		}
	}

	#Nothing - Live goes on
	option = {
		name = BBA_italy_anti_colonialism_events.01.e #intentional

		ai_chance = {
			base = 1
		}
		
		trigger = {
			NOT = { has_war_with = ETH }
			NOT = { ETH = { is_subject_of = ROOT } }
		}
	}
}

# The Ethiopian Question - Peace offer from ITA - Event for ETH
country_event = {
	id = BBA_italy_anti_colonialism_events.02
	title = BBA_italy_anti_colonialism_events.02.t
	desc = BBA_italy_anti_colonialism_events.02.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	#Accept - White Peace
	option = {
		name = BBA_italy_anti_colonialism_events.02.a

		ai_chance = {
			base = 1
		}

		trigger = {
			OR = {
				is_ai = no
				surrender_progress < 0.5
			}
		}

		effect_tooltip = {
			white_peace = FROM
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.03 hours = 8 random_hours = 4 } }
		}
	}

	#Accept - Puppet (only AI)
	option = {
		name = BBA_italy_anti_colonialism_events.02.b
		
		ai_chance = {
			base = 5
		}

		trigger = {
			is_ai = yes
			surrender_progress > 0.5
		}


		effect_tooltip = {
			white_peace = FROM
			FROM = { puppet = ROOT }
			set_country_flag = ITA_ethiopia_gets_puppeted_flag
		}
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.03 hours = 8 random_hours = 4 } }
		}
	}

	#Nej tack
	option = {
		name = BBA_italy_anti_colonialism_events.02.c

		ai_chance = {
			base = 0
			modifier = {
				add = 10
				FROM = {
					surrender_progress < 0.3
				}
			}
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.04 hours = 8 random_hours = 4 } }
		}
	}
}

# The Ethiopian Question - ETH accepts Peace - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.03
	title = BBA_italy_anti_colonialism_events.03.t
	desc = BBA_italy_anti_colonialism_events.03.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			ITA_end_the_italo_ethiopian_war = yes
		}
	}

	#Oki
	option = {
		name = BBA_italy_anti_colonialism_events.03.a

		white_peace = FROM
		hidden_effect = {
			FROM = {
				every_enemy_country = {
					limit = {
						is_in_faction_with = ROOT
						is_subject = no
					}
					FROM = { white_peace = PREV }
				}
			}
		}
		if = {
			limit = {
				FROM  = { has_country_flag = ITA_ethiopia_gets_puppeted_flag }
			}
			puppet = FROM
			FROM  = { clr_country_flag = ITA_ethiopia_gets_puppeted_flag }
		}
	}
}

# The Ethiopian Question - ETH rejects Peace - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.04
	title = BBA_italy_anti_colonialism_events.04.t
	desc = BBA_italy_anti_colonialism_events.04.desc
	picture = GFX_report_event_soldiers_marching

	is_triggered_only = yes

	#Oki
	option = {
		name = BBA_italy_anti_colonialism_events.04.a

		add_political_power = 25
	}
}

# The Ethiopian Question - Annexation demand from ITA - Event for ETH (as Italian Puppet)
country_event = {
	id = BBA_italy_anti_colonialism_events.05
	title = BBA_italy_anti_colonialism_events.05.t
	desc = BBA_italy_anti_colonialism_events.05.desc
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	#Oki
	option = {
		name = BBA_italy_anti_colonialism_events.05.a

		ai_chance = {
			base = 1
		}

		effect_tooltip = {
			FROM = {
				annex_country = { target = ROOT }
			}
			custom_effect_tooltip = GAME_OVER_TT
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.06 hours = 6 random_hours = 2 } }
		}
	}

	#No gracias
	option = {
		name = BBA_italy_anti_colonialism_events.05.b

		ai_chance = {
			base = 0
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.07 hours = 6 random_hours = 2 } }
		}
	}
}

# The Ethiopian Question - ETH accepts annexation - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.06
	title = BBA_italy_anti_colonialism_events.06.t
	desc = BBA_italy_anti_colonialism_events.06.desc
	picture = GFX_report_event_generic_read_write

	is_triggered_only = yes

	#Oki
	option = {
		name = BBA_italy_anti_colonialism_events.06.a

		annex_country = { target = FROM transfer_troops = yes }
	}
}

# The Ethiopian Question - ETH rejects annexation - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.07
	title = BBA_italy_anti_colonialism_events.07.t
	desc = BBA_italy_anti_colonialism_events.07.desc
	picture = GFX_report_event_ETH_ethiopian_warriors

	is_triggered_only = yes

	#Oki
	option = {
		name = BBA_italy_anti_colonialism_events.07.a

		add_political_power = 25
	}
}

# The Ethiopian Question - Development Investments from ITA - Event for ETH (as Italian puppet)
country_event = {
	id = BBA_italy_anti_colonialism_events.08
	title = BBA_italy_anti_colonialism_events.08.t
	desc = BBA_italy_anti_colonialism_events.08.desc
	picture = GFX_report_event_generic_factory

	is_triggered_only = yes

	#Oki
	option = {
		name = BBA_italy_anti_colonialism_events.08.a

		capital_scope = {
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = industrial_complex
				level = 1
				instant_build = yes
			}
			add_building_construction = {
				type = arms_factory
				level = 1
				instant_build = yes
			}
		}
		add_autonomy_score = {
			value = -75
			localization = BBA_italy_anti_colonialism_events.08.t
		}
	}
}


# The Ethiopian Question - Italian offer for puppet/change government - Event for ETH
country_event = {
	id = BBA_italy_anti_colonialism_events.09
	title = BBA_italy_anti_colonialism_events.09.t
	desc = BBA_italy_anti_colonialism_events.09.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	#Oki
	option = {
		name = BBA_italy_anti_colonialism_events.09.a

		ai_chance = {
			base = 5
		}

		effect_tooltip = {
			FROM = { puppet = ROOT }
			if = {
				limit = {
					FROM = {
						is_in_faction = yes
					}
				}
				FROM = {
					faction_leader = {
						add_to_faction = ROOT
					}
				}
			}
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.10 hours = 6 random_hours = 2 } }
		}
	}

	#Let's just change government
	option = {
		name = BBA_italy_anti_colonialism_events.09.b

		ai_chance = {
			base = 1
		}

		effect_tooltip = {
			set_politics = { ruling_party = FROM }
			diplomatic_relation = { 
				country = FROM #target country
				relation = non_aggression_pact 
				active = yes #yes to add relation, no to cancel existing one
			}
		}

		hidden_effect = {
			add_ai_strategy = { 
				type = alliance
				id = FROM
				value = 100
			}
		}
		
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.11 hours = 6 random_hours = 2 } }
		}
	}

	#Nope
	option = {
		name = BBA_italy_anti_colonialism_events.09.c

		ai_chance = {
			base = 0
			modifier = {
				add = 1
				has_opinion = {
					target = FROM
					value < 10
				} 
			}
			modifier = {
				add = 10
				has_opinion = {
					target = FROM
					value < 0
				} 
			}
		}
		
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.12 hours = 6 random_hours = 2 } }
		}
	}
}


# The Ethiopian Question - ETH becomes a puppet - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.10
	title = BBA_italy_anti_colonialism_events.10.t
	desc = BBA_italy_anti_colonialism_events.10.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	#Oki
	option = {
		name = BBA_italy_anti_colonialism_events.06.a #intentional

		puppet = FROM
		if = {
			limit = {
				is_in_faction = yes
			}
			faction_leader = {
				add_to_faction = ROOT
			}
		}
	}
}

# The Ethiopian Question - ETH changes government - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.11
	title = BBA_italy_anti_colonialism_events.11.t
	desc = BBA_italy_anti_colonialism_events.11.desc
	picture = GFX_report_event_generic_sign_treaty2

	is_triggered_only = yes

	#Oki
	option = {
		name = BBA_italy_anti_colonialism_events.11.a

		FROM = { set_politics = { ruling_party = ROOT } }
		diplomatic_relation = { 
			country = FROM #target country
			relation = non_aggression_pact 
			active = yes #yes to add relation, no to cancel existing one
		}

		hidden_effect = {
			add_ai_strategy = { 
				type = alliance
				id = FROM
				value = 75
			}
		}
	}
}

# The Ethiopian Question - ETH rejects our shit - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.12
	title = BBA_italy_anti_colonialism_events.07.t #intentional
	desc = BBA_italy_anti_colonialism_events.12.desc
	picture = GFX_report_event_ETH_ethiopian_warriors

	is_triggered_only = yes

	#Oki
	option = {
		name = BBA_italy_anti_colonialism_events.12.a

		ai_chance = {
			base = 2
		}

		add_political_power = 25
	}

	#Unacceptable - Wargoal
	option = {
		name = BBA_italy_anti_colonialism_events.12.b

		ai_chance = {
			base = 5
			modifier = {
				factor = 0.1
				ETH = { is_ai = no }
			}
		}

		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM 
		}
	}
}


# The Ethiopian Question - Italy proposes NAP + Guarantees - Event for ETH
country_event = {
	id = BBA_italy_anti_colonialism_events.13
	title = BBA_italy_anti_colonialism_events.13.t
	desc = BBA_italy_anti_colonialism_events.13.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	#Oki
	option = {
		name = BBA_italy_anti_colonialism_events.13.a

		ai_chance = {
			base = 5
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.14 hours = 6 random_hours = 2 } }
		}

		effect_tooltip = {
			diplomatic_relation = { 
				country = FROM #target country
				relation = non_aggression_pact
				active = yes #yes to add relation, no to cancel existing one
			}

			give_guarantee = FROM
			FROM = { give_guarantee = ROOT }
		}

		hidden_effect = {
			add_ai_strategy = { 
				type = alliance
				id = FROM
				value = 75
			}
		}
	}

	#Nope
	option = {
		name = BBA_italy_anti_colonialism_events.13.b

		ai_chance = {
			base = 0
			modifier = {
				add = 10
				surrender_progress < 0.3
			}
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.15 hours = 6 random_hours = 2 } }
		}
	}
}

# The Ethiopian Question - ETH acepts NAP + Guarantees - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.14
	title = BBA_italy_communist_events.07.t #intentional
	desc = BBA_italy_anti_colonialism_events.14.desc
	picture = GFX_report_event_generic_sign_treaty1

	is_triggered_only = yes

	#Oki
	option = {
		name = BBA_italy_anti_colonialism_events.06.a #intentional

		diplomatic_relation = { 
			country = FROM #target country
			relation = non_aggression_pact
			active = yes #yes to add relation, no to cancel existing one
		}

		give_guarantee = FROM
		FROM = { give_guarantee = ROOT }

		hidden_effect = {
			add_ai_strategy = { 
				type = alliance
				id = FROM
				value = 75
			}
		}
	}
}

# The Ethiopian Question - ETH rejects NAP + Guarantees - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.15
	title = BBA_italy_anti_colonialism_events.07.t #intentional
	desc = BBA_italy_anti_colonialism_events.15.desc
	picture = GFX_report_event_ETH_ethiopian_warriors

	is_triggered_only = yes

	#Alright your loss
	option = {
		name = BBA_italy_anti_colonialism_events.15.a

		ai_chance = {
			base = 10
		}

		add_political_power = 25
	}

	#Unacceptable - Wargoal
	option = {
		name = BBA_italy_anti_colonialism_events.15.b

		ai_chance = {
			base = 0
		}

		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM 
		}
	}
}



# Italy Condemns Colonialism - Event for Colonialist pigs
country_event = {
	id = BBA_italy_anti_colonialism_events.20
	title = BBA_italy_anti_colonialism_events.20.t
	desc = BBA_italy_anti_colonialism_events.20.desc
	picture = GFX_report_event_journalists_speech

	is_triggered_only = yes

	#Release all our stuff in Africa
	option = {
		name = BBA_italy_anti_colonialism_events.20.a

		ai_chance = {
			base = 0
			modifier = {
				add = 1
				strength_ratio = {
					tag = FROM
					ratio < 0.9
				}
			}
			modifier = {
				add = 5
				strength_ratio = {
					tag = FROM
					ratio < 0.5
				}
			}
			modifier = {
				add = 2
				has_government = communism
			}
			modifier = {
				add = -2
				is_in_faction = yes
			}
		}

		every_occupied_country = {
			limit = {
				capital_scope = {
					is_on_continent = africa
				}
			}
			ROOT = { release_puppet_on_controlled = PREV }
		}
		FROM = { set_country_flag = ITA_someone_decolonized_flag } #For loc purposes
	}

	#Are you guys crazy?!
	option = {
		name = BBA_italy_anti_colonialism_events.20.b

		ai_chance = {
			base = 5
		}

		set_country_flag = ITA_refused_decolonization_flag

		effect_tooltip = {
			every_owned_state = {
				limit = {
					is_on_continent = africa
					NOT = { is_core_of = owner }
				}
				add_dynamic_modifier = { modifier = ITA_anti_colonialism_sentiment }
			}
		}

		if = {
			limit = {
				FROM = { #Need to scope to FROM to work with scripted trigger
					ROOT = {
						country_can_be_reasonable_target_of_wargoal = yes
					}
				}
			}
			custom_effect_tooltip = maybe_war_tt
		}
	}
}


# Italy Condemns Colonialism - Country/ies refused - Event for ITA (After everyone decided what to do)
country_event = {
	id = BBA_italy_anti_colonialism_events.21
	title = BBA_italy_anti_colonialism_events.21.t
	desc = BBA_italy_anti_colonialism_events.21.desc
	picture = GFX_report_event_journalists_speech

	is_triggered_only = yes

	trigger = {
		original_tag = ITA
		any_other_country = { has_country_flag = ITA_refused_decolonization_flag }
	}

	#Our work here is done
	option = {
		name = BBA_italy_anti_colonialism_events.21.a

		ai_chance = {
			base = 1
		}

		every_other_country = {
			limit = {
				has_country_flag = ITA_refused_decolonization_flag
			}
			every_owned_state = {
				limit = {
					is_on_continent = africa
					NOT = { is_core_of = owner }
				}
				add_dynamic_modifier = { modifier = ITA_anti_colonialism_sentiment }
			}
		}

		hidden_effect = {
			if = {
				limit = {
					has_country_flag = ITA_someone_decolonized_flag
				}
				clr_country_flag = ITA_someone_decolonized_flag
			}
			#if = { #Don't clear this it's used to clear the dynamic modifier when appropriate
			#	limit = {
			#		any_other_country = {
			#			has_country_flag = ITA_refused_decolonization_flag
			#		}
			#	}
			#	clr_country_flag = ITA_refused_decolonization_flag
			#}
		}
	}

	#WAR
	option = {
		name = BBA_italy_anti_colonialism_events.21.b

		ai_chance = {
			base = 10
		}

		trigger = {
			any_other_country = {
				has_country_flag = ITA_refused_decolonization_flag
			}
		}

		every_other_country = {
			limit = {
				has_country_flag = ITA_refused_decolonization_flag
			}
			every_owned_state = {
				limit = {
					is_on_continent = africa
					NOT = { is_core_of = owner }
				}
				add_dynamic_modifier = { modifier = ITA_anti_colonialism_sentiment }
			}
			if = {
				limit = {
					country_can_be_reasonable_target_of_wargoal = yes
				}
				ROOT = {
					create_wargoal = {
						type = annex_everything
						target = PREV
					}
				}
			}
			#clr_country_flag = ITA_refused_decolonization_flag #Don't clear this it's used to clear the dynamic modifier when appropriate
		}

		hidden_effect = {
			if = {
				limit = {
					has_country_flag = ITA_someone_decolonized_flag
				}
				clr_country_flag = ITA_someone_decolonized_flag
			}
		}
	}
}



# Negotiations with Albania - Event for ALB
country_event = {
	id = BBA_italy_anti_colonialism_events.100
	title = BBA_italy_anti_colonialism_events.100.t
	desc = BBA_italy_anti_colonialism_events.100.desc
	picture = GFX_report_event_albanian_king_zog
	
	is_triggered_only = yes
	
	#Accept - Get annexed
	option = {
		name = BBA_italy_anti_colonialism_events.100.a
		ai_chance = {
			base = 40
			modifier = {
				factor = 0
				is_subject = yes
				NOT = { is_subject_of = FROM }
			}
			modifier = {
				factor = 0.8
				OR = {
					YUG = {
						NOT = { tag = FROM }
						OR = {
							has_guaranteed = ROOT
							is_in_faction_with = ROOT
						}
					}
					any_of_scopes = {
						array = global.majors
						NOT = { tag = FROM }
						OR = {
							has_guaranteed = ROOT
							is_in_faction_with = ROOT
						}
					}
				}
			}
			modifier = {
				factor = 0.6
				OR = {
					has_government = neutrality
					has_government = fascism
				}
			}
			modifier = {
				factor = 10
				is_in_faction_with = FROM
			}
			modifier = {
				factor = 100
				is_subject_of = FROM
			}
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.101 hours = 6 random_hours = 2 } }
		}

		effect_tooltip = {
			FROM = { annex_country = { target = ROOT transfer_troops = yes } }
		}
		custom_effect_tooltip = GAME_OVER_TT
	}

	#Middle ground - Puppet
	option = {
		name = BBA_italy_anti_colonialism_events.100.b
		ai_chance = {
			base = 0
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.102 hours = 6 random_hours = 2 } }
		}

		effect_tooltip = {
			FROM = { puppet = ROOT }
		}
	}

	# Refuse
	option = {
		name = BBA_italy_anti_colonialism_events.100.c
		ai_chance = {
			factor = 20 
			modifier = {
				factor = 0
				OR = {
					AND = {
						is_in_faction_with = FROM
						OR = {
							is_subject = no
							is_subject_of = FROM
						}
					}
					AND = {
						is_in_faction = no 
						NOT = {
							any_other_country = {
								NOT = { tag = FROM }
								has_guaranteed = ROOT
							} 
						}
					}
				}
			}
			modifier = {
				add = 100
				is_in_faction = yes
				NOT = { is_in_faction_with = FROM }
			}
			modifier = {
				add = 100
				is_subject = yes
				NOT = { is_subject_of = FROM }
			}
		}

		FROM = {
			effect_tooltip = {
				create_wargoal = {
					type = take_state_focus
					target = ROOT
					generator = { 44 856 857 }
				}
			}
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_anti_colonialism_events.103 hours = 6 random_hours = 2 } }
		}
	}
}

# Negotiations with Albania - ALB gets annexed - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.101
	title = BBA_italy_anti_colonialism_events.101.t
	desc = BBA_italy_anti_colonialism_events.101.desc
	picture = GFX_report_event_generic_peaceful_annexation

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.101.a

		annex_country = { target = FROM transfer_troops = yes }
	}
}

# Negotiations with Albania - ALB gets puppetted - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.102
	title = BBA_italy_anti_colonialism_events.102.t
	desc = BBA_italy_anti_colonialism_events.102.desc
	picture = GFX_report_event_generic_peaceful_annexation

	is_triggered_only = yes

	#Cool
	option = {
		name = BBA_italy_anti_colonialism_events.102.a

		puppet = FROM
	}
}

# Negotiations with Albania - ALB refused to get puppeted - Event for ITA
country_event = {
	id = BBA_italy_anti_colonialism_events.103
	title = BBA_italy_anti_colonialism_events.103.t
	desc = BBA_italy_anti_colonialism_events.103.desc
	picture = GFX_report_event_albanian_partisans

	is_triggered_only = yes

	#Nothing we respect their decision (pfff lies)
	option = {
		name = BBA_italy_anti_colonialism_events.103.a

		ai_chance = {
			base = 1
		}
	}

	#War goal
	option = {
		name = BBA_italy_anti_colonialism_events.103.a

		ai_chance = {
			base = 5
			modifier = {
				add = -4
				FROM = { is_ai = no }
			}
		}

		create_wargoal = {
			type = take_state_focus
			target = FROM
			generator = { 44 856 857 }
		}

		hidden_effect = {
			country_event = { days = 1 id = bba_news.108 }
		}
	}
}







#### ##    ## ######## ######## ########  ########    ###     ######  ######## ####  #######  ##    ##    ######## ##     ## ######## ##    ## ########  ######  
 ##  ###   ##    ##    ##       ##     ## ##         ## ##   ##    ##    ##     ##  ##     ## ###   ##    ##       ##     ## ##       ###   ##    ##    ##    ## 
 ##  ####  ##    ##    ##       ##     ## ##        ##   ##  ##          ##     ##  ##     ## ####  ##    ##       ##     ## ##       ####  ##    ##    ##       
 ##  ## ## ##    ##    ######   ########  ######   ##     ## ##          ##     ##  ##     ## ## ## ##    ######   ##     ## ######   ## ## ##    ##     ######  
 ##  ##  ####    ##    ##       ##   ##   ##       ######### ##          ##     ##  ##     ## ##  ####    ##        ##   ##  ##       ##  ####    ##          ## 
 ##  ##   ###    ##    ##       ##    ##  ##       ##     ## ##    ##    ##     ##  ##     ## ##   ###    ##         ## ##   ##       ##   ###    ##    ##    ## 
#### ##    ##    ##    ######## ##     ## ######## ##     ##  ######     ##    ####  #######  ##    ##    ########    ###    ######## ##    ##    ##     ######  



# [ITA.GetName] offers to bring us under their wings
country_event = {
	id = BBA_italy_interaction_events.41
	title = BBA_italy_interaction_events.41.t 
	desc = BBA_italy_interaction_events.41.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes
	fire_only_once = no

	# I don't see why not
	option = { 
		name = BBA_italy_interaction_events.41.a 

		ai_chance = {
			base = 70
			modifier = {
				factor = 0
				is_left_ideology = yes
			}
		}

		add_ai_strategy = {
			type = alliance
			id = FROM
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = FROM
			value = 100
		}

		FROM = {
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = ROOT
				value = 100
			}
		}

		FROM = {
			country_event = {
			    id = BBA_italy_interaction_events.42
			    days = 2
			    random = 6
			}
		}
	}

	# Shut up Romaboos! 
	option = { 
		name = BBA_italy_interaction_events.41.b

		ai_chance = {
			base = 30
			modifier = {
				factor = 20
				has_war = yes
			}
			modifier = {
				factor = 0.01
				has_capitulated = yes
			}
		}

		FROM = {
			country_event = {
			    id = BBA_italy_interaction_events.43
			    days = 2
			    random = 6
			}
		}
	}
}

# [FROM.GetName] accepts our offer
country_event = {
	id = BBA_italy_interaction_events.42
	title = BBA_italy_interaction_events.42.t 
	desc = BBA_italy_interaction_events.42.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes
	fire_only_once = no

	# Niceu
	option = { 
		name = BBA_italy_interaction_events.42.a
		puppet = {
			target = FROM
			end_wars = no
			end_civil_wars = no
		}
	}
}

# [FROM.GetName] rejects our offer
country_event = {
	id = BBA_italy_interaction_events.43
	title = BBA_italy_interaction_events.43.t 
	desc = BBA_italy_interaction_events.43.desc
	picture = GFX_report_event_fascist_speech 
	
	is_triggered_only = yes
	fire_only_once = no

	# They will regret this day!
	option = { 
		name = BBA_italy_interaction_events.43.a 

		create_wargoal = {
			type = puppet_wargoal_focus
			target = FROM
		}
	}
}


# [ITA.GetName] offers to bring us under their wings
country_event = {
	id = BBA_italy_interaction_events.44
	title = BBA_italy_interaction_events.44.t 
	desc = BBA_italy_interaction_events.44.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes
	fire_only_once = no

	# For the future of Latin America!
	option = { 
		name = BBA_italy_interaction_events.44.a 

		ai_chance = { 
			base = 80
		}

		add_ai_strategy = {
			type = alliance
			id = FROM
			value = 200
		}
		add_ai_strategy = {
			type = befriend
			id = FROM
			value = 100
		}

		FROM = {
			add_ai_strategy = {
				type = alliance
				id = ROOT
				value = 200
			}
			add_ai_strategy = {
				type = befriend
				id = ROOT
				value = 100
			}
		}

		FROM = {
			country_event = {
				id = BBA_italy_interaction_events.45
				days = 2
				random = 6
			}
		}
	}

	# Why should we speak to Europeans? 
	option = { 
		name = BBA_italy_interaction_events.44.b

		ai_chance = { 
			base = 20
		}

		FROM = {
			country_event = {
				id = BBA_italy_interaction_events.46
				days = 2
				random = 6
			}
		}
	}
}

# [FROM.GetName] accepts our offer (2)
country_event = {
	id = BBA_italy_interaction_events.45
	title = BBA_italy_interaction_events.45.t 
	desc = BBA_italy_interaction_events.45.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes
	fire_only_once = no

	# Niceu
	option = { 
		name = BBA_italy_interaction_events.45.a 

		ROOT = { add_to_faction = FROM }
	}
}

# [FROM.GetName] rejects our offer (2)
country_event = {
	id = BBA_italy_interaction_events.46
	title = BBA_italy_interaction_events.46.t 
	desc = BBA_italy_interaction_events.46.desc
	picture = GFX_report_event_fascist_speech 
	
	is_triggered_only = yes
	fire_only_once = no
 
	# We can do little to change their minds...
	option = { 
		name = BBA_italy_interaction_events.46.a 

		add_political_power = 25
	}
}


country_event = { #Italy is notified that a specific country might take longer to decide whether to be puppeted or not
	id = BBA_italy_interaction_events.70
	title = BBA_italy_interaction_events.70.t 
	desc = BBA_italy_interaction_events.70.desc
	picture = GFX_report_event_generic_parliament 
	
	is_triggered_only = yes
 
	option = { #we'll wait
		name = BBA_italy_interaction_events.70.a
	}
}

country_event = { #Exiled country receives offer to become Italian puppet
	id = BBA_italy_interaction_events.71
	title = BBA_italy_interaction_events.71.t 
	desc = BBA_italy_interaction_events.71.desc
	picture = GFX_report_event_generic_sign_treaty2 
	
	is_triggered_only = yes
 
	option = { #Accept to become a puppet to Italy
		name = BBA_italy_interaction_events.71.a
		FROM = {
			release_puppet_on_controlled = ROOT
		}
		ROOT = {
			hidden_effect = {
				set_popularities = {
					democratic = FROM.party_popularity_100@democratic
					neutrality = FROM.party_popularity_100@neutrality
					fascism = FROM.party_popularity_100@fascism
					communism = FROM.party_popularity_100@communism
					
					trozkism = FROM.party_popularity_100@trozkism
					monarchy = FROM.party_popularity_100@monarchy
					anarchism = FROM.party_popularity_100@anarchism
					technocracy = FROM.party_popularity_100@technocracy
				}
			}
			set_politics = {
				ruling_party = FROM
			}
		}
		custom_effect_tooltip = ITA_create_puppet_tt
		hidden_effect = {
			load_focus_tree = generic_focus
			add_to_temp_variable = { FROM.ITA_pp_from_releasing_colonies = 15 }
		}
	}

	option = { #Refuse - GAME OVER
		name = BBA_italy_interaction_events.71.b
		trigger = {
			is_ai = no
		} 
		custom_effect_tooltip = GAME_OVER_TT
		hidden_effect = {
			FROM = { #Annex the player so the game is over for them
				annex_country = {
					target = ROOT
					transfer_troops = no
				}
			}
			FROM = { #Hidden event to release the player's country as puppet
				country_event = { id = BBA_italy_interaction_events.73 hours = 1 }
			}
			add_to_temp_variable = { FROM.ITA_pp_from_releasing_colonies = 15 }
		}
	}
}

country_event = { #Italy releases country as puppets
	id = BBA_italy_interaction_events.73
	picture = GFX_report_event_fascist_speech 
	
	hidden = yes
	is_triggered_only = yes
 
	immediate = {
		ROOT = {
			release_puppet_on_controlled = FROM
		}
		FROM = {
			load_focus_tree = generic_focus
		}
	}
}



# Jerusalem or War - Event for Jerusalem controller (from Pope)
country_event = {
	id = BBA_italy_interaction_events.666
	title = BBA_italy_interaction_events.666.t 
	desc = BBA_italy_interaction_events.666.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes
 
	# Accept
	option = { 
		name = BBA_italy_interaction_events.666.a 

		ai_chance = { 
			base = 10
		}

		effect_tooltip = {
			FROM = {
				transfer_state = 978 #PALESTINE
				transfer_state = 980 #PALESTINE
				add_opinion_modifier = {
					target = ROOT
					modifier = ITA_complied_to_church_demands
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_interaction_events.667 hours = 6 random_hours = 2 } }
		}
	}
	# Reject
	option = { 
		name = BBA_italy_interaction_events.666.b

		trigger = {
			NOT = { is_subject_of = FROM }
		}

		ai_chance = { 
			base = 0
		}

		effect_tooltip = {
			FROM = {
				create_wargoal = {
					type = take_state
					target = ROOT
					generator = { 978 980 } 
				}
			}
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_interaction_events.668 hours = 6 random_hours = 2 } }
		}
	}
}


# Jerusalem or War - Country accepts - Event for ITA (Pope)
country_event = {
	id = BBA_italy_interaction_events.667
	title = BBA_italy_interaction_events.667.t 
	desc = BBA_italy_interaction_events.667.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes
 
	# Ok
	option = { 
		name = BBA_italy_interaction_events.667.a 

		transfer_state = 978 #PALESTINE
		transfer_state = 980 #PALESTINE
		add_opinion_modifier = {
			target = FROM
			modifier = ITA_complied_to_church_demands
		}
		978 = {
			set_state_category = town
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = bunker
				level = 2
				province = 4206
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				level = 2
				province = 1086
				instant_build = yes
			}
			if = {
				limit = {
					anti_air_building < 5
				}
				add_building_construction = {
					type = anti_air_building
					level = 1
					instant_build = yes
				}
			}
		}
		980 = {
			set_state_category = town
			add_extra_state_shared_building_slots = 2
			add_building_construction = {
				type = bunker
				level = 2
				province = 4206
				instant_build = yes
			}
			add_building_construction = {
				type = bunker
				level = 2
				province = 1086
				instant_build = yes
			}
			if = {
				limit = {
					anti_air_building < 5
				}
				add_building_construction = {
					type = anti_air_building
					level = 1
					instant_build = yes
				}
			}
		}
	}
}

# Jerusalem or War - Country Rejects - Event for ITA (Pope)
country_event = {
	id = BBA_italy_interaction_events.668
	title = BBA_italy_interaction_events.668.t 
	desc = BBA_italy_interaction_events.668.desc
	picture = GFX_report_event_fascist_speech
	
	is_triggered_only = yes
 
	# Accept
	option = { 
		name = BBA_italy_interaction_events.668.a 

		create_wargoal = {
			type = take_state
			target = FROM
			generator = { 978 980 } 
		}
	}
}



################################################
###ITALY ASKS ENGLAND/FRANCE FOR TECH SHARING###
################################################
country_event = {
	id = BBA_italy_research_agreement.1
	title = BBA_italy_research_agreement.1.t
	desc = BBA_italy_research_agreement.1.desc
	picture = GFX_report_event_generic_lend_lease 

	is_triggered_only = yes

	option = { #Accept
		name = BBA_italy_research_agreement.1.a

		ai_chance = {
			base = 10
			modifier = {
				add = 5
				is_historical_focus_on = yes
			}
			modifier = {
				add = 20
				is_in_faction_with = FROM
			}
			modifier = {
				add = 15
				has_government = FROM
			}
			modifier = {
				add = 10
				has_opinion = {
					target = FROM
					value > 24
				}
			}
			modifier = {
				add = 15
				has_opinion = {
					target = FROM
					value > 49
				}
			}
			modifier = {
				add = 15
				has_dino_grandi = yes
			}
			modifier = {
				factor = 0
				OR = {
					FROM = { is_justifying_wargoal_against = ROOT }
					ROOT = { is_justifying_wargoal_against = FROM }
					FROM = { has_wargoal_against = ROOT }
					ROOT = { has_wargoal_against = FROM }
				}
			}
		}
		
		if = {
			limit = { #For France
				original_tag = FRA 
			}
			ITA_franco_italian_cooperation_effect = yes
		}
		else = { #For England
			ITA_anglo_italian_cooperation_effect = yes
		}

		hidden_effect = {
			FROM = { news_event = { id = bba_news.104 hours = 8 random_hours = 4 }}
		}
	}

	option = { #Reject
		name = BBA_italy_research_agreement.1.b

		ai_chance = {
			base = 1
		}
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = { 
					target = ROOT
					modifier = ITA_military_cooperation_rejection
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_research_agreement.2 hours = 8 random_hours = 4 } } 
		}
	}
}

#ITALY RECEIVES THE REJECTION EVENT FROM ASKING UK/FRANCE TO TECH SHARE
country_event = { 
	id = BBA_italy_research_agreement.2
	title = BBA_italy_research_agreement.2.t
	desc = BBA_italy_research_agreement.2.desc
	picture = GFX_report_event_generic_read_write 

	is_triggered_only = yes

	option = { #Ouch
		name = BBA_italy_research_agreement.2.a
		add_opinion_modifier = { 
			target = FROM
			modifier = ITA_military_cooperation_rejection
		}
	}
}


#########################################################
###ITALY ASKS ENGLAND/FRANCE FOR A NON AGGRESSION PACT###
#########################################################
country_event = { 
	id = BBA_italy_pact.1
	title = BBA_italy_pact.1.t
	desc = BBA_italy_pact.1.desc
	picture = GFX_report_event_generic_panzer_attack 

	is_triggered_only = yes

	option = { #Accept
		name = BBA_italy_pact.1.a

		ai_chance = {
			base = 10
			modifier = {
				add = 5
				is_historical_focus_on = yes
			}
			modifier = {
				add = 15
				has_government = FROM
			}
			modifier = {
				add = 15
				has_opinion = {
					target = FROM
					value > 49
				}
			}
			modifier = {
				add = 25
				has_opinion = {
					target = FROM
					value > 74
				}
			}
			modifier = {
				add = 15
				has_dino_grandi = yes
			}
			modifier = {
				factor = 0
				OR = {
					FROM = { is_justifying_wargoal_against = ROOT }
					ROOT = { is_justifying_wargoal_against = FROM }
					FROM = { has_wargoal_against = ROOT }
					ROOT = { has_wargoal_against = FROM }
				}
			}
		}

		ITA_non_aggression_pact_effect = yes

		hidden_effect = {
			FROM = {news_event = { id = bba_news.105 hours = 12 random_hours = 6 }}
		}
	}

	option = { #Refuse
		name = BBA_italy_pact.1.b

		ai_chance = {
			base = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = { 
					target = ROOT
					modifier = ITA_military_cooperation_rejection
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_pact.2 hours = 8 random_hours = 4 } }
		}
	}
}

#ITALY RECEIVES THE REJECTION EVENT FROM ASKING UK/FRANCE FOR NON AGGRESSION PACT
country_event = {
	id = BBA_italy_pact.2
	title = BBA_italy_pact.2.t
	desc = BBA_italy_pact.2.desc
	picture = GFX_report_event_generic_rally_3 

	is_triggered_only = yes

	option = { #Ouch
		name = BBA_italy_pact.2.a
		add_opinion_modifier = { 
			target = FROM
			modifier = ITA_military_cooperation_rejection
		}
	}
}



#####################
###PURGE THE PARTY###
#####################
country_event = {
	id = BBA_italy_purge_the_party.1
	title = BBA_italy_purge_the_party.1.t
	desc = BBA_italy_purge_the_party.1.desc
	picture = GFX_report_event_generic_italian_fascists

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			ITA_characters_to_purge_effect = yes
		}
	}

	option = { #KILL ADVISORS
		name = BBA_italy_purge_the_party.1.a
		ai_chance = {
			base = 10
		}
		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = ITA_purge_advisor
			}
		}
		add_political_power = 50
		ITA_bop_very_low_increase_effect = yes

		hidden_effect = {
			ITA_purge_advisors_effect = yes
			ITA_clear_purge_flag_effect = yes
			if = {
				limit = {
					NOT = { has_country_flag = ITA_some_fascists_purged }
				}
				set_country_flag = ITA_some_fascists_purged 
			}			
			if= { 
				limit = {
					NOT = { has_country_flag = ITA_first_purge_happened_flag }
				}
				set_country_flag = ITA_first_purge_happened_flag
				country_event = { id = BBA_italy_purge_the_party.1 days = 7 random_days = 3 }
			}
			else = {
				country_event = { id = bba_news.100 hours = 12 random_hours = 8 }
			}
		}
	}

	option = { #KILL GENERALS
		name = BBA_italy_purge_the_party.1.b
		ai_chance = {
			base = 10
		}
		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = ITA_purge_general
			}
		}
		add_political_power = 50
		ITA_bop_very_low_increase_effect = yes

		hidden_effect = {
			ITA_purge_generals_effect = yes
			ITA_clear_purge_flag_effect = yes
			if = {
				limit = {
					NOT = { has_country_flag = ITA_no_fascists_purged }
				}
				set_country_flag = ITA_some_fascists_purged 
			}
			if= {
				limit = {
					NOT = { has_country_flag = ITA_first_purge_happened_flag }
				}
				set_country_flag = ITA_first_purge_happened_flag 
				country_event = { id = BBA_italy_purge_the_party.1 days = 7 random_days = 3 }
			}
			else = {
				country_event = { id = bba_news.100 hours = 12 random_hours = 8 }
			}
		}
	}		

	option = { #NO KILLING
		name = BBA_italy_purge_the_party.1.c
		ai_chance = {
			base = 10
		}
		custom_effect_tooltip = ITA_characters_will_be_spared_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = ITA_purge_advisor
			}
		}
		character_list_tooltip = {
			limit = {
				has_character_flag = ITA_purge_general
			}
		}

		ITA_bop_very_low_decrease_effect = yes

		hidden_effect = {
			ITA_dont_purge_effect = yes
			if = {
				limit = {
					NOT = { has_country_flag = ITA_no_fascists_purged }
				}
				set_country_flag = ITA_no_fascists_purged
			}
			if= {
				limit = {
					NOT = { has_country_flag = ITA_first_purge_happened_flag }
				}
				set_country_flag = ITA_first_purge_happened_flag 
				country_event = { id = BBA_italy_purge_the_party.1 days = 7 random_days = 3 }
			}
			else = {
				country_event = { id = bba_news.100 hours = 12 random_hours = 8 }
			}
		}
	}

	option = { #KILL ALL
		name = BBA_italy_purge_the_party.1.d
		ai_chance = {
			base = 10
		}
		custom_effect_tooltip = SOV_characters_will_be_purged_tt
		character_list_tooltip = {
			limit = {
				has_character_flag = ITA_purge_advisor
				
			}
		}
		character_list_tooltip = {
			limit = {
				has_character_flag = ITA_purge_general
			}
		}
		add_political_power = 75 
		ITA_bop_medium_increase_effect = yes

		hidden_effect = {
			ITA_purge_advisors_effect = yes
			ITA_purge_generals_effect = yes
			ITA_clear_purge_flag_effect = yes
			if = {
				limit = {
					NOT = { has_country_flag = ITA_many_fascists_purged }
				}
				set_country_flag = ITA_many_fascists_purged
			}
			if = { 
				limit = {
					NOT = { has_country_flag = ITA_first_purge_happened_flag }
				}
				set_country_flag = ITA_first_purge_happened_flag
				country_event = { id = BBA_italy_purge_the_party.1 days = 7 random_days = 3 }
			}
			else = {
				country_event = { id = bba_news.100 hours = 12 random_hours = 8 }
			}
		}
	}
}


###########################
###THE FATE OF MUSSOLINI###
###########################
country_event = {
	id = BBA_italy_decide_the_fate_of_mussolini.1
	title = BBA_italy_decide_the_fate_of_mussolini.1.t
	desc = BBA_italy_decide_the_fate_of_mussolini.1.desc
	picture = GFX_report_event_generic_mussolini

	is_triggered_only = yes

	option = { #Trial 
		name = BBA_italy_decide_the_fate_of_mussolini.1.a
		ai_chance = {
			base = 5
			modifier = {
				add = 35
				has_dino_grandi = yes
			}
		}
		custom_effect_tooltip = ITA_mussolini_stands_trial_tt
		country_event = { id = BBA_italy_decide_the_fate_of_mussolini.2 days = 10 }
	}

	option = { #Execution
		name = BBA_italy_decide_the_fate_of_mussolini.1.b
		ai_chance = {
			base = 10
		}
		add_political_power = 75
		add_stability = -0.05 
		add_popularity = {
		    ideology = fascism
		    popularity = -0.05
		}
		remove_ideas = ITA_shadow_of_mussolini

		ITA_bop_medium_increase_effect = yes

		hidden_effect = {
			retire_character = ITA_benito_mussolini
			news_event = { id = bba_news.101 hours = 12 random_hours = 6 } 
		}
	}

	option = { #Assassination
		name = BBA_italy_decide_the_fate_of_mussolini.1.c
		ai_chance = {
			base = 10
			modifier = {
				add = 20
				has_country_leader = {
					character = ITA_italo_balbo
					ruling_only = yes
				}
			}
		}	
		custom_effect_tooltip = ITA_mussolini_is_assassinated_tt
		country_event = { id = BBA_italy_decide_the_fate_of_mussolini.3 days = 5 } 
	}
}

#MUSSOLINI STANDS ON TRIAL
country_event = {
	id = BBA_italy_decide_the_fate_of_mussolini.2
	title = BBA_italy_decide_the_fate_of_mussolini.2.t
	desc = BBA_italy_decide_the_fate_of_mussolini.2.desc
	picture = GFX_report_event_generic_mussolini

	is_triggered_only = yes

	option = { #acquitted
		name = BBA_italy_decide_the_fate_of_mussolini.2.a
		ai_chance = {
			base = 1
		}
		remove_ideas = ITA_shadow_of_mussolini
		custom_effect_tooltip = ITA_mussolini_walks_free_tt
		hidden_effect = {
			set_country_flag = ITA_mussolini_is_innocent
			news_event = { id = bba_news.102 hours = 16 random_hours = 4 } 
		}
	}

	option = { #imprisonment
		name = BBA_italy_decide_the_fate_of_mussolini.2.b
		ai_chance = {
			base = 10
		}
		add_political_power = 50
		add_popularity = {
		    ideology = fascism
		    popularity = 0.05
		} 
		
		remove_ideas = ITA_shadow_of_mussolini

		ITA_bop_low_increase_effect = yes

		hidden_effect = {
			set_country_flag = ITA_mussolini_is_guilty
			news_event = { id = bba_news.102 hours = 16 random_hours = 4 }
		}
	}
}

#MUSSOLINI IS ASSASSINATED
country_event = {
	id = BBA_italy_decide_the_fate_of_mussolini.3
	title = BBA_italy_decide_the_fate_of_mussolini.3.t
	desc = BBA_italy_decide_the_fate_of_mussolini.3.desc
	picture = GFX_report_event_generic_mussolini

	is_triggered_only = yes

	option = { #Blame Communists
		name = BBA_italy_decide_the_fate_of_mussolini.3.a

		ai_chance = {
			base = 10
			modifier = {
				add = 10
				has_country_leader = {
					character = ITA_italo_balbo
					ruling_only = yes
				}
			}
		}

		add_war_support = 0.05
		add_popularity = {
		    ideology = communism
		    popularity = -0.05
		} 
		remove_ideas = ITA_shadow_of_mussolini
		hidden_effect = {
			set_country_flag = ITA_mussolini_blame_communists
			retire_character = ITA_benito_mussolini
			news_event = { id = bba_news.103 hours = 8 random_hours = 2 } 
		}
	}

	option = { #Cover Story
		name = BBA_italy_decide_the_fate_of_mussolini.3.b

		ai_chance = {
			base = 10
			modifier = {
				add = 10
				has_dino_grandi = yes
			}
		}

		add_political_power = 25

		ITA_bop_very_low_increase_effect = yes

		remove_ideas = ITA_shadow_of_mussolini
		hidden_effect = {
			set_country_flag = ITA_mussolini_cover_story
			retire_character = ITA_benito_mussolini
			news_event = { id = bba_news.103 hours = 8 random_hours  = 2 } 
		}
	}
}



###############################################
###ITALY ASKS FOR RECOGNITION FOR ITS EMPIRE###
###############################################
country_event = {
	id = BBA_italy_recognize_the_empire.1
	title = BBA_italy_recognize_the_empire.1.t
	desc = BBA_italy_recognize_the_empire.1.desc
	picture = GFX_report_event_ITA_grand_council 

	is_triggered_only = yes

	option = { #Recognize
		name = BBA_italy_recognize_the_empire.1.a

		ai_chance = {
			base = 10
			modifier = {
				add = 10
				is_historical_focus_on = yes
			}
			modifier = {
				add = 15
				has_government = FROM
			}
			modifier = {
				add = 10
				has_opinion = {
					target = FROM
					value > 49
				}
			}
			modifier = {
				add = 20
				has_opinion = {
					target = FROM
					value > 74
				}
			}
			modifier = {
				add = 20
				ROOT = { has_non_aggression_pact_with = FROM }
			}
			modifier = {
				add = 15
				has_dino_grandi = yes
			}
			modifier = {
				factor = 0
				OR = {
					FROM = { is_justifying_wargoal_against = ROOT }
					ROOT = { is_justifying_wargoal_against = FROM }
					FROM = { has_wargoal_against = ROOT }
					ROOT = { has_wargoal_against = FROM }
					FROM = { has_war_with = ROOT }
				}
			}
		}

		add_political_power = 15

		effect_tooltip = {
			FROM = {
				add_opinion_modifier = { 
					target = ROOT
					modifier = ITA_recognized_the_empire
				}
			}
			ITA_recognize_the_empire_effect = yes
		}


		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_recognize_the_empire.2 hours = 8 random_hours = 4 } }
		}
	}

	option = { #Dismiss
		name = BBA_italy_recognize_the_empire.1.b

		ai_chance = {
			base = 10
			modifier = {
				add = 15
				has_opinion = {
					target = FROM
					value < 1
				}
			}
			modifier = {
				add = 10
				has_government = communism
			}
		}
		
		effect_tooltip = {
			FROM = {
				add_opinion_modifier = { 
					target = ROOT
					modifier = ITA_dismissed_the_empire
				}
			}
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_recognize_the_empire.3 hours = 8 random_hours = 4 } }
		}
	}
}

#ITALY RECEIVES THE IMPERIAL RECOGNITION THEY SO CRAVE
country_event = {
	id = BBA_italy_recognize_the_empire.2
	title = BBA_italy_recognize_the_empire.2.t
	desc = BBA_italy_recognize_the_empire.2.desc
	picture = GFX_report_event_generic_italian_celebration

	is_triggered_only = yes

	option = { #Yay
		name = BBA_italy_recognize_the_empire.2.a

		add_opinion_modifier = { 
			target = FROM
			modifier = ITA_recognized_the_empire
		}
		add_political_power = 20
		ITA_recognize_the_empire_effect = yes
	}
}

#ITALY RECEIVES THE IMPERIAL REJECTION THEY SO FEAR
country_event = {
	id = BBA_italy_recognize_the_empire.3
	title = BBA_italy_recognize_the_empire.3.t
	desc = BBA_italy_recognize_the_empire.3.desc
	picture = GFX_report_event_generic_rally2 

	is_triggered_only = yes

	option = { #Ouch
		name = BBA_italy_recognize_the_empire.3.a

		add_opinion_modifier = { 
			target = FROM
			modifier = ITA_dismissed_the_empire
		}
	}
}



####################################
### THE COUNCIL DEPOSES THE DUCE ###
####################################
country_event = {
	id = BBA_italy_council_deposes_duce.1
	title = BBA_italy_council_deposes_duce.1.t
	desc = BBA_italy_council_deposes_duce.1.desc
	picture = GFX_report_event_generic_italian_fascists

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = {
						has_country_flag = ITA_deposed_leader_flag
					}
				}
				set_country_flag = ITA_deposed_leader_flag
				random_character = {
					limit = {
						is_country_leader = yes
					}
					set_variable = { ITA.ITA_var_deposed_leader = THIS } #For loc purposes
				}
			}
		}
	}

	option = {
		name = BBA_italy_council_deposes_duce.1.a
		if = { #MONARCHIST
			limit = {
				has_completed_focus = ITA_monarchia_d_italia
			}
			ITA_grand_council = {
				set_character_name = ITA_grand_council_alt

				if = {
					limit = {
						NOT = { has_ideology_group = neutrality }
					}
					add_country_leader_role = {
						promote_leader = yes
						country_leader = {
							ideology = oligarchism
							expire = 1965.1.1.1
							traits = { the_grand_council } 
						}
					}
				}
				else = {
					promote_character = yes
				}
			}
		}
		else = { #FASCIST
			ITA_grand_council = {
				promote_character = yes
			}
		}
		hidden_effect = {
			every_country = {
				news_event = { id = bba_news.109 hours = 2 }
			}
		}
	}
}

#######################################################
###FASCIST COUNTRY RECEIVES ITALIAN MILITARY SUPPORT###
#######################################################
country_event = {
	id = BBA_italy_sends_military_support.1
	title = BBA_italy_sends_military_support.1.t
	desc = BBA_italy_sends_military_support.1.desc
	picture = GFX_report_event_generic_truck 

	is_triggered_only = yes

	option = { #Yay
		name = BBA_italy_sends_military_support.1.a

		ROOT = {
			add_equipment_to_stockpile = {
				type = infantry_equipment
				amount = 2500
				producer = FROM
			}
			add_equipment_to_stockpile = {
				type = support_equipment
				amount = 250
				producer = FROM
			}
			add_opinion_modifier = {
				target = FROM
				modifier = SOV_sent_us_weapons
			}
		}
	}
}





##        #######   ######     ###    ##          ########  ##     ## ##       ######## ########   ######  
##       ##     ## ##    ##   ## ##   ##          ##     ## ##     ## ##       ##       ##     ## ##    ## 
##       ##     ## ##        ##   ##  ##          ##     ## ##     ## ##       ##       ##     ## ##       
##       ##     ## ##       ##     ## ##          ########  ##     ## ##       ######   ########   ######  
##       ##     ## ##       ######### ##          ##   ##   ##     ## ##       ##       ##   ##         ## 
##       ##     ## ##    ## ##     ## ##          ##    ##  ##     ## ##       ##       ##    ##  ##    ## 
########  #######   ######  ##     ## ########    ##     ##  #######  ######## ######## ##     ##  ######  


# Local Rulers Approach Italian Officials - Haile Selassie Gugsa (Addis Ababa) - event for ITA
unit_leader_event = {
	id = BBA_italy_local_rulers.1
	title = BBA_italy_local_rulers.1.t
	desc = BBA_italy_local_rulers.1.desc
	picture = GFX_report_event_mussolini_hotel
	
	is_triggered_only = yes

	# Concessions
	option = { 
		name = BBA_italy_local_rulers.1.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 10
				OR = {
					271 = { compliance < 50 }
					1084 = { compliance < 50 }
				}
			}
		}
		
		add_political_power = -15
		if = {
			limit = {
				271 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			271 = {
				add_compliance = 10
				add_resistance = 5
			}
		}
		if = {
			limit = {
				1084 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			1084 = {
				add_compliance = 10
				add_resistance = 5
			}
		}

		#Ruler joins Italy as General
		if = {
			limit = {
				country_exists = ETH
			}
			hidden_effect = {
				FROM = { retire_character = ITA_haile_selassie_gugsa_doppleganger }
			}
			ETH = {
				ETH_haile_selassie_gugsa = {
					demote_leader = yes
					if = {
						limit = {
							is_advisor = yes
						}
						remove_any_country_role_from_character = yes
					}
					set_nationality = ITA
				}
			}
		}
		else = {
			show_unit_leaders_tooltip = ITA_haile_selassie_gugsa_doppleganger
			hidden_effect = {
				FROM = { retire_character = ITA_haile_selassie_gugsa_doppleganger }
				for_each_scope_loop = {
					array = global.countries
					if = {
						limit = {
							original_tag = ETH
							has_character = ETH_haile_selassie_gugsa
						}
						ETH_haile_selassie_gugsa = {
							demote_leader = yes
							if = {
								limit = {
									is_advisor = yes
								}
								remove_any_country_role_from_character = yes
							}
							set_nationality = ITA
						}
					}
				}
			}
		}

		#Send next event
		hidden_effect = {
			if = {
				limit = {
					OR = {
						1138 = {
							is_fully_controlled_by = ITA
						}
						1083 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_abba_jofir_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.2 days = 30 random_days = 10 } }
			}
			else_if = {
				limit = {
					OR = {
						840 = {
							is_fully_controlled_by = ITA
						}
						841 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_hailu_tekle_haymanot_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.3 days = 30 random_days = 10 } }
			}
			else_if = {
				limit = {
					OR = {
						842 = {
							is_fully_controlled_by = ITA
						}
						843 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_seyoum_mengesha_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.4 days = 30 random_days = 10 } }
			}
			else = {
				custom_effect_tooltip = ITA_ends_event_chain_tt
			}
		}
	}

	# Puppet
	option = { 
		name = BBA_italy_local_rulers.1.b
		ai_chance = {
			base = 0
		}

		#Send next event
		hidden_effect = {
			if = {
				limit = {
					OR = {
						1138 = {
							is_fully_controlled_by = ITA
						}
						1083 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_abba_jofir_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.2 days = 30 random_days = 10 } }
			}
			else_if = {
				limit = {
					OR = {
						840 = {
							is_fully_controlled_by = ITA
						}
						841 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_hailu_tekle_haymanot_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.3 days = 30 random_days = 10 } }
			}
			else_if = {
				limit = {
					OR = {
						842 = {
							is_fully_controlled_by = ITA
						}
						843 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_seyoum_mengesha_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.4 days = 30 random_days = 10 } }
			}
			else = {
				custom_effect_tooltip = ITA_ends_event_chain_tt
			}
		}
	}

	# Nej tack
	option = { 
		name = BBA_italy_local_rulers.1.c
		ai_chance = {
			base = 10
		}
		
		if = {
			limit = {
				271 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			271 = {
				add_resistance = -5
			}
		}
		if = {
			limit = {
				1084 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			1084 = {
				add_resistance = -5
			}
		}

		#Send next event
		hidden_effect = {
			if = {
				limit = {
					OR = {
						1138 = {
							is_fully_controlled_by = ITA
						}
						1083 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_abba_jofir_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.2 days = 30 random_days = 10 } }
			}
			else_if = {
				limit = {
					OR = {
						840 = {
							is_fully_controlled_by = ITA
						}
						841 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_hailu_tekle_haymanot_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.3 days = 30 random_days = 10 } }
			}
			else_if = {
				limit = {
					OR = {
						842 = {
							is_fully_controlled_by = ITA
						}
						843 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_seyoum_mengesha_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.4 days = 30 random_days = 10 } }
			}
			else = {
				custom_effect_tooltip = ITA_ends_event_chain_tt
			}
		}
	}

	# NO TO ALL
	option = { 
		name = BBA_italy_local_rulers.1.d
		ai_chance = {
			base = 0
		}
		
		every_controlled_state = { #Reduce resistance in all future states affected by the event chain (Somali cores in ETH are excluded)
			limit = {
				is_core_of = ETH
				is_fully_controlled_by = ITA
				NOT = { state = 1051 } #HARARGHE
				NOT = { state = 1085 } #BALE
			}
			add_resistance = -5
		}

		custom_effect_tooltip = ITA_ends_event_chain_tt
	}
}

# Local Rulers Approach Italian Officials - Abba Jofir (Illubabor-Kaffa) - event for ITA
unit_leader_event = {
	id = BBA_italy_local_rulers.2
	title = BBA_italy_local_rulers.2.t
	desc = BBA_italy_local_rulers.2.desc
	picture = GFX_report_event_mussolini_hotel
	
	is_triggered_only = yes

	# Concessions
	option = { 
		name = BBA_italy_local_rulers.2.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 10
				OR = {
					1138 = { compliance < 50 }
					1083 = { compliance < 50 }
				}
			}
		}
		
		add_political_power = -15
		if = {
			limit = {
				1138 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			1138 = {
				add_compliance = 10
				add_resistance = 5
			}
		}
		if = {
			limit = {
				1083 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			1083 = {
				add_compliance = 10
				add_resistance = 5
			}
		}

		#Ruler joins Italy as General
		if = {
			limit = {
				country_exists = ETH
			}
			hidden_effect = {
				FROM = { retire_character = ITA_abba_jofir_doppleganger }
			}
			ETH = {
				ETH_abba_jofir = {
					demote_leader = yes
					if = {
						limit = {
							is_advisor = yes
						}
						remove_any_country_role_from_character = yes
					}
					set_nationality = ITA
				}
			}
		}
		else = {
			show_unit_leaders_tooltip = ITA_abba_jofir_doppleganger

			hidden_effect = {
				FROM = { retire_character = ITA_abba_jofir_doppleganger }
				for_each_scope_loop = {
					array = global.countries

					if = {
						limit = {
							original_tag = ETH
							has_character = ETH_abba_jofir
						}
						ETH_abba_jofir = {
							demote_leader = yes
							if = {
								limit = {
									is_advisor = yes
								}
								remove_any_country_role_from_character = yes
							}
							set_nationality = ITA
						}
					}
				}
			}
		}

		#Send next event
		hidden_effect = {
			if = {
				limit = {
					OR = {
						840 = {
							is_fully_controlled_by = ITA
						}
						841 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_hailu_tekle_haymanot_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.3 days = 30 random_days = 10 } }
			}
			else_if = {
				limit = {
					OR = {
						842 = {
							is_fully_controlled_by = ITA
						}
						843 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_seyoum_mengesha_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.4 days = 30 random_days = 10 } }
			}
			else = {
				custom_effect_tooltip = ITA_ends_event_chain_tt
			}
		}
	}

	# Puppet
	option = { 
		name = BBA_italy_local_rulers.2.b
		ai_chance = {
			base = 0
		}

		#Send next event
		hidden_effect = {
			if = {
				limit = {
					OR = {
						840 = {
							is_fully_controlled_by = ITA
						}
						841 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_hailu_tekle_haymanot_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.3 days = 30 random_days = 10 } }
			}
			else_if = {
				limit = {
					OR = {
						842 = {
							is_fully_controlled_by = ITA
						}
						843 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_seyoum_mengesha_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.4 days = 30 random_days = 10 } }
			}
			else = {
				custom_effect_tooltip = ITA_ends_event_chain_tt
			}
		}
	}

	# Nej tack
	option = { 
		name = BBA_italy_local_rulers.2.c
		ai_chance = {
			base = 10
		}
		
		if = {
			limit = {
				1138 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			1138 = {
				add_resistance = -5
			}
		}
		if = {
			limit = {
				1083 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			1083 = {
				add_resistance = -5
			}
		}

		#Send next event
		hidden_effect = {
			if = {
				limit = {
					OR = {
						840 = {
							is_fully_controlled_by = ITA
						}
						841 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_hailu_tekle_haymanot_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.3 days = 30 random_days = 10 } }
			}
			else_if = {
				limit = {
					OR = {
						842 = {
							is_fully_controlled_by = ITA
						}
						843 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_seyoum_mengesha_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.4 days = 30 random_days = 10 } }
			}
			else = {
				custom_effect_tooltip = ITA_ends_event_chain_tt
			}
		}
	}

	# NO TO ALL
	option = { 
		name = BBA_italy_local_rulers.2.d
		ai_chance = {
			base = 0
		}
		
		every_controlled_state = { #Reduce resistance in all future states affected by the event chain (Somali cores in ETH are excluded)
			limit = {
				is_core_of = ETH
				is_fully_controlled_by = ITA
				NOT = { state = 1051 } #HARARGHE
				NOT = { state = 1085 } #BALE
				NOT = { state = 271 } #SHEWA (already handled in previous event)
				NOT = { state = 1084 } #SIDAMO (already handled in previous event)
			}
			add_resistance = -5
		}

		custom_effect_tooltip = ITA_ends_event_chain_tt
	}
}

# Local Rulers Approach Italian Officials - Hailu Tekle Haymanot (Gojjam) - event for ITA
unit_leader_event = {
	id = BBA_italy_local_rulers.3
	title = BBA_italy_local_rulers.3.t
	desc = BBA_italy_local_rulers.3.desc
	picture = GFX_report_event_mussolini_hotel
	
	is_triggered_only = yes

	# Concessions
	option = { 
		name = BBA_italy_local_rulers.3.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 10
				OR = {
					840 = { compliance < 50 }
					841 = { compliance < 50 }
				}
			}
		}
		
		add_political_power = -15
		if = {
			limit = {
				840 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			840 = {
				add_compliance = 10
				add_resistance = 5
			}
		}
		if = {
			limit = {
				841 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			841 = {
				add_compliance = 10
				add_resistance = 5
			}
		}

		#Ruler joins Italy as General
		if = {
			limit = {
				country_exists = ETH
			}
			hidden_effect = {
				FROM = { retire_character = ITA_hailu_tekle_haymanot_doppleganger }
			}
			ETH = {
				ETH_hailu_tekle_haymanot = {
					demote_leader = yes
					if = {
						limit = {
							is_advisor = yes
						}
						remove_any_country_role_from_character = yes
					}
					set_nationality = ITA
				}
			}
		}
		else = {
			show_unit_leaders_tooltip = ITA_hailu_tekle_haymanot_doppleganger
			hidden_effect = {
				FROM = { retire_character = ITA_hailu_tekle_haymanot_doppleganger }
				for_each_scope_loop = {
					array = global.countries

					if = {
						limit = {
							original_tag = ETH
							has_character = ETH_hailu_tekle_haymanot
						}
						ETH_hailu_tekle_haymanot = {
							demote_leader = yes
							if = {
								limit = {
									is_advisor = yes
								}
								remove_any_country_role_from_character = yes
							}
							set_nationality = ITA
						}
					}
				}
			}
		}

		#Send next event
		hidden_effect = {
			if = {
				limit = {
					OR = {
						842 = {
							is_fully_controlled_by = ITA
						}
						843 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_seyoum_mengesha_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.4 days = 30 random_days = 10 } }
			}
			else = {
				custom_effect_tooltip = ITA_ends_event_chain_tt
			}
		}
	}

	# Puppet
	option = { 
		name = BBA_italy_local_rulers.3.b
		ai_chance = {
			base = 0
		}

		#Send next event
		hidden_effect = {
			if = {
				limit = {
					OR = {
						842 = {
							is_fully_controlled_by = ITA
						}
						843 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_seyoum_mengesha_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.4 days = 30 random_days = 10 } }
			}
			else = {
				custom_effect_tooltip = ITA_ends_event_chain_tt
			}
		}
	}

	# Nej tack
	option = { 
		name = BBA_italy_local_rulers.3.c
		ai_chance = {
			base = 10
		}
		
		if = {
			limit = {
				840 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			840 = {
				add_resistance = -5
			}
		}
		if = {
			limit = {
				841 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			841 = {
				add_resistance = -5
			}
		}

		#Send next event
		hidden_effect = {
			if = {
				limit = {
					OR = {
						842 = {
							is_fully_controlled_by = ITA
						}
						843 = {
							is_fully_controlled_by = ITA
						}
					}
				}
				ITA_seyoum_mengesha_doppleganger = { unit_leader_event = { id = BBA_italy_local_rulers.4 days = 30 random_days = 10 } }
			}
			else = {
				custom_effect_tooltip = ITA_ends_event_chain_tt
			}
		}
	}

	# NO TO ALL
	option = { 
		name = BBA_italy_local_rulers.3.d
		ai_chance = {
			base = 0
		}
		
		every_controlled_state = { #Reduce resistance in all future states affected by the event chain (Somali cores in ETH are excluded)
			limit = {
				is_core_of = ETH
				is_fully_controlled_by = ITA
				NOT = { state = 1051 } #HARARGHE
				NOT = { state = 1085 } #BALE
				NOT = { state = 271 } #SHEWA (already handled in previous event)
				NOT = { state = 1084 } #SIDAMO (already handled in previous event)
				NOT = { state = 1138 } #ILLUBABOR-KAFFA (already handled in previous event)
				NOT = { state = 1083 } #WELEGA (already handled in previous event)
			}
			add_resistance = -5
		}

		custom_effect_tooltip = ITA_ends_event_chain_tt
	}
}

# Local Rulers Approach Italian Officials - Seyoum Mengesha (Tigray) - event for ITA
unit_leader_event = {
	id = BBA_italy_local_rulers.4
	title = BBA_italy_local_rulers.4.t
	desc = BBA_italy_local_rulers.4.desc
	picture = GFX_report_event_mussolini_hotel
	
	is_triggered_only = yes

	# Concessions
	option = { 
		name = BBA_italy_local_rulers.4.a
		ai_chance = {
			base = 10
			modifier = {
				factor = 10
				OR = {
					842 = { compliance < 50 }
					843 = { compliance < 50 }
				}
			}
		}
		
		add_political_power = -15
		if = {
			limit = {
				842 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			842 = {
				add_compliance = 10
				add_resistance = 5
			}
		}
		if = {
			limit = {
				843 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			843 = {
				add_compliance = 10
				add_resistance = 5
			}
		}

		#Ruler joins Italy as General
		if = {
			limit = {
				country_exists = ETH
			}
			log = "ETH exists"
			hidden_effect = {
				FROM = { retire_character = ITA_seyoum_mengesha_doppleganger }
			}
			ETH = {
				ETH_seyoum_mengesha = {
					if = {
						limit = {
							is_advisor = yes
						}
						remove_any_country_role_from_character = yes
					}
					set_nationality = ITA
				}
			}
		}
		else = {
			log = "ETH is gone"
			show_unit_leaders_tooltip = ITA_seyoum_mengesha_doppleganger
			hidden_effect = {
				FROM = { retire_character = ITA_seyoum_mengesha_doppleganger }
				for_each_scope_loop = {
					array = global.countries

					if = {
						limit = {
							original_tag = ETH
							has_character = ETH_seyoum_mengesha
						}
						ETH_seyoum_mengesha = {
							if = {
								limit = {
									is_advisor = yes
								}
								remove_any_country_role_from_character = yes
							}
							set_nationality = ITA
						}
					}
				}
			}
		}

		custom_effect_tooltip = ITA_ends_event_chain_tt
	}

	# Puppet
	option = { 
		name = BBA_italy_local_rulers.4.b
		ai_chance = {
			base = 0
		}

		if = {
			limit = {
				842 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			TIG = {
				transfer_state = 842 #TIGRAY
			}
		}
		if = {
			limit = {
				843 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			TIG = {
				transfer_state = 843 #WELLO
			}
			843 = { add_core_of = TIG }
		}
		if = {
			limit = {
				1079 = {
					is_fully_controlled_by = ITA
					is_owned_by = ITA
					has_resistance = yes
				}
			}
			TIG = {
				transfer_state = 1079 #AFAR
			}
			1079 = { add_core_of = TIG }
		}
		puppet = TIG
		if = {
			limit = {
				country_exists = ETH
			}
			ETH = {
				ETH_seyoum_mengesha = {
					add_country_leader_role = {
						country_leader = {
							ideology = fascism_ideology 
							expire = "1965.1.1.1"
							traits = { eager_collaborator }
							id = -1
						}
					}
					add_country_leader_role = { #Add non-aligned role in case Italy changes to monarchy
						country_leader = {
							ideology = despotism 
							expire = "1965.1.1.1"
							traits = { eager_collaborator }
							id = -1
						}
					}
					if = {
						limit = {
							is_advisor = yes
						}
						remove_any_country_role_from_character = yes
					}
					set_nationality = TIG
				}
			}
		}
		else = {
			for_each_scope_loop = {
				array = global.countries

				if = {
					limit = {
						original_tag = ETH
						has_character = ETH_seyoum_mengesha
					}
					ETH_seyoum_mengesha = {
						add_country_leader_role = {
							country_leader = {
								ideology = fascism_ideology 
								expire = "1965.1.1.1"
								traits = { eager_collaborator }
								id = -1
							}
						}
						add_country_leader_role = { #Add non-aligned role in case Italy changes to monarchy
							country_leader = {
								ideology = despotism 
								expire = "1965.1.1.1"
								traits = { eager_collaborator }
								id = -1
							}
						}
						if = {
							limit = {
								is_advisor = yes
							}
							remove_any_country_role_from_character = yes
						}
						set_nationality = TIG
					}
				}
			}
			TIG = {
				promote_character = { character = ETH_seyoum_mengesha ideology = despotism }
				promote_character = { character = ETH_seyoum_mengesha ideology = fascism_ideology }
			}
		}

		custom_effect_tooltip = ITA_ends_event_chain_tt
	}

	# Nej tack
	option = { 
		name = BBA_italy_local_rulers.4.c
		ai_chance = {
			base = 10
		}
		
		if = {
			limit = {
				842 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			842 = {
				add_resistance = -5
			}
		}
		if = {
			limit = {
				843 = {
					is_fully_controlled_by = ITA
					has_resistance = yes
				}
			}
			843 = {
				add_resistance = -5
			}
		}

		custom_effect_tooltip = ITA_ends_event_chain_tt
	}
}


country_event = {
	id = BBA_italy_human_torpedo_raid.1
	title = BBA_italy_human_torpedo_raid.1.t
	desc = BBA_italy_human_torpedo_raid.1.desc
	picture = GFX_report_event_ast_navy
	
	is_triggered_only = yes

	
	option = { 
		name = BBA_italy_human_torpedo_raid.1.a 

		custom_effect_tooltip = ITA_human_torpedo_raid_tt
		
		custom_effect_tooltip = ITA_human_torpedo_target_effect_tt
	}
}




	 ######   #######   #######  ########  ######## ########     ###    ######## ####  #######  ##    ##    ########  ########   #######   ######   ########     ###    ##     ##  ######  
	##    ## ##     ## ##     ## ##     ## ##       ##     ##   ## ##      ##     ##  ##     ## ###   ##    ##     ## ##     ## ##     ## ##    ##  ##     ##   ## ##   ###   ### ##    ## 
	##       ##     ## ##     ## ##     ## ##       ##     ##  ##   ##     ##     ##  ##     ## ####  ##    ##     ## ##     ## ##     ## ##        ##     ##  ##   ##  #### #### ##       
	##       ##     ## ##     ## ########  ######   ########  ##     ##    ##     ##  ##     ## ## ## ##    ########  ########  ##     ## ##   #### ########  ##     ## ## ### ##  ######  
	##       ##     ## ##     ## ##        ##       ##   ##   #########    ##     ##  ##     ## ##  ####    ##        ##   ##   ##     ## ##    ##  ##   ##   ######### ##     ##       ## 
	##    ## ##     ## ##     ## ##        ##       ##    ##  ##     ##    ##     ##  ##     ## ##   ###    ##        ##    ##  ##     ## ##    ##  ##    ##  ##     ## ##     ## ##    ## 
	 ######   #######   #######  ##        ######## ##     ## ##     ##    ##    ####  #######  ##    ##    ##        ##     ##  #######   ######   ##     ## ##     ## ##     ##  ######  


# Offer to join the Naval Cooperation Program - Event for allies
country_event = {
	id = BBA_italy_naval_cooperation_programs.01
	title = BBA_italy_naval_cooperation_programs.01.t
	desc = BBA_italy_naval_cooperation_programs.01.desc
	picture = GFX_report_event_ast_navy
	
	is_triggered_only = yes

	# Accept
	option = { 
		name = BBA_italy_naval_cooperation_programs.01.a
		ai_chance = {
			base = 10
		}

		add_to_tech_sharing_group = ITA_naval_cooperation_program_research_group
		FROM = { add_to_tech_sharing_group = ITA_naval_cooperation_program_research_group }
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.02 hours = 1 } }
		}
	}

	# Refuse
	option = {
		name = BBA_italy_naval_cooperation_programs.01.b
		ai_chance = {
			base = 0 #AI always says 'yes'
		}

		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = BUL_rejected_our_proposal
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.03 hours = 1 } }
		}
	}
}

# Country joins the Naval Cooperation Program - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.02
	title = BBA_italy_naval_cooperation_programs.02.t
	desc = BBA_italy_naval_cooperation_programs.02.desc
	picture = GFX_report_event_ast_navy
	
	is_triggered_only = yes

	# Coolio
	option = { 
		name = BBA_italy_naval_cooperation_programs.02.a

		effect_tooltip = {
			add_to_tech_sharing_group = ITA_naval_cooperation_program_research_group
			FROM = { add_to_tech_sharing_group = ITA_naval_cooperation_program_research_group }
		}
	}
}

# Country refuses to join the Naval Cooperation Program - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.03
	title = BBA_italy_naval_cooperation_programs.03.t
	desc = BBA_italy_naval_cooperation_programs.03.desc
	picture = GFX_report_event_ast_navy
	
	is_triggered_only = yes

	# wtf
	option = { 
		name = BBA_italy_naval_cooperation_programs.03.a

		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = BUL_rejected_our_proposal
			}
		}
	}
}

# Offer to perform joint maneuvers - Event for allies
country_event = {
	id = BBA_italy_naval_cooperation_programs.04
	title = BBA_italy_naval_cooperation_programs.04.t
	desc = BBA_italy_naval_cooperation_programs.04.desc
	picture = GFX_report_event_usa_destroyers
	
	is_triggered_only = yes

	# Accept
	option = { 
		name = BBA_italy_naval_cooperation_programs.04.a
		ai_chance = {
			base = 10
		}

		effect_tooltip = {
			custom_effect_tooltip = ITA_joint_maneuvers_with_country_remove_effect_tt
			navy_experience = 50
			add_doctrine_cost_reduction = {
				name = ITA_joint_maneuvers_with_country_doctrine_bonus
				cost_reduction = 0.75
				uses = 1
				category = naval_doctrine
			}
			FROM = {
				navy_experience = 50
				add_doctrine_cost_reduction = {
					name = ITA_joint_maneuvers_with_country_doctrine_bonus
					cost_reduction = 0.75
					uses = 1
					category = naval_doctrine
				}
			}
		}
		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.05 hours = 1 } }
		}
	}

	# Refuse
	option = {
		name = BBA_italy_naval_cooperation_programs.04.b
		ai_chance = {
			base = 0 #AI always says 'yes'
		}

		FROM = {
			add_opinion_modifier = {
				target = ROOT
				modifier = BUL_rejected_our_proposal
			}
		}
		hidden_effect = {
			set_country_flag = ITA_joint_maneuvers_rejected_flag #Preventing the decision to be taken again by Italy
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.06 hours = 1 } }
		}
	}
}

# Country accepts joint maneuvers - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.05
	title = BBA_italy_naval_cooperation_programs.05.t
	desc = BBA_italy_naval_cooperation_programs.05.desc
	picture = GFX_report_event_usa_destroyers
	
	is_triggered_only = yes

	# Coolio
	option = { 
		name = BBA_italy_naval_cooperation_programs.05.a

		effect_tooltip = {
			custom_effect_tooltip = ITA_joint_maneuvers_with_country_remove_effect_tt
			navy_experience = 50
			add_doctrine_cost_reduction = {
				name = ITA_joint_maneuvers_with_country_doctrine_bonus
				cost_reduction = 0.75
				uses = 1
				category = naval_doctrine
			}
			FROM = {
				navy_experience = 50
				add_doctrine_cost_reduction = {
					name = ITA_joint_maneuvers_with_country_doctrine_bonus
					cost_reduction = 0.75
					uses = 1
					category = naval_doctrine
				}
			}
		}
	}
}

# Country rejects joint maneuvers - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.06
	title = BBA_italy_naval_cooperation_programs.06.t
	desc = BBA_italy_naval_cooperation_programs.06.desc
	picture = GFX_report_event_usa_destroyers
	
	is_triggered_only = yes

	# wtf
	option = { 
		name = BBA_italy_naval_cooperation_programs.06.a

		effect_tooltip = {
			add_opinion_modifier = {
				target = FROM
				modifier = BUL_rejected_our_proposal
			}
		}
	}
}

# Joint Maneuvers Prgoram finished - Event for ITA and ally
country_event = {
	id = BBA_italy_naval_cooperation_programs.07
	title = BBA_italy_naval_cooperation_programs.07.t
	desc = BBA_italy_naval_cooperation_programs.07.desc
	picture = GFX_report_event_usa_destroyers
	
	is_triggered_only = yes

	# Awesome
	option = { 
		name = BBA_italy_naval_cooperation_programs.07.a

		navy_experience = 50
		add_doctrine_cost_reduction = {
			name = ITA_joint_maneuvers_with_country_doctrine_bonus
			cost_reduction = 0.75
			uses = 1
			category = naval_doctrine
		}
		effect_tooltip = {
			FROM = {
				navy_experience = 50
				add_doctrine_cost_reduction = {
					name = ITA_joint_maneuvers_with_country_doctrine_bonus
					cost_reduction = 0.75
					uses = 1
					category = naval_doctrine
				}
			}
		}
	}
}

# Offer to sell Italian Escort Ships - Event for SWE / other minors
country_event = {
	id = BBA_italy_naval_cooperation_programs.08
	title = BBA_italy_naval_cooperation_programs.08.t
	desc = BBA_italy_naval_cooperation_programs.08.desc
	picture = GFX_report_event_sailors_in_working_rig
	
	is_triggered_only = yes

	# Accept
	option = { 
		name = BBA_italy_naval_cooperation_programs.08.a
		ai_chance = {
			base = 10
		}

		effect_tooltip = {
			custom_effect_tooltip = ITA_cooperation_programs_deal_others_tt
			FROM = {
				add_timed_idea = {
					idea = ITA_sold_obsolete_escort_ships_ns
					days = 365
				}
			}
		}

		hidden_effect = {
			FROM = {
				set_country_flag = ITA_sold_obsolete_escort_ships_flag #Cannot sell ships again
				country_event = { id = BBA_italy_naval_cooperation_programs.09 hours = 1 }
			}
		}
	}

	# Refuse
	option = {
		name = BBA_italy_naval_cooperation_programs.08.b
		ai_chance = {
			base = 0 #AI always says 'yes'
		}

		hidden_effect = {
			if = {
				limit = {
					original_tag = SWE
				}
				FROM = { set_country_flag = ITA_sweden_refused_to_buy_ships_flag }
			}
			set_country_flag = ITA_obsolete_escort_ships_rejected_flag #Preventing the decision to be taken again by Italy
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.10 hours = 1 } }
		}
	}
}

# Country accepts buying Italian Escort Ships - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.09
	title = BBA_italy_naval_cooperation_programs.09.t
	desc = BBA_italy_naval_cooperation_programs.09.desc
	picture = GFX_report_event_sailors_in_working_rig
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = { #Remove all other decisions for this, we are successful we won't sell any more ships
			clr_country_flag = ITA_escort_ships_purchase_ongoing_flag
		}
	}

	# Coolio
	option = { 
		name = BBA_italy_naval_cooperation_programs.09.a

		hidden_effect = { #transfer_ship does not generate any tt
			transfer_ship = {
				prefer_name = "RCT Bettino Ricasoli"
				type = destroyer
				target = FROM
				exclude_refitting = yes
			}
			transfer_ship = {
				prefer_name = "RCT Giovanni Nicotera"
				type = destroyer
				target = FROM
				exclude_refitting = yes
			}
			transfer_ship = {
				prefer_name = "RCT Astore"
				type = destroyer
				target = FROM
				exclude_refitting = yes
			}
			transfer_ship = {
				prefer_name = "RCT Spica"
				type = destroyer
				target = FROM
				exclude_refitting = yes
			}
		}
		custom_effect_tooltip = ITA_cooperation_programs_deal_others_tt
		add_timed_idea = {
			idea = ITA_sold_obsolete_escort_ships_ns
			days = 365
		}
	}
}

# Country rejects buying Italian Escort Ships - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.10
	title = BBA_italy_naval_cooperation_programs.10.t
	desc = BBA_italy_naval_cooperation_programs.10.desc
	picture = GFX_report_event_sailors_in_working_rig 
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			clr_country_flag = ITA_escort_ships_purchase_ongoing_flag
		}
	}

	# Disappointing
	option = { 
		name = BBA_italy_naval_cooperation_programs.10.a

	}
}

# Offer to cede Aquila-Class DDs - Event for Spanish tag
country_event = {
	id = BBA_italy_naval_cooperation_programs.11
	title = BBA_italy_naval_cooperation_programs.11.t
	desc = BBA_italy_naval_cooperation_programs.11.desc
	picture = GFX_report_event_destroyers
	
	is_triggered_only = yes

	# Accept
	option = { 
		name = BBA_italy_naval_cooperation_programs.11.a
		ai_chance = {
			base = 10
		}

		effect_tooltip = {
			custom_effect_tooltip = ITA_cede_aquila_class_destroyers_tt
			FROM = {
				navy_experience = 50
				add_political_power = 50
			}
		}

		hidden_effect = {
			FROM = {
				set_country_flag = ITA_ceded_aquila_class_destroyers_flag #Cannot cede ships again
				country_event = { id = BBA_italy_naval_cooperation_programs.12 hours = 1 }
			}
		}
	}

	# Refuse
	option = {
		name = BBA_italy_naval_cooperation_programs.08.b #Intentional
		ai_chance = {
			base = 0 #AI always says 'yes'
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.13 hours = 1 } }
		}
	}
}

# Country accepts the Aquila-Class DDs - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.12
	title = BBA_italy_naval_cooperation_programs.12.t
	desc = BBA_italy_naval_cooperation_programs.12.desc
	picture = GFX_report_event_destroyers
	
	is_triggered_only = yes

	immediate = {
		hidden_effect = { #Remove all other decisions for this, we are successful we won't sell any more ships
			clr_country_flag = ITA_escort_ships_purchase_ongoing_flag
		}
	}

	# Coolio
	option = { 
		name = BBA_italy_naval_cooperation_programs.12.a

		navy_experience = 50
		add_political_power = 50
		custom_effect_tooltip = ITA_cede_aquila_class_destroyers_tt
		FROM = {
			add_opinion_modifier = {
				modifier = ITA_ceded_destroyers
				target = ROOT
			}
		}
		hidden_effect = {
			transfer_ship = {
				prefer_name = "RCT Aquila"
				type = destroyer
				target = FROM
			}
			transfer_ship = {
				prefer_name = "RCT Falco"
				type = destroyer
				target = FROM
			}
		}
	}
}

# Country rejects the Aquila-Class DDs - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.13
	title = BBA_italy_naval_cooperation_programs.13.t
	desc = BBA_italy_naval_cooperation_programs.13.desc
	picture = GFX_report_event_destroyers
	
	is_triggered_only = yes

	# you mad bro?
	option = { 
		name = BBA_italy_naval_cooperation_programs.03.a #Intentional

	}
}

# Offer to produce Midget Submarines - Event for minor European ally
country_event = {
	id = BBA_italy_naval_cooperation_programs.14
	title = BBA_italy_naval_cooperation_programs.14.t
	desc = BBA_italy_naval_cooperation_programs.14.desc
	picture = GFX_report_event_generic_naval_treaty
	
	is_triggered_only = yes

	# Accept
	option = { 
		name = BBA_italy_naval_cooperation_programs.14.a
		ai_chance = {
			base = 100
			modifier = {
				factor = 0
				OR = {
					has_navy_size = {
						size < 1
						archetype = ship_hull_submarine #SS
					}
					NOT = {
						any_owned_state = {
							is_coastal = yes
						}
					}
				}
			}
		}

		custom_effect_tooltip = ITA_export_midget_submarines_tt

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.15 hours = 1 } }
			set_country_flag = ITA_midget_submarines_flag #Cannot sell subss again
		}
	}

	# Refuse
	option = {
		name = BBA_italy_naval_cooperation_programs.08.b #Intentional
		ai_chance = {
			base = 1
		}

		hidden_effect = {
			FROM = { country_event = { id = BBA_italy_naval_cooperation_programs.16 hours = 1 } }
			set_country_flag = ITA_midget_submarines_flag #Cannot sell subss again
		}
	}
}

# Country accepts to buy Midget Submarines - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.15
	title = BBA_italy_naval_cooperation_programs.15.t
	desc = BBA_italy_naval_cooperation_programs.15.desc
	picture = GFX_report_event_generic_naval_treaty
	
	is_triggered_only = yes

	# Coolio
	option = { 
		name = BBA_italy_naval_cooperation_programs.15.a

		custom_effect_tooltip = ITA_export_midget_submarines_tt
		FROM = {
			add_opinion_modifier = {
				modifier = POR_sold_ships
				target = ROOT
			}
		}
	}
}

# Country rejects the Midget Submarines - Event for ITA
country_event = {
	id = BBA_italy_naval_cooperation_programs.16
	title = BBA_italy_naval_cooperation_programs.16.t
	desc = BBA_italy_naval_cooperation_programs.16.desc
	picture = GFX_report_event_generic_naval_treaty
	
	is_triggered_only = yes

	# Pfff ok
	option = { 
		name = BBA_italy_naval_cooperation_programs.10.a #Intentional

		clr_country_flag = ITA_producing_midget_submarines_for_export_flag
	}
}

# Midget Submarines are ready - Event for minor European ally
country_event = {
	id = BBA_italy_naval_cooperation_programs.17
	title = BBA_italy_naval_cooperation_programs.17.t
	desc = BBA_italy_naval_cooperation_programs.17.desc
	picture = GFX_report_event_generic_naval_treaty
	
	is_triggered_only = yes

	# Accept
	option = { 
		name = BBA_italy_naval_cooperation_programs.17.a

		create_equipment_variant = {
			name = "CB Class"
			type = ship_hull_midget_submarine
			name_group = ITA_SS_HISTORICAL
			parent_version = 0
			modules = {
				fixed_ship_torpedo_slot = ship_torpedo_sub_2
				fixed_ship_engine_slot = sub_ship_engine_2
			}
		}

		create_ship = { type = ship_hull_midget_submarine equipment_variant = "CB Class" creator = FROM }
		create_ship = { type = ship_hull_midget_submarine equipment_variant = "CB Class" creator = FROM }
		create_ship = { type = ship_hull_midget_submarine equipment_variant = "CB Class" creator = FROM }
		create_ship = { type = ship_hull_midget_submarine equipment_variant = "CB Class" creator = FROM }
		create_ship = { type = ship_hull_midget_submarine equipment_variant = "CB Class" creator = FROM }
	}
}
