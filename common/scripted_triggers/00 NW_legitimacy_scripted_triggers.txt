NW_has_coalition = {
	check_variable = { NW_coalition_array^num > 0 }
}

NW_can_set_very_good_legitimacy = {
	NOT = {
		has_country_flag = spain_block_legitimacy_flag
		has_idea = AFG_non_acceptance_of_power
		has_idea = TIB_power_without_power
#		has_idea = NGX_no_hui_nationalism
#		has_idea = NGX_very_weak_hui_nationalism
#		has_idea = NGX_weak_hui_nationalism
		has_idea = KHU_manual_state_management
		has_idea = IRQ_rejection_of_hashemites
	}
	if = {
		limit = { tag = BRD has_country_leader = { character = BRD_Ntare_V ruling_only = yes } }
		BRD_Ntare_V = { NOT = { has_trait = BRW_impostor } }
	}
	if = {
		limit = {
			original_tag = MEN
			has_variable = MEN_legitimacy_var
		}
		always = no
	}
}

NW_can_set_good_legitimacy = { 
	NOT = {
		has_country_flag = spain_block_legitimacy_flag
		has_idea = AFG_non_acceptance_of_power
		has_idea = TIB_power_without_power
#		has_idea = NGX_no_hui_nationalism
#		has_idea = NGX_very_weak_hui_nationalism
#		has_idea = NGX_weak_hui_nationalism
		has_idea = KHU_manual_state_management
		has_idea = IRQ_rejection_of_hashemites
	}
	if = {
		limit = { tag = BRD has_country_leader = { character = BRD_Ntare_V ruling_only = yes } }
		BRD_Ntare_V = { NOT = { has_trait = BRW_impostor } }
	}
	if = {
		limit = {
			original_tag = MEN
			has_variable = MEN_legitimacy_var
		}
		always = no
	}
}

NW_can_set_normal_legitimacy = {
	NOT = {
		has_country_flag = spain_block_legitimacy_flag
#		has_idea = NGX_no_hui_nationalism
#		has_idea = NGX_very_weak_hui_nationalism
		has_idea = IRQ_rejection_of_hashemites
	}
	if = {
		limit = {
			original_tag = MEN
			has_variable = MEN_legitimacy_var
		}
		check_variable = { var = MEN_legitimacy_var value = 90 compare = less_than_or_equals }
		check_variable = { MEN_legitimacy_var > 60 }
	}
}

NW_can_set_low_legitimacy = {
	NOT = {
		has_country_flag = spain_block_legitimacy_flag
#		has_idea = NGX_no_hui_nationalism
	}
	if = {
		limit = {
			original_tag = MEN
			has_variable = MEN_legitimacy_var
		}
		check_variable = { var = MEN_legitimacy_var value = 60 compare = less_than_or_equals }
		check_variable = { MEN_legitimacy_var > 30 }
	}
	else_if = {
		limit = {
			has_idea = IRQ_rejection_of_hashemites # TODO !!!!
		}
		check_variable = { party_popularity_100@ruling_party > 0.299 }
	}
}

NW_can_set_very_low_legitimacy = {
	NOT = {
		has_country_flag = spain_block_legitimacy_flag
	}
	if = {
		limit = {
			original_tag = MEN
			has_variable = MEN_legitimacy_var
		}
		check_variable = { var = MEN_legitimacy_var value = 30 compare = less_than_or_equals }
	}
}

NW_can_set_disaster_legitimacy = {
	NOT = {
		has_country_flag = spain_block_legitimacy_flag
		has_country_leader = { character = NFL_david_murray_anderson ruling_only = yes }
		has_country_leader = { character = NFL_humphrey_t_walwyn ruling_only = yes }
		has_country_leader = { character = NFL_gordon_macdonald ruling_only = yes }
		has_country_leader = { character = NFL_john_hope_simpson ruling_only = yes }
	}
	if = {
		limit = {
			original_tag = MEN
			has_variable = MEN_legitimacy_var
		}
		always = no
	}
}