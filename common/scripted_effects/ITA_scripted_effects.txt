
##### Italo-Ethiopian war

ITA_end_the_italo_ethiopian_war = {
	clr_global_flag = second_italo_ethiopian_war_flag
	# check if Italian victory
	IF = {
		limit = {
			271 = {
				controller = {
					OR = {
						original_tag = ITA
						is_subject_of = ITA
					}
				}
			}
		}
		ITA = {
			set_country_flag = ITA_victory_in_ethiopia_flag
		}
	}
	ELSE = {
		ITA = {
			set_country_flag = ITA_defeat_in_ethiopia_flag
		}
	}
}

##     ## ####  ######   ######  ####  #######  ##       #### ##    ## ####  ######
###   ###  ##  ##    ## ##    ##  ##  ##     ## ##        ##  ###   ##  ##  ##    ##
#### ####  ##  ##       ##        ##  ##     ## ##        ##  ####  ##  ##  ##
## ### ##  ##   ######   ######   ##  ##     ## ##        ##  ## ## ##  ##   ######
##     ##  ##        ##       ##  ##  ##     ## ##        ##  ##  ####  ##        ##
##     ##  ##  ##    ## ##    ##  ##  ##     ## ##        ##  ##   ###  ##  ##    ##
##     ## ####  ######   ######  ####  #######  ######## #### ##    ## ####  ######

### PROGRESS IN ETHIOPIA ###
ITA_missiolini_progress_in_ethiopia_failure_effect = {
	add_war_support = -0.03
	add_political_power = -15
	add_popularity = { ideology = monarchy popularity = 0.05 }
	effect_tooltip = {
		ETH = {
			army_experience = 10
			add_command_power = 10
			if = {
				limit = { has_idea = ETH_counterattack }
				modify_timed_idea = { idea = ETH_counterattack days = 30 }
			}
		}
	}
}

ITA_missiolini_progress_in_ethiopia_success_effect = {
	add_stability = 0.03
	add_war_support = 0.03
	army_experience = 15
	add_command_power = 15
	custom_effect_tooltip = ITA_missiolini_conquer_ethiopia_add_days_tt
	add_to_variable = { ITA_missiolini_conquer_ethiopia_days = 30 }
	
	custom_effect_tooltip = ITA_missiolini_conquer_ethiopia_add_days_tt2
	set_temp_variable = { temp_days1 = 180 }
	set_temp_variable = { temp_days = global.num_days }
	subtract_from_temp_variable = { temp_days = total_mission_days }
	log = "[GetDateText]: [Root.GetName]: temp_days = [?temp_days]"
	subtract_from_temp_variable = { temp_days1 = temp_days }
	log = "[GetDateText]: [Root.GetName]: temp_days1 = [?temp_days1]"
	add_to_variable = { ITA_missiolini_conquer_ethiopia_days = temp_days1 }
	log = "[GetDateText]: [Root.GetName]: ITA_missiolini_conquer_ethiopia_days = [?ITA_missiolini_conquer_ethiopia_days]"

	#Effects in Ethiopia
	effect_tooltip = {
		ETH = {
			add_war_support = -0.1
			add_popularity = { ideology = fascism popularity = 0.05 }
		}
	}
}

### CONQUER ETHIOPIA ###
ITA_missiolini_conquer_ethiopia_failure_effect = {
	add_political_power = -25
	add_war_support = -0.05
	add_stability = -0.05
	every_controlled_state = {
		limit = {
			NOT = { is_owned_by = ROOT }
			is_core_of = ETH
		}
		add_compliance = -5
	}
	complete_national_focus = ITA_loseinETH
	hidden_effect = {
		country_event = { id = duce.11 days = 2 random_days = 3 }
	}
}

ITA_missiolini_conquer_ethiopia_success_effect = {
	add_political_power = 50
	add_stability = 0.05
	add_war_support = 0.05
	army_experience = 25
	add_command_power = 25
	complete_national_focus = ITA_victoryinETH
	hidden_effect = {
		if = {
			limit = { NOT = { has_global_flag = italo_ethiopian_war_over } }
			news_event = { id = trworldnews.109 hours = 6 }
		}
	}
}



########   #######  ########
##     ## ##     ## ##     ##
##     ## ##     ## ##     ##
########  ##     ## ########
##     ## ##     ## ##
##     ## ##     ## ##
########   #######  ##



ITA_bop_absurdly_high_increase_effect = {
	if = {
		limit = { has_power_balance = { id = RDS_power_balance } }
		add_power_balance_value = { id = RDS_power_balance value = 1 }
	}
	else_if = {
		limit = { has_power_balance = { id = CLN_power_balance } }
		add_power_balance_value = { id = CLN_power_balance value = 1 }
	}
	else_if = {
		limit = { has_power_balance = { id = GFC_power_balance } }
		add_power_balance_value = { id = GFC_power_balance value = 1 }
	}
	else = {
		add_power_balance_value = { id = ITA_power_balance value = 1 }
	}
}

ITA_bop_very_high_increase_effect = {
	if = {
		limit = { has_power_balance = { id = RDS_power_balance } }
		add_power_balance_value = { id = RDS_power_balance value = 0.25 }
	}
	else_if = {
		limit = { has_power_balance = { id = CLN_power_balance } }
		add_power_balance_value = { id = CLN_power_balance value = 0.25 }
	}
	else_if = {
		limit = { has_power_balance = { id = GFC_power_balance } }
		add_power_balance_value = { id = GFC_power_balance value = 0.25 }
	}
	else = {
		add_power_balance_value = { id = ITA_power_balance value = 0.25 }
	}
}

ITA_bop_high_increase_effect = {
	if = {
		limit = { has_power_balance = { id = RDS_power_balance } }
		add_power_balance_value = { id = RDS_power_balance value = 0.2 }
	}
	else_if = {
		limit = { has_power_balance = { id = CLN_power_balance } }
		add_power_balance_value = { id = CLN_power_balance value = 0.2 }
	}
	else_if = {
		limit = { has_power_balance = { id = GFC_power_balance } }
		add_power_balance_value = { id = GFC_power_balance value = 0.2 }
	}
	else = {
		add_power_balance_value = { id = ITA_power_balance value = 0.2 }
	}
}

ITA_bop_medium_increase_effect = {
	if = {
		limit = { has_power_balance = { id = RDS_power_balance } }
		add_power_balance_value = { id = RDS_power_balance value = 0.15 }
	}
	else_if = {
		limit = { has_power_balance = { id = CLN_power_balance } }
		add_power_balance_value = { id = CLN_power_balance value = 0.15 }
	}
	else_if = {
		limit = { has_power_balance = { id = GFC_power_balance } }
		add_power_balance_value = { id = GFC_power_balance value = 0.15 }
	}
	else = {
		add_power_balance_value = { id = ITA_power_balance value = 0.15 }
	}
}

ITA_bop_low_increase_effect = {
	if = {
		limit = { has_power_balance = { id = RDS_power_balance } }
		add_power_balance_value = { id = RDS_power_balance value = 0.1 }
	}
	else_if = {
		limit = { has_power_balance = { id = CLN_power_balance } }
		add_power_balance_value = { id = CLN_power_balance value = 0.1 }
	}
	else_if = {
		limit = { has_power_balance = { id = GFC_power_balance } }
		add_power_balance_value = { id = GFC_power_balance value = 0.1 }
	}
	else = {
		add_power_balance_value = { id = ITA_power_balance value = 0.1 }
	}
}

ITA_bop_very_low_increase_effect = {
	if = {
		limit = { has_power_balance = { id = RDS_power_balance } }
		add_power_balance_value = { id = RDS_power_balance value = 0.05 }
	}
	else_if = {
		limit = { has_power_balance = { id = CLN_power_balance } }
		add_power_balance_value = { id = CLN_power_balance value = 0.05 }
	}
	else_if = {
		limit = { has_power_balance = { id = GFC_power_balance } }
		add_power_balance_value = { id = GFC_power_balance value = 0.05 }
	}
	else = {
		add_power_balance_value = { id = ITA_power_balance value = 0.05 }
	}
}

ITA_bop_absurdly_high_decrease_effect = {
	if = {
		limit = { has_power_balance = { id = RDS_power_balance } }
		add_power_balance_value = { id = RDS_power_balance value = -1 }
	}
	else_if = {
		limit = { has_power_balance = { id = CLN_power_balance } }
		add_power_balance_value = { id = CLN_power_balance value = -1 }
	}
	else_if = {
		limit = { has_power_balance = { id = GFC_power_balance } }
		add_power_balance_value = { id = GFC_power_balance value = -1 }
	}
	else = {
		add_power_balance_value = { id = ITA_power_balance value = -1 }
	}
}

ITA_bop_very_high_decrease_effect = {
	if = {
		limit = { has_power_balance = { id = RDS_power_balance } }
		add_power_balance_value = { id = RDS_power_balance value = -0.25 }
	}
	else_if = {
		limit = { has_power_balance = { id = CLN_power_balance } }
		add_power_balance_value = { id = CLN_power_balance value = -0.25 }
	}
	else_if = {
		limit = { has_power_balance = { id = GFC_power_balance } }
		add_power_balance_value = { id = GFC_power_balance value = -0.25 }
	}
	else = {
		add_power_balance_value = { id = ITA_power_balance value = -0.25 }
	}
}

ITA_bop_high_decrease_effect = {
	if = {
		limit = { has_power_balance = { id = RDS_power_balance } }
		add_power_balance_value = { id = RDS_power_balance value = -0.2 }
	}
	else_if = {
		limit = { has_power_balance = { id = CLN_power_balance } }
		add_power_balance_value = { id = CLN_power_balance value = -0.2 }
	}
	else_if = {
		limit = { has_power_balance = { id = GFC_power_balance } }
		add_power_balance_value = { id = GFC_power_balance value = -0.2 }
	}
	else = {
		add_power_balance_value = { id = ITA_power_balance value = -0.2 }
	}
}

ITA_bop_medium_decrease_effect = {
	if = {
		limit = { has_power_balance = { id = RDS_power_balance } }
		add_power_balance_value = { id = RDS_power_balance value = -0.15 }
	}
	else_if = {
		limit = { has_power_balance = { id = CLN_power_balance } }
		add_power_balance_value = { id = CLN_power_balance value = -0.15 }
	}
	else_if = {
		limit = { has_power_balance = { id = GFC_power_balance } }
		add_power_balance_value = { id = GFC_power_balance value = -0.15 }
	}
	else = {
		add_power_balance_value = { id = ITA_power_balance value = -0.15 }
	}
}

ITA_bop_low_decrease_effect = {
	if = {
		limit = { has_power_balance = { id = RDS_power_balance } }
		add_power_balance_value = { id = RDS_power_balance value = -0.1 }
	}
	else_if = {
		limit = { has_power_balance = { id = CLN_power_balance } }
		add_power_balance_value = { id = CLN_power_balance value = -0.1 }
	}
	else_if = {
		limit = { has_power_balance = { id = GFC_power_balance } }
		add_power_balance_value = { id = GFC_power_balance value = -0.1 }
	}
	else = {
		add_power_balance_value = { id = ITA_power_balance value = -0.1 }
	}
}

ITA_bop_very_low_decrease_effect = {
	if = {
		limit = { has_power_balance = { id = RDS_power_balance } }
		add_power_balance_value = { id = RDS_power_balance value = -0.05 }
	}
	else_if = {
		limit = { has_power_balance = { id = CLN_power_balance } }
		add_power_balance_value = { id = CLN_power_balance value = -0.05 }
	}
	else_if = {
		limit = { has_power_balance = { id = GFC_power_balance } }
		add_power_balance_value = { id = GFC_power_balance value = -0.05 }
	}
	else = {
		add_power_balance_value = { id = ITA_power_balance value = -0.05 }
	}
}

ITA_bop_increase_lost_core_modifier = {
	if = {
		limit = {
			has_power_balance = { id = CLN_power_balance }
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = CLN_power_balance
					modifier = ITA_power_balance_lost_core_4
				}
			}
			add_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_5
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = CLN_power_balance
					modifier = ITA_power_balance_lost_core_3
				}
			}
			add_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_4
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = CLN_power_balance
					modifier = ITA_power_balance_lost_core_2
				}
			}
			add_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_3
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = CLN_power_balance
					modifier = ITA_power_balance_lost_core_1
				}
			}
			add_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_2
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_power_balance_modifier = {
						id = CLN_power_balance
						modifier = ITA_power_balance_lost_core_5
					}
				}
			}
			add_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_1
			}
		}
	}
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = RDS_power_balance
					modifier = ITA_power_balance_lost_core_4
				}
			}
			add_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_5
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = RDS_power_balance
					modifier = ITA_power_balance_lost_core_3
				}
			}
			add_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_4
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = RDS_power_balance
					modifier = ITA_power_balance_lost_core_2
				}
			}
			add_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_3
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = RDS_power_balance
					modifier = ITA_power_balance_lost_core_1
				}
			}
			add_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_2
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_power_balance_modifier = {
						id = RDS_power_balance
						modifier = ITA_power_balance_lost_core_5
					}
				}
			}
			add_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_1
			}
		}
	}
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = GFC_power_balance
					modifier = ITA_power_balance_lost_core_4
				}
			}
			add_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_5
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = GFC_power_balance
					modifier = ITA_power_balance_lost_core_3
				}
			}
			add_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_4
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = GFC_power_balance
					modifier = ITA_power_balance_lost_core_2
				}
			}
			add_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_3
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = GFC_power_balance
					modifier = ITA_power_balance_lost_core_1
				}
			}
			add_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_2
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_power_balance_modifier = {
						id = GFC_power_balance
						modifier = ITA_power_balance_lost_core_5
					}
				}
			}
			add_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_1
			}
		}
	}
	if = {
		limit = {
			has_power_balance = { id = ITA_power_balance }
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = ITA_power_balance
					modifier = ITA_power_balance_lost_core_4
				}
			}
			add_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_5
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = ITA_power_balance
					modifier = ITA_power_balance_lost_core_3
				}
			}
			add_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_4
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = ITA_power_balance
					modifier = ITA_power_balance_lost_core_2
				}
			}
			add_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_3
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = ITA_power_balance
					modifier = ITA_power_balance_lost_core_1
				}
			}
			add_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_2
			}
		}
		else_if = {
			limit = {
				NOT = {
					has_power_balance_modifier = {
						id = ITA_power_balance
						modifier = ITA_power_balance_lost_core_5
					}
				}
			}
			add_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_1
			}
		}
	}
}

ITA_bop_decrease_lost_core_modifier = {
	if = {
		limit = {
			has_power_balance = { id = CLN_power_balance }
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = CLN_power_balance
					modifier = ITA_power_balance_lost_core_5
				}
			}
			remove_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_5
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = CLN_power_balance
					modifier = ITA_power_balance_lost_core_4
				}
			}
			remove_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_4
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = CLN_power_balance
					modifier = ITA_power_balance_lost_core_3
				}
			}
			remove_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_3
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = CLN_power_balance
					modifier = ITA_power_balance_lost_core_2
				}
			}
			remove_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_2
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = CLN_power_balance
					modifier = ITA_power_balance_lost_core_1
				}
			}
			remove_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_1
			}
		}
		else = {
			#NOTHING cannot decrease
		}
	}
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = RDS_power_balance
					modifier = ITA_power_balance_lost_core_5
				}
			}
			remove_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_5
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = RDS_power_balance
					modifier = ITA_power_balance_lost_core_4
				}
			}
			remove_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_4
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = RDS_power_balance
					modifier = ITA_power_balance_lost_core_3
				}
			}
			remove_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_3
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = RDS_power_balance
					modifier = ITA_power_balance_lost_core_2
				}
			}
			remove_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_2
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = RDS_power_balance
					modifier = ITA_power_balance_lost_core_1
				}
			}
			remove_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_1
			}
		}
		else = {
			#NOTHING cannot decrease
		}
	}
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = GFC_power_balance
					modifier = ITA_power_balance_lost_core_5
				}
			}
			remove_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_5
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = GFC_power_balance
					modifier = ITA_power_balance_lost_core_4
				}
			}
			remove_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_4
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = GFC_power_balance
					modifier = ITA_power_balance_lost_core_3
				}
			}
			remove_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_3
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = GFC_power_balance
					modifier = ITA_power_balance_lost_core_2
				}
			}
			remove_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_2
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = GFC_power_balance
					modifier = ITA_power_balance_lost_core_1
				}
			}
			remove_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_1
			}
		}
		else = {
			#NOTHING cannot decrease
		}
	}
	if = {
		limit = {
			has_power_balance = { id = ITA_power_balance }
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = ITA_power_balance
					modifier = ITA_power_balance_lost_core_5
				}
			}
			remove_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_5
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = ITA_power_balance
					modifier = ITA_power_balance_lost_core_4
				}
			}
			remove_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_4
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = ITA_power_balance
					modifier = ITA_power_balance_lost_core_3
				}
			}
			remove_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_3
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = ITA_power_balance
					modifier = ITA_power_balance_lost_core_2
				}
			}
			remove_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_2
			}
		}
		else_if = {
			limit = {
				has_power_balance_modifier = {
					id = ITA_power_balance
					modifier = ITA_power_balance_lost_core_1
				}
			}
			remove_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_1
			}
		}
		else = {
			#NOTHING cannot decrease
		}
	}
}

ITA_bop_remove_lost_core_modifier = {
	if = {
		limit = {
			has_power_balance = { id = CLN_power_balance }
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = CLN_power_balance
					modifier = ITA_power_balance_lost_core_5
				}
			}
			remove_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_5
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = CLN_power_balance
					modifier = ITA_power_balance_lost_core_4
				}
			}
			remove_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_4
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = CLN_power_balance
					modifier = ITA_power_balance_lost_core_3
				}
			}
			remove_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_3
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = CLN_power_balance
					modifier = ITA_power_balance_lost_core_2
				}
			}
			remove_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_2
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = CLN_power_balance
					modifier = ITA_power_balance_lost_core_1
				}
			}
			remove_power_balance_modifier = {
				id = CLN_power_balance
				modifier = ITA_power_balance_lost_core_1
			}
		}
	}
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = RDS_power_balance
					modifier = ITA_power_balance_lost_core_5
				}
			}
			remove_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_5
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = RDS_power_balance
					modifier = ITA_power_balance_lost_core_4
				}
			}
			remove_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_4
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = RDS_power_balance
					modifier = ITA_power_balance_lost_core_3
				}
			}
			remove_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_3
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = RDS_power_balance
					modifier = ITA_power_balance_lost_core_2
				}
			}
			remove_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_2
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = RDS_power_balance
					modifier = ITA_power_balance_lost_core_1
				}
			}
			remove_power_balance_modifier = {
				id = RDS_power_balance
				modifier = ITA_power_balance_lost_core_1
			}
		}
	}
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = GFC_power_balance
					modifier = ITA_power_balance_lost_core_5
				}
			}
			remove_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_5
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = GFC_power_balance
					modifier = ITA_power_balance_lost_core_4
				}
			}
			remove_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_4
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = GFC_power_balance
					modifier = ITA_power_balance_lost_core_3
				}
			}
			remove_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_3
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = GFC_power_balance
					modifier = ITA_power_balance_lost_core_2
				}
			}
			remove_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_2
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = GFC_power_balance
					modifier = ITA_power_balance_lost_core_1
				}
			}
			remove_power_balance_modifier = {
				id = GFC_power_balance
				modifier = ITA_power_balance_lost_core_1
			}
		}
	}
	if = {
		limit = {
			has_power_balance = { id = ITA_power_balance }
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = ITA_power_balance
					modifier = ITA_power_balance_lost_core_5
				}
			}
			remove_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_5
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = ITA_power_balance
					modifier = ITA_power_balance_lost_core_4
				}
			}
			remove_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_4
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = ITA_power_balance
					modifier = ITA_power_balance_lost_core_3
				}
			}
			remove_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_3
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = ITA_power_balance
					modifier = ITA_power_balance_lost_core_2
				}
			}
			remove_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_2
			}
		}
		if = {
			limit = {
				has_power_balance_modifier = {
					id = ITA_power_balance
					modifier = ITA_power_balance_lost_core_1
				}
			}
			remove_power_balance_modifier = {
				id = ITA_power_balance
				modifier = ITA_power_balance_lost_core_1
			}
		}
	}
}


 ######  #### ##     ## #### ##          ##      ##    ###    ########
##    ##  ##  ##     ##  ##  ##          ##  ##  ##   ## ##   ##     ##
##        ##  ##     ##  ##  ##          ##  ##  ##  ##   ##  ##     ##
##        ##  ##     ##  ##  ##          ##  ##  ## ##     ## ########
##        ##   ##   ##   ##  ##          ##  ##  ## ######### ##   ##
##    ##  ##    ## ##    ##  ##          ##  ##  ## ##     ## ##    ##
 ######  ####    ###    #### ########     ###  ###  ##     ## ##     ##


ITA_set_up_character_cw_flags_effect = { #Using Unit leader flags when necessary to prevent generals from moving around abandoning armies as much as possible
	#log = "CHAR FLAGS EFFECT"

	### UNIT_LEADER FLAGS ###

	#Fascists -> Always Duce side
	ITA_rodolfo_graziani = {
		set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	#ITA_giovanni_messe = { #Goes with player
	#	set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
	#	set_character_flag = ITA_cw_character_fascist_side_flag
	#}
	ITA_ubaldo_soddu = {
		set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_ettore_bastico = {
		set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_alfredo_guzzoni = {
		set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_pietro_pintor = {
		set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_giuseppe_tellera = {
		set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_francesco_zingales = {
		set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_alessandro_pirzio_biroli = {
		set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_ettore_baldassarre = {
		set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_italo_balbo = {
		set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
		set_character_flag = ITA_cw_character_fascist_side_flag
	}

	#Conservative anti-fascists -> Monarchist side
	ITA_pietro_badoglio = { # Conservative Anti-Duce side
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_emilio_de_bono = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_ugo_cavallero = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_sebastiano_visconti_prasca = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_italo_gariboldi = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_vittorio_ambrosio = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_mario_berti = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_carlo_geloso = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_ezio_rosi = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_mario_vercellino = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_carlo_vecchiarelli = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_mario_robotti = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}

	ITA_prince_filiberto = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_prince_adalberto = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_prince_umberto = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}


	#Anti-fascists -> Commie, Democratic and Monarchist sides
	ITA_giuseppe_pieche = {
		set_unit_leader_flag = ITA_cw_unit_leader_antifascist_side_flag
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	#ITA_giovanni_duca = { #Goes with player
	#
	#}
	ITA_giuseppe_de_stefanis = {
		set_unit_leader_flag = ITA_cw_unit_leader_antifascist_side_flag
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_ugo_luca = {
		set_unit_leader_flag = ITA_cw_unit_leader_antifascist_side_flag
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_mario_ricci = {
		set_unit_leader_flag = ITA_cw_unit_leader_antifascist_side_flag
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_norma_barbolini = {
		set_unit_leader_flag = ITA_cw_unit_leader_antifascist_side_flag
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_ada_gobetti = {
		set_unit_leader_flag = ITA_cw_unit_leader_antifascist_side_flag
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_pompeo_colajanni = {
		set_unit_leader_flag = ITA_cw_unit_leader_antifascist_side_flag
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_randolfo_pacciardi = {
		set_unit_leader_flag = ITA_cw_unit_leader_antifascist_side_flag
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_luigi_longo = {
		set_unit_leader_flag = ITA_cw_unit_leader_antifascist_side_flag
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}

	#PLAYER ALWAYS
	#ITA_amedeo_guillet = {
	#	
	#}
	#ITA_annibale_bergonzoli = {
	#	
	#}
	#ITA_hamid_idris_awate = {
	#	
	#}
	#ITA_ibrahim_farag_mohammed = {
	#	
	#}


	#ADMIRALS
	#Fascist
	ITA_angelo_iachino = {
		set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_giuseppe_di_bartolo = {
		set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	#ITA_junio_valerio_borghese = { #Goes with player
	#	set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
	#	set_character_flag = ITA_cw_character_fascist_side_flag
	#}

	#Monarchist
	ITA_prince_aimone = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_alberto_da_zara = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}	
	ITA_giuseppe_fioravanzo = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_carlo_bergamini = {
		set_unit_leader_flag = ITA_cw_unit_leader_monarchist_side_flag
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}

	#Anti-Fascsit
	ITA_inigo_campioni = {
		set_unit_leader_flag = ITA_cw_unit_leader_antifascist_side_flag
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}


	### CHARACTER FLAGS ###


	#COUNTRY LEADERS
	ITA_benito_mussolini = {
		set_unit_leader_flag = ITA_cw_unit_leader_fascist_side_flag
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_grand_council = {
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_dino_grandi = {
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_papa_pio_xi = {
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_papa_pio_xii = {
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_vittorio_emanuele_iii = {
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_alcide_de_gasperi = {
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_ivanoe_bonomi = {
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_ferruccio_parri = {
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_comitato_di_liberazione_nazionale = {
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_antonio_gramsci = {
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_palmiro_togliatti = {
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_sandro_pertini = {
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}


	#MILITARY ADVISORS
	ITA_arturo_riccardi = {
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_raffaele_de_courten = {
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_ettore_muti = {
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_marziale_cerutti = {
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_silvio_scaroni = {
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_luigi_mascherpa = {
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_amedeo_mecozzi = {
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_renato_sandalli = {
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	#ITA_gaetano_crocco = { #Goes with player
	#	set_character_flag = ITA_cw_character_fascist_side_flag
	#}
	#ITA_romeo_bernotti = { #Goes with player
	#	set_character_flag = ITA_cw_character_fascist_side_flag
	#}
	#ITA_alberto_pariani = { #Goes with player
	#	set_character_flag = ITA_cw_character_fascist_side_flag
	#}
	ITA_domenico_cavagnari = {
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_rino_corso_fougier = {
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	#ITA_francesco_pricolo = { #Goes with player
	#	set_character_flag = ITA_cw_character_fascist_side_flag
	#}
	#ITA_aldo_pellegrini = { #Goes with player
	#	set_character_flag = ITA_cw_character_fascist_side_flag
	#}
	ITA_achille_starace = {
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}

	#POLITICAL ADVISORS
	ITA_carlo_scorza = {
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_roberto_farinacci = {
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_renato_ricci = {
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_giovanni_marinelli = { #Goes with player
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_gian_galeazzo_ciano = { #Goes with player
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_serafino_mazzolini = { #Goes with player
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_giacomo_acerbo = { #Goes with player
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_paolo_thaon_di_revel = { #Goes with player
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_renato_ricci = { #Goes with player
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_carlo_favagrossa = { #Goes with player
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_alberto_beneduce = { #Goes with player
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_guido_jung = { #Goes with player
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_adelchi_serena = { #Goes with player
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_curzio_malaparte = { #Goes with player
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_giuseppe_bottai = { #Goes with player
		set_character_flag = ITA_cw_character_fascist_side_flag
	}

	ITA_enrico_fermi = { #Goes with player
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_vittorio_emanuele_orlando = { #Goes with player
		set_character_flag = ITA_cw_character_fascist_side_flag
	}

	ITA_luigi_einaudi = { #Goes with player
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_pietro_d_acquarone = {
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_alberto_de_stefani = {
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_mario_scelba = {
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_guido_de_ruggiero = {
		set_character_flag = ITA_cw_character_monarchist_side_flag
	}
	ITA_alberto_tarchiani = {
		set_character_flag = ITA_cw_character_fascist_side_flag
	}
	ITA_giuseppe_borea = { #Prio anti-fascist always - But also available for monarchists
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_amadeo_bordiga = {
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_antonio_pesenti = {
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_fausto_gullo = {
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_giulio_paggio = {
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
	ITA_ignazio_silone = {
		set_character_flag = ITA_cw_character_antifascist_side_flag
	}
}



##     ## ####  ######   ######
###   ###  ##  ##    ## ##    ##
#### ####  ##  ##       ##
## ### ##  ##   ######  ##
##     ##  ##        ## ##
##     ##  ##  ##    ## ##    ##
##     ## ####  ######   ######


ITA_remove_king_vittorio_emanuele_as_idea = {
	if = {
		limit = {
			has_idea = vittorio_emanuele
		}
		remove_ideas = vittorio_emanuele
	}
	else_if = {
		limit = {
			has_idea = vittorio_emanuele_king_of_albania
		}
		remove_ideas = vittorio_emanuele_king_of_albania
	}
	else_if = {
		limit = {
			has_idea = vittorio_emanuele_emperor_of_ethiopia
		}
		remove_ideas = vittorio_emanuele_emperor_of_ethiopia
	}
	else_if = {
		limit = {
			has_idea = vittorio_emanuele_albania_ethiopia
		}
		remove_ideas = vittorio_emanuele_albania_ethiopia
	}
	set_country_flag = ITA_deposed_the_king
}

ITA_add_king_vittorio_emanuele_back_as_idea = { #After having removed him
	if = {
		limit = {
			has_completed_focus = ITA_the_new_emperor_of_ethiopia
			ITA_vittorio_emanuele_iii = { has_character_flag = ITA_king_of_albania_flag }
		}
		add_ideas = vittorio_emanuele_albania_ethiopia

	}
	else_if = {
		limit = {
			ITA_vittorio_emanuele_iii = { has_character_flag = ITA_king_of_albania_flag }
		}
		add_ideas = vittorio_emanuele_king_of_albania
	}
	else_if = {
		limit = {
			has_completed_focus = ITA_the_new_emperor_of_ethiopia
		}
		add_ideas = vittorio_emanuele_emperor_of_ethiopia
	}
	else = {
		add_ideas = vittorio_emanuele
	}
	if = {
		limit = {
			has_country_flag = ITA_deposed_the_king
		}
		clr_country_flag = ITA_deposed_the_king
	}
}

ITA_add_correct_mafia_rising_modifier_version = {
	if = {
		limit = {
			has_dlc = "La Resistance"
		}
		add_dynamic_modifier = { modifier = ITA_mafia_on_the_rise }
	}
	else = {
		add_dynamic_modifier = { modifier = ITA_mafia_on_the_rise_no_lar }
	}
}


##    ##    ###    ##     ## ########     ######  ##     ##    ###    ##    ##  ######   ########  ######	хотя это не нужно
###   ##   ## ##   ###   ### ##          ##    ## ##     ##   ## ##   ###   ## ##    ##  ##       ##    ##
####  ##  ##   ##  #### #### ##          ##       ##     ##  ##   ##  ####  ## ##        ##       ##
## ## ## ##     ## ## ### ## ######      ##       ######### ##     ## ## ## ## ##   #### ######    ######
##  #### ######### ##     ## ##          ##       ##     ## ######### ##  #### ##    ##  ##             ##
##   ### ##     ## ##     ## ##          ##    ## ##     ## ##     ## ##   ### ##    ##  ##       ##    ##
##    ## ##     ## ##     ## ########     ######  ##     ## ##     ## ##    ##  ######   ########  ######

#Sets flag for characters to be purged
ITA_characters_to_purge_effect = {
	#ADVISORS
	if = {#First alternative for purge
		limit = {
			has_character = ITA_achille_starace
			ITA_achille_starace = { has_character_flag = ITA_character_can_be_purged }
		}
		ITA_achille_starace = { set_character_flag = ITA_purge_advisor }
	}
	else_if = {#Second alternative if the first one isn't available
		limit = {
			has_character = ITA_carlo_scorza
			ITA_carlo_scorza = { has_character_flag = ITA_character_can_be_purged }
		}
		ITA_carlo_scorza = { set_character_flag = ITA_purge_advisor }
	}
	else = {#Third, random alternative if the first two aren't available
		random_character = {
			limit = {
				has_character_flag = ITA_character_can_be_purged
				is_character_slot = political_advisor
			}
			set_character_flag = ITA_purge_advisor
		}
	}
	if = {#First alternative for purge
		limit = {
			has_character = ITA_renato_ricci
			ITA_renato_ricci = { has_character_flag = ITA_character_can_be_purged }
		}
		ITA_renato_ricci = { set_character_flag = ITA_purge_advisor }
	}
	else_if = {#Second alternative if the first one isn't available
		limit = {
			has_character = ITA_roberto_farinacci
			ITA_roberto_farinacci = { has_character_flag = ITA_character_can_be_purged }
		}
		ITA_roberto_farinacci = { set_character_flag = ITA_purge_advisor }
	}
	else = {#Third, random alternative if the first two aren't available
		random_character = {
			limit = {
				has_character_flag = ITA_character_can_be_purged
				is_character_slot = political_advisor
				NOT = { has_character_flag = ITA_purge_advisor }
			}
			set_character_flag = ITA_purge_advisor
		}
	}
	#GENERALS
	if = {#First alternative for purge
		limit = {
			has_character = ITA_rodolfo_graziani
			ITA_rodolfo_graziani = { has_character_flag = ITA_character_can_be_purged }
		}
		ITA_rodolfo_graziani = { set_character_flag = ITA_purge_general }
	}
	else_if = {#Second alternative if the first one isn't available
		limit = {
			has_character = ITA_ugo_cavallero
			ITA_ugo_cavallero = { has_character_flag = ITA_character_can_be_purged }
		}
		ITA_ugo_cavallero = { set_character_flag = ITA_purge_general }
	}
	else = {#Third, random alternative if the first two aren't available
		random_character = {
			limit = {
				has_character_flag = ITA_character_can_be_purged
				is_unit_leader = yes
			}
			set_character_flag = ITA_purge_general
		}
	}
	if = {#First alternative for purge
		limit = {
			has_character = ITA_ubaldo_soddu
			ITA_ubaldo_soddu = { has_character_flag = ITA_character_can_be_purged }
		}
		ITA_ubaldo_soddu = { set_character_flag = ITA_purge_general }
	}
	else_if = {#Second alternative if the first one isn't available
		limit = {
			has_character = ITA_francesco_zingales
			ITA_francesco_zingales = { has_character_flag = ITA_character_can_be_purged }
		}
		ITA_francesco_zingales = { set_character_flag = ITA_purge_general }
	}
	else = {#Third, random alternative if the first two aren't available
		random_character = {
			limit = {
				has_character_flag = ITA_character_can_be_purged
				is_unit_leader = yes
				NOT = { has_character_flag = ITA_purge_general }
			}
			set_character_flag = ITA_purge_general
		}
	}
}

#Retire characters with the flag from the game OR remove the flag but keep the character
ITA_purge_advisors_effect = {
	every_character = {
		limit = {
			has_character_flag = ITA_purge_advisor
		}
		retire = yes
	}
	every_character = {
		limit = {
			has_character_flag = ITA_purge_general
		}
		clr_character_flag = ITA_character_can_be_purged
	}
}

#Retire characters with the flag from the game OR remove the flag but keep the character
ITA_purge_generals_effect = {
	every_character = {
		limit = {
			has_character_flag = ITA_purge_advisor
		}
		clr_character_flag = ITA_character_can_be_purged
	}
	every_character = {
		limit = {
			has_character_flag = ITA_purge_general
		}
		retire = yes
	}
}

#Removes the purge flag from characters that was spared the purge
ITA_dont_purge_effect = {
	every_character = {
		limit = {
			has_character_flag = ITA_purge_advisor
		}

		clr_character_flag = ITA_character_can_be_purged
		clr_character_flag = ITA_purge_advisor
	}
	every_character = {
		limit = {
			has_character_flag = ITA_purge_general
		}

		clr_character_flag = ITA_character_can_be_purged
		clr_character_flag = ITA_purge_general
	}
}

#Removes purge flags
ITA_clear_purge_flag_effect = {
	every_character = {
		limit = {
			has_character_flag = ITA_purge_advisor
		}

		clr_character_flag = ITA_purge_advisor
	}
	every_character = {
		limit = {
			has_character_flag = ITA_purge_general
		}

		clr_character_flag = ITA_purge_general
	}
}

ITA_anglo_italian_cooperation_effect = {
	ENG = {
		add_opinion_modifier = {
			target = ITA
			modifier = ITA_military_cooperation_acceptance
		}
	}
	ITA = {
		add_opinion_modifier = {
			target = ENG
			modifier = ITA_military_cooperation_acceptance
		}
	}
	if = {
		limit = {
			has_tech_sharing_feature = yes
		}
		ENG = {
			add_to_tech_sharing_group = ITA_anglo_italian_tech_sharing
			add_tech_bonus = {
				name = ITA_anglo_italian_tech_sharing_name
				bonus = 0.50
				uses = 2
				category = air_equipment
			}
			add_tech_bonus = {
				name = ITA_anglo_italian_tech_sharing_name
				bonus = 0.50
				uses = 2
				category = naval_equipment
			}
		}
		ITA = {
			add_to_tech_sharing_group = ITA_anglo_italian_tech_sharing
			add_tech_bonus = {
				name = ITA_anglo_italian_tech_sharing_name
				bonus = 0.50
				uses = 2
				category = air_equipment
			}
			add_tech_bonus = {
				name = ITA_anglo_italian_tech_sharing_name
				bonus = 0.50
				uses = 2
				category = naval_equipment
			}
		}
	}
	else = {
		ENG = {
			add_tech_bonus = {
				name = ITA_anglo_italian_tech_sharing_name
				bonus = 0.75
				uses = 2
				category = air_equipment
			}
			add_tech_bonus = {
				name = ITA_anglo_italian_tech_sharing_name
				bonus = 0.75
				uses = 2
				category = naval_equipment
			}

		}
		ITA = {
			add_tech_bonus = {
				name = ITA_anglo_italian_tech_sharing_name
				bonus = 0.75
				uses = 2
				category = air_equipment
			}
			add_tech_bonus = {
				name = ITA_anglo_italian_tech_sharing_name
				bonus = 0.75
				uses = 2
				category = naval_equipment
			}
		}
	}
}

ITA_franco_italian_cooperation_effect = {
	FRA = {
		add_opinion_modifier = {
			target = ITA
			modifier = ITA_military_cooperation_acceptance
		}
	}
	ITA = {
		add_opinion_modifier = {
			target = FRA
			modifier = ITA_military_cooperation_acceptance
		}
	}
	if = {
		limit = {
			has_tech_sharing_feature = yes
		}
		FRA = {
			add_to_tech_sharing_group = ITA_franco_italian_tech_sharing
			add_tech_bonus = {
				name = ITA_franco_italian_tech_sharing_name
				bonus = 0.5
				uses = 2
				category = armor
			}
			add_tech_bonus = {
				name = ITA_franco_italian_tech_sharing_name
				bonus = 0.5
				uses = 2
				category = infantry_weapons
			}
		}
		ITA = {
			add_to_tech_sharing_group = ITA_franco_italian_tech_sharing
			add_tech_bonus = {
				name = ITA_franco_italian_tech_sharing_name
				bonus = 0.5
				uses = 2
				category = armor
			}
			add_tech_bonus = {
				name = ITA_franco_italian_tech_sharing_name
				bonus = 0.5
				uses = 2
				category = infantry_weapons
			}
		}
	}
	else = {
		FRA = {
			add_tech_bonus = {
				name = ITA_franco_italian_tech_sharing_name
				bonus = 0.75
				uses = 2
				category = armor
			}
			add_tech_bonus = {
				name = ITA_franco_italian_tech_sharing_name
				bonus = 0.75
				uses = 2
				category = infantry_weapons
			}
		}
		ITA = {
			add_tech_bonus = {
				name = ITA_franco_italian_tech_sharing_name
				bonus = 0.75
				uses = 2
				category = armor
			}
			add_tech_bonus = {
				name = ITA_franco_italian_tech_sharing_name
				bonus = 0.75
				uses = 2
				category = infantry_weapons
			}
		}
	}
}

ITA_non_aggression_pact_effect = {
	diplomatic_relation = {
		country = FROM
		relation = non_aggression_pact
		active = yes
	}
}

ITA_recognize_the_empire_effect = {
	if = {
		limit = {
			ROOT = {
				has_non_aggression_pact_with = FROM
			}
		}
		FROM = { give_guarantee = ROOT }
		give_guarantee = FROM
	}
}

ITA_promote_umberto_to_country_leader = {
	if = {
		limit = {
			ITA_prince_umberto = {
				can_be_country_leader = yes
			}
		}
		if = {
			limit = {
				ITA_prince_umberto = {
					has_ideology_group = monarchy
				}
			}
			ITA_prince_umberto = { promote_character = { ideology = dual_monarchy } }
		}
		else_if = {
			limit = {
				ITA_prince_umberto = {
					has_ideology_group = democratic
				}
			}
			ITA_prince_umberto = { promote_character = { ideology = conservatism } }
		}
	}
	else_if = {
		limit = {
			has_completed_focus = ITA_democratic_king
		}
		add_country_leader_role = {
			character =  ITA_prince_umberto
			promote_leader = yes
			country_leader = {
				ideology = conservatism
				traits = { inexperienced_monarch eager_commander }
				expire = "1965.1.1.1"
				id = -1
			}
		}
		add_country_leader_role = { #Add the Non-Aligned role too, but without promoting
			character =  ITA_prince_umberto
			country_leader = {
				ideology = dual_monarchy
				traits = { inexperienced_monarch eager_commander }
				expire = "1965.1.1.1"
				id = -1
			}
		}
		set_character_name = {
			character = ITA_prince_umberto
			name = ITA_prince_umberto_king
		}
		#BoP
		if = {
			limit = {
				has_power_balance = { id = RDS_power_balance }
			}
			set_power_balance = {
				id = RDS_power_balance
				right_side = ITA_king_umberto_side
			}
		}
		else = {
			set_power_balance = {
				id = ITA_power_balance
				right_side = ITA_king_umberto_side
			}
		}
	}
	else = {
		add_country_leader_role = {
			character =  ITA_prince_umberto
			promote_leader = yes
			country_leader = {
				ideology = dual_monarchy
				traits = { inexperienced_monarch eager_commander }
				expire = "1965.1.1.1"
				id = -1
			}
		}
		set_character_name = {
			character = ITA_prince_umberto
			name = ITA_prince_umberto_king
		}
		#BoP
		if = {
			limit = {
				has_power_balance = { id = RDS_power_balance }
			}
			set_power_balance = {
				id = RDS_power_balance
				right_side = ITA_king_umberto_side
			}
		}
		else = {
			set_power_balance = {
				id = ITA_power_balance
				right_side = ITA_king_umberto_side
			}
		}

	}

	if = {
		limit = {
			has_character = ITA_vittorio_emanuele_iii
		}
		retire_character = ITA_vittorio_emanuele_iii
	}
}

ITA_promote_cln_to_country_leader_communism = {
	add_country_leader_role = {
		character = ITA_comitato_di_liberazione_nazionale
		promote_leader = yes
		country_leader = {
			ideology = marxism
			expire = 1965.1.1
			traits = { anti_fascist_committee }
		}
	}
}

ITA_promote_cln_to_country_leader_democratic = {
	add_country_leader_role = {
		character = ITA_comitato_di_liberazione_nazionale
		promote_leader = yes
		country_leader = {
			ideology = socialism
			expire = 1965.1.1
			traits = { anti_fascist_committee }
		}
	}
}

ITA_promote_cln_to_country_leader_neutrality = {
	add_country_leader_role = {
		character = ITA_comitato_di_liberazione_nazionale
		promote_leader = yes
		country_leader = {
			ideology = centrism
			expire = 1965.1.1
			traits = { anti_fascist_committee }
		}
	}
}


ITA_mobilize_railway_guns = {
	custom_effect_tooltip = ITA_mobilize_railway_guns_tt
	hidden_effect = {
		create_railway_gun = {
			equipment = railway_gun_equipment_1
			name = "1o Cannone da 381/40"
		}
		create_railway_gun = {
			equipment = railway_gun_equipment_1
			name = "2o Cannone da 381/40"
		}
		create_railway_gun = {
			equipment = railway_gun_equipment_1
			name = "3o Cannone da 381/40"
		}
		create_railway_gun = {
			equipment = railway_gun_equipment_1
			name = "4o Cannone da 381/40"
		}
	}
}

ITA_add_country_leader_role_to_gramsci = {
	if = { #GRAMSCI RECOVERED
		limit = {
			ITA_antonio_gramsci = {
				has_character_flag = ITA_improve_gramscis_trait_flag
			}
		}
		effect_tooltip = {
			ITA_antonio_gramsci = {
				swap_country_leader_traits = {
					remove = indisposed_political_scientist
					add = cultural_hegemony_theorist
				}
			}
		}

		hidden_effect = {
			add_country_leader_role = {
				character =  ITA_antonio_gramsci # optional if inside character scope
				promote_leader = yes
				country_leader = {
					ideology = marxism
					expire = 1965.1.1
					traits = { cultural_hegemony_theorist }
				}
			}
		}
	}
	else = { #GRAMSCI STILL SICK
		add_country_leader_role = {
			character =  ITA_antonio_gramsci # optional if inside character scope
			promote_leader = yes
			country_leader = {
				ideology = marxism
				expire = 1965.1.1
				traits = { indisposed_political_scientist }
			}
		}
	}
}

ITA_pope_takes_over = {
	#IDEOLOGY
	if = {
		limit = {
			NOT = { has_government = neutrality }
		}
		set_politics = {
			ruling_party = neutrality
			elections_allowed = no
			long_name = PAP_neutrality_party
			name = PAP_neutrality_party
		}
	}
	else = {
		set_party_name = {
			ideology = monarchy
			name = PAP_neutrality_party
			long_name = PAP_neutrality_party
		}
	}

	#ONE POPE TO RULE THEM ALL
	if = {
		limit = {
			has_global_flag = ITA_pope_pio_xi_dead_flag
		}
		add_country_leader_role = {
			character =  ITA_papa_pio_xii # optional if inside character scope
			promote_leader = yes
			country_leader = {
				ideology = theocratic_monarchy
				expire = 1958.12.16
				traits = { supreme_pontiff grand_master_of_the_equestrian_order_of_the_holy_sepulcher_of_jerusalem }
			}
		}
	}
	else = {
		add_country_leader_role = {
			character =  ITA_papa_pio_xi # optional if inside character scope
			promote_leader = yes
			country_leader = {
				ideology = theocratic_monarchy
				expire = 1958.12.16
				traits = { supreme_pontiff temperamental }
			}
		}
	}
}

ITA_increase_resource_amount_in_state = { #THIS is state
	custom_effect_tooltip = ITA_increase_resource_amount_in_state_tt
	hidden_effect = { #This does not generate tt anyways, but just in case. If changing values below, update tooltip above
		if = {
			limit = {
				has_resources_amount = {
					resource = oil
					amount > 0
				}
			}
			add_resource = {
				type = oil
				amount = 2
			}
		}
		if = {
			limit = {
				has_resources_amount = {
					resource = aluminium
					amount > 0
				}
			}
			add_resource = {
				type = aluminium
				amount = 2
			}
		}
		if = {
			limit = {
				has_resources_amount = {
					resource = rubber
					amount > 0
				}
			}
			add_resource = {
				type = rubber
				amount = 2
			}
		}
		if = {
			limit = {
				has_resources_amount = {
					resource = tungsten
					amount > 0
				}
			}
			add_resource = {
				type = tungsten
				amount = 2
			}
		}
		if = {
			limit = {
				has_resources_amount = {
					resource = steel
					amount > 0
				}
			}
			add_resource = {
				type = steel
				amount = 2
			}
		}
		if = {
			limit = {
				has_resources_amount = {
					resource = chromium
					amount > 0
				}
			}
			add_resource = {
				type = chromium
				amount = 2
			}
		}
	}
}


########  ##          ###    ##    ## ########    ######## ######## ##     ## ########  ##          ###    ######## ########  ######
##     ## ##         ## ##   ###   ## ##             ##    ##       ###   ### ##     ## ##         ## ##      ##    ##       ##    ##
##     ## ##        ##   ##  ####  ## ##             ##    ##       #### #### ##     ## ##        ##   ##     ##    ##       ##
########  ##       ##     ## ## ## ## ######         ##    ######   ## ### ## ########  ##       ##     ##    ##    ######    ######
##        ##       ######### ##  #### ##             ##    ##       ##     ## ##        ##       #########    ##    ##             ##
##        ##       ##     ## ##   ### ##             ##    ##       ##     ## ##        ##       ##     ##    ##    ##       ##    ##
##        ######## ##     ## ##    ## ########       ##    ######## ##     ## ##        ######## ##     ##    ##    ########  ######


ITA_add_citta_dell_aria_templates = {
	create_equipment_variant = {
		name = "Ro.57"
		type = medium_plane_fighter_airframe_1
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = heavy_mg_2x
				fixed_auxiliary_weapon_slot_1 = aircraft_cannon_1_2x
				fixed_auxiliary_weapon_slot_2 = bomb_locks
				engine_type_slot = engine_2_2x
			}
		icon = "GFX_ITA_heavy_fighter1_medium"
	}

	create_equipment_variant = {
		name = "C.200 Saetta"
		type = small_plane_airframe_1
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = heavy_mg_2x
				engine_type_slot = engine_2_1x
			}
		icon = "GFX_ITA_fighter1_medium"
	}

	create_equipment_variant = {
		name = "Ca.310"
		type = small_plane_cas_airframe_1
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = bomb_locks
				fixed_auxiliary_weapon_slot_1 = recon_camera
				engine_type_slot = engine_1_2x
				special_type_slot_1 = fuel_tanks_small
			}
		icon = "GFX_ITA_CAS2_medium"
	}
}

ITA_add_reggianes_exports_templates = {

	create_equipment_variant = {
		name = "Re.2000"
		type = small_plane_airframe_1
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = heavy_mg_2x
				engine_type_slot = engine_1_1x
			}
		icon = "GFX_ITA_fighter1_medium"
	}
}

ITA_naval_air_coordination_templates = {

	if = { #CANT Z.1007 Alcione also unlocked in Bomber Designs focus
		limit = {
			NOT = { has_completed_focus = ITA_bomber_designs }
		}
		create_equipment_variant = {
			name = "CANT Z.1007 Alcione"
			type = medium_plane_airframe_1
			parent_version = 0
			modules = {
					fixed_main_weapon_slot = medium_bomb_bay
					fixed_auxiliary_weapon_slot_1 = bomb_locks
					fixed_auxiliary_weapon_slot_2 = torpedo_mounting
					fixed_auxiliary_weapon_slot_3 = torpedo_mounting
					special_type_slot_1 = lmg_defense_turret_2x
					special_type_slot_2 = hmg_defense_turret_2x
					engine_type_slot = engine_3_3x #Increased tier due to thrust/weight issues
				}
			icon = "GFX_ITA_tactical_bomber1_medium"
		}
	}
}

ITA_add_long_range_aircraft_templates = {

	create_equipment_variant = {
		name = "Ro.58"
		type = small_plane_airframe_2
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = aircraft_cannon_1_2x
				fixed_auxiliary_weapon_slot_1 = aircraft_cannon_1_2x
				fixed_auxiliary_weapon_slot_2 = aircraft_cannon_1_1x
				engine_type_slot = engine_3_2x
				special_type_slot_1 = fuel_tanks_small
				special_type_slot_2 = hmg_defense_turret
			}
		icon = "GFX_ITA_heavy_fighter2_medium"
	}

	create_equipment_variant = {
		name = "P.108"
		type = large_plane_airframe_2
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = large_bomb_bay
				fixed_auxiliary_weapon_slot_1 = large_bomb_bay
				special_type_slot_1 = hmg_defense_turret_2x
				special_type_slot_2 = hmg_defense_turret_2x
				engine_type_slot = engine_3_4x
			}
		icon = "GFX_ITA_strategic_bomber3_medium"
	}

	create_equipment_variant = {
		name = "CANTZ.511"
		type = large_plane_maritime_patrol_plane_airframe_2
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = torpedo_mounting
				fixed_auxiliary_weapon_slot_1 = torpedo_mounting
				#fixed_auxiliary_weapon_slot_2 = torpedo_mounting #Removed due to thrust/weight issues
				fixed_auxiliary_weapon_slot_3 = large_bomb_bay
				special_type_slot_1 = hmg_defense_turret_2x
				special_type_slot_2 = hmg_defense_turret_2x
				special_type_slot_3 = hmg_defense_turret_2x
				special_type_slot_4 = flying_boat_large
				engine_type_slot = engine_3_4x #Increased tier due to thrust/weight issues

			}
		icon = "GFX_ITA_strategic_bomber1_medium"
	}
}

ITA_add_bomber_designs_templates = {

	create_equipment_variant = {
		name = "Ba.201"
		type = small_plane_cas_airframe_2
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = bomb_locks
				fixed_auxiliary_weapon_slot_1 = heavy_mg_2x
				engine_type_slot = engine_2_1x
			}
		icon = "GFX_ITA_CAS2_medium"
	}

	if = { #CANT Z.1007 Alcione also unlocked in Naval-Air Coordination focus
		limit = {
			NOT = { has_completed_focus = ITA_naval_air_coordination }
		}
		create_equipment_variant = {
			name = "CANT Z.1007 Alcione"
			type = medium_plane_airframe_1
			parent_version = 0
			modules = {
					fixed_main_weapon_slot = medium_bomb_bay
					fixed_auxiliary_weapon_slot_1 = bomb_locks
					fixed_auxiliary_weapon_slot_2 = torpedo_mounting
					fixed_auxiliary_weapon_slot_3 = torpedo_mounting
					special_type_slot_1 = lmg_defense_turret_2x
					special_type_slot_2 = hmg_defense_turret_2x
					engine_type_slot = engine_3_3x #Increased tier due to thrust/weight issues
				}
			icon = "GFX_ITA_tactical_bomber1_medium"
		}
	}
}

ITA_add_fighter_designs_templates = {

	create_equipment_variant = {
		name = "C.202 Folgore"
		type = small_plane_airframe_2
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = light_mg_2x
				fixed_auxiliary_weapon_slot_1 = heavy_mg_2x
				fixed_auxiliary_weapon_slot_2 = bomb_locks
				engine_type_slot = engine_2_1x
				special_type_slot_1 = drop_tanks
			}
		icon = "GFX_ITA_fighter2_medium"
	}

	create_equipment_variant = {
		name = "G.55 Centauro"
		type = small_plane_airframe_3
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = aircraft_cannon_1_2x
				fixed_auxiliary_weapon_slot_1 = aircraft_cannon_1_1x
				fixed_auxiliary_weapon_slot_2 = heavy_mg_2x
				fixed_auxiliary_weapon_slot_3 = bomb_locks
				engine_type_slot = engine_3_1x
			}
		icon = "GFX_ITA_fighter3_medium"
	}

}

ITA_add_multirole_aircraft_templates = {

	create_equipment_variant = {
		name = "Cant.Z506"
		type = medium_plane_airframe_2
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = medium_bomb_bay
				fixed_auxiliary_weapon_slot_1 = torpedo_mounting
				engine_type_slot = engine_1_3x
				special_type_slot_1 = flying_boat_medium
				special_type_slot_2 = hmg_defense_turret
			}
		icon = "GFX_ITA_fighter2_medium"
	}

	create_equipment_variant = {
		name = "Ca.311"
		type = small_plane_cas_airframe_1
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = bomb_locks
				fixed_auxiliary_weapon_slot_1 = light_mg_2x
				engine_type_slot = engine_1_2x
				special_type_slot_1 = lmg_defense_turret
				special_type_slot_2 = armor_plate_small
			}
		icon = "GFX_ITA_fighter3_medium"
	}

}

ITA_add_supremacy_in_the_skies_templates = {

	create_equipment_variant = {
		name = "SM.84"
		type = medium_plane_airframe_2
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = medium_bomb_bay
				fixed_auxiliary_weapon_slot_1 = torpedo_mounting
				fixed_auxiliary_weapon_slot_2 = torpedo_mounting
				engine_type_slot = engine_3_3x #Increased tier due to thrust/weight issues
				special_type_slot_1 = hmg_defense_turret_2x
				special_type_slot_2 = hmg_defense_turret_2x
				special_type_slot_3 = armor_plate_medium
			}
		icon = "GFX_ITA_tactical_bomber2_medium"
	}

	create_equipment_variant = {
		name = "Campini N.1"
		type = small_plane_airframe_4
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = aircraft_cannon_2_2x
				fixed_auxiliary_weapon_slot_1 = aircraft_cannon_2_2x
				engine_type_slot = jet_engine_1x
				special_type_slot_1 = armor_plate_small
				special_type_slot_2 = self_sealing_fuel_tanks_small
			}
		icon = "GFX_ITA_jet_plane_1_medium"
	}

}

ITA_add_the_king_of_the_skies_template_production_and_wing = {

	create_equipment_variant = {
		name = "Aquila Magna"
		type = large_plane_airframe_3
		parent_version = 0
		modules = {
				fixed_main_weapon_slot = large_bomb_bay
				fixed_auxiliary_weapon_slot_1 = large_bomb_bay
				fixed_auxiliary_weapon_slot_2 = large_bomb_bay
				fixed_auxiliary_weapon_slot_3 = torpedo_mounting
				fixed_auxiliary_weapon_slot_4 = torpedo_mounting
				engine_type_slot = engine_4_6x
				special_type_slot_1 = cannon_defense_turret_2x
				special_type_slot_2 = cannon_defense_turret_2x
				special_type_slot_3 = flying_boat_large
				special_type_slot_4 = armor_plate_large
				special_type_slot_5 = self_sealing_fuel_tanks_large
				special_type_slot_6 = fuel_tanks_large
			}
		icon = "GFX_ITA_strategic_bomber3_medium"
	}

	add_equipment_production = {
		equipment = {
			type = large_plane_airframe_3
			creator = "ITA"
			version_name = "Aquila Magna"
		}

		requested_factories = 1
		progress = 0.6
		efficiency = 50
	}

	custom_effect_tooltip = ITA_aquila_magna_tt
	hidden_effect = {
		load_oob = ITA_aquila_magna
	}
}


########    ###    ##    ## ##    ##    ######## ######## ##     ## ########  ##          ###    ######## ########  ######
   ##      ## ##   ###   ## ##   ##        ##    ##       ###   ### ##     ## ##         ## ##      ##    ##       ##    ##
   ##     ##   ##  ####  ## ##  ##         ##    ##       #### #### ##     ## ##        ##   ##     ##    ##       ##
   ##    ##     ## ## ## ## #####          ##    ######   ## ### ## ########  ##       ##     ##    ##    ######    ######
   ##    ######### ##  #### ##  ##         ##    ##       ##     ## ##        ##       #########    ##    ##             ##
   ##    ##     ## ##   ### ##   ##        ##    ##       ##     ## ##        ##       ##     ##    ##    ##       ##    ##
   ##    ##     ## ##    ## ##    ##       ##    ######## ##     ## ##        ######## ##     ##    ##    ########  ######



#ITA_add_basic_light_flamethrower_template = {
#	create_equipment_variant = {
#		name = "L3 Lf"
#		type = light_tank_chassis_1
#		parent_version = 0
#		modules = {
#			main_armament_slot = flamethrower
#			turret_type_slot = tank_light_fixed_superstructure_turret
#			suspension_type_slot = tank_bogie_suspension
#			armor_type_slot = tank_riveted_armor
#			engine_type_slot = tank_gasoline_engine
#		}
#		upgrades = {
#			tank_nsb_engine_upgrade = 1
#			tank_nsb_armor_upgrade = 1
#		}
#		icon = "GFX_ITA_basic_light_tank_medium"
#	}
#}

ITA_add_improved_light_tank_templates = {
	#L6/40
	create_equipment_variant = {
		name = "L6/40"
		type = light_tank_chassis_2
		parent_version = 0
		modules = {
			main_armament_slot = tank_auto_cannon
			layout_type_slot = tank_center_single_turret_layout
			turret_type_slot = tank_light_one_man_tank_turret
			suspension_type_slot = tank_bogie_suspension
			continuous_track_type_slot = tank_continuous_track_full_metal
			armor_type_slot = tank_riveted_armor
			engine_type_slot = tank_gasoline_engine
		}
		upgrades = {
			tank_nsb_engine_upgrade = 2
			tank_nsb_armor_upgrade = 4
		}
		icon = "GFX_ITA_improved_light_tank_medium"
	}

	if = {
		limit = {
			has_dlc = "Axis Armor Pack"
		}
		#L40 da 47/32
		create_equipment_variant = {
			name = "Semovente L40 da 47/32"
			type = light_tank_destroyer_chassis_1
			parent_version = 0
			modules = {
				main_armament_slot = tank_medium_cannon
				layout_type_slot = tank_front_single_turret_layout
				turret_type_slot = tank_light_fixed_superstructure_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
			}
			upgrades = {
				tank_nsb_engine_upgrade = 2
				tank_nsb_armor_upgrade = 4
			}
			icon = "GFX_ITA_improved_light_td_medium"
		}
	}
	else = {
		#L40 da 47/32
		create_equipment_variant = {
			name = "Semovente L40 da 47/32"
			type = light_tank_destroyer_chassis_1
			parent_version = 0
			modules = {
				main_armament_slot = tank_medium_cannon
				layout_type_slot = tank_front_single_turret_layout
				turret_type_slot = tank_light_fixed_superstructure_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
			}
			upgrades = {
				tank_nsb_engine_upgrade = 2
				tank_nsb_armor_upgrade = 4
			}
			icon = "GFX_generic_light_BBA_camo"
		}
	}
}

ITA_add_basic_medium_tank_templates = {
	#M11/39
	create_equipment_variant = {
		name = "M11/39"
		type = medium_tank_chassis_1
		parent_version = 0
		modules = {
			main_armament_slot = tank_high_velocity_cannon
			layout_type_slot = tank_center_single_turret_layout
			turret_type_slot = tank_medium_fixed_superstructure_turret
			suspension_type_slot = tank_bogie_suspension
			continuous_track_type_slot = tank_continuous_track_full_metal
			armor_type_slot = tank_riveted_armor
			engine_type_slot = tank_diesel_engine
			special_type_slot_1 = secondary_turret_hmg
		}
		upgrades = {
			tank_nsb_engine_upgrade = 2
			tank_nsb_armor_upgrade = 3
		}
		icon = "GFX_ITA_basic_medium_tank_medium"
	}
	#M11/40
	create_equipment_variant = {
		name = "M13/40"
		type = medium_tank_chassis_1
		parent_version = 0
		modules = {
			main_armament_slot = tank_medium_cannon
			layout_type_slot = tank_center_single_turret_layout
			turret_type_slot = tank_medium_two_man_tank_turret
			suspension_type_slot = tank_bogie_suspension
			continuous_track_type_slot = tank_continuous_track_full_metal
			armor_type_slot = tank_riveted_armor
			engine_type_slot = tank_diesel_engine
			special_type_slot_1 = additional_machine_guns
			special_type_slot_2 = tank_radio_1
		}
		upgrades = {
			tank_nsb_engine_upgrade = 2
			tank_nsb_armor_upgrade = 3
		}
		icon = "GFX_ITA_basic_medium_tank_medium"
	}
	#SEMOVENTE da 75/18 (SPG)
	if = {
		limit = {
			has_dlc = "Axis Armor Pack"
		}
		create_equipment_variant = {
			name = "Semovente da 75/18"
			type = medium_tank_chassis_1
			parent_version = 0
			modules = {
				main_armament_slot = tank_close_support_gun
				layout_type_slot = tank_center_single_turret_layout
				turret_type_slot = tank_medium_fixed_superstructure_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
				special_type_slot_1 = tank_radio_1
			}
			upgrades = {
				tank_nsb_engine_upgrade = 3
				tank_nsb_armor_upgrade = 4
			}
			icon = "GFX_ITA_improved_medium_art_medium"
		}
	}
	else = {
		create_equipment_variant = {
			name = "Semovente da 75/18"
			type = medium_tank_chassis_1
			parent_version = 0
			modules = {
				main_armament_slot = tank_close_support_gun
				layout_type_slot = tank_center_single_turret_layout
				turret_type_slot = tank_medium_fixed_superstructure_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
				special_type_slot_1 = tank_radio_1
			}
			upgrades = {
				tank_nsb_engine_upgrade = 3
				tank_nsb_armor_upgrade = 4
			}
			icon = "GFX_ITA_medium_BBA_camo"
		}
	}

	#SEMOVENTE da 90/53 (AT)
	if = {
		limit = {
			has_dlc = "Axis Armor Pack"
		}
		create_equipment_variant = {
			name = "Semovente da 90/53"
			type = medium_tank_chassis_1
			parent_version = 0
			modules = {
				main_armament_slot = tank_high_velocity_cannon_2
				layout_type_slot = tank_back_single_turret_layout
				turret_type_slot = tank_medium_fixed_superstructure_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
			}
			upgrades = {
				tank_nsb_engine_upgrade = 3
				tank_nsb_armor_upgrade = 3
			}
			icon = "GFX_ITA_advanced_medium_td_medium"
			role_icon_index = 2
			model = ITA_medium_tank_destroyer_brigade_2_entity
		}
	}
	else = {
		create_equipment_variant = {
			name = "Semovente da 90/53"
			type = medium_tank_chassis_1
			parent_version = 0
			modules = {
				main_armament_slot = tank_high_velocity_cannon_2
				layout_type_slot = tank_back_single_turret_layout
				turret_type_slot = tank_medium_fixed_superstructure_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
			}
			upgrades = {
				tank_nsb_engine_upgrade = 3
				tank_nsb_armor_upgrade = 3
			}
			icon = "GFX_ITA_heavy_CCB_camo"
		}
	}
}

ITA_add_improved_medium_tank_templates = {
	#M14/41
	create_equipment_variant = {
		name = "M14/41"
		type = medium_tank_chassis_2
		parent_version = 0
		modules = {
			main_armament_slot = tank_medium_cannon
			layout_type_slot = tank_center_single_turret_layout
			turret_type_slot = tank_medium_two_man_tank_turret
			suspension_type_slot = tank_bogie_suspension
			continuous_track_type_slot = tank_continuous_track_full_metal
			armor_type_slot = tank_riveted_armor
			engine_type_slot = tank_diesel_engine
			special_type_slot_1 = additional_machine_guns
			special_type_slot_2 = tank_radio_1
		}
		upgrades = {
			tank_nsb_engine_upgrade = 3
			tank_nsb_armor_upgrade = 3
		}
		icon = "GFX_ITA_basic_medium_tank_medium"
	}
	#M15/42
	create_equipment_variant = {
		name = "M15/42"
		type = medium_tank_chassis_2
		parent_version = 0
		modules = {
			main_armament_slot = tank_medium_cannon_2
			layout_type_slot = tank_center_single_turret_layout
			turret_type_slot = tank_medium_two_man_tank_turret
			suspension_type_slot = tank_bogie_suspension
			continuous_track_type_slot = tank_continuous_track_full_metal
			armor_type_slot = tank_riveted_armor
			engine_type_slot = tank_gasoline_engine
			special_type_slot_1 = additional_machine_guns
			special_type_slot_2 = tank_radio_1
		}
		upgrades = {
			tank_nsb_engine_upgrade = 4
			tank_nsb_armor_upgrade = 5
		}
		icon = "GFX_ITA_basic_medium_tank_medium"
	}

	#SEMOVENTE da 75/34 (SPG-AT)
	if = {
		limit = {
			has_dlc = "Axis Armor Pack"
		}
		create_equipment_variant = {
			name = "Semovente da 75/34"
			type = medium_tank_chassis_2
			parent_version = 0
			modules = {
				main_armament_slot = tank_high_velocity_cannon
				layout_type_slot = tank_center_single_turret_layout
				turret_type_slot = tank_medium_fixed_superstructure_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
				special_type_slot_1 = tank_radio_1
			}
			upgrades = {
				tank_nsb_engine_upgrade = 4
				tank_nsb_armor_upgrade = 4
			}
			icon = "GFX_ITA_basic_light_td_medium"
		}
	}
	else = {
		create_equipment_variant = {
			name = "Semovente da 75/34"
			type = medium_tank_chassis_2
			parent_version = 0
			modules = {
				main_armament_slot = tank_high_velocity_cannon
				layout_type_slot = tank_center_single_turret_layout
				turret_type_slot = tank_medium_fixed_superstructure_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
				special_type_slot_1 = tank_radio_1
			}
			upgrades = {
				tank_nsb_engine_upgrade = 4
				tank_nsb_armor_upgrade = 4
			}
			icon = "GFX_ITA_medium_BAA_camo"
		}
	}

	#SEMOVENTE da 105/25 (SPG)
	if = {
		limit = {
			has_dlc = "Axis Armor Pack"
		}
		create_equipment_variant = {
			name = "Semovente da 105/25"
			type = medium_tank_chassis_2
			parent_version = 0
			modules = {
				main_armament_slot = tank_high_velocity_cannon_2
				layout_type_slot = tank_center_single_turret_layout
				turret_type_slot = tank_medium_fixed_superstructure_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_welded_armor
				engine_type_slot = tank_gasoline_engine
				special_type_slot_1 = tank_radio_1
				special_type_slot_2 = additional_machine_guns
			}
			upgrades = {
				tank_nsb_engine_upgrade = 4
				tank_nsb_armor_upgrade = 6
			}
			icon = "GFX_ITA_improved_medium_td_medium"
		}
	}
	else = {
		create_equipment_variant = {
			name = "Semovente da 105/25"
			type = medium_tank_chassis_2
			parent_version = 0
			modules = {
				main_armament_slot = tank_high_velocity_cannon_2
				layout_type_slot = tank_center_single_turret_layout
				turret_type_slot = tank_medium_fixed_superstructure_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_welded_armor
				engine_type_slot = tank_gasoline_engine
				special_type_slot_1 = tank_radio_1
				special_type_slot_2 = additional_machine_guns
			}
			upgrades = {
				tank_nsb_engine_upgrade = 4
				tank_nsb_armor_upgrade = 6
			}
			icon = "GFX_ITA_medium_ABB_camo"
		}
	}

	#SEMOVENTE da 20/70 Quadruplo (AA)
	if = {
		limit = {
			has_dlc = "Axis Armor Pack"
		}
		create_equipment_variant = {
			name = "Semovente da 20/70 Quadruplo"
			type = medium_tank_aa_chassis_2
			parent_version = 0
			modules = {
				main_armament_slot = tank_anti_air_cannon
				layout_type_slot = tank_center_single_turret_layout
				turret_type_slot = tank_medium_two_man_tank_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
			}
			upgrades = {
				tank_nsb_engine_upgrade = 4
				tank_nsb_armor_upgrade = 4
			}
			icon = "GFX_ITA_advanced_medium_spaa_medium"
		}
	}
	else = {
		create_equipment_variant = {
			name = "Semovente da 20/70 Quadruplo"
			type = medium_tank_aa_chassis_2
			parent_version = 0
			modules = {
				main_armament_slot = tank_anti_air_cannon
				layout_type_slot = tank_center_single_turret_layout
				turret_type_slot = tank_medium_two_man_tank_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
			}
			upgrades = {
				tank_nsb_engine_upgrade = 4
				tank_nsb_armor_upgrade = 4
			}
			icon = "GFX_ITA_basic_medium_tank_medium"
		}
	}
}

ITA_add_improved_heavy_tank_templates = {
	#P26/40 (Heavy tank)
	create_equipment_variant = {
		name = "P26/40"
		type = heavy_tank_chassis_2
		parent_version = 0
		modules = {
			main_armament_slot = tank_heavy_cannon
			layout_type_slot = tank_center_single_turret_layout
			turret_type_slot = tank_heavy_two_man_tank_turret
			suspension_type_slot = tank_bogie_suspension
			continuous_track_type_slot = tank_continuous_track_full_metal
			armor_type_slot = tank_riveted_armor
			engine_type_slot = tank_diesel_engine
			special_type_slot_1 = tank_radio_1
		}
		upgrades = {
			tank_nsb_engine_upgrade = 6
			tank_nsb_armor_upgrade = 6
		}
		icon = "GFX_ITA_improved_heavy_tank_medium"
	}
}

ITA_add_advanced_medium_tank_templates = {
	#SEMOVENTE da 75/46 (Medium AT)
	if = {
		limit = {
			has_dlc = "Axis Armor Pack"
		}
		create_equipment_variant = {
			name = "Semovente da 75/46"
			type = medium_tank_destroyer_chassis_3
			parent_version = 0
			modules = {
				main_armament_slot = tank_heavy_cannon
				layout_type_slot = tank_front_single_turret_layout
				turret_type_slot = tank_medium_fixed_superstructure_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_diesel_engine
				special_type_slot_1 = tank_radio_1
			}
			upgrades = {
				tank_nsb_engine_upgrade = 4
				tank_nsb_armor_upgrade = 7
			}
			icon = "GFX_ITA_advanced_medium_art_medium"
		}
	}
	else = {
		create_equipment_variant = {
			name = "Semovente da 75/46"
			type = medium_tank_destroyer_chassis_3
			parent_version = 0
			modules = {
				main_armament_slot = tank_heavy_cannon
				layout_type_slot = tank_front_single_turret_layout
				turret_type_slot = tank_medium_fixed_superstructure_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_diesel_engine
				special_type_slot_1 = tank_radio_1
			}
			upgrades = {
				tank_nsb_engine_upgrade = 4
				tank_nsb_armor_upgrade = 7
			}
			icon = "GFX_ITA_medium_BAA_camo"
		}
	}

	#SEMOVENTE DA 149/40 (Medium SPG)
	if = {
		limit = {
			has_dlc = "Axis Armor Pack"
		}
		create_equipment_variant = {
			name = "Semovente da 149/40"
			type = medium_tank_artillery_chassis_3
			parent_version = 0
			modules = {
				main_armament_slot = tank_medium_howitzer_2
				layout_type_slot = tank_back_single_turret_layout
				turret_type_slot = tank_medium_fixed_superstructure_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
			}
			upgrades = {
				tank_nsb_engine_upgrade = 5
				tank_nsb_armor_upgrade = 1
			}
			icon = "GFX_ITA_improved_heavy_art_medium"
		}
	}
	else = {
		create_equipment_variant = {
			name = "Semovente da 149/40"
			type = medium_tank_artillery_chassis_3
			parent_version = 0
			modules = {
				main_armament_slot = tank_medium_howitzer_2
				layout_type_slot = tank_back_single_turret_layout
				turret_type_slot = tank_medium_fixed_superstructure_turret
				suspension_type_slot = tank_bogie_suspension
				continuous_track_type_slot = tank_continuous_track_full_metal
				armor_type_slot = tank_riveted_armor
				engine_type_slot = tank_gasoline_engine
			}
			upgrades = {
				tank_nsb_engine_upgrade = 5
				tank_nsb_armor_upgrade = 1
			}
			icon = "GFX_ITA_heavy_CBC"
		}
	}

	#M16/43 Sahariano (Medium Tank)
	create_equipment_variant = {
		name = "M16/43"
		type = medium_tank_chassis_3
		parent_version = 0
		modules = {
			main_armament_slot = tank_medium_cannon
			layout_type_slot = tank_front_single_turret_layout
			turret_type_slot = tank_medium_two_man_tank_turret
			suspension_type_slot = tank_torsion_bar_suspension
			continuous_track_type_slot = tank_continuous_track_full_metal
			armor_type_slot = tank_riveted_armor
			engine_type_slot = tank_gasoline_engine
			special_type_slot_1 = tank_radio_1
		}
		upgrades = {
			tank_nsb_engine_upgrade = 6
			tank_nsb_armor_upgrade = 3
		}
		icon = "GFX_ITA_basic_medium_tank_medium"
	}
}

ITA_add_advanced_heavy_tank_templates = {
	#P43 (Heavy Tank)
	create_equipment_variant = {
		name = "P43"
		type = heavy_tank_chassis_3
		parent_version = 0
		modules = {
			main_armament_slot = tank_heavy_cannon_2
			layout_type_slot = tank_center_single_turret_layout
			turret_type_slot = tank_heavy_three_man_tank_turret
			suspension_type_slot = tank_bogie_suspension
			continuous_track_type_slot = tank_continuous_track_full_metal
			armor_type_slot = tank_welded_armor
			engine_type_slot = tank_diesel_engine
			special_type_slot_1 = tank_radio_1
		}
		upgrades = {
			tank_nsb_engine_upgrade = 8
			tank_nsb_armor_upgrade = 10
		}
		icon = "GFX_ITA_advanced_heavy_tank_medium"
	}
}

ITA_add_il_duce_sh_tank_template_and_production = {
	#SH template
	create_equipment_variant = {
		name = "Il Duce"
		type = super_heavy_tank_chassis_1
		parent_version = 0
		modules = {
			main_armament_slot = tank_super_heavy_cannon
			layout_type_slot = tank_center_single_turret_layout
			turret_type_slot = tank_super_heavy_three_man_tank_turret
			suspension_type_slot = tank_bogie_suspension
			continuous_track_type_slot = tank_continuous_track_full_metal
			armor_type_slot = tank_riveted_armor
			engine_type_slot = tank_gasoline_engine
			special_type_slot_1 = armor_skirts
			special_type_slot_2 = secondary_turret_small_cannon
			special_type_slot_3 = secondary_turret_small_cannon
			special_type_slot_4 = tank_radio_2
		}
		upgrades = {
			tank_nsb_engine_upgrade = 16
			tank_nsb_armor_upgrade = 6
		}
		icon = "GFX_ITA_super_heavy_tank_medium"
	}

	add_equipment_production = {
		equipment = {
			type = super_heavy_tank_chassis_1
			creator = "ITA"
			version_name = "Il Duce"
		}

		requested_factories = 1
		progress = 0.6
		efficiency = 50
	}
}

ITA_add_modern_musculus_sh_tank_template_and_production = {
	#SH template
	create_equipment_variant = {
		name = "Cataphract Mortis"
		type = super_heavy_tank_chassis_1
		parent_version = 0
		modules = {
			main_armament_slot = tank_super_heavy_cannon
			layout_type_slot = tank_center_single_turret_layout
			turret_type_slot = tank_super_heavy_three_man_tank_turret
			suspension_type_slot = tank_bogie_suspension
			continuous_track_type_slot = tank_continuous_track_full_metal
			armor_type_slot = tank_welded_armor
			engine_type_slot = tank_gasoline_engine
			special_type_slot_1 = armor_skirts
			special_type_slot_2 = secondary_turret_small_cannon
			special_type_slot_3 = additional_machine_guns
			special_type_slot_4 = wet_ammo_storage
		}
		upgrades = {
			tank_nsb_engine_upgrade = 16
			tank_nsb_armor_upgrade = 12
		}
		icon = "GFX_ITA_super_heavy_tank_medium"
	}

	add_equipment_production = {
		equipment = {
			type = super_heavy_tank_chassis_1
			creator = "ITA"
			version_name = "Caesar"
		}

		requested_factories = 1
		progress = 0.6
		efficiency = 50
	}
}

ITA_add_hand_of_god_sh_tank_template_and_production = {
	#SH template
	create_equipment_variant = {
		name = "The Hand of God"
		type = super_heavy_tank_artillery_chassis_1
		parent_version = 0
		modules = {
			main_armament_slot = tank_rocket_launcher_2
			layout_type_slot = tank_front_single_turret_layout
			turret_type_slot = tank_heavy_two_man_tank_turret
			suspension_type_slot = tank_bogie_suspension
			continuous_track_type_slot = tank_continuous_track_full_metal
			armor_type_slot = tank_riveted_armor
			engine_type_slot = tank_gasoline_engine
			special_type_slot_1 = armor_skirts
			special_type_slot_2 = secondary_turret_small_cannon
			special_type_slot_3 = secondary_turret_small_cannon
			special_type_slot_4 = extra_ammo_storage
		}
		upgrades = {
			tank_nsb_engine_upgrade = 10
			tank_nsb_armor_upgrade = 6
		}
		icon = "GFX_ITA_super_heavy_tank_medium"
	}

	add_equipment_production = {
		equipment = {
			type = super_heavy_tank_artillery_chassis_1
			creator = "ITA"
			version_name = "The Hand of God"
		}

		requested_factories = 1
		progress = 0.6
		efficiency = 50
	}
}


### OPERATIVES
ITA_create_rosa_dainelli_operative = { #SIM
	create_operative_leader = {
		name = "Rosa Dainelli"
		GFX = GFX_portrait_ITA_rosa_dainelli
		traits = { operative_commando operative_demolition_expert }
		bypass_recruitment = no
		available_to_spy_master = yes
		nationalities = { ITA ETH }
	}
}

ITA_create_padre_ildefonso_operative = { #FASCIST
	create_operative_leader = {
		name = "Padre Ildefonso" #Alfredo Epaminonda Troya
		GFX = GFX_portrait_ITA_epaminonda_troya
		traits = { operative_master_interrogator operative_natural_orator }
		bypass_recruitment = no
		available_to_spy_master = yes
		nationalities = { ITA }
	}
}

ITA_create_pietro_koch_operative = { #FASCIST
	create_operative_leader = {
		name = "Pietro Koch"
		GFX = GFX_portrait_ITA_pietro_koch
		traits = { operative_master_interrogator operative_tough operative_well_groomed }
		bypass_recruitment = no
		available_to_spy_master = yes
		nationalities = { ITA GER }
	}
}

ITA_create_carmelo_borg_pisani_operative = { #FASCIST/MONARCHIST
	create_operative_leader = {
		name = "Carmelo Borg Pisani"
		GFX = GFX_portrait_ITA_carmelo_borg_pisani
		traits = { operative_natural_orator operative_well_groomed }
		bypass_recruitment = no
		available_to_spy_master = yes
		nationalities = { ITA ENG }
	}
}

ITA_create_hugh_o_flaherty_operative = { #MONARCHIST (PAPAL)
	create_operative_leader = {
		name = "Hugh O'Flaherty" #"The Scarlet Pimpernel of the Vatican"
		GFX = GFX_portrait_ITA_hugh_o_flaherty
		traits = { operative_escape_artist operative_natural_orator operative_linguist }
		bypass_recruitment = no
		available_to_spy_master = yes
		nationalities = { ITA IRE }
	}
}

ITA_create_maurizio_giglio_operative = { #DEMOCRATIC
	create_operative_leader = { #This guy worked for the allies
		name = "Maurizio Giglio"
		GFX = GFX_portrait_ITA_maurizio_giglio
		traits = { operative_infiltrator operative_tough operative_double_agent }
		bypass_recruitment = no
		available_to_spy_master = yes
		nationalities = { ITA }
	}
}

ITA_create_emilio_faldella_operative = { #DEMOCRATIC
	create_operative_leader = { #This guy worked for the allies
		name = "Emilio Faldella"
		GFX = GFX_portrait_ITA_emilio_faldella
		traits = { operative_well_groomed operative_commando operative_double_agent }
		bypass_recruitment = no
		available_to_spy_master = yes
		nationalities = { ITA SPR }
	}
}

ITA_create_edgardo_sogno_operative = { #DEMOCRATIC (Liberal)
	create_operative_leader = {
		name = "Edgardo Sogno"
		GFX = GFX_portrait_ITA_edgardo_sogno
		traits = { operative_linguist operative_natural_orator }
		bypass_recruitment = no
		available_to_spy_master = yes
		nationalities = { ITA }
	}
}

ITA_create_laura_garroni_operative = { #COMMUNIST (Gappisti)
	create_operative_leader = {
		name = "Laura Garroni"
		GFX = GFX_portrait_ITA_laura_garroni
		traits = { operative_demolition_expert operative_commando }
		bypass_recruitment = no
		available_to_spy_master = yes
		nationalities = { ITA }
	}
}

ITA_create_stefanina_moro_operative = { #COMMUNIST
	create_operative_leader = {
		name = "Stefanina Moro"
		GFX = GFX_portrait_ITA_stefanina_moro
		traits = { operative_infiltrator operative_tough }
		bypass_recruitment = no
		available_to_spy_master = yes
		nationalities = { ITA }
	}
}





#########################
########## BOP ##########
#########################

########## INCREASE/DECREASE WITH TOOLTIPS FOR OTHER SIDES ##########

# COMMUNISM (Negative since Communist side is on the left)
ITA_bop_absurdly_high_increase_communism_side_effect = {
	add_power_balance_value = {
		id = CLN_power_balance
		value = -1
		tooltip_side = ITA_communism_side
	}
}

ITA_bop_very_high_increase_communism_side_effect = {
	add_power_balance_value = {
		id = CLN_power_balance
		value = -0.25
		tooltip_side = ITA_communism_side
	}
}

ITA_bop_high_increase_communism_side_effect = {
	add_power_balance_value = {
		id = CLN_power_balance
		value = -0.2
		tooltip_side = ITA_communism_side
	}
}

ITA_bop_medium_increase_communism_side_effect = {
	add_power_balance_value = {
		id = CLN_power_balance
		value = -0.15
		tooltip_side = ITA_communism_side
	}
}

ITA_bop_low_increase_communism_side_effect = {
	add_power_balance_value = {
		id = CLN_power_balance
		value = -0.1
		tooltip_side = ITA_communism_side
	}
}

ITA_bop_very_low_increase_communism_side_effect = {
	add_power_balance_value = {
		id = CLN_power_balance
		value = -0.05
		tooltip_side = ITA_communism_side
	}
}

# DEMOCRATIC
ITA_bop_absurdly_high_increase_democratic_side_effect = {
	add_power_balance_value = {
		id = CLN_power_balance
		value = 1
		tooltip_side = ITA_democratic_side
	}
}

ITA_bop_very_high_increase_democratic_side_effect = {
	add_power_balance_value = {
		id = CLN_power_balance
		value = 0.25
		tooltip_side = ITA_democratic_side
	}
}

ITA_bop_high_increase_democratic_side_effect = {
	add_power_balance_value = {
		id = CLN_power_balance
		value = 0.2
		tooltip_side = ITA_democratic_side
	}
}

ITA_bop_medium_increase_democratic_side_effect = {
	add_power_balance_value = {
		id = CLN_power_balance
		value = 0.15
		tooltip_side = ITA_democratic_side
	}
}

ITA_bop_low_increase_democratic_side_effect = {
	add_power_balance_value = {
		id = CLN_power_balance
		value = 0.1
		tooltip_side = ITA_democratic_side
	}
}

ITA_bop_very_low_increase_democratic_side_effect = {
	add_power_balance_value = {
		id = CLN_power_balance
		value = 0.05
		tooltip_side = ITA_democratic_side
	}
}

#MONARCHIST - VITTORIO
ITA_bop_absurdly_high_increase_king_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = 1
			tooltip_side = ITA_king_side
		}
	}
	else_if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 1
			tooltip_side = ITA_king_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 1
			tooltip_side = ITA_king_side
		}
	}
}

ITA_bop_very_high_increase_king_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = 0.25
			tooltip_side = ITA_king_side
		}
	}
	else_if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.25
			tooltip_side = ITA_king_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.25
			tooltip_side = ITA_king_side
		}
	}
}

ITA_bop_high_increase_king_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = 0.2
			tooltip_side = ITA_king_side
		}
	}
	else_if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.2
			tooltip_side = ITA_king_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.2
			tooltip_side = ITA_king_side
		}
	}
}

ITA_bop_medium_increase_king_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = 0.15
			tooltip_side = ITA_king_side
		}
	}
	else_if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.15
			tooltip_side = ITA_king_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.15
			tooltip_side = ITA_king_side
		}
	}
}

ITA_bop_low_increase_king_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = 0.1
			tooltip_side = ITA_king_side
		}
	}
	else_if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.1
			tooltip_side = ITA_king_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.1
			tooltip_side = ITA_king_side
		}
	}
}

ITA_bop_very_low_increase_king_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = 0.05
			tooltip_side = ITA_king_side
		}
	}
	else_if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.05
			tooltip_side = ITA_king_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.05
			tooltip_side = ITA_king_side
		}
	}
}

# MONARCHIST - UMBERTO
ITA_bop_absurdly_high_increase_king_umberto_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = 1
			tooltip_side = ITA_king_umberto_side
		}
	}
	else_if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 1
			tooltip_side = ITA_king_umberto_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 1
			tooltip_side = ITA_king_umberto_side
		}
	}
}

ITA_bop_very_high_increase_king_umberto_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = 0.25
			tooltip_side = ITA_king_umberto_side
		}
	}
	else_if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.25
			tooltip_side = ITA_king_umberto_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.25
			tooltip_side = ITA_king_umberto_side
		}
	}
}

ITA_bop_high_increase_king_umberto_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = 0.2
			tooltip_side = ITA_king_umberto_side
		}
	}
	else_if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.2
			tooltip_side = ITA_king_umberto_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.2
			tooltip_side = ITA_king_umberto_side
		}
	}
}

ITA_bop_medium_increase_king_umberto_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = 0.15
			tooltip_side = ITA_king_umberto_side
		}
	}
	else_if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.15
			tooltip_side = ITA_king_umberto_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.15
			tooltip_side = ITA_king_umberto_side
		}
	}
}

ITA_bop_low_increase_king_umberto_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = 0.1
			tooltip_side = ITA_king_umberto_side
		}
	}
	else_if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.1
			tooltip_side = ITA_king_umberto_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.1
			tooltip_side = ITA_king_umberto_side
		}
	}
}

ITA_bop_very_low_increase_king_umberto_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = 0.05
			tooltip_side = ITA_king_umberto_side
		}
	}
	else_if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.05
			tooltip_side = ITA_king_umberto_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.05
			tooltip_side = ITA_king_umberto_side
		}
	}
}

# POPE (NEGATIVE BECAUSE IT'S ON THE LEFT SIDE)
ITA_bop_absurdly_high_increase_pope_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = -1
			tooltip_side = ITA_pope_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = -1
			tooltip_side = ITA_pope_side
		}
	}
}

ITA_bop_very_high_increase_pope_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = -0.25
			tooltip_side = ITA_pope_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = -0.25
			tooltip_side = ITA_pope_side
		}
	}
}

ITA_bop_high_increase_pope_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = -0.2
			tooltip_side = ITA_pope_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = -0.2
			tooltip_side = ITA_pope_side
		}
	}
}

ITA_bop_medium_increase_pope_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = -0.15
			tooltip_side = ITA_pope_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = -0.15
			tooltip_side = ITA_pope_side
		}
	}
}

ITA_bop_low_increase_pope_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = -0.1
			tooltip_side = ITA_pope_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = -0.1
			tooltip_side = ITA_pope_side
		}
	}
}

ITA_bop_very_low_increase_pope_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = RDS_power_balance }
		}
		add_power_balance_value = {
			id = RDS_power_balance
			value = -0.05
			tooltip_side = ITA_pope_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = -0.05
			tooltip_side = ITA_pope_side
		}
	}
}

#BALBO
ITA_bop_absurdly_high_increase_balbo_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 1
			tooltip_side = ITA_balbo_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 1
			tooltip_side = ITA_balbo_side
		}
	}
}

ITA_bop_very_high_increase_balbo_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.25
			tooltip_side = ITA_balbo_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.25
			tooltip_side = ITA_balbo_side
		}
	}
}

ITA_bop_high_increase_balbo_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.2
			tooltip_side = ITA_balbo_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.2
			tooltip_side = ITA_balbo_side
		}
	}
}

ITA_bop_medium_increase_balbo_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.15
			tooltip_side = ITA_balbo_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.15
			tooltip_side = ITA_balbo_side
		}
	}
}

ITA_bop_low_increase_balbo_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.15
			tooltip_side = ITA_balbo_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.15
			tooltip_side = ITA_balbo_side
		}
	}
}

ITA_bop_very_low_increase_balbo_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.05
			tooltip_side = ITA_balbo_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.05
			tooltip_side = ITA_balbo_side
		}
	}
}

# GRANDI
ITA_bop_absurdly_high_increase_grandi_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 1
			tooltip_side = ITA_grandi_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 1
			tooltip_side = ITA_grandi_side
		}
	}
}

ITA_bop_very_high_increase_grandi_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.25
			tooltip_side = ITA_grandi_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.25
			tooltip_side = ITA_grandi_side
		}
	}
}

ITA_bop_high_increase_grandi_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.2
			tooltip_side = ITA_grandi_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.2
			tooltip_side = ITA_grandi_side
		}
	}
}

ITA_bop_medium_increase_grandi_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.15
			tooltip_side = ITA_grandi_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.15
			tooltip_side = ITA_grandi_side
		}
	}
}

ITA_bop_low_increase_grandi_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.1
			tooltip_side = ITA_grandi_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.1
			tooltip_side = ITA_grandi_side
		}
	}
}

ITA_bop_very_low_increase_grandi_side_effect = {
	if = {
		limit = {
			has_power_balance = { id = GFC_power_balance }
		}
		add_power_balance_value = {
			id = GFC_power_balance
			value = 0.05
			tooltip_side = ITA_grandi_side
		}
	}
	else = {
		add_power_balance_value = {
			id = ITA_power_balance
			value = 0.05
			tooltip_side = ITA_grandi_side
		}
	}
}

##############################

### TEMPLATES FOR CLN
CLN_add_redshirts_div_template = {
	division_template = { #Redshirts
		name = "Camicie Rosse"
		division_names_group = ITA_INF_02 #TODO_Manu
		override_model = ITA_militia_alt_0_entity
		template_counter = 68
		is_locked = yes
		force_allow_recruiting = yes
		division_cap = 12

		regiments = {
			militia = { x = 0 y = 0 }
			militia = { x = 0 y = 1 }
			militia = { x = 1 y = 0 }
			militia = { x = 1 y = 1 }
			militia = { x = 2 y = 0 }
			militia = { x = 2 y = 1 }
		}
		support = {
			engineer = { x = 0 y = 0 }
		}
	}
}

CLN_civil_war_deal_with_militias = {
	#SPAWN UNITS AND KILL BLACKSHIRTS TACK
	delete_unit_template_and_units = {
		division_template = "Camicie Nere"
	}
	
	CLN_add_redshirts_div_template = yes
	capital_scope = {
		create_unit = {
			division = "division_template = \"Camicie Rosse\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
			owner = PREV
			count = 3
		}
	}
	random_owned_state = {
		limit = {
			is_controlled_by = PREV
		}
		create_unit = {
			division = "division_template = \"Camicie Rosse\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
			owner = PREV
			count = 2
		}
	}
}


### TEMPLATES FOR RDS
RDS_add_royalist_div_template = {
	division_template = {
		name = "Royalist Garrison"
		division_names_group = ITA_INF_02 #TODO_Manu
		override_model = ITA_militia_alt_0_entity
		template_counter = 33
		is_locked = yes
		force_allow_recruiting = yes
		division_cap = 16

		regiments = {
			militia = { x = 0 y = 0 }
			militia = { x = 0 y = 1 }
			militia = { x = 1 y = 0 }
			militia = { x = 1 y = 1 }
			militia = { x = 2 y = 0 }
			militia = { x = 2 y = 1 }
		}
		support = {
			engineer = { x = 0 y = 0 }
		}
	}
}

RDS_civil_war_deal_with_militias = {
	#SPAWN UNITS AND KILL BLACKSHIRTS TACK
	delete_unit_template_and_units = {
		division_template = "Camicie Nere"
	}
	
	RDS_add_royalist_div_template = yes
	capital_scope = {
		create_unit = {
			division = "division_template = \"Royalist Garrison\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
			owner = PREV
			count = 3
		}
	}
	random_owned_state = {
		limit = {
			is_controlled_by = PREV
		}
		create_unit = {
			division = "division_template = \"Royalist Garrison\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
			owner = PREV
			count = 2
		}
	}
	161 = {	#Болонья
		create_unit = {
			division = "division_template = \"Royalist Garrison\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
			owner = PREV
			count = 2
			allow_spawning_on_enemy_provs = yes
			prioritize_location = 6606
		}
	}
	823 = {	#Триест
		create_unit = {
			division = "division_template = \"Royalist Garrison\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
			owner = PREV
			count = 2
			allow_spawning_on_enemy_provs = yes
			prioritize_location = 6626
		}
	}
	39 = {	#Больцано
		create_unit = {
			division = "division_template = \"Royalist Garrison\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
			owner = PREV
			count = 2
			allow_spawning_on_enemy_provs = yes
			prioritize_location = 11598
		}
	}
	159 = {	#Милан
		create_unit = {
			division = "division_template = \"Royalist Garrison\" start_experience_factor = 0.4 start_equipment_factor = 1.0"
			owner = PREV
			count = 2
			allow_spawning_on_enemy_provs = yes
			prioritize_location = 3780
		}
	}
}

# Команда пишется в восставшем теге и должна быть после команды загрузки дерева. PREV для нее - изначальная страна
ITA_focus_synchronization = {
	if = {	limit = { PREV = { has_completed_focus = ITA_gas } }	unlock_national_focus = ITA_gas }
	if = {	limit = { PREV = { has_completed_focus = ITA_march_steel } }	unlock_national_focus = ITA_march_steel }
	if = {	limit = { PREV = { has_completed_focus = ITA_xp_ethiopia } }	unlock_national_focus = ITA_xp_ethiopia }
	if = {	limit = { PREV = { has_completed_focus = ITA_army_primacy_bba } }	unlock_national_focus = ITA_army_primacy_bba }
	if = {	limit = { PREV = { has_completed_focus = ITA_reform_general } }	unlock_national_focus = ITA_reform_general }
	if = {	limit = { PREV = { has_completed_focus = ITA_more_wheaphones } }	unlock_national_focus = ITA_more_wheaphones }
	if = {	limit = { PREV = { has_completed_focus = ITA_preserve_army_traditions } }	unlock_national_focus = ITA_preserve_army_traditions }
	if = {	limit = { PREV = { has_completed_focus = ITA_moschettieri_del_duce } }	unlock_national_focus = ITA_moschettieri_del_duce }
	if = {	limit = { PREV = { has_completed_focus = ITA_a_bandits_war } }	unlock_national_focus = ITA_a_bandits_war }
	if = {	limit = { PREV = { has_completed_focus = ITA_carica_di_isbuscenskij } }	unlock_national_focus = ITA_carica_di_isbuscenskij }
	if = {	limit = { PREV = { has_completed_focus = ITA_army_leaders } }	unlock_national_focus = ITA_army_leaders }
	if = {	limit = { PREV = { has_completed_focus = ITA_superesercito } }	unlock_national_focus = ITA_superesercito }
	if = {	limit = { PREV = { has_completed_focus = ITA_italian_tankettes } }	unlock_national_focus = ITA_italian_tankettes }
	if = {	limit = { PREV = { has_completed_focus = ITA_bersaglieri } }	unlock_national_focus = ITA_bersaglieri }
	if = {	limit = { PREV = { has_completed_focus = ITA_divisioni_alpine } }	unlock_national_focus = ITA_divisioni_alpine }
	if = {	limit = { PREV = { has_completed_focus = ITA_fanti_dell_aria } }	unlock_national_focus = ITA_fanti_dell_aria }
	if = {	limit = { PREV = { has_completed_focus = ITA_self_propelled_guns } }	unlock_national_focus = ITA_self_propelled_guns }
	if = {	limit = { PREV = { has_completed_focus = ITA_end_fiat_ansaldo_duopoly } }	unlock_national_focus = ITA_end_fiat_ansaldo_duopoly }
	if = {	limit = { PREV = { has_completed_focus = ITA_modernize_ansaldo_facilities } }	unlock_national_focus = ITA_modernize_ansaldo_facilities }
	if = {	limit = { PREV = { has_completed_focus = ITA_ferrea_mole_ferreo_cuore } }	unlock_national_focus = ITA_ferrea_mole_ferreo_cuore }
	if = {	limit = { PREV = { has_completed_focus = ITA_logistics_problems_done } }	unlock_national_focus = ITA_logistics_problems_done }
	if = {	limit = { PREV = { has_completed_focus = ITA_center_aviation } }	unlock_national_focus = ITA_center_aviation }
	if = {	limit = { PREV = { has_completed_focus = ITA_air_innovations_bba } }	unlock_national_focus = ITA_air_innovations_bba }
	if = {	limit = { PREV = { has_completed_focus = ITA_citta_dell_aria } }	unlock_national_focus = ITA_citta_dell_aria }
	if = {	limit = { PREV = { has_completed_focus = ITA_expand_rome_flying_school } }	unlock_national_focus = ITA_expand_rome_flying_school }
	if = {	limit = { PREV = { has_completed_focus = ITA_reggianes_exports } }	unlock_national_focus = ITA_reggianes_exports }
	if = {	limit = { PREV = { has_completed_focus = ITA_diving_bombers } }	unlock_national_focus = ITA_diving_bombers }
	if = {	limit = { PREV = { has_completed_focus = ITA_superaereo } }	unlock_national_focus = ITA_superaereo }
	if = {	limit = { PREV = { has_completed_focus = ITA_officers_of_the_service_role } }	unlock_national_focus = ITA_officers_of_the_service_role }
	if = {	limit = { PREV = { has_completed_focus = ITA_standardization } }	unlock_national_focus = ITA_standardization }
	if = {	limit = { PREV = { has_completed_focus = ITA_specialization } }	unlock_national_focus = ITA_specialization }
	if = {	limit = { PREV = { has_completed_focus = ITA_long_range_aircraft } }	unlock_national_focus = ITA_long_range_aircraft }
	if = {	limit = { PREV = { has_completed_focus = ITA_bomber_designs } }	unlock_national_focus = ITA_bomber_designs }
	if = {	limit = { PREV = { has_completed_focus = ITA_fighter_designs } }	unlock_national_focus = ITA_fighter_designs }
	if = {	limit = { PREV = { has_completed_focus = ITA_multirole_aircraft } }	unlock_national_focus = ITA_multirole_aircraft }
	if = {	limit = { PREV = { has_completed_focus = ITA_supremacy_in_the_skies } }	unlock_national_focus = ITA_supremacy_in_the_skies }
	if = {	limit = { PREV = { has_completed_focus = ITA_naval_power_projection } }	unlock_national_focus = ITA_naval_power_projection }
	if = {	limit = { PREV = { has_completed_focus = ITA_tirrenia_effort } }	unlock_national_focus = ITA_tirrenia_effort }
	if = {	limit = { PREV = { has_completed_focus = ITA_naval_college } }	unlock_national_focus = ITA_naval_college }
	if = {	limit = { PREV = { has_completed_focus = ITA_intensify_torpedo_manufacturing } }	unlock_national_focus = ITA_intensify_torpedo_manufacturing }
	if = {	limit = { PREV = { has_completed_focus = ITA_expand_naval_facilities } }	unlock_national_focus = ITA_expand_naval_facilities }
	if = {	limit = { PREV = { has_completed_focus = ITA_oto_naval_guns } }	unlock_national_focus = ITA_oto_naval_guns }
	if = {	limit = { PREV = { has_completed_focus = ITA_improve_overseas_naval_bases } }	unlock_national_focus = ITA_improve_overseas_naval_bases }
	if = {	limit = { PREV = { has_completed_focus = ITA_milizia_marittima_di_artiglieria } }	unlock_national_focus = ITA_milizia_marittima_di_artiglieria }
	if = {	limit = { PREV = { has_completed_focus = ITA_supermarina } }	unlock_national_focus = ITA_supermarina }
	if = {	limit = { PREV = { has_completed_focus = ITA_stockpile_fuel } }	unlock_national_focus = ITA_stockpile_fuel }
	if = {	limit = { PREV = { has_completed_focus = ITA_forza_navale_especiale } }	unlock_national_focus = ITA_forza_navale_especiale }
	if = {	limit = { PREV = { has_completed_focus = ITA_naval_air_coordination } }	unlock_national_focus = ITA_naval_air_coordination }
	if = {	limit = { PREV = { has_completed_focus = ITA_decima_flottiglia_mas } }	unlock_national_focus = ITA_decima_flottiglia_mas }
	if = {	limit = { PREV = { has_completed_focus = ITA_incrociatori_leggeri } }	unlock_national_focus = ITA_incrociatori_leggeri }
	if = {	limit = { PREV = { has_completed_focus = ITA_incrociatori_pesanti } }	unlock_national_focus = ITA_incrociatori_pesanti }
	if = {	limit = { PREV = { has_completed_focus = ITA_expand_naval_intelligence } }	unlock_national_focus = ITA_expand_naval_intelligence }
	if = {	limit = { PREV = { has_completed_focus = ITA_cooperation_programs } }	unlock_national_focus = ITA_cooperation_programs }
	if = {	limit = { PREV = { has_completed_focus = ITA_cruiser_submarines } }	unlock_national_focus = ITA_cruiser_submarines }
	if = {	limit = { PREV = { has_completed_focus = ITA_midget_submarines } }	unlock_national_focus = ITA_midget_submarines }
	if = {	limit = { PREV = { has_completed_focus = ITA_cacciatorpediniere_di_scorta } }	unlock_national_focus = ITA_cacciatorpediniere_di_scorta }
	if = {	limit = { PREV = { has_completed_focus = ITA_ispettorato_dei_mezzi_antisommergibili } }	unlock_national_focus = ITA_ispettorato_dei_mezzi_antisommergibili }
	if = {	limit = { PREV = { has_completed_focus = ITA_navi_da_battaglia } }	unlock_national_focus = ITA_navi_da_battaglia }
	if = {	limit = { PREV = { has_completed_focus = ITA_proper_carriers } }	unlock_national_focus = ITA_proper_carriers }
	if = {	limit = { PREV = { has_completed_focus = ITA_refit_civilian_ships } }	unlock_national_focus = ITA_refit_civilian_ships }
	if = {	limit = { PREV = { has_completed_focus = ITA_flotta_d_evasione } }	unlock_national_focus = ITA_flotta_d_evasione }
	if = {	limit = { PREV = { has_completed_focus = ITA_new_government } }	unlock_national_focus = ITA_new_government }
	if = {	limit = { PREV = { has_completed_focus = ITA_glory_of_italy } }	unlock_national_focus = ITA_glory_of_italy }
	if = {	limit = { PREV = { has_completed_focus = ITA_black_brigades } }	unlock_national_focus = ITA_black_brigades }
	if = {	limit = { PREV = { has_completed_focus = ITA_verona_manifest } }	unlock_national_focus = ITA_verona_manifest }
	if = {	limit = { PREV = { has_completed_focus = ITA_socialisation } }	unlock_national_focus = ITA_socialisation }
	if = {	limit = { PREV = { has_completed_focus = ITA_gotic_line } }	unlock_national_focus = ITA_gotic_line }
	if = {	limit = { PREV = { has_completed_focus = ITA_milan_stalingrad } }	unlock_national_focus = ITA_milan_stalingrad }
	if = {	limit = { PREV = { has_completed_focus = ITA_way_avtarkia } }	unlock_national_focus = ITA_way_avtarkia }
	if = {	limit = { PREV = { has_completed_focus = ITA_venice_oil } }	unlock_national_focus = ITA_venice_oil }
	if = {	limit = { PREV = { has_completed_focus = ITA_albania_oil } }	unlock_national_focus = ITA_albania_oil }
	if = {	limit = { PREV = { has_completed_focus = ITA_time_war } }	unlock_national_focus = ITA_time_war }
	if = {	limit = { PREV = { has_completed_focus = ITA_support_corporations } }	unlock_national_focus = ITA_support_corporations }
	if = {	limit = { PREV = { has_completed_focus = ITA_support_north } }	unlock_national_focus = ITA_support_north }
	if = {	limit = { PREV = { has_completed_focus = ITA_support_south } }	unlock_national_focus = ITA_support_south }
	if = {	limit = { PREV = { has_completed_focus = ITA_support_infrastructure } }	unlock_national_focus = ITA_support_infrastructure }
	if = {	limit = { PREV = { has_completed_focus = ITA_support_north2 } }	unlock_national_focus = ITA_support_north2 }
	if = {	limit = { PREV = { has_completed_focus = ITA_support_south2 } }	unlock_national_focus = ITA_support_south2 }
	if = {	limit = { PREV = { has_completed_focus = ITA_avtarkia } }	unlock_national_focus = ITA_avtarkia }
	if = {	limit = { PREV = { has_completed_focus = ITA_italian_highways_bba } }	unlock_national_focus = ITA_italian_highways_bba }
	if = {	limit = { PREV = { has_completed_focus = ITA_steel_industry_in_terni } }	unlock_national_focus = ITA_steel_industry_in_terni }
	if = {	limit = { PREV = { has_completed_focus = ITA_power_plants_in_terni } }	unlock_national_focus = ITA_power_plants_in_terni }
	if = {	limit = { PREV = { has_completed_focus = ITA_railway_innovations } }	unlock_national_focus = ITA_railway_innovations }
	if = {	limit = { PREV = { has_completed_focus = ITA_expand_foggia_farm_fields } }	unlock_national_focus = ITA_expand_foggia_farm_fields }
	if = {	limit = { PREV = { has_completed_focus = ITA_investments_in_edison } }	unlock_national_focus = ITA_investments_in_edison }
	if = {	limit = { PREV = { has_completed_focus = ITA_fiocchi_munizioni } }	unlock_national_focus = ITA_fiocchi_munizioni }
	if = {	limit = { PREV = { has_completed_focus = ITA_brescia_small_arms_industry } }	unlock_national_focus = ITA_brescia_small_arms_industry }
	if = {	limit = { PREV = { has_completed_focus = ITA_milan_comms_industry } }	unlock_national_focus = ITA_milan_comms_industry }
	if = {	limit = { PREV = { has_completed_focus = ITA_increase_artillery_production } }	unlock_national_focus = ITA_increase_artillery_production }
	if = {	limit = { PREV = { has_completed_focus = ITA_redirect_alfa_romeo_production } }	unlock_national_focus = ITA_redirect_alfa_romeo_production }
	if = {	limit = { PREV = { has_completed_focus = ITA_increase_production } }	unlock_national_focus = ITA_increase_production }
	if = {	limit = { PREV = { has_completed_focus = ITA_keep_specialization } }	unlock_national_focus = ITA_keep_specialization }
	if = {	limit = { PREV = { has_completed_focus = ITA_thermojet_research } }	unlock_national_focus = ITA_thermojet_research }
}