# перед командой нужно указывать set_temp_variable = { disband_unit_fraction_temp = ХХ }

# ПРИМЕР (удаляет 50% дивизий):
# set_temp_variable = { disband_unit_fraction_temp = 50 }
# disband_units_fraction = yes

disband_units_fraction = {
	set_temp_variable = { disband_unit_fraction = disband_unit_fraction_temp }
	multiply_temp_variable = { disband_unit_fraction = 0.01 }
	SAI = {
		set_temp_variable = {
			old_manpower = manpower_k
		}
	}
	transfer_units_fraction = {
		target = SAI
		size = 0
		army_ratio = var:disband_unit_fraction
		keep_unit_leaders_trigger = {
			always = yes
		}
	}
	SAI = {
#		every_state = {
#			PREV = {
#				delete_unit = {
#					state = PREV
#					disband = yes
#				}
#			}
#		}
		delete_unit = { disband = yes }
		set_temp_variable = {
			manpower_diff = manpower_k
		}
		subtract_from_temp_variable = {
			manpower_diff = old_manpower
		}
		while_loop_effect = { #avoid overflows
			limit = { check_variable = { manpower_diff > 1 } }
			subtract_from_temp_variable = { manpower_diff = 1 }
			ROOT = { add_manpower = 1000 }
			add_manpower = -1000
		}
		multiply_temp_variable = {
			manpower_diff = 1000
		}
		ROOT = { add_manpower = PREV.manpower_diff }
		multiply_temp_variable = {
			manpower_diff = -1
		}
		add_manpower = manpower_diff
#		transfer_units_fraction = {
#			target = ROOT
#			size = 0.0
#			stockpile_ratio = 1.0
#			army_ratio = 0.0
#			navy_ratio = 0.0
#			air_ratio = 0.0
#			keep_unit_leaders_trigger = {
#				always = yes
#			}
#		}
		send_equipment_fraction = { value = 1.0 target = ROOT }
	}
}

POR_influence_of_church_in_central_importance = {
	if = {
		limit = { has_idea = POR_influence_of_church_1 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_1
			add_idea = POR_influence_of_church_central_1
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_2 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_2
			add_idea = POR_influence_of_church_central_2
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_3 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_3
			add_idea = POR_influence_of_church_central_3
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_4 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_4
			add_idea = POR_influence_of_church_central_4
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_5 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_5
			add_idea = POR_influence_of_church_central_5
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_6 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_6
			add_idea = POR_influence_of_church_central_6
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_7 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_7
			add_idea = POR_influence_of_church_central_7
		}
	}
}

POR_influence_of_church_partner_of_crown = {
	if = {
		limit = { has_idea = POR_influence_of_church_1 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_1
			add_idea = POR_influence_of_church_partner_1
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_2 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_2
			add_idea = POR_influence_of_church_partner_2
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_3 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_3
			add_idea = POR_influence_of_church_partner_3
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_4 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_4
			add_idea = POR_influence_of_church_partner_4
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_5 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_5
			add_idea = POR_influence_of_church_partner_5
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_6 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_6
			add_idea = POR_influence_of_church_partner_6
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_7 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_7
			add_idea = POR_influence_of_church_partner_7
		}
	}
}

POR_influence_of_church_up = {
	if = {
		limit = { has_idea = POR_influence_of_church_1 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_1
			add_idea = POR_influence_of_church_2
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_2 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_2
			add_idea = POR_influence_of_church_3
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_3 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_3
			add_idea = POR_influence_of_church_4
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_4 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_4
			add_idea = POR_influence_of_church_5
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_5 NOT = { has_completed_focus = POR_sign_concordat_with_vatican } }
		swap_ideas = {
			remove_idea = POR_influence_of_church_5
			add_idea = POR_influence_of_church_6
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_6 NOT = { has_completed_focus = POR_sign_concordat_with_vatican } }
		swap_ideas = {
			remove_idea = POR_influence_of_church_6
			add_idea = POR_influence_of_church_7
		}
	}
	
	
	else_if = {
		limit = { has_idea = POR_influence_of_church_central_1 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_central_1
			add_idea = POR_influence_of_church_central_2
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_central_2 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_central_2
			add_idea = POR_influence_of_church_central_3
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_central_3 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_central_3
			add_idea = POR_influence_of_church_central_4
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_central_4 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_central_4
			add_idea = POR_influence_of_church_central_5
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_central_5 NOT = { has_completed_focus = POR_sign_concordat_with_vatican } }
		swap_ideas = {
			remove_idea = POR_influence_of_church_central_5
			add_idea = POR_influence_of_church_central_6
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_central_6 NOT = { has_completed_focus = POR_sign_concordat_with_vatican } }
		swap_ideas = {
			remove_idea = POR_influence_of_church_central_6
			add_idea = POR_influence_of_church_central_7
		}
	}
	
	
	else_if = {
		limit = { has_idea = POR_influence_of_church_partner_1 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_partner_1
			add_idea = POR_influence_of_church_partner_2
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_partner_2 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_partner_2
			add_idea = POR_influence_of_church_partner_3
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_partner_3 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_partner_3
			add_idea = POR_influence_of_church_partner_4
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_partner_4 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_partner_4
			add_idea = POR_influence_of_church_partner_5
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_partner_5 NOT = { has_completed_focus = POR_sign_concordat_with_vatican } }
		swap_ideas = {
			remove_idea = POR_influence_of_church_partner_5
			add_idea = POR_influence_of_church_partner_6
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_partner_6 NOT = { has_completed_focus = POR_sign_concordat_with_vatican } }
		swap_ideas = {
			remove_idea = POR_influence_of_church_partner_6
			add_idea = POR_influence_of_church_partner_7
		}
	}
}

POR_influence_of_church_down = {
	if = {
		limit = { has_idea = POR_influence_of_church_7 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_7
			add_idea = POR_influence_of_church_6
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_6 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_5
			add_idea = POR_influence_of_church_5
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_5 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_5
			add_idea = POR_influence_of_church_4
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_4 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_4
			add_idea = POR_influence_of_church_3
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_3 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_3
			add_idea = POR_influence_of_church_2
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_2 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_2
			add_idea = POR_influence_of_church_1
		}
	}
	
	
	else_if = {
		limit = { has_idea = POR_influence_of_church_central_7 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_central_7
			add_idea = POR_influence_of_church_central_6
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_central_6 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_central_5
			add_idea = POR_influence_of_church_central_5
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_central_5 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_central_5
			add_idea = POR_influence_of_church_central_4
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_central_4 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_central_4
			add_idea = POR_influence_of_church_central_3
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_central_3 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_central_3
			add_idea = POR_influence_of_church_central_2
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_central_2 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_central_2
			add_idea = POR_influence_of_church_central_1
		}
	}
	
	
	else_if = {
		limit = { has_idea = POR_influence_of_church_partner_7 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_partner_7
			add_idea = POR_influence_of_church_partner_6
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_partner_6 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_partner_5
			add_idea = POR_influence_of_church_partner_5
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_partner_5 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_partner_5
			add_idea = POR_influence_of_church_partner_4
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_partner_4 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_partner_4
			add_idea = POR_influence_of_church_partner_3
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_partner_3 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_partner_3
			add_idea = POR_influence_of_church_partner_2
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_church_partner_2 }
		swap_ideas = {
			remove_idea = POR_influence_of_church_partner_2
			add_idea = POR_influence_of_church_partner_1
		}
	}
}



### НАЦДУХИ КОЛОНИЙ ###

POR_ANG_debts_of_local_residents_idea_down = {
	if = {
		limit = { has_idea = POR_ANG_debts_of_local_residents_idea_1 }
		swap_ideas = {
			remove_idea = POR_ANG_debts_of_local_residents_idea_1
			add_idea = POR_ANG_debts_of_local_residents_idea_2
		}
	}
	else_if = {
		limit = { has_idea = POR_ANG_debts_of_local_residents_idea_2 }
		swap_ideas = {
			remove_idea = POR_ANG_debts_of_local_residents_idea_2
			add_idea = POR_ANG_debts_of_local_residents_idea_3
		}
	}
	else_if = {
		limit = { has_idea = POR_ANG_debts_of_local_residents_idea_3 }
		remove_ideas = POR_ANG_debts_of_local_residents_idea_3
	}
}

POR_ANG_export_of_angolan_goods_idea_up = {
	if = {
		limit = { has_idea = POR_ANG_export_of_angolan_goods_idea_1 }
		swap_ideas = {
			remove_idea = POR_ANG_export_of_angolan_goods_idea_1
			add_idea = POR_ANG_export_of_angolan_goods_idea_2
		}
	}
	else_if = {
		limit = { has_idea = POR_ANG_export_of_angolan_goods_idea_2 }
		swap_ideas = {
			remove_idea = POR_ANG_export_of_angolan_goods_idea_2
			add_idea = POR_ANG_export_of_angolan_goods_idea_3
		}
	}
	else_if = {
		limit = { has_idea = POR_ANG_export_of_angolan_goods_idea_3 }
		swap_ideas = {
			remove_idea = POR_ANG_export_of_angolan_goods_idea_3
			add_idea = POR_ANG_export_of_angolan_goods_idea_4
		}
	}
	else_if = {
		limit = { has_idea = POR_ANG_export_of_angolan_goods_idea_4 }
		swap_ideas = {
			remove_idea = POR_ANG_export_of_angolan_goods_idea_4
			add_idea = POR_ANG_export_of_angolan_goods_idea_5
		}
	}
	else = { add_ideas = POR_ANG_export_of_angolan_goods_idea_1 }
}

POR_MZB_export_of_goods_from_mozambique_idea_up = {
	if = {
		limit = { has_idea = POR_MZB_export_of_goods_from_mozambique_idea_1 }
		swap_ideas = {
			remove_idea = POR_MZB_export_of_goods_from_mozambique_idea_1
			add_idea = POR_MZB_export_of_goods_from_mozambique_idea_2
		}
	}
	else_if = {
		limit = { has_idea = POR_MZB_export_of_goods_from_mozambique_idea_2 }
		swap_ideas = {
			remove_idea = POR_MZB_export_of_goods_from_mozambique_idea_2
			add_idea = POR_MZB_export_of_goods_from_mozambique_idea_3
		}
	}
	else = { add_ideas = POR_MZB_export_of_goods_from_mozambique_idea_1 }
}



POR_ANG_number_of_assimilators_idea_up = {
	if = {
		limit = { has_idea = POR_ANG_number_of_assimilators_idea_1 }
		swap_ideas = {
			remove_idea = POR_ANG_number_of_assimilators_idea_1
			add_idea = POR_ANG_number_of_assimilators_idea_2
		}
	}
	else_if = {
		limit = { has_idea = POR_ANG_number_of_assimilators_idea_2 }
		swap_ideas = {
			remove_idea = POR_ANG_number_of_assimilators_idea_2
			add_idea = POR_ANG_number_of_assimilators_idea_3
		}
	}
	else_if = {
		limit = { has_idea = POR_ANG_number_of_assimilators_idea_3 }
		swap_ideas = {
			remove_idea = POR_ANG_number_of_assimilators_idea_3
			add_idea = POR_ANG_number_of_assimilators_idea_4
		}
	}
	else_if = {
		limit = { has_idea = POR_ANG_number_of_assimilators_idea_4 }
		swap_ideas = {
			remove_idea = POR_ANG_number_of_assimilators_idea_4
			add_idea = POR_ANG_number_of_assimilators_idea_5
		}
	}
	else_if = {
		limit = { has_idea = POR_ANG_number_of_assimilators_idea_5 }
		swap_ideas = {
			remove_idea = POR_ANG_number_of_assimilators_idea_5
			add_idea = POR_ANG_number_of_assimilators_idea_6
		}
	}
}
POR_ANG_number_of_assimilators_idea_double_up = {
	if = {
		limit = { has_idea = POR_ANG_number_of_assimilators_idea_1 }
		swap_ideas = {
			remove_idea = POR_ANG_number_of_assimilators_idea_1
			add_idea = POR_ANG_number_of_assimilators_idea_3
		}
	}
	else_if = {
		limit = { has_idea = POR_ANG_number_of_assimilators_idea_2 }
		swap_ideas = {
			remove_idea = POR_ANG_number_of_assimilators_idea_2
			add_idea = POR_ANG_number_of_assimilators_idea_4
		}
	}
	else_if = {
		limit = { has_idea = POR_ANG_number_of_assimilators_idea_3 }
		swap_ideas = {
			remove_idea = POR_ANG_number_of_assimilators_idea_3
			add_idea = POR_ANG_number_of_assimilators_idea_5
		}
	}
	else_if = {
		limit = { has_idea = POR_ANG_number_of_assimilators_idea_4 }
		swap_ideas = {
			remove_idea = POR_ANG_number_of_assimilators_idea_4
			add_idea = POR_ANG_number_of_assimilators_idea_6
		}
	}
	else_if = {
		limit = { has_idea = POR_ANG_number_of_assimilators_idea_5 }
		swap_ideas = {
			remove_idea = POR_ANG_number_of_assimilators_idea_5
			add_idea = POR_ANG_number_of_assimilators_idea_6
		}
	}
}

POR_MZB_number_of_assimilators_idea_up = {
	if = {
		limit = { has_idea = POR_MZB_number_of_assimilators_idea_1 }
		swap_ideas = {
			remove_idea = POR_MZB_number_of_assimilators_idea_1
			add_idea = POR_MZB_number_of_assimilators_idea_2
		}
	}
	else_if = {
		limit = { has_idea = POR_MZB_number_of_assimilators_idea_2 }
		swap_ideas = {
			remove_idea = POR_MZB_number_of_assimilators_idea_2
			add_idea = POR_MZB_number_of_assimilators_idea_3
		}
	}
	else_if = {
		limit = { has_idea = POR_MZB_number_of_assimilators_idea_3 }
		swap_ideas = {
			remove_idea = POR_MZB_number_of_assimilators_idea_3
			add_idea = POR_MZB_number_of_assimilators_idea_4
		}
	}
	else_if = {
		limit = { has_idea = POR_MZB_number_of_assimilators_idea_4 }
		swap_ideas = {
			remove_idea = POR_MZB_number_of_assimilators_idea_4
			add_idea = POR_MZB_number_of_assimilators_idea_5
		}
	}
	else_if = {
		limit = { has_idea = POR_MZB_number_of_assimilators_idea_5 }
		swap_ideas = {
			remove_idea = POR_MZB_number_of_assimilators_idea_5
			add_idea = POR_MZB_number_of_assimilators_idea_6
		}
	}
}

POR_MZB_number_of_assimilators_idea_double_up = {
	if = {
		limit = { has_idea = POR_MZB_number_of_assimilators_idea_1 }
		swap_ideas = {
			remove_idea = POR_MZB_number_of_assimilators_idea_1
			add_idea = POR_MZB_number_of_assimilators_idea_3
		}
	}
	else_if = {
		limit = { has_idea = POR_MZB_number_of_assimilators_idea_2 }
		swap_ideas = {
			remove_idea = POR_MZB_number_of_assimilators_idea_2
			add_idea = POR_MZB_number_of_assimilators_idea_4
		}
	}
	else_if = {
		limit = { has_idea = POR_MZB_number_of_assimilators_idea_3 }
		swap_ideas = {
			remove_idea = POR_MZB_number_of_assimilators_idea_3
			add_idea = POR_MZB_number_of_assimilators_idea_5
		}
	}
	else_if = {
		limit = { has_idea = POR_MZB_number_of_assimilators_idea_4 }
		swap_ideas = {
			remove_idea = POR_MZB_number_of_assimilators_idea_4
			add_idea = POR_MZB_number_of_assimilators_idea_6
		}
	}
	else_if = {
		limit = { has_idea = POR_MZB_number_of_assimilators_idea_5 }
		swap_ideas = {
			remove_idea = POR_MZB_number_of_assimilators_idea_5
			add_idea = POR_MZB_number_of_assimilators_idea_6
		}
	}
}

POR_influence_of_communist_party_idea_up = {
	if = {
		limit = { has_idea = POR_influence_of_communist_party_idea_1 }
		swap_ideas = {
			remove_idea = POR_influence_of_communist_party_idea_1
			add_idea = POR_influence_of_communist_party_idea_2
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_communist_party_idea_2 }
		swap_ideas = {
			remove_idea = POR_influence_of_communist_party_idea_2
			add_idea = POR_influence_of_communist_party_idea_3
		}
	}
	else_if = {
		limit = { has_idea = POR_influence_of_communist_party_idea_3 }
		swap_ideas = {
			remove_idea = POR_influence_of_communist_party_idea_3
			add_idea = POR_influence_of_communist_party_idea_4
		}
	}
	else = {
		add_ideas = POR_influence_of_communist_party_idea_1
	}
}

POR_opposition_to_communist_party_idea_up = {
	if = {
		limit = { has_idea = POR_opposition_to_communist_party_idea_1 }
		swap_ideas = {
			remove_idea = POR_opposition_to_communist_party_idea_1
			add_idea = POR_opposition_to_communist_party_idea_2
		}
	}
	else_if = {
		limit = { has_idea = POR_opposition_to_communist_party_idea_2 }
		swap_ideas = {
			remove_idea = POR_opposition_to_communist_party_idea_2
			add_idea = POR_opposition_to_communist_party_idea_3
		}
	}
	else_if = {
		limit = { has_idea = POR_opposition_to_communist_party_idea_3 }
		swap_ideas = {
			remove_idea = POR_opposition_to_communist_party_idea_3
			add_idea = POR_opposition_to_communist_party_idea_4
		}
	}
	else = {
		add_ideas = POR_opposition_to_communist_party_idea_1
	}
}


set_cosmetic_POR_REDCOL_subject = {
	if = {
		limit = { is_african_country_for_POR_liberate_africa = yes }
		random_country_with_original_tag = {
			original_tag_to_check = PREV
			limit = {
				original_tag = PREV
				is_dynamic_tag = no
			}
			save_event_target_as = true_tag
			PREV = {
				meta_effect = {
					text = {
						set_cosmetic_tag = [TAG]_POR_REDCOL_subject
					}
					TAG = "[true_tag.GetTag]"
				}
			}
		}
	}
}

set_POR_REDCOL_start_effect = {
	add_ideas = POR_REDCOL_oppressed_tribes_idea
	add_ideas = POR_REDCOL_lack_of_an_industrial_base_idea
}




POR_pick_propaganda_slot_effect = {
	hidden_effect = {
		if = {
			limit = {
				check_variable = { POR_poster_left_icon_frame = POR_propaganda_empty_slot_index }
			}
			set_variable = { POR_poster_left_icon_frame = POR_new_propaganda_campaign }
			hidden_effect = {
				set_country_flag = { flag = POR_propaganda_left_days_remaining_flag days = 90 } #Need code support to use a var here
			}
		}
		else_if = {
			limit = {
				check_variable = { POR_poster_right_icon_frame = POR_propaganda_empty_slot_index }
			}
			set_variable = { POR_poster_right_icon_frame = POR_new_propaganda_campaign }
			hidden_effect = {
				set_country_flag = { flag = POR_propaganda_right_days_remaining_flag days = 90 } #Need code support to use a var here
			}
		}
		set_variable = { POR_new_propaganda_campaign = 0 } # Reset var
		add_to_variable = { SOV_propaganda_campaigns_taken = 1 } #Update propaganda campaigns counter
	}
}

POR_reset_propaganda_slot_effect = {
	hidden_effect = {
		if = {
			limit = {
				check_variable = { POR_poster_left_icon_frame = POR_propaganda_campaign_to_remove }
			}
			set_variable = { POR_poster_left_icon_frame = POR_propaganda_empty_slot_index }
		}
		else_if = { #This could be turned into an else, but leaving it like this to hopefully make it easier to see
			limit = {
				check_variable = { POR_poster_right_icon_frame = POR_propaganda_campaign_to_remove }
			}
			set_variable = { POR_poster_right_icon_frame = POR_propaganda_empty_slot_index }
		}
		set_variable = { POR_propaganda_campaign_to_remove = 0 } # Reset var
	}
}

POR_unlock_propaganda_campaign_slot_effect = {
	hidden_effect = {
		if = {
			limit = {
				check_variable = { POR_poster_left_icon_frame = POR_propaganda_locked_slot_index }
			}
			set_variable = { POR_poster_left_icon_frame = POR_propaganda_empty_slot_index }
		}
		else = {
			set_variable = { POR_poster_right_icon_frame = POR_propaganda_empty_slot_index }
		}
	}
}

POR_radical_republicanism_icon_frame_set_effect = {
	hidden_effect = {
		if = {
			limit = { check_variable = { POR_radical_republicanism_var < 1 } }
			set_variable = { POR_radical_republicanism_icon_frame = 1 }
		}
		else_if = {
			limit = { check_variable = { POR_radical_republicanism_var < 11 } }
			set_variable = { POR_radical_republicanism_icon_frame = 2 }
		}
		else_if = {
			limit = { check_variable = { POR_radical_republicanism_var < 21 } }
			set_variable = { POR_radical_republicanism_icon_frame = 3 }
		}
		else_if = {
			limit = { check_variable = { POR_radical_republicanism_var < 31 } }
			set_variable = { POR_radical_republicanism_icon_frame = 4 }
		}
		else_if = {
			limit = { check_variable = { POR_radical_republicanism_var < 42 } }
			set_variable = { POR_radical_republicanism_icon_frame = 5 }
		}
		else_if = {
			limit = { check_variable = { POR_radical_republicanism_var < 55 } }
			set_variable = { POR_radical_republicanism_icon_frame = 6 }
		}
		else_if = {
			limit = { check_variable = { POR_radical_republicanism_var < 65 } }
			set_variable = { POR_radical_republicanism_icon_frame = 7 }
		}
		else_if = {
			limit = { check_variable = { POR_radical_republicanism_var < 75 } }
			set_variable = { POR_radical_republicanism_icon_frame = 8 }
		}
		else_if = {
			limit = { check_variable = { POR_radical_republicanism_var < 85 } }
			set_variable = { POR_radical_republicanism_icon_frame = 9 }
		}
		else_if = {
			limit = { check_variable = { POR_radical_republicanism_var < 99 } }
			set_variable = { POR_radical_republicanism_icon_frame = 10 }
		}
		else = {
			set_variable = { POR_radical_republicanism_icon_frame = 11 }
		}
	}
}

POR_legitimacy_of_crown_icon_frame_set_effect = {
	hidden_effect = {
		if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var < 1 } }
			set_variable = { POR_legitimacy_of_crown_icon_frame = 1 }
		}
		else_if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var < 11 } }
			set_variable = { POR_legitimacy_of_crown_icon_frame = 2 }
		}
		else_if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var < 21 } }
			set_variable = { POR_legitimacy_of_crown_icon_frame = 3 }
		}
		else_if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var < 31 } }
			set_variable = { POR_legitimacy_of_crown_icon_frame = 4 }
		}
		else_if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var < 42 } }
			set_variable = { POR_legitimacy_of_crown_icon_frame = 5 }
		}
		else_if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var < 55 } }
			set_variable = { POR_legitimacy_of_crown_icon_frame = 6 }
		}
		else_if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var < 65 } }
			set_variable = { POR_legitimacy_of_crown_icon_frame = 7 }
		}
		else_if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var < 75 } }
			set_variable = { POR_legitimacy_of_crown_icon_frame = 8 }
		}
		else_if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var < 85 } }
			set_variable = { POR_legitimacy_of_crown_icon_frame = 9 }
		}
		else_if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var < 99 } }
			set_variable = { POR_legitimacy_of_crown_icon_frame = 10 }
		}
		else = {
			set_variable = { POR_legitimacy_of_crown_icon_frame = 11 }
		}
	}
}

POR_social_problems_idea_down = {
	if = {
		limit = { has_idea = POR_social_problems_idea_10 }
		swap_ideas = {
			remove_idea = POR_social_problems_idea_10
			add_idea = POR_social_problems_idea_9
		}
	}
	else_if = {
		limit = { has_idea = POR_social_problems_idea_9 }
		swap_ideas = {
			remove_idea = POR_social_problems_idea_9
			add_idea = POR_social_problems_idea_8
		}
	}
	else_if = {
		limit = { has_idea = POR_social_problems_idea_8 }
		swap_ideas = {
			remove_idea = POR_social_problems_idea_8
			add_idea = POR_social_problems_idea_7
		}
	}
	else_if = {
		limit = { has_idea = POR_social_problems_idea_7 }
		swap_ideas = {
			remove_idea = POR_social_problems_idea_7
			add_idea = POR_social_problems_idea_6
		}
	}
	else_if = {
		limit = { has_idea = POR_social_problems_idea_6 }
		swap_ideas = {
			remove_idea = POR_social_problems_idea_6
			add_idea = POR_social_problems_idea_5
		}
	}
	else_if = {
		limit = { has_idea = POR_social_problems_idea_5 }
		swap_ideas = {
			remove_idea = POR_social_problems_idea_5
			add_idea = POR_social_problems_idea_4
		}
	}
	else_if = {
		limit = { has_idea = POR_social_problems_idea_4 }
		swap_ideas = {
			remove_idea = POR_social_problems_idea_4
			add_idea = POR_social_problems_idea_3
		}
	}
	else_if = {
		limit = { has_idea = POR_social_problems_idea_3 }
		swap_ideas = {
			remove_idea = POR_social_problems_idea_3
			add_idea = POR_social_problems_idea_2
		}
	}
	else_if = {
		limit = { has_idea = POR_social_problems_idea_2 }
		swap_ideas = {
			remove_idea = POR_social_problems_idea_2
			add_idea = POR_social_problems_idea_1
		}
	}
	else_if = {
		limit = { has_idea = POR_social_problems_idea_1 }
		remove_ideas = POR_social_problems_idea_1
	}
}

POR_need_to_reform_kingdom_idea_down = {
	if = {
		limit = { has_idea = POR_need_to_reform_kingdom_idea_4 }
		swap_ideas = {
			remove_idea = POR_need_to_reform_kingdom_idea_4
			add_idea = POR_need_to_reform_kingdom_idea_3
		}
	}
	else_if = {
		limit = { has_idea = POR_need_to_reform_kingdom_idea_3 }
		swap_ideas = {
			remove_idea = POR_need_to_reform_kingdom_idea_3
			add_idea = POR_need_to_reform_kingdom_idea_2
		}
	}
	else_if = {
		limit = { has_idea = POR_need_to_reform_kingdom_idea_2 }
		swap_ideas = {
			remove_idea = POR_need_to_reform_kingdom_idea_2
			add_idea = POR_need_to_reform_kingdom_idea_1
		}
	}
	else_if = {
		limit = { has_idea = POR_need_to_reform_kingdom_idea_1 }
		remove_ideas = POR_need_to_reform_kingdom_idea_1
	}
}

POR_legitimacy_of_crown_check_effect = {
	hidden_effect = {
		POR_legitimacy_of_crown_icon_frame_set_effect = yes
		if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var < 0.01 } NOT = { has_country_flag = POR_legitimacy_of_crown_var_0 } }
			set_country_flag = POR_legitimacy_of_crown_var_0
			if = {
				limit = { has_country_flag = POR_regulate_order_of_succession_to_throne_flag }
				country_event = { id = NWportugal.86 hours = 6 }
			
				else = {
					country_event = { id = NWportugal.84 hours = 6 }
				}
			}
		}
		if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var < 0.01 } has_country_flag = POR_legitimacy_of_crown_var_0 }
			country_event = { id = NWportugal.86 hours = 6 }
		}
		else_if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var > 39.99 } NOT = { has_country_flag = POR_legitimacy_of_crown_var_40 } }
			set_country_flag = POR_legitimacy_of_crown_var_40
			country_event = { id = NWportugal.80 hours = 6 }
		}
		else_if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var > 59.99 } NOT = { has_country_flag = POR_legitimacy_of_crown_var_60 } }
			set_country_flag = POR_legitimacy_of_crown_var_60
			country_event = { id = NWportugal.81 hours = 6 }
		}
		else_if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var > 79.99 } NOT = { has_country_flag = POR_legitimacy_of_crown_var_80 } }
			set_country_flag = POR_legitimacy_of_crown_var_80
			country_event = { id = NWportugal.82 hours = 6 }
		}
		else_if = {
			limit = { check_variable = { POR_legitimacy_of_crown_var > 99.99 } NOT = { has_country_flag = POR_legitimacy_of_crown_var_100 } }
			set_country_flag = POR_legitimacy_of_crown_var_100
			country_event = { id = NWportugal.83 hours = 6 }
		}
	}
}

POR_TIM_economic_decline_idea_down = {
	if = {
		limit = { has_idea = POR_TIM_economic_decline_idea_1 }
		swap_ideas = {
			remove_idea = POR_TIM_economic_decline_idea_1
			add_idea = POR_TIM_economic_decline_idea_2
		}
	}
	else_if = {
		limit = { has_idea = POR_TIM_economic_decline_idea_2 }
		swap_ideas = {
			remove_idea = POR_TIM_economic_decline_idea_2
			add_idea = POR_TIM_economic_decline_idea_3
		}
	}
	else_if = {
		limit = { has_idea = POR_TIM_economic_decline_idea_3 }
		swap_ideas = {
			remove_idea = POR_TIM_economic_decline_idea_3
			add_idea = POR_TIM_economic_decline_idea_4
		}
	}
	else_if = {
		limit = { has_idea = POR_TIM_economic_decline_idea_4 }
		remove_ideas = POR_TIM_economic_decline_idea_4
	}
}

POR_fragmented_nation_idea_down = {
	if = {
		limit = { has_idea = POR_fragmented_nation_idea_1 }
		swap_ideas = {
			remove_idea = POR_fragmented_nation_idea_1
			add_idea = POR_fragmented_nation_idea_2
		}
	}
	else_if = {
		limit = { has_idea = POR_fragmented_nation_idea_2 }
		swap_ideas = {
			remove_idea = POR_fragmented_nation_idea_2
			add_idea = POR_fragmented_nation_idea_3
		}
	}
	else_if = {
		limit = { has_idea = POR_fragmented_nation_idea_3 }
		swap_ideas = {
			remove_idea = POR_fragmented_nation_idea_3
			add_idea = POR_fragmented_nation_idea_4
		}
	}
	else_if = {
		limit = { has_idea = POR_fragmented_nation_idea_4 }
		remove_ideas = POR_fragmented_nation_idea_4
	}
}

POR_creating_new_order_check_effect = {
	hidden_effect = {
		if = {
			limit = {
				check_variable = { POR_creating_new_order_var > 99.9 }
				has_country_flag = POR_consolidate_social_reforms_flag
				has_country_flag = POR_set_young_people_in_important_positions_flag
				has_country_flag = POR_blur_class_boundaries_flag
				NOT = { has_country_flag = POR_NWportugal_99_block_flag }
			}
			set_country_flag = POR_NWportugal_99_block_flag
			country_event = NWportugal.99
		}
	}
}

POR_creating_new_order_icon_frame_set_effect = {
	hidden_effect = {
		if = {
			limit = { check_variable = { POR_creating_new_order_var < 1 } }
			set_variable = { POR_creating_new_order_icon_frame = 1 }
		}
		else_if = {
			limit = { check_variable = { POR_creating_new_order_var < 11 } }
			set_variable = { POR_creating_new_order_icon_frame = 2 }
		}
		else_if = {
			limit = { check_variable = { POR_creating_new_order_var < 21 } }
			set_variable = { POR_creating_new_order_icon_frame = 3 }
		}
		else_if = {
			limit = { check_variable = { POR_creating_new_order_var < 31 } }
			set_variable = { POR_creating_new_order_icon_frame = 4 }
		}
		else_if = {
			limit = { check_variable = { POR_creating_new_order_var < 42 } }
			set_variable = { POR_creating_new_order_icon_frame = 5 }
		}
		else_if = {
			limit = { check_variable = { POR_creating_new_order_var < 55 } }
			set_variable = { POR_creating_new_order_icon_frame = 6 }
		}
		else_if = {
			limit = { check_variable = { POR_creating_new_order_var < 65 } }
			set_variable = { POR_creating_new_order_icon_frame = 7 }
		}
		else_if = {
			limit = { check_variable = { POR_creating_new_order_var < 75 } }
			set_variable = { POR_creating_new_order_icon_frame = 8 }
		}
		else_if = {
			limit = { check_variable = { POR_creating_new_order_var < 85 } }
			set_variable = { POR_creating_new_order_icon_frame = 9 }
		}
		else_if = {
			limit = { check_variable = { POR_creating_new_order_var < 99 } }
			set_variable = { POR_creating_new_order_icon_frame = 10 }
		}
		else = {
			set_variable = { POR_creating_new_order_icon_frame = 11 }
		}
	}
}

POR_leader_trait_up_effect = {
	POR_francisco_rolao_preto = {
		if = {
			limit = {
				NOT = {
					has_trait = POR_leader_trait_1
					has_trait = POR_leader_trait_2
					has_trait = POR_leader_trait_3
					has_trait = POR_leader_trait_4
					has_trait = POR_leader_trait_5
				}
			}
			add_country_leader_trait = POR_leader_trait_1
		}
		else_if = {
			limit = { has_trait = POR_leader_trait_1 }
			swap_country_leader_traits = { remove = POR_leader_trait_1 add = POR_leader_trait_2 }
		}
		else_if = {
			limit = { has_trait = POR_leader_trait_2 }
			swap_country_leader_traits = { remove = POR_leader_trait_2 add = POR_leader_trait_3 }
		}
		else_if = {
			limit = { has_trait = POR_leader_trait_3 }
			swap_country_leader_traits = { remove = POR_leader_trait_3 add = POR_leader_trait_4 }
		}
		else_if = {
			limit = { has_trait = POR_leader_trait_4 }
			swap_country_leader_traits = { remove = POR_leader_trait_4 add = POR_leader_trait_5 }
		}
	}
}


POR_corporate_state_dyn_calculate = {
	hidden_effect = {
		clamp_variable = { var = POR_building_corporate_state min = 0 max = 100 }
		
		set_temp_variable = { temp1 = POR_building_corporate_state }
		multiply_temp_variable = { temp1 = 1.5 }
		divide_temp_variable = { temp1 = 1000 }
		set_variable = { POR_corporate_state_consumer_max_efficiency_var = temp1 }
		
		set_temp_variable = { temp1 = POR_building_corporate_state }
		divide_temp_variable = { temp1 = -500 }
		set_variable = { POR_corporate_state_min_export_var = temp1 }
		
		set_temp_variable = { temp1 = POR_building_corporate_state }
		divide_temp_variable = { temp1 = 1000 }
		set_variable = { POR_corporate_state_lack_of_resource_penalty_var = temp1 }
		
		set_temp_variable = { temp1 = POR_building_corporate_state }
		divide_temp_variable = { temp1 = 2000 }
		set_variable = { POR_corporate_state_research_speed_factor_var = temp1 }
		
		force_update_dynamic_modifier = yes
	}
}

POR_ruins_of_corporate_state_dyn_calculate = {
	hidden_effect = {
		clamp_variable = { var = POR_remnants_of_corporatism min = 0 max = 100 }
		
		set_temp_variable = { temp1 = POR_remnants_of_corporatism }
		multiply_temp_variable = { temp1 = 1.5 }
		divide_temp_variable = { temp1 = -1000 }
		set_variable = { POR_corporate_state_max_efficiency_var = temp1 }
		
		set_temp_variable = { temp1 = POR_remnants_of_corporatism }
		divide_temp_variable = { temp1 = -500 }
		set_variable = { POR_corporate_state_min_export_var = temp1 }
		
		set_temp_variable = { temp1 = POR_remnants_of_corporatism }
		divide_temp_variable = { temp1 = -1000 }
		set_variable = { POR_corporate_state_lack_of_resource_penalty_var = temp1 }
		
		set_temp_variable = { temp1 = POR_remnants_of_corporatism }
		multiply_temp_variable = { temp1 = 1.5 }
		divide_temp_variable = { temp1 = 1000 }
		set_variable = { POR_corporate_state_consumer_var = temp1 }
		
		set_temp_variable = { temp1 = POR_remnants_of_corporatism }
		divide_temp_variable = { temp1 = -2000 }
		set_variable = { POR_corporate_state_research_speed_factor_var = temp1 }
		
		force_update_dynamic_modifier = yes
	}
}

POR_progress_of_national_unity_program_dyn_calculate = {
	hidden_effect = {
		clamp_variable = { var = POR_progress_of_national_unity_program_var min = 0 max = 100 }
		
		set_temp_variable = { temp1 = POR_progress_of_national_unity_program_var }
		divide_temp_variable = { temp1 = 5 }
		subtract_from_temp_variable = { temp1 = 0.5 }
		round_temp_variable = temp1
		set_temp_variable = { temp2 = 20 }
		subtract_from_temp_variable = { temp2 = temp1 }
		multiply_temp_variable = { temp2 = 0.03 }
		set_variable = { POR_appalling_standard_of_living_consumer_factor = temp2 }
		
		set_temp_variable = { temp2 = 20 }
		subtract_from_temp_variable = { temp2 = temp1 }
		multiply_temp_variable = { temp2 = -0.01 }
		set_variable = { POR_appalling_standard_of_living_consumer_factor = temp2 }
		
		if = {
			limit = { check_variable = { POR_progress_of_national_unity_program_var = 100 } }
			clear_variable = POR_progress_of_national_unity_program_var
			remove_dynamic_modifier = { modifier = POR_appalling_standard_of_living_dyn }
			country_event = { id = NWportugal.119 hours = 6 }
		}
		else = {
			force_update_dynamic_modifier = yes
		}
	}
}


# Команда пишется в восставшем теге и должна быть после команды загрузки дерева. PREV для нее - изначальная страна
POR_focus_synchronization = {
	if = {	limit = { PREV = { has_completed_focus = POR_colonial_administration_of_mozambique } }	unlock_national_focus = POR_colonial_administration_of_mozambique	}
	if = {	limit = { PREV = { has_completed_focus = POR_coal_mining_in_mozambique } }	unlock_national_focus = POR_coal_mining_in_mozambique	}
	if = {	limit = { PREV = { has_completed_focus = POR_continue_salazars_planned_economy } }	unlock_national_focus = POR_continue_salazars_planned_economy	}
	if = {	limit = { PREV = { has_completed_focus = POR_modernizing_mozambiques_cities } }	unlock_national_focus = POR_modernizing_mozambiques_cities	}
	if = {	limit = { PREV = { has_completed_focus = POR_increase_cotton_production } }	unlock_national_focus = POR_increase_cotton_production	}
	if = {	limit = { PREV = { has_completed_focus = POR_pick_up_territories_of_mozambique_company } }	unlock_national_focus = POR_pick_up_territories_of_mozambique_company	}
	if = {	limit = { PREV = { has_completed_focus = POR_expand_access_to_education } }	unlock_national_focus = POR_expand_access_to_education	}
	if = {	limit = { PREV = { has_completed_focus = POR_return_control_of_mozambique_to_companies } }	unlock_national_focus = POR_return_control_of_mozambique_to_companies	}
	if = {	limit = { PREV = { has_completed_focus = POR_return_territories_to_mozambique_company } }	unlock_national_focus = POR_return_territories_to_mozambique_company	}
	if = {	limit = { PREV = { has_completed_focus = POR_restore_niassa_company } }	unlock_national_focus = POR_restore_niassa_company	}
	if = {	limit = { PREV = { has_completed_focus = POR_invest_in_mozambiques_royal_campaigns } }	unlock_national_focus = POR_invest_in_mozambiques_royal_campaigns	}
	if = {	limit = { PREV = { has_completed_focus = POR_amelia_nyasa_railway } }	unlock_national_focus = POR_amelia_nyasa_railway	}
	if = {	limit = { PREV = { has_completed_focus = POR_integration_of_traditional_authorities } }	unlock_national_focus = POR_integration_of_traditional_authorities	}
	if = {	limit = { PREV = { has_completed_focus = POR_resume_semiannual_testing } }	unlock_national_focus = POR_resume_semiannual_testing	}
	if = {	limit = { PREV = { has_completed_focus = POR_export_of_cashews_to_metropolis } }	unlock_national_focus = POR_export_of_cashews_to_metropolis	}
	if = {	limit = { PREV = { has_completed_focus = POR_export_of_tea_to_metropolis } }	unlock_national_focus = POR_export_of_tea_to_metropolis	}
	if = {	limit = { PREV = { has_completed_focus = POR_export_of_rice_to_metropolis } }	unlock_national_focus = POR_export_of_rice_to_metropolis	}
	if = {	limit = { PREV = { has_completed_focus = POR_provincial_decree_of_portugal } }	unlock_national_focus = POR_provincial_decree_of_portugal	}
	if = {	limit = { PREV = { has_completed_focus = POR_colonial_administration_of_timor } }	unlock_national_focus = POR_colonial_administration_of_timor	}
	if = {	limit = { PREV = { has_completed_focus = POR_timor_coffee_exports } }	unlock_national_focus = POR_timor_coffee_exports	}
	if = {	limit = { PREV = { has_completed_focus = POR_sandalwood_exports } }	unlock_national_focus = POR_sandalwood_exports	}
	if = {	limit = { PREV = { has_completed_focus = POR_sale_of_sapt_shares_in_japan } }	unlock_national_focus = POR_sale_of_sapt_shares_in_japan	}
	if = {	limit = { PREV = { has_completed_focus = POR_sapt_rubber_cultivation } }	unlock_national_focus = POR_sapt_rubber_cultivation	}
	if = {	limit = { PREV = { has_completed_focus = POR_force_local_workers_to_work } }	unlock_national_focus = POR_force_local_workers_to_work	}
	if = {	limit = { PREV = { has_completed_focus = POR_continue_creating_native_villages } }	unlock_national_focus = POR_continue_creating_native_villages	}
	if = {	limit = { PREV = { has_completed_focus = POR_transfer_education_of_timorese_to_church } }	unlock_national_focus = POR_transfer_education_of_timorese_to_church	}
	if = {	limit = { PREV = { has_completed_focus = POR_establish_agricultural_production } }	unlock_national_focus = POR_establish_agricultural_production	}
	if = {	limit = { PREV = { has_completed_focus = POR_start_restoring_agriculture } }	unlock_national_focus = POR_start_restoring_agriculture	}
	if = {	limit = { PREV = { has_completed_focus = POR_strengthen_administrative_control } }	unlock_national_focus = POR_strengthen_administrative_control	}
	if = {	limit = { PREV = { has_completed_focus = POR_timor_volunteer_units } }	unlock_national_focus = POR_timor_volunteer_units	}
	if = {	limit = { PREV = { has_completed_focus = POR_summon_timorese_garrison } }	unlock_national_focus = POR_summon_timorese_garrison	}
	if = {	limit = { PREV = { has_completed_focus = POR_portuguese_colonial_army } }	unlock_national_focus = POR_portuguese_colonial_army	}
	if = {	limit = { PREV = { has_completed_focus = POR_white_officers_and_sergeants } }	unlock_national_focus = POR_white_officers_and_sergeants	}
	if = {	limit = { PREV = { has_completed_focus = POR_black_population_recruitment } }	unlock_national_focus = POR_black_population_recruitment	}
	if = {	limit = { PREV = { has_completed_focus = POR_equipment_for_colonial_army } }	unlock_national_focus = POR_equipment_for_colonial_army	}
	if = {	limit = { PREV = { has_completed_focus = POR_strengthening_of_island_garrisons } }	unlock_national_focus = POR_strengthening_of_island_garrisons	}
	if = {	limit = { PREV = { has_completed_focus = POR_border_control } }	unlock_national_focus = POR_border_control	}
	if = {	limit = { PREV = { has_completed_focus = POR_integrate_cabinda } }	unlock_national_focus = POR_integrate_cabinda	}
	if = {	limit = { PREV = { has_completed_focus = POR_oil_in_cabindu } }	unlock_national_focus = POR_oil_in_cabindu	}
	if = {	limit = { PREV = { has_completed_focus = POR_expand_alcohol_factories } }	unlock_national_focus = POR_expand_alcohol_factories	}
	if = {	limit = { PREV = { has_completed_focus = POR_colonial_administration_of_angola } }	unlock_national_focus = POR_colonial_administration_of_angola	}
	if = {	limit = { PREV = { has_completed_focus = POR_west_african_transport_administration } }	unlock_national_focus = POR_west_african_transport_administration	}
	if = {	limit = { PREV = { has_completed_focus = POR_create_dta_airline } }	unlock_national_focus = POR_create_dta_airline	}
	if = {	limit = { PREV = { has_completed_focus = POR_expand_seaports } }	unlock_national_focus = POR_expand_seaports	}
	if = {	limit = { PREV = { has_completed_focus = POR_export_of_sisal } }	unlock_national_focus = POR_export_of_sisal	}
	if = {	limit = { PREV = { has_completed_focus = POR_export_of_coffe } }	unlock_national_focus = POR_export_of_coffe	}
	if = {	limit = { PREV = { has_completed_focus = POR_export_of_sugar } }	unlock_national_focus = POR_export_of_sugar	}
	if = {	limit = { PREV = { has_completed_focus = POR_export_of_cotton } }	unlock_national_focus = POR_export_of_cotton	}
	if = {	limit = { PREV = { has_completed_focus = POR_angola_portuguese_goods_market } }	unlock_national_focus = POR_angola_portuguese_goods_market	}
	if = {	limit = { PREV = { has_completed_focus = POR_continue_mosamedes_railway_to_mines } }	unlock_national_focus = POR_continue_mosamedes_railway_to_mines	}
	if = {	limit = { PREV = { has_completed_focus = POR_luanda_railway } }	unlock_national_focus = POR_luanda_railway	}
	if = {	limit = { PREV = { has_completed_focus = POR_expand_ore_production_in_central_provinces } }	unlock_national_focus = POR_expand_ore_production_in_central_provinces	}
	if = {	limit = { PREV = { has_completed_focus = POR_expand_rubber_farms } }	unlock_national_focus = POR_expand_rubber_farms	}
	if = {	limit = { PREV = { has_completed_focus = POR_angolan_manganese_mining } }	unlock_national_focus = POR_angolan_manganese_mining	}
	if = {	limit = { PREV = { has_completed_focus = POR_issue_of_new_denominations_of_angolan_banknotes } }	unlock_national_focus = POR_issue_of_new_denominations_of_angolan_banknotes	}
	if = {	limit = { PREV = { has_completed_focus = POR_urban_expansion_in_angola } }	unlock_national_focus = POR_urban_expansion_in_angola	}
	if = {	limit = { PREV = { has_completed_focus = POR_establishment_of_national_parks_in_angola } }	unlock_national_focus = POR_establishment_of_national_parks_in_angola	}
	if = {	limit = { PREV = { has_completed_focus = POR_modernization_and_industrialization_of_angolan_cities } }	unlock_national_focus = POR_modernization_and_industrialization_of_angolan_cities	}
	if = {	limit = { PREV = { has_completed_focus = POR_creating_sports_facilities_in_angola } }	unlock_national_focus = POR_creating_sports_facilities_in_angola	}
	if = {	limit = { PREV = { has_completed_focus = POR_baptist_settlements } }	unlock_national_focus = POR_baptist_settlements	}
	if = {	limit = { PREV = { has_completed_focus = POR_expansion_of_catholic_and_protestant_schools } }	unlock_national_focus = POR_expansion_of_catholic_and_protestant_schools	}
	if = {	limit = { PREV = { has_completed_focus = POR_introduction_of_labor_reforms } }	unlock_national_focus = POR_introduction_of_labor_reforms	}
	if = {	limit = { PREV = { has_completed_focus = POR_continue_infrastructure_development } }	unlock_national_focus = POR_continue_infrastructure_development	}
	if = {	limit = { PREV = { has_completed_focus = POR_widespread_construction_of_primary_schools } }	unlock_national_focus = POR_widespread_construction_of_primary_schools	}
	if = {	limit = { PREV = { has_completed_focus = POR_instituto_superior_tecnico } }	unlock_national_focus = POR_instituto_superior_tecnico	}
	if = {	limit = { PREV = { has_completed_focus = POR_ogme } }	unlock_national_focus = POR_ogme	}
	if = {	limit = { PREV = { has_completed_focus = POR_portuguese_artillery } }	unlock_national_focus = POR_portuguese_artillery	}
	if = {	limit = { PREV = { has_completed_focus = POR_advanced_artillery } }	unlock_national_focus = POR_advanced_artillery	}
	if = {	limit = { PREV = { has_completed_focus = POR_military_equipment } }	unlock_national_focus = POR_military_equipment	}
	if = {	limit = { PREV = { has_completed_focus = POR_bet_for_armored_vehicles } }	unlock_national_focus = POR_bet_for_armored_vehicles	}
	if = {	limit = { PREV = { has_completed_focus = POR_bet_on_combat_vehicles } }	unlock_national_focus = POR_bet_on_combat_vehicles	}
	if = {	limit = { PREV = { has_completed_focus = POR_ogma } }	unlock_national_focus = POR_ogma	}
	if = {	limit = { PREV = { has_completed_focus = POR_bet_on_light_aviation } }	unlock_national_focus = POR_bet_on_light_aviation	}
	if = {	limit = { PREV = { has_completed_focus = POR_advanced_light_aircraft } }	unlock_national_focus = POR_advanced_light_aircraft	}
	if = {	limit = { PREV = { has_completed_focus = POR_jet_research } }	unlock_national_focus = POR_jet_research	}
	if = {	limit = { PREV = { has_completed_focus = POR_air_base_no_4 } }	unlock_national_focus = POR_air_base_no_4	}
	if = {	limit = { PREV = { has_completed_focus = POR_textile_industry } }	unlock_national_focus = POR_textile_industry	}
	if = {	limit = { PREV = { has_completed_focus = POR_construction_of_new_bridges } }	unlock_national_focus = POR_construction_of_new_bridges	}
	if = {	limit = { PREV = { has_completed_focus = POR_food_industries } }	unlock_national_focus = POR_food_industries	}
	if = {	limit = { PREV = { has_completed_focus = POR_mining_industry } }	unlock_national_focus = POR_mining_industry	}
	if = {	limit = { PREV = { has_completed_focus = POR_creating_an_hcesar_keyboard } }	unlock_national_focus = POR_creating_an_hcesar_keyboard	}
	if = {	limit = { PREV = { has_completed_focus = POR_university_lisbon } }	unlock_national_focus = POR_university_lisbon	}
	if = {	limit = { PREV = { has_completed_focus = POR_law_on_electrification } }	unlock_national_focus = POR_law_on_electrification	}
	if = {	limit = { PREV = { has_completed_focus = POR_law_on_reorganization_and_development_of_industry } }	unlock_national_focus = POR_law_on_reorganization_and_development_of_industry	}
	if = {	limit = { PREV = { has_completed_focus = POR_army_reorganization } }	unlock_national_focus = POR_army_reorganization	}
	if = {	limit = { PREV = { has_completed_focus = POR_standardization } }	unlock_national_focus = POR_standardization	}
	if = {	limit = { PREV = { has_completed_focus = POR_defend_the_borders } }	unlock_national_focus = POR_defend_the_borders	}
	if = {	limit = { PREV = { has_completed_focus = POR_rebuild_the_lines_of_torres_vedras } }	unlock_national_focus = POR_rebuild_the_lines_of_torres_vedras	}
	if = {	limit = { PREV = { has_completed_focus = POR_regimento_de_comandos } }	unlock_national_focus = POR_regimento_de_comandos	}
	if = {	limit = { PREV = { has_completed_focus = POR_tropas_paraquedistas } }	unlock_national_focus = POR_tropas_paraquedistas	}
	if = {	limit = { PREV = { has_completed_focus = POR_expand_number_of_casadors } }	unlock_national_focus = POR_expand_number_of_casadors	}
	if = {	limit = { PREV = { has_completed_focus = POR_corpo_do_estado_maior } }	unlock_national_focus = POR_corpo_do_estado_maior	}
	if = {	limit = { PREV = { has_completed_focus = POR_staff_wargames } }	unlock_national_focus = POR_staff_wargames	}
	if = {	limit = { PREV = { has_completed_focus = POR_field_maneuvers } }	unlock_national_focus = POR_field_maneuvers	}
	if = {	limit = { PREV = { has_completed_focus = POR_implementation_of_1930_shipbuilding_plan } }	unlock_national_focus = POR_implementation_of_1930_shipbuilding_plan	}
	if = {	limit = { PREV = { has_completed_focus = POR_second_navy_reequipment } }	unlock_national_focus = POR_second_navy_reequipment	}
	if = {	limit = { PREV = { has_completed_focus = POR_submarine_effort } }	unlock_national_focus = POR_submarine_effort	}
	if = {	limit = { PREV = { has_completed_focus = POR_a_powerful_merchant_marine } }	unlock_national_focus = POR_a_powerful_merchant_marine	}
	if = {	limit = { PREV = { has_completed_focus = POR_merchant_marine_protection } }	unlock_national_focus = POR_merchant_marine_protection	}
	if = {	limit = { PREV = { has_completed_focus = POR_fuzileiros } }	unlock_national_focus = POR_fuzileiros	}
	if = {	limit = { PREV = { has_completed_focus = POR_naval_research_institute } }	unlock_national_focus = POR_naval_research_institute	}
	if = {	limit = { PREV = { has_completed_focus = POR_arsenal_do_alfeite } }	unlock_national_focus = POR_arsenal_do_alfeite	}
	if = {	limit = { PREV = { has_completed_focus = POR_national_cruiser_production } }	unlock_national_focus = POR_national_cruiser_production	}
	if = {	limit = { PREV = { has_completed_focus = POR_battleship_effort } }	unlock_national_focus = POR_battleship_effort	}
	if = {	limit = { PREV = { has_completed_focus = POR_carrier_effort } }	unlock_national_focus = POR_carrier_effort	}
	if = {	limit = { PREV = { has_completed_focus = POR_endless_sea } }	unlock_national_focus = POR_endless_sea	}
	if = {	limit = { PREV = { has_completed_focus = POR_portuguese_colonial_fleet } }	unlock_national_focus = POR_portuguese_colonial_fleet	}
	if = {	limit = { PREV = { has_completed_focus = POR_nrp_joao_de_lisboa } }	unlock_national_focus = POR_nrp_joao_de_lisboa	}
	if = {	limit = { PREV = { has_completed_focus = POR_colonial_administration_of_macau } }	unlock_national_focus = POR_colonial_administration_of_macau	}
	if = {	limit = { PREV = { has_completed_focus = POR_occupation_of_adjacent_islands } }	unlock_national_focus = POR_occupation_of_adjacent_islands	}
	if = {	limit = { PREV = { has_completed_focus = POR_ban_opium_trade } }	unlock_national_focus = POR_ban_opium_trade	}
	if = {	limit = { PREV = { has_completed_focus = POR_chinese_opium_trade } }	unlock_national_focus = POR_chinese_opium_trade	}
	if = {	limit = { PREV = { has_completed_focus = POR_western_line_of_qiguan_highway } }	unlock_national_focus = POR_western_line_of_qiguan_highway	}
	if = {	limit = { PREV = { has_completed_focus = POR_red_market } }	unlock_national_focus = POR_red_market	}
	if = {	limit = { PREV = { has_completed_focus = POR_trade_in_chinese_workers } }	unlock_national_focus = POR_trade_in_chinese_workers	}
	if = {	limit = { PREV = { has_completed_focus = POR_organize_gold_trading_center } }	unlock_national_focus = POR_organize_gold_trading_center	}
	if = {	limit = { PREV = { has_completed_focus = POR_disaster_relief_association_in_four_circles } }	unlock_national_focus = POR_disaster_relief_association_in_four_circles	}
	if = {	limit = { PREV = { has_completed_focus = POR_nationalization_of_food_products } }	unlock_national_focus = POR_nationalization_of_food_products	}
	if = {	limit = { PREV = { has_completed_focus = POR_send_help_from_metropolis } }	unlock_national_focus = POR_send_help_from_metropolis	}
	if = {	limit = { PREV = { has_completed_focus = POR_modernizing_fortresses_for_modern_warfare } }	unlock_national_focus = POR_modernizing_fortresses_for_modern_warfare	}
}

POR_set_up_character_cw_flags_effect = {
	# Communist
	POR_bento_goncalves = {				set_character_flag = POR_cw_character_communist_side_flag }
	POR_popular_front = {				set_character_flag = POR_cw_character_communist_side_flag }
	POR_alvaro_cunhal = {				set_character_flag = POR_cw_character_communist_side_flag }
	POR_bento_de_jesus_caraca = {		set_character_flag = POR_cw_character_communist_side_flag }
	POR_carolina_loff_da_fonseca = {	set_character_flag = POR_cw_character_communist_side_flag }
	POR_jose_moreira = {				set_character_flag = POR_cw_character_communist_side_flag }
	POR_ludgero_pinto_basto = {			set_character_flag = POR_cw_character_communist_side_flag }
	POR_sergio_vilarigues = {			set_character_flag = POR_cw_character_communist_side_flag }
	POR_antonio_dias_lourenco = {		set_character_flag = POR_cw_character_communist_side_flag }
	POR_francisco_miguel_duarte = {		set_character_flag = POR_cw_character_communist_side_flag }
	POR_joaquim_pires_jorge = {			set_character_flag = POR_cw_character_communist_side_flag }
	POR_jose_gregorio = {				set_character_flag = POR_cw_character_communist_side_flag }
	POR_candida_ventura = {				set_character_flag = POR_cw_character_communist_side_flag }
	POR_francisco_de_paula_oliveira = {	set_character_flag = POR_cw_character_communist_side_flag }
	POR_julio_de_melo_fogaca = {		set_character_flag = POR_cw_character_communist_side_flag }

	# Anarchist
	POR_emidio_santana = {					set_character_flag = POR_cw_character_anarchist_side_flag }
	POR_serafim_cardoso_lucena = {			set_character_flag = POR_cw_character_anarchist_side_flag }
	POR_manuel_juaquim_de_sousa = {			set_character_flag = POR_cw_character_anarchist_side_flag }
	POR_alexandre_vieira = {				set_character_flag = POR_cw_character_anarchist_side_flag }
	POR_jose_da_silva_santos_scratch = {	set_character_flag = POR_cw_character_anarchist_side_flag }
	POR_aurelio_quintanilla = {				set_character_flag = POR_cw_character_anarchist_side_flag }
	POR_mario_castelhano = {				set_character_flag = POR_cw_character_anarchist_side_flag }
	
	# Republican
	POR_jose_norton_de_matos = {					set_character_flag = POR_cw_character_republican_side_flag }
	POR_joao_tamagnini_barbosa = {					set_character_flag = POR_cw_character_republican_side_flag }
	POR_jose_mendes_cabecadas = {					set_character_flag = POR_cw_character_republican_side_flag }
	POR_augusto_de_vasconcelos = {					set_character_flag = POR_cw_character_republican_side_flag }
	POR_duarte_leite = {							set_character_flag = POR_cw_character_republican_side_flag }
	POR_antonio_maria_da_silva = {					set_character_flag = POR_cw_character_republican_side_flag }
	POR_jose_antonio_simoes_raposo_junior = {		set_character_flag = POR_cw_character_republican_side_flag }
	POR_jaime_cortesao = {							set_character_flag = POR_cw_character_republican_side_flag }
	POR_maria_lamas = {								set_character_flag = POR_cw_character_republican_side_flag }
	POR_armando_humberto_da_gama_ochoa = {			set_character_flag = POR_cw_character_republican_side_flag }
	POR_armando_pereira_de_castro_agatao_lanca = {	set_character_flag = POR_cw_character_republican_side_flag }
	POR_jose_mendes_dos_reis = {					set_character_flag = POR_cw_character_republican_side_flag }
	POR_bernardino_machado = {						set_character_flag = POR_cw_character_republican_side_flag }
	POR_afonso_augusto_da_costa = {					set_character_flag = POR_cw_character_republican_side_flag }
	POR_jaime_cortesao = {							set_character_flag = POR_cw_character_republican_side_flag }
	POR_antonio_sergio = {							set_character_flag = POR_cw_character_republican_side_flag }
	POR_jaime_de_morais = {							set_character_flag = POR_cw_character_republican_side_flag }
	POR_joao_maria_ferreira_sarmento_pimentel = {	set_character_flag = POR_cw_character_republican_side_flag }
	POR_armando_cortesao = {						set_character_flag = POR_cw_character_republican_side_flag }
	POR_jose_domingues_dos_santos = {				set_character_flag = POR_cw_character_republican_side_flag }
	POR_manuel_pestana_junior = {					set_character_flag = POR_cw_character_republican_side_flag }
	POR_mario_de_azevedo_gomes = {					set_character_flag = POR_cw_character_republican_side_flag }
	POR_amilcar_ramada_curto = {					set_character_flag = POR_cw_character_republican_side_flag }
	
	# Integralist
	POR_francisco_rolao_preto = {				set_character_flag = POR_cw_character_integralist_side_flag }
	POR_jose_hipolito_raposo = {				set_character_flag = POR_cw_character_integralist_side_flag }
	POR_alberto_monsaraz = {					set_character_flag = POR_cw_character_integralist_side_flag }
	POR_duarte_jose_pacheco = {					set_character_flag = POR_cw_character_integralist_side_flag }
	POR_jose_adriano_pequito_rebelo = {			set_character_flag = POR_cw_character_integralist_side_flag }
	POR_jose_ricardo_pereira_cabral = {			set_character_flag = POR_cw_character_integralist_side_flag }
	POR_rodrigo_de_queiros = {					set_character_flag = POR_cw_character_integralist_side_flag }
	
	# Monarchist
	POR_duarte_nuno = {										set_character_flag = POR_cw_character_monarchist_side_flag }
	POR_maria_pia_de_braganca = {							set_character_flag = POR_cw_character_monarchist_side_flag }
	POR_martinho_nobre_de_melo = {							set_character_flag = POR_cw_character_monarchist_side_flag }
	POR_joao_francisco_de_barbosa_azevedo_joao_ameal = {	set_character_flag = POR_cw_character_monarchist_side_flag }
	POR_joao_de_azevedo_coutinho = {						set_character_flag = POR_cw_character_monarchist_side_flag }
	POR_henrique_de_paiva_couceiro = {						set_character_flag = POR_cw_character_monarchist_side_flag }
	POR_rui_coelho = {										set_character_flag = POR_cw_character_monarchist_side_flag }
	POR_eduardo_afonso_viana = {							set_character_flag = POR_cw_character_monarchist_side_flag }
	POR_luis_carlos_de_lima_de_almeida_braga = {			set_character_flag = POR_cw_character_monarchist_side_flag }
	POR_tomas_da_camara = {									set_character_flag = POR_cw_character_monarchist_side_flag }
	POR_jose_maria_do_espirito_santo_de_almeida_correia = {	set_character_flag = POR_cw_character_monarchist_side_flag }
}