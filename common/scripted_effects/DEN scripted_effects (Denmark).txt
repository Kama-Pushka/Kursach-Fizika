#MILITARY EFFECTS
DEN_improve_haeren_NS = {
	add_to_variable = { DEN_haeren_improvement_tracker_var = 1 }
	effect_tooltip = {
		if = {
			limit = {
				DEN_has_haeren_dynamic_modifier = no
			}
			add_dynamic_modifier = { modifier = DEN_haeren_dynamic_modifier }
		}
		else = { custom_effect_tooltip = DEN_modify_haeren_dynamic_modifier }
	}
	hidden_effect = {
		if = {
			limit = { #Only add the modifier if there is no one
				check_variable = { DEN.DEN_haeren_improvement_tracker_var < 2 }
				NOT = { 
					has_dynamic_modifier = { modifier = DEN_haeren_dynamic_modifier }
					has_dynamic_modifier = { modifier = DEN_haeren_dynamic_modifier_improved }
					has_dynamic_modifier = { modifier = DEN_haeren_dynamic_modifier_max_improved }
				}
			}
			add_dynamic_modifier = { modifier = DEN_haeren_dynamic_modifier }
		}
		else_if = {
			limit = { #only improve to max once
				check_variable = { DEN.DEN_haeren_improvement_tracker_var > 4 }
				has_dynamic_modifier = { modifier = DEN_haeren_dynamic_modifier_improved }
				NOT = {
					has_dynamic_modifier = { modifier = DEN_haeren_dynamic_modifier_max_improved }
				}
			}
			remove_dynamic_modifier = { modifier = DEN_haeren_dynamic_modifier_improved }
			add_dynamic_modifier = { modifier = DEN_haeren_dynamic_modifier_max_improved }
		}
		else_if = {
			limit = { #Only improve if you have the basic version
				check_variable = { DEN.DEN_haeren_improvement_tracker_var > 2 }
				has_dynamic_modifier = { modifier = DEN_haeren_dynamic_modifier }
				NOT = {
					has_dynamic_modifier = { modifier = DEN_haeren_dynamic_modifier_improved }
				}
			}
			remove_dynamic_modifier = { modifier = DEN_haeren_dynamic_modifier }
			add_dynamic_modifier = { modifier = DEN_haeren_dynamic_modifier_improved }
		}
	}
}

DEN_improve_sovaernet_NS = {
	add_to_variable = { DEN_sovaernet_improvement_tracker_var = 1 }
	effect_tooltip = {
		if = {
			limit = {
				DEN_has_sovaernet_dynamic_modifier = no
			}
			add_dynamic_modifier = { modifier = DEN_sovaernet_dynamic_modifier }
		}
		else = { custom_effect_tooltip = DEN_modify_sovaernet_dynamic_modifier }
	}
	hidden_effect = {
		if = {
			limit = { #Only add the modifier if there is no one
				check_variable = { DEN.DEN_sovaernet_improvement_tracker_var < 2 }
				NOT = {
					has_dynamic_modifier = { modifier = DEN_sovaernet_dynamic_modifier }
					has_dynamic_modifier = { modifier = DEN_sovaernet_dynamic_modifier_improved }
					has_dynamic_modifier = { modifier = DEN_sovaernet_dynamic_modifier_max_improved }
				}
			}
			add_dynamic_modifier = { modifier = DEN_sovaernet_dynamic_modifier }
		}
		else_if = {
			limit = { #only improve to max once
				check_variable = { DEN.DEN_sovaernet_improvement_tracker_var > 4 }
				has_dynamic_modifier = { modifier = DEN_sovaernet_dynamic_modifier_improved }
				NOT = {
					has_dynamic_modifier = { modifier = DEN_sovaernet_dynamic_modifier_max_improved }
				}
			}
			remove_dynamic_modifier = { modifier = DEN_sovaernet_dynamic_modifier_improved }
			add_dynamic_modifier = { modifier = DEN_sovaernet_dynamic_modifier_max_improved }
		}
		else_if = {
			limit = { #Only improve if you have the basic version
				check_variable = { DEN.DEN_sovaernet_improvement_tracker_var > 2 }
				has_dynamic_modifier = { modifier = DEN_sovaernet_dynamic_modifier }
				NOT = {
					has_dynamic_modifier = { modifier = DEN_sovaernet_dynamic_modifier_improved }
				}
			}
			remove_dynamic_modifier = { modifier = DEN_sovaernet_dynamic_modifier }
			add_dynamic_modifier = { modifier = DEN_sovaernet_dynamic_modifier_improved }
		}
	}
}

DEN_improve_flyvevabnet_NS = { 
	add_to_variable = { DEN_flyvevabnet_improvement_tracker_var = 1 }
	if = {
		limit = {
			DEN_has_flyvevabnet_dynamic_modifier = no
		}
		add_dynamic_modifier = { modifier = DEN_flyvevabnet_dynamic_modifier }
	}
	else = { custom_effect_tooltip = DEN_modify_flyvevabnet_dynamic_modifier }
	hidden_effect = {
		if = {
			limit = { #Only add the modifier if there is no one
				check_variable = { DEN.DEN_flyvevabnet_improvement_tracker_var < 2 }
				NOT = {
					has_dynamic_modifier = { modifier = DEN_flyvevabnet_dynamic_modifier }
					has_dynamic_modifier = { modifier = DEN_flyvevabnet_dynamic_modifier_improved }
					has_dynamic_modifier = { modifier = DEN_flyvevabnet_dynamic_modifier_max_improved }
				}
			}
			add_dynamic_modifier = { modifier = DEN_flyvevabnet_dynamic_modifier }
		}
		else_if = {
			limit = { #only improve to max once
				check_variable = { DEN.DEN_flyvevabnet_improvement_tracker_var > 4 }
				has_dynamic_modifier = { modifier = DEN_flyvevabnet_dynamic_modifier_improved }
				NOT = {
					has_dynamic_modifier = { modifier = DEN_flyvevabnet_dynamic_modifier_max_improved }
				}
			}
			remove_dynamic_modifier = { modifier = DEN_flyvevabnet_dynamic_modifier_improved }
			add_dynamic_modifier = { modifier = DEN_flyvevabnet_dynamic_modifier_max_improved }
		}
		else_if = {
			limit = { #Only improve if you have the basic version
				check_variable = { DEN.DEN_flyvevabnet_improvement_tracker_var > 2 }
				has_dynamic_modifier = { modifier = DEN_flyvevabnet_dynamic_modifier }
				NOT = {
					has_dynamic_modifier = { modifier = DEN_flyvevabnet_dynamic_modifier_improved }
				}
			}
			remove_dynamic_modifier = { modifier = DEN_flyvevabnet_dynamic_modifier }
			add_dynamic_modifier = { modifier = DEN_flyvevabnet_dynamic_modifier_improved }
		}
	}
}

DEN_get_converted_air_carriers = {
	if = { 
		limit = {
			has_dlc = "Man the Guns"
		}
		if = {
			limit = {
				NOT = { has_tech = early_ship_hull_carrier }
			}
			set_technology = { early_ship_hull_carrier = 1 }
		}
		#Equipment Variant
		create_equipment_variant = {
			name = "Prinsen Class - Converted Liner"
			type = ship_hull_carrier_conversion_ca
			name_group = DEN_CV_HISTORICAL
			parent_version = 0
			allow_without_tech = yes #Makes no difference since focus grants appropriate tech (	above), but it improves tooltip
			modules = {
				fixed_ship_deck_slot_1 = ship_deck_space
				fixed_ship_deck_slot_2 = ship_deck_space
				fixed_ship_anti_air_slot = ship_anti_air_1
				fixed_ship_radar_slot = empty
				fixed_ship_engine_slot = carrier_ship_engine_1
				fixed_ship_secondaries_slot = ship_secondaries_1
			}
		}
	
		#Line Production
		add_equipment_production = {
			equipment = {
				type = ship_hull_carrier_conversion_ca
				creator = "DEN"
				version_name = "Prinsen Class - Converted Liner"
			}
			name = "Prinsen"
			requested_factories = 1
			progress = 0.65
			amount = 1
		}
		#Line Production
		add_equipment_production = {
			equipment = {
				type = ship_hull_carrier_conversion_ca
				creator = "DEN"
				version_name = "Prinsen Class - Converted Liner"
			}
			name = "Herren"
			requested_factories = 1
			progress = 0.4
			amount = 1
		}
	}
	##############
	### NO MTG ###
	##############
	else = {
		if = {
			limit = {
				NOT = { has_tech = early_carrier }
			}
			set_technology = { early_carrier = 1 }
		}
		create_equipment_variant = {
			name = "Prinsen Class - Converted Liner"
			type = carrier_1
			allow_without_tech = yes #Makes no difference since focus grants appropriate tech (above), but it improves tooltip
			upgrades = {
				ship_deckspace_upgrade = 2
				carrier_armor_upgrade = 1
				ship_engine_upgrade = 1
				ship_reliability_upgrade = 1
			}
		}
		add_equipment_production = {
			equipment = {
				type = carrier_1
				creator = "DEN"
				version_name = "Prinsen Class - Converted Liner"
			}
			name = "Prinsen"
			requested_factories = 1
			progress = 0.65
			amount = 1
		}
		add_equipment_production = {
			equipment = {
				type = carrier_1
				creator = "DEN"
				version_name = "Prinsen Class - Converted Liner"
			}
			name = "Herren"
			requested_factories = 1
			progress = 0.4
			amount = 1
		}
	}
	add_tech_bonus = {
		name = DEN_north_sea_ambitions
		bonus = 0.5
		uses = 3
		category = ca_tech
		category = bb_tech
		category = cv_tech
	}
}

DEN_get_proper_air_carriers = {
	###########
	### MTG ###
	###########
	if = { 
		limit = {
			has_dlc = "Man the Guns"
		}
		if = {
			limit = {
				NOT = { has_tech = basic_ship_hull_carrier }
			}
			set_technology = { basic_ship_hull_carrier = 1 }
		}

		#Equipment Variant
		create_equipment_variant = {
			name = "Prinsen Class"
			type = ship_hull_carrier_1
			name_group = DEN_CV_HISTORICAL
			parent_version = 0
			allow_without_tech = yes #Makes no difference since focus grants appropriate tech (above), but it improves tooltip
			modules = {
				fixed_ship_deck_slot_1 = ship_deck_space
				fixed_ship_deck_slot_2 = ship_deck_space
				fixed_ship_anti_air_slot = ship_anti_air_1
				fixed_ship_radar_slot = empty
				fixed_ship_engine_slot = carrier_ship_engine_1
				fixed_ship_secondaries_slot = ship_secondaries_1
				front_1_custom_slot = ship_deck_space
			}
		}
		#Line Production
		add_equipment_production = {
			equipment = {
				type = ship_hull_carrier_1
				creator = "DEN"
				version_name = "Prinsen Class"
			}
			name = "Prinsen"
			requested_factories = 2
			progress = 0.5
			amount = 1
		}
	}

	##############
	### NO MTG ###
	##############
	else = {
		if = {
			limit = {
				NOT = { has_tech = basic_carrier }
			}
			set_technology = { basic_carrier = 1 }
		}
		create_equipment_variant = {
			name = "Prinsen Class"
			type = carrier_2
			allow_without_tech = yes #Makes no difference since focus grants appropriate tech (above), but it improves tooltip
			upgrades = {
				ship_deckspace_upgrade = 3
				carrier_armor_upgrade = 2
				ship_engine_upgrade = 1
				ship_reliability_upgrade = 1
			}
		}
		add_equipment_production = {
			equipment = {
				type = carrier_2
				creator = "DEN"
				version_name = "Prinsen Class"
			}
			name = "Prinsen"
			requested_factories = 2
			progress = 0.5
			amount = 1
		}
	}
	add_tech_bonus = {
		name = DEN_north_sea_ambitions
		bonus = 0.5
		uses = 2
		category = ca_tech
		category = bb_tech
		category = cv_tech
	}
}

DEN_guarantee_tech_sharing = {
	if = {
		limit = {
			OR = {
				FROM = {
					original_tag = USA
				}
				check_variable = { DEN.DEN_guaranteeing_nation = USA }
			}
		}
		if = {
			limit = {
				has_tech_sharing_feature = yes
			}
			USA = {
				add_to_tech_sharing_group = DEN_danish_partnership_tech_sharing
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.15
					uses = 1
					category = armor
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.15
					uses = 1
					category = artillery
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.15
					uses = 1
					category = infantry_weapons
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.15
					uses = 1
					category = naval_equipment
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.15
					uses = 1
					category = air_equipment
				}
			}
			DEN = {
				add_to_tech_sharing_group = DEN_danish_partnership_tech_sharing
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 1
					category = armor
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 1
					category = artillery
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 1
					category = infantry_weapons
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 1
					category = naval_equipment
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 1
					category = air_equipment
				}
			}
		}
		else = {
			USA = {
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.15
					uses = 1
					category = armor
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.15
					uses = 1
					category = artillery
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.15
					uses = 1
					category = infantry_weapons
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.15
					uses = 1
					category = naval_equipment
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.15
					uses = 1
					category = air_equipment
				}
			}
			DEN = {
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 1
					category = armor
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 1
					category = artillery
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 1
					category = infantry_weapons
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 1
					category = naval_equipment
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 1
					category = air_equipment
				}
			}
		}
	}
	if = {
		limit = {
			OR = {
				FROM = {
					original_tag = ENG
				}
				check_variable = { DEN.DEN_guaranteeing_nation = ENG }
			}
		}
		if = {
			limit = {
				has_tech_sharing_feature = yes
			}
			ENG = {
				add_to_tech_sharing_group = DEN_danish_partnership_tech_sharing
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = naval_equipment
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = air_equipment
				}
			}
			DEN = {
				add_to_tech_sharing_group = DEN_danish_partnership_tech_sharing
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.5
					uses = 2
					category = naval_equipment
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = air_equipment
				}
			}
		}
		else = {
			ENG = {
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = naval_equipment
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = air_equipment
				}
			}
			DEN = {
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.5
					uses = 2
					category = naval_equipment
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = air_equipment
				}
			}
		}
	}
	if = {
		limit = {
			OR = {
				FROM = {
					original_tag = GER
				}
				check_variable = { DEN.DEN_guaranteeing_nation = GER }
			}
		}
		if = {
			limit = {
				has_tech_sharing_feature = yes
			}
			GER = {
				add_to_tech_sharing_group = DEN_danish_partnership_tech_sharing
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = armor
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = air_equipment
				}
			}
			DEN = {
				add_to_tech_sharing_group = DEN_danish_partnership_tech_sharing
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.5
					uses = 2
					category = armor
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = air_equipment
				}
			}
		}
		else = {
			GER = {
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = armor
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = air_equipment
				}
			}
			DEN = {
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.5
					uses = 2
					category = armor
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = air_equipment
				}
			}
		}
	}
	if = {
		limit = {
			OR = {
				FROM = {
					original_tag = SOV
				}
				check_variable = { DEN.DEN_guaranteeing_nation = SOV }
			}
		}
		if = {
			limit = {
				has_tech_sharing_feature = yes
			}
			SOV = {
				add_to_tech_sharing_group = DEN_danish_partnership_tech_sharing
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = artillery
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = infantry_weapons
				}
			}
			DEN = {
				add_to_tech_sharing_group = DEN_danish_partnership_tech_sharing
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.5
					uses = 2
					category = artillery
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = infantry_weapons
				}
			}
		}
		else = {
			SOV = {
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = artillery
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = infantry_weapons
				}
			}
			DEN = {
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.5
					uses = 2
					category = artillery
				}
				add_tech_bonus = {
					name = DEN_danish_partnership_tech_sharing
					bonus = 0.25
					uses = 2
					category = infantry_weapons
				}
			}
		}
	}
}

###

DEN_great_depression_down = {
	if = {
		limit = { has_country_flag = DEN_hated_king_flag }
		DEN_hated_king_down = yes
	}
	if = {
		limit = {
			has_idea = DEN_great_depression_1
		}
		remove_ideas = DEN_great_depression_1
		clr_country_flag = DEN_unfinished_crisis_flag
		set_country_flag = DEN_finished_crisis_flag
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_2
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_2
			add_idea = DEN_great_depression_1
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_3
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_3
			add_idea = DEN_great_depression_2
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_4
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_4
			add_idea = DEN_great_depression_3
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_5
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_5
			add_idea = DEN_great_depression_4
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_6
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_6
			add_idea = DEN_great_depression_5
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_7
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_7
			add_idea = DEN_great_depression_6
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_8
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_8
			add_idea = DEN_great_depression_7
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_9
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_9
			add_idea = DEN_great_depression_8
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_10
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_10
			add_idea = DEN_great_depression_9
		}
	}
}

DEN_great_depression_twice_down = {
	if = {
		limit = {
			has_idea = DEN_great_depression_1
		}
		remove_ideas = DEN_great_depression_1
		clr_country_flag = DEN_unfinished_crisis_flag
		set_country_flag = DEN_finished_crisis_flag
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_2
		}
		remove_ideas = DEN_great_depression_2
		clr_country_flag = DEN_unfinished_crisis_flag
		set_country_flag = DEN_finished_crisis_flag
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_3
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_3
			add_idea = DEN_great_depression_1
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_4
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_4
			add_idea = DEN_great_depression_2
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_5
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_5
			add_idea = DEN_great_depression_3
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_6
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_6
			add_idea = DEN_great_depression_4
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_7
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_7
			add_idea = DEN_great_depression_5
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_8
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_8
			add_idea = DEN_great_depression_6
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_9
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_9
			add_idea = DEN_great_depression_7
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_10
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_10
			add_idea = DEN_great_depression_8
		}
	}
}

DEN_start_collaboration = {
	load_focus_tree = nw_denmark_collaboration_focus
	GER = {
		set_autonomy = {
			target = DEN
			autonomy_state = autonomy_satellite
		}
	}
	add_ideas = {
		DEN_c_protectorate_under_occupation
		DEN_c_disarmed_people_4
	}
	set_country_flag = DEN_c_german_protectorate_flag
	activate_mission = DEN_c_august_uprising_mission
	if = {
		limit = {
			DEN = {
				has_full_control_of_state = 337
				owns_state = 337
			}
			ENG = { has_war_with = GER }
		}
		hidden_effect = {
			ENG = {
				country_event = {
					id = apdenmark_c.9
					days = 2
				}
			}
		}
	}
	hidden_effect = {
		set_politics = {
			ruling_party = democratic
		}
		set_popularities = {
			democratic = 65
			neutrality = 5
			fascism = 15
			communism = 15
		}
		NW_legitimacy_check = yes
	}
}

DEN_great_depression_up = {
	if = {
		limit = {
			has_idea = DEN_great_depression_1
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_1
			add_idea = DEN_great_depression_2
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_2
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_2
			add_idea = DEN_great_depression_3
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_3
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_3
			add_idea = DEN_great_depression_4
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_4
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_4
			add_idea = DEN_great_depression_5
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_5
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_5
			add_idea = DEN_great_depression_6
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_6
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_6
			add_idea = DEN_great_depression_7
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_7
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_7
			add_idea = DEN_great_depression_8
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_8
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_8
			add_idea = DEN_great_depression_9
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_9
		}
		swap_ideas = {
			remove_idea = DEN_great_depression_9
			add_idea = DEN_great_depression_10
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_great_depression_10
		}
		add_stability = -0.2
	}
}

DEN_hated_king_down = {
	if = {
		limit = {
			has_idea = DEN_hated_king_1
		}
		remove_ideas = DEN_hated_king_1
		clr_country_flag = DEN_hated_king_flag
		country_event = { id = apdenmark.94 hours = 3 }
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_2
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_2
			add_idea = DEN_hated_king_1
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_3
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_3
			add_idea = DEN_hated_king_2
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_4
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_4
			add_idea = DEN_hated_king_3
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_5
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_5
			add_idea = DEN_hated_king_4
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_6
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_6
			add_idea = DEN_hated_king_5
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_7
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_7
			add_idea = DEN_hated_king_6
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_8
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_8
			add_idea = DEN_hated_king_7
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_9
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_9
			add_idea = DEN_hated_king_8
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_10
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_10
			add_idea = DEN_hated_king_9
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_11
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_11
			add_idea = DEN_hated_king_10
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_12
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_12
			add_idea = DEN_hated_king_11
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_13
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_13
			add_idea = DEN_hated_king_12
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_14
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_14
			add_idea = DEN_hated_king_13
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_15
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_15
			add_idea = DEN_hated_king_14
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_16
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_16
			add_idea = DEN_hated_king_15
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_17
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_17
			add_idea = DEN_hated_king_16
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_18
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_18
			add_idea = DEN_hated_king_17
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_19
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_19
			add_idea = DEN_hated_king_18
		}
	}
	else_if = {
		limit = {
			has_idea = DEN_hated_king_20
		}
		swap_ideas = {
			remove_idea = DEN_hated_king_20
			add_idea = DEN_hated_king_19
		}
	}
}