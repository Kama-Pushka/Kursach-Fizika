
ENG_convoy_voy_voy = {
	allowed = { original_tag = ENG }
	enable = {
		has_government = democratic
		has_war = no
		has_equipment = {
			convoy < 1000
		}
	}
	abort_when_not_enabled = yes
	ai_strategy = {
		type = equipment_production_min_factories
		id = convoy
		value = 5
	}
}

ENG_convoy_voy_voy2 = {
	allowed = { original_tag = ENG }
	enable = {
		has_government = democratic
		has_war = yes
		has_equipment = {
			convoy < 1000
		}
	}
	abort_when_not_enabled = yes
	ai_strategy = {
		type = equipment_production_min_factories
		id = convoy
		value = 10
	}
}
# TODO Нужно ли?
# build_aden_is_cool = {
	# allowed = { original_tag = ENG }
	# enable = {
		# controls_state = 992
		# 992 = { has_dynamic_modifier = { modifier = idea_RAJ_aden_treaty_port } }
	# }

	# abort_when_not_enabled = yes

	# ai_strategy = {
		# type = factory_build_score_factor
       	# target = 992
		# value = 1000
   	# }
# }

# allies_do_not_rely_on_AIFC = {
	# enable = {
		# is_historical_focus_on = yes
		# is_in_faction_with = ENG
		# NOT = {
			# tag = ENG
			# tag = USA
			# tag = FRA
			# has_global_flag = d_day_happened 		TODO нужен этот флаг
			# has_country_flag = fastgaming_test
		# }
	# }
	# abort_when_not_enabled = yes

	# ai_strategy = {
		# type = force_concentration_factor
		# value = -100
	# }
# }

ENG_a_change_in_course_pp_spending = {
	allowed = {
		original_tag = ENG
	}
	enable = {
		has_government = democratic
		has_completed_focus = ENG_a_change_in_course
		has_war = no
		is_subject = no
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = pp_spend_amount
		id = decision
		value = 9999
	}
}

allies_dont_waste_tanks_in_the_jungle = {
	enable = {
		is_in_faction_with = ENG
		any_enemy_country = {
			is_major = yes
			capital_scope = { is_on_continent = europe }
			has_capitulated = no
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_armor_score
		id = "SIA"
		value = -500
	}

	ai_strategy = {
		type = front_armor_score
		id = "JAP"
		value = -500
	}

	ai_strategy = {
		type = front_armor_score
		id = "MAN"
		value = -500
	}

	ai_strategy = {
		type = front_armor_score
		id = "CHI"
		value = -500
	}

	ai_strategy = {
		type = front_armor_score
		id = "YUN"
		value = -500
	}

	ai_strategy = {
		type = front_armor_score
		id = "GXC"
		value = -500
	}
}
allies_dont_waste_tanks_in_the_jungle_ENG = {
	allowed = {
		original_tag = ENG
	}
	reversed = yes
	enable = {
		has_war_with = ENG
		capital_scope = { is_on_continent = asia }
		any_neighbor_country = {
			is_in_faction_with = ENG
			has_capitulated = no
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_armor_score
		id = "ENG"
		value = -200
	}
}
allies_dont_waste_tanks_in_the_jungle_USA = {
	allowed = {
		original_tag = USA
	}
	reversed = yes
	enable = {
		has_war_with = USA
		capital_scope = { is_on_continent = asia }
		any_neighbor_country = {
			is_in_faction_with = USA
			has_capitulated = no
		}
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = front_armor_score
		id = "USA"
		value = -200
	}
}

give_no_two_shit_about_communist_china = {
	allowed = { original_tag = ENG }

	enable = {
		is_historical_focus_on = yes
		CHI = {
			OR = {
				is_faction_leader = yes 
				is_in_faction_with = ENG
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = alliance
		id = "PRC"
		value = -9999
	}
}

give_no_two_shit_about_england = {
	allowed = { original_tag = PRC }

	enable = {
		is_historical_focus_on = yes
		CHI = {
			OR = {
				is_faction_leader = yes 
				is_in_faction_with = ENG
			}
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = alliance
		id = "ENG"
		value = -9999
	}
}

allies_we_need_more_bombs = {
	allowed = {
		OR = {
			original_tag = ENG
			original_tag = USA
		}
	}
	enable = {
		OR = {
			AND = {
				has_deployed_air_force_size = {
					size > 8999 #we control the sky
					type = fighter
				}
				NOT = {
					any_country = {
						has_war_with = ROOT
						has_deployed_air_force_size = {
							size > 4999 #but they don't
							type = fighter
						}
					}
				}
			}
			has_deployed_air_force_size = {
				size > 12999 #we control the sky
				type = fighter
			}	
		}
		# NOT = { has_idea = LSM_victory_in_europe }
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = unit_ratio
		id = fighter
		value = 1
	}

	ai_strategy = {
		type = unit_ratio
		id = cas
		value = 30
	}

	ai_strategy = {
		type = unit_ratio
		id = tactical_bomber
		value = 8
	}

	ai_strategy = {
		type = unit_ratio
		id = strategic_bomber
		value = 0
	}

	ai_strategy = {
		type = unit_ratio
		id = naval_bomber
		value = 2
	}

 	ai_strategy = {
		type = equipment_production_factor
		id = cas
		value = 15 #we really control the sky sooooo...
	}

	ai_strategy = {
		type = equipment_production_min_factories
		id = cas
		value = 30
	}

	ai_strategy = {
		type = equipment_production_factor
		id = fighter
		value = -15
	}
}

# allies_save_the_soviet_union = {
	# enable = {
		# is_in_faction_with = ENG
		# has_war = yes
		# NOT = { has_government = fascism }
		# NOT = { is_in_faction_with = GER }
		# NOT = { has_war_with = SOV }
		# has_war_with = GER
		# GER = { has_war_with = SOV }
		# OR = {
			# SOV = { is_ai = yes }
			# SOV = { surrender_progress > 0.30 }
			# SOV = { num_of_military_factories < 150 }
		# }
		# OR = {
			# SOV = { surrender_progress > 0.05 }
			# GER = { is_ai = no }
		# }
	# }

	# abort = {
		# OR = {
			# has_war = no
			# has_war_with = SOV
			# NOT = { GER = { has_war_with = SOV } }
			# is_in_faction_with = GER
			# has_government = fascism
			# SOV = { has_war = no }
# #			has_idea = d_day_preparation_3		TODO нужен этот нацдух
		# }
	# }

	# ai_strategy = {
		# type = support
		# id = "SOV"
		# value = 500
	# }

	# ai_strategy = {
		# type = send_lend_lease_desire
		# id = "SOV"
		# value = 500
	# }
# }

# allies_save_the_soviet_union_player = {
	# enable = {
		# is_in_faction_with = ENG
		# has_war = yes
		# NOT = { has_government = fascism }
		# NOT = { is_in_faction_with = GER }
		# NOT = { has_war_with = SOV }
		# has_war_with = GER
		# GER = { has_war_with = SOV }
		# SOV = { is_ai = no }
		# SOV = {
			# OR = {
				# num_of_military_factories < 150
				# surrender_progress > 0.2
			# }
		# }
	# }

	# abort = {
		# OR = {
			# has_war = no
			# has_war_with = SOV
			# NOT = { GER = { has_war_with = SOV } }
			# is_in_faction_with = GER
			# has_government = fascism
			# SOV = { has_war = no }
# #			has_idea = d_day_preparation_2		TODO нужен этот нацдух
# #			has_idea = d_day_preparation_3		TODO нужен этот нацдух
		# }
	# }

	# ai_strategy = {
		# type = support
		# id = "SOV"
		# value = 500
	# }

	# ai_strategy = {
		# type = send_lend_lease_desire
		# id = "SOV"
		# value = 500
	# }
# }
# allies_avoid_clogging_balkan = {
	# enable = {
		# is_historical_focus_on = yes
		# OR = {
			# is_in_faction_with = ENG
			# is_in_faction_with = USA
		# }
		# OR = {
			# has_war_with = GER
			# has_war_with = ITA
			# has_war_with = BUL
		# }
		# game_is_on_historical_course = yes
		# NOT = { 
			# OR = {
				# original_tag = GRE
				# original_tag = YUG
				# original_tag = HUN
				# original_tag = ROM
				# original_tag = TUR
				# original_tag = BUL
				# original_tag = ALB
				# original_tag = ITA
				# is_subject_of = YUG
				# is_subject_of = GRE
				# is_subject_of = HUN
				# is_subject_of = ROM
				# is_subject_of = TUR
				# is_subject_of = BUL
				# is_subject_of = ALB
				# is_subject_of = ITA
			# }
		# }
	# }
	# abort = {
		# OR = {
			# is_historical_focus_on = no
			# AND = {
				# NOT = { has_war_with = BUL }
				# NOT = { has_war_with = GER }
				# NOT = { has_war_with = ITA }
				# is_historical_focus_on = yes
			# }
			# AND = {
				# has_war_with = BUL
				# BUL = { surrender_progress > 0.3 }
			# }
			# AND = {
				# GRE = { 
					# surrender_progress < 0.3
					# date > 1943.1.1
				# }
			# }
			# game_is_on_historical_course = no # TODO ??
		# }
	# }

	# ai_strategy = {
		# type = front_unit_request
		# state_trigger = {
			# OR = {
				# is_core_of = GRE
				# is_core_of = YUG
				# is_core_of = BUL
				# is_core_of = ALB
			# }
		# }
		# value = -25
	# }

	# ai_strategy = {
		# type = invasion_unit_request
		# state_trigger = {
			# OR = {
				# is_core_of = GRE
				# is_core_of = YUG
				# is_core_of = BUL
				# is_core_of = ALB
			# }
		# }
		# value = -25
	# }

	# ai_strategy = {
		# type = area_priority
		# id = balkan_dead_spot
		# value = -350
	# }

	# ai_strategy = {
		# type = front_unit_request
		# area = balkan_dead_spot
		# value = -25
	# }

	# ai_strategy = {
		# type = dont_defend_ally_borders
		# id = "GRE"
		# value = 9999
	# }

	# ai_strategy = {
		# type = dont_defend_ally_borders
		# id = "YUG"
		# value = 9999
	# }
# }

# allies_victory_in_africa = {
	# enable = {
		# OR = {
			# is_in_faction_with = ENG
			# is_in_faction_with = USA
		# }
		# OR = {
			# has_global_flag = allied_victory_in_africa		TODO нужен этот флаг
			# date > 1943.1.1 #give up i guess
# #			has_idea = d_day_preparation_1
		# }
	# }
	# abort = {
		# surrender_progress > 0.01
	# }

	# ai_strategy = {
		# type = area_priority
		# id = europe
		# value = 200
	# }
# }
# ENG_the_blitz_1 = {
	# allowed = {
		# original_tag = ENG
	# }
	# enable = {
		# FRA = { is_in_faction_with = ENG }
		# FRA = { has_capitulated = yes }
		# has_war_with = GER
		# has_war_with = ITA
	# }
	# abort = {
		# has_global_flag = allied_victory_in_africa		TODO нужен этот флаг
	# }

	# ai_strategy = {
		# type = air_factory_balance
		# value = 50
	# }

	# ai_strategy = {
		# type = equipment_production_factor
		# id = fighter
		# value = 25
	# }
# }
# ENG_the_blitz_2 = {
	# allowed = {
		# original_tag = ENG
	# }
	# enable = {
		# all_state = {
			# OR = {
				# NOT = { is_core_of = LBA }
				# controller = { is_in_faction_with = ENG }
			# }
		# }
		# has_war_with = GER
		# has_war_with = ITA
	# }
	# abort = {
		# has_global_flag = allied_victory_in_africa		TODO нужен этот флаг
	# }

	# ai_strategy = {
		# type = air_factory_balance
		# value = 50
	# }

	# ai_strategy = {
		# type = equipment_production_factor
		# id = fighter
		# value = 25
	# }
# }

# the_push_into_the_reich_punitive = {
	# enable = {
		# has_global_flag = {
			# flag = league_of_nation_intervention_against_germany
			# days < 365
		# }
		# set_temp_variable = { push_days = global.num_days }
		# modulo_temp_variable = { push_days = 60 }
		# check_variable = { push_days < 18 }
		# has_war_with = GER
		# NOT = { 
			# has_global_flag = league_of_nation_intervention_against_germany_success
		# }
	# }

	# abort_when_not_enabled = yes

	# ai_strategy = {
		# type = front_control

		# tag = GER

		# ratio = 0.3

		# priority = 300
		# ordertype = front
		# execution_type = balanced
	# }

# }
# the_push_into_the_reich_punitive_success = {
	# enable = {
		# has_global_flag = {
			# flag = league_of_nation_intervention_against_germany
			# days < 365
		# }
		# has_war_with = GER
		# has_global_flag = league_of_nation_intervention_against_germany_success
	# }

	# abort_when_not_enabled = yes

	# ai_strategy = {
		# type = front_control

		# tag = GER

		# ratio = 0.1

		# priority = 1500
		# ordertype = front
		# execution_type = rush
		# execute_order = yes
	# }

# }

#the_allies_are_on_a_roll_strategy = {
#	enable = {
#		has_idea = AI_aggressive_2
#		has_army_manpower = { size > 200000 }
#		has_manpower > 200000
#		has_war_with = GER
#		has_equipment = {
#  			infantry_equipment > 2000
# 		}
#	}

	# abort_when_not_enabled = yes

	# ai_strategy = {
		# type = front_control

		# state_trigger = {
			# OR = {
				# controller = {
					# has_war_with = FROM.FROM
					# is_in_faction_with = GER
				# }
				# owner = {
					# is_in_faction_with = FROM.FROM
				# }
			# }
			# is_on_continent = europe
		# }

		# ratio = 0.0

		# priority = 3000
		# ordertype = front
		# execution_type = rush
		# execute_order = yes
	# }

# }

# allied_save_the_corridor = {
	# allowed = {
		# is_allied_ai = yes
	# }
	# enable = {
		# has_war_with = GER
		# TUR = { surrender_progress > 0.2 }
	# }
	# abort = {
		# OR = {
			# TUR = { surrender_progress < 0.1 }
			# foreign_countries_have_surrender_progress = yes
		# }
	# }

	# ai_strategy = {
		# type = force_defend_ally_borders
		# value = 9999 #panic
		# id = "TUR"
	# }

# }

#####

# scandinavia_is_convoy_trap = {
	# enable = {
		# is_in_faction_with = ENG 
		# is_historical_focus_on = yes
		# NOT = {
			# SOV = {
				# has_war_with = GER
			# }
		# }
	# }
	# abort = {
		# SOV = { has_war_with = GER }
		# date > 1942.8.1
	# }

	# ai_strategy = {
		# type = area_priority
		# id = scandinavia
		# value = -300
	# }

	# ai_strategy = {
		# type = dont_defend_ally_borders
		# id = "NOR"
		# value = 300
	# }

	# ai_strategy = {
		# type = front_unit_request
		# tag = NOR
		# value = -100
	# }
# }

# lets make sure the allies dont overcommit to invasions early on
ENG_cmwlth_minor_dock = {
	enable = {
		has_dlc = "Man the Guns"
		OR = {
			original_tag = CAN
			original_tag = AST
			original_tag = RAJ
		}
		date > 1939.1.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = dockyard_to_military_factory_ratio
		value = 20  #aim for a 2-1 ratio on naval factories
	}
}

ENG_proto_eco_quid_pro_quo = {
	allowed = { original_tag = ENG }
	enable = {
		is_historical_focus_on = yes
		date < 1936.8.1
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = building_target
		id = arms_factory
		value = -100
	}

	ai_strategy = {
		type = building_target
		id = dockyard
		value = -100
	}

	ai_strategy = {
		type = building_target
		id = industrial_complex
		value = -100
	}

	ai_strategy = {
		type = build_building
		id = infrastructure
		target = 126 
		value = 2000
	}

	ai_strategy = {
		type = build_building
		id = infrastructure
		target = 127
		value = 2000
	}

	ai_strategy = {
		type = build_building
		id = infrastructure
		target = 128
		value = 2000
	}

	ai_strategy = {
		type = build_building
		id = infrastructure
		target = 122
		value = 2000
	}

	ai_strategy = {
		type = build_building
		id = infrastructure
		target = 132
		value = 2000
	}

	ai_strategy = {
		type = build_building
		id = infrastructure
		target = 130
		value = 2000
	}

	ai_strategy = {
		type = build_building
		id = infrastructure
		target = 338
		value = 2000
	}

	ai_strategy = {
		type = build_building
		id = infrastructure
		target = 121
		value = 2000
	}
}

ENG_navy_preparation = {
	allowed = { original_tag = ENG }
	enable = {
		is_historical_focus_on = yes
		OR = {
			GER = { is_ai = no }
			ITA = { is_ai = no }
			JAP = { is_ai = no }
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = building_target
		id = dockyard
		value = 10
	}
}
ENG_convoy_preparation = {
	allowed = { original_tag = ENG }
	enable = {
		is_historical_focus_on = yes
		OR = {
			GER = { is_ai = no }
			ITA = { is_ai = no }
			JAP = { is_ai = no }
		}
		has_war = yes
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = building_target
		id = dockyard
		value = 20
  
	}
}

ENG_industry_preparation = {
	allowed = { original_tag = ENG }
	enable = {
		has_government = democratic
		has_war = no
		OR = {
			GER = { is_ai = no }
			ITA = { is_ai = no }
			JAP = { is_ai = no }
		}
		OR = {
			has_idea = partial_economic_mobilisation
			date > 1936.9.1
		}
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = building_target
		id = industrial_complex
		value = 65
	}

	ai_strategy = {
		type = air_factory_balance
		value = 15
	}
}

ENG_industry_preparation_2 = {
	allowed = { original_tag = ENG }
	enable = {
		has_government = democratic
		has_war = no
		date > 1939.1.1
		OR = {
			GER = { is_ai = no }
			ITA = { is_ai = no }
			JAP = { is_ai = no }
		}
		has_idea = partial_economic_mobilisation
	}
	abort_when_not_enabled = yes

	ai_strategy = {
		type = building_target
		id = arms_factory
		value = 50
	}

	ai_strategy = {
		type = air_factory_balance
		value = 30
	}
}

ENG_convoy_raid_venezuela = {
	enable = {
		OR = {
			tag = ENG
			is_in_faction_with = ENG
		}
		OR = {
			has_war_with = GER
			has_war_with = ITA
		}
		surrender_progress > 0.05
		ITA = { has_capitulated = no }
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = naval_convoy_raid_region
		id = 53 # western mediterranean
		value = 50
	}
}

TOA_blockade_venezuela = {
	allowed = {
		OR = {
			tag = BRA
			tag = MEX
			tag = CHL
		}
	}
	enable = {
		is_historical_focus_on = yes
		threat > 0.5
	}

	abort_when_not_enabled = yes

	ai_strategy = {
		type = strike_force_home_base
		id = 53
	}
}

ENG_sonar_are_cool = {
	allowed = {
		OR = {
			original_tag = ENG
			original_tag = USA
		}
	}
	enable = {
		NOT = { has_tech = improved_sonar }
	}

	abort = {
		has_tech = improved_sonar
	}

	ai_strategy = {
		type = research_tech
		id = sonar
		value = 100
	}

	ai_strategy = {
		type = research_tech
		id = improved_sonar
		value = 100
	}
}
ENG_radar_2_are_cool = {
	allowed = {
		OR = {
			original_tag = ENG
			original_tag = USA
		}
	}
	enable = {
		NOT = { has_tech = cavity_magnatron }
		date > 1938.1.1
	}

	abort = {
		has_tech = cavity_magnatron
	}

	ai_strategy = {
		type = research_tech
		id = cavity_magnatron
		value = 100
	}
}