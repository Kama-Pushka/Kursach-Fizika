ability = {
	dismissal_leader = { # TODO выпил?
		name = dismissal_leader
		desc = dismissal_leader_desc
		icon = GFX_ability_dismissal_leader
		
		type = army_leader
		
		allowed = {
			if = {
				limit = { OWNER = { tag = OMA } }
				AND = {
					OWNER = { has_government = monarchy }
					NOT = { has_character_flag = not_dismissal_leader_flag }
				}
			}
			NOT = { has_character_flag = not_dismissal_leader_flag }
		}
		
		one_time_effect = {
			if = {
				limit = {
					OWNER = { has_political_power > 25.00 }
				}
				ROOT = {
					unit_leader_event = { id = NWdismiss_generals.1 }
					custom_effect_tooltip = dismissal_leader_tt
				}
			}
			else = {
				custom_effect_tooltip = dismissal_leader_tt2
			}
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	empty_ability = { # TODO выпил?
		name = ""
		desc = ""
		icon = GFX_empty_ability
		
		type = army_leader
		
		allowed = {
			NOT = { has_character_flag = not_dismissal_leader_flag }
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	kamikaze_attack_test = {
		name = ABILITY_KAMIKAZE_ATTACK
		desc = ABILITY_KAMIKAZE_ATTACK_DESC
		icon = GFX_ability_kamikaze_attack
		
		sound_effect = command_power_ability_offensive
		
		type = army_leader
		
		allowed = {
			is_leading_army_group = no
			is_border_war = no
			is_debug = yes
			OWNER = { is_ai = no }
			always = no
		}
		
		cost = 0	#0.05
		duration = 168
		
		one_time_effect = {
			add_temporary_buff_to_units = {
				combat_offense = 1.5
				combat_breakthrough = 2.5
				combat_defense = -0.25
				org_damage_multiplier = -1.5
				str_damage_multiplier = 0.75
				war_support_reduction_on_damage = 0.35
				cannot_retreat_while_attacking = 1.0
				cannot_retreat_while_defending = 1.0
				
				days = 14
				tooltip = ABILITY_FORCE_ATTACK_TOOLTIP
			}
		}
		
		unit_modifiers = {
			pocket_penalty = -0.25
			river_crossing_factor = 0.1
			river = {
				attack = -0.1
				defence = -0.2
			}
			fort = {
				attack = -0.2
				defence = -0.25
			}
			desert = {
				attack = -0.3
				defence = -0.35
			}
			plains = {
				attack = -0.3
				defence = -0.35
			}
			hills = {
				attack = -0.2
				defence = -0.25
			}
			urban = {
				attack = 0.1
				movement = 0.1
			}
			jungle = {
				attack = 0.1
				movement = 0.1
			}
			marsh = {
				attack = 0.1
				movement = 0.1
			}
		}
		
		ai_will_do = {
			factor = 0
		}
	}
	
	kamikaze_attack = {
		name = ABILITY_KAMIKAZE_ATTACK
		desc = ABILITY_KAMIKAZE_ATTACK_DESC
		icon = GFX_ability_kamikaze_attack
		
		sound_effect = command_power_ability_offensive
		
		type = army_leader
		
		allowed = {
			is_leading_army_group = no
			is_border_war = no
			OWNER = {
				has_country_flag = ability_kamikaze_attack_flag
			}
		}
		
		cost = 0.15	#0.05
		duration = 168
		
		one_time_effect = {
			add_temporary_buff_to_units = {
				combat_offense = 0.5
				combat_breakthrough = 0.5
				combat_defense = -0.25
				org_damage_multiplier = -1.5
				str_damage_multiplier = 0.75
				war_support_reduction_on_damage = 0.35
				cannot_retreat_while_attacking = 1.0
				cannot_retreat_while_defending = 1.0
				
				days = 14
				tooltip = ABILITY_FORCE_ATTACK_TOOLTIP
			}
		}
		
		unit_modifiers = {
			pocket_penalty = -0.25
			river_crossing_factor = 0.1
			river = {
				attack = -0.1
				defence = -0.2
			}
			fort = {
				attack = -0.2
				defence = -0.25
			}
			desert = {
				attack = -0.3
				defence = -0.35
			}
			plains = {
				attack = -0.3
				defence = -0.35
			}
			hills = {
				attack = -0.2
				defence = -0.25
			}
			urban = {
				attack = 0.1
				movement = 0.1
			}
			jungle = {
				attack = 0.1
				movement = 0.1
			}
			marsh = {
				attack = 0.1
				movement = 0.1
			}
		}
		
		ai_will_do = {
			factor = -1
			modifier = {
				FROM = {
					has_war_support > 0.1
					command_power > 1.0
				}
				check_variable = { num_units_offensive_combats > 6 }
				
				set_temp_variable = { temp = avg_offensive_combat_status }
				check_variable = { temp > 0.45 }
				check_variable = { ai_random > temp }
				
				add = 2
			}
			modifier = {
				FROM = {
					command_power > 1.0
				}
				check_variable = { num_units_crossing_river > 5 }
				
				add = -2
			}
		}
	}
	
	heroic_defense = {
		name = ABILITY_HEROIC_DEFENSE
		desc = ABILITY_LAST_STAND_DESC
		icon = GFX_ability_heroic_defense
		
		sound_effect = command_power_ability_offensive
		
		type = army_leader
		
		allowed = {
			is_leading_army_group = no
			is_border_war = no
			OWNER = {
				has_country_flag = ability_heroic_defense_flag
			}
		}
		
		cost = 0.10
		duration = 336
		
		one_time_effect = {
			add_temporary_buff_to_units = {
				combat_defense = 0.25
				combat_entrenchment = 0.25
				org_damage_multiplier = -1.0
				str_damage_multiplier = 0.6
				war_support_reduction_on_damage = 0.1
				cannot_retreat_while_defending = 1.0
				
				days = 14
				tooltip = ABILITY_LAST_STAND_TOOLTIP
			}
		}
		
		unit_modifiers = {
			pocket_penalty = -0.15
		}
		
		ai_will_do = {
			factor = -1
			modifier = {
				FROM = {
					has_war_support > 0.4
				}
				
				check_variable = { num_units_defensive_combats > 6 }
				
				set_temp_variable = { temp = avg_defensive_combat_status }
				check_variable = { temp < 0.40 }
				check_variable = { ai_random > temp }
				
				add = 2
			}
		}
	}
	
	probing_attack_2 = {
		name = ABILITY_PROBING_ATTACK
		desc = ABILITY_PROBING_ATTACK_DESC
		icon = GFX_ability_probing_attack
		
		type = army_leader
		
		allowed = {
			has_ability = probing_attack
			is_border_war = no
			OWNER = { has_idea = aggressive_reconnaisance_spirit }
		}
		
		unit_modifiers = {
			dont_lose_dig_in_on_attack = 1.0
			offence = -0.1
		}
		
		cancelable = yes
		cost = 0.1
		duration = -1
	}
}