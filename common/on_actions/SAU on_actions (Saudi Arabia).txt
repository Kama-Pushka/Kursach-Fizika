on_actions = {

	on_startup = {
		effect = {
			if = {
				limit = { has_start_date < 1936.01.02 }
				### SAU
				797 = { add_dynamic_modifier = { modifier = SAU_partial_indepedment_emirate } }
				1115 = { add_dynamic_modifier = { modifier = SAU_partial_indepedment_emirate } }
				679 = { add_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_dyn } }
				1073 = { add_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_dyn } }
				991 = { add_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_dyn } }
				292 = { add_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_2_dyn } }
				769 = { add_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_2_dyn } }
				SAU = {
					give_resource_rights = { receiver = USA state = 1115 }
					activate_mission = SAU_Development_of_Al_hasa_deposits_USA
					country_event = { id = NWsaudi.50 days = 39 }
					country_event = { id = NWsaudi.6 days = 59 }
					country_event = { id = NWsaudi.10 days = 79 random_days = 40 }
					country_event = { id = NWsaudi.11 days = 89 }
					country_event = { id = NWsaudi.12 days = 122 }
					country_event = { id = NWsaudi.29 days = 274 }
					country_event = { id = NWsaudi.19 days = 314 }
					country_event = { id = NWsaudi.3100 days = 341 }
					country_event = { id = NWsaudi.20 days = 441 }
					country_event = { id = NWsaudi.2100 days = 486 }
					country_event = { id = NWsaudi.2200 days = 561 }
					country_event = { id = NWsaudi.23 days = 618 }
					country_event = { id = NWsaudi.500 days = 14 }
					country_event = { id = NWsaudi.3200 days = 741 }
					country_event = { id = NWsaudi.2700 days = 832 }
					country_event = { id = NWsaudi.24 days = 1028 }
					#OMA
					country_event = { id = NWmuscat.2 days = 46 random_days = 3 }
				}
				
				#Балансировка SAU
				if = {
					limit = { SAU = { is_ai = yes } }
					SAU = {
						capital_scope = {
							create_unit = {
								division = "division_template = \"Milishia Badawia\" start_experience_factor = 0.0" 
								owner = PREV
								count = 2
							}
						}
						add_to_variable = { num_of_regular_camelry_var = 2 }
					}
				}
			}
		}
	}
	
	# THIS is country that has just gotten into a war.
	# ROOT is capitulated country, FROM is winner
	on_capitulation = {
		effect = {
			if = {
				limit = {
					FROM = {
						tag = JBS
					}
					ROOT = {
						tag = SAU
					}
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_saud_bin_abdulaziz_al_saud } 
					}
					SAU = {
					    SAU_saud_bin_abdulaziz_al_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_muhammad_bin_abdulaziz_al_saud } 
					}
					SAU = {
					    SAU_muhammad_bin_abdulaziz_al_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_abdulaziz_ibn_saud } 
					}
					SAU = {
					    SAU_abdulaziz_ibn_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_faisal_bin_abdulaziz_al_saud } 
					}
					SAU = {
					    SAU_faisal_bin_abdulaziz_al_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_mansour_bin_abdulaziz_al_saud } 
					}
					SAU = {
					    SAU_mansour_bin_abdulaziz_al_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_noura_bint_abdul_rahman_al_saud } 
					}
					SAU = {
					    SAU_noura_bint_abdul_rahman_al_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_saud_bin_jiluwi_al_saud } 
					}
					SAU = {
					    SAU_saud_bin_jiluwi_al_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
				if = {
					limit = { 
					    SAU = { has_character = SAU_saud_al_kabeer_bin_abdulaziz_al_saud } 
					}
					SAU = {
					    SAU_saud_al_kabeer_bin_abdulaziz_al_saud = {
				        	set_nationality = JBS
				        }
				    }	
				}
            }
		}
	}
	
	#ROOT is winner #FROM is loser
	on_peaceconference_ended = {
		effect = {
			#SAU#
			if = {
				limit = {
					FROM = {
						original_tag = SAU
					}
					ROOT = { NOT = { original_tag = SAU } }
				}
				every_state = {
					limit = {
						OR = {
							state = 679
		    				state = 1073
							state = 991
						}
	                    has_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_dyn }
					}
					remove_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_dyn }
				}
				every_state = {
					limit = {
						OR = {
		    				state = 797
							state = 1125
						}
	                    has_dynamic_modifier = { modifier = SAU_partial_indepedment_emirate }
					}
					remove_dynamic_modifier = { modifier = SAU_partial_indepedment_emirate }
				}
				every_state = {
					limit = {
						OR = {
		    				state = 292
							state = 769
						}
	                    has_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_2_dyn }
					}
					remove_dynamic_modifier = { modifier = SAU_disparity_between_nejd_and_hijaz_2_dyn }
				}
			}
		}
		
		### SAU
		effect = {
			if = {
				limit = {
					ROOT = {
						OR = {
							AND = {
								has_focus_tree = saud_focus_tree
								NOT = { has_country_flag = we_have_one_win_war_flag }
							}
							any_allied_country = {
								has_focus_tree = saud_focus_tree
								NOT = { has_country_flag = we_have_one_win_war_flag }
							}
						}
					}
				}
				random_country_with_original_tag = {
					original_tag_to_check = SAU
					limit = {
						has_focus_tree = saud_focus_tree
						NOT = { has_country_flag = we_have_one_win_war_flag }
					}
					set_country_flag = we_have_one_win_war_flag
				}
			}
		}
	}
	
	#ROOT is winner #FROM gets annexed - This will also fire on_annex
	on_civil_war_end = {
		effect = {
			if = {
				limit = {
					original_tag = SAU
					has_completed_focus = SAU_bedouin_uprising
				}
				country_event = NWsaudi.26
				if = {
					limit = { is_ai = no }
					country_event = { id = NWsaudi.52 days = 10 }
				}
			}
		}
	}
	
	on_weekly_SAU = {
		effect = {
			if = {
				limit = {
					check_variable = { opinion_with_tribes_var = 0 }
					is_subject = no
					has_government = monarchy
					NOT = { has_global_flag = sau_uprising }
				}
				country_event = NWsaudi.1
			}
			if = {
				limit = {
					check_variable = { opinion_with_ulema_var = 0 }
					is_subject = no
					has_government = monarchy
					NOT = { has_global_flag = sau_uprising }
				}
				country_event = NWsaudi.3
			}
			if = {
				limit = {
					has_variable = concession_owner
				}
				if = {
					limit = {
						any_enemy_country = {
							has_country_flag = concession_owner_flag
						}	
					}			
					country_event = NWsaudi.34
				}
			}
			if = {
				limit = {
					has_variable = rashidi_posralis_var
					check_variable = { opinion_with_tribes_var < 50 }
					check_variable = { rashidi_posralis_var < 3 }
					has_country_flag = rashidi_posralis
				}
				country_event = NWsaudi.61
			}
			if = {
				limit = {
					has_variable = rashidi_posralis_var
					check_variable = { opinion_with_tribes_var < 50 }
					check_variable = { rashidi_posralis_var > 2 }
					has_country_flag = rashidi_posralis
				}
				country_event = NWsaudi.62
			}
			if = {
				limit = {
					check_variable = { opinion_with_tribes_var = 0 }
					is_subject = no
					has_government = monarchy
					SAU_ruled_by_rashids = yes
					NOT = { has_global_flag = sau_saud_uprising }
				}
				country_event = NWsaudi.68
			}
		}
	}
	
	on_daily_SAU = {
		effect = {
			if = {
				limit = {
					has_tech = motorised_infantry
					has_idea = SAU_haji_husein_alireza
				}
				add_equipment_to_stockpile = {
					type = motorized_equipment
					amount = 2
					producer = ROOT
				}
			}
		}
	}
	
	#ROOT is new controller #FROM is old controller #FROM.FROM is state ID
	on_state_control_changed = {
		### Сауд		
		effect = {
			if = {
				limit = {
					ROOT = { original_tag = SAU has_variable = concession_owner }
					FROM.FROM = { state = 1115 }
				}
				if = {
					limit = {
						FROM.FROM = { NOT = { has_state_flag = nejd_oil_developed } }
					}
					if = {
						limit = { ROOT = { check_variable = { USA = var:concession_owner } } }
						ROOT = { activate_mission = SAU_Development_of_Al_hasa_deposits_USA }
					}
					else = {
						ROOT = { activate_mission = SAU_Development_of_Al_hasa_deposits1 }
					}
				}
				else_if = {
					limit = {
						FROM.FROM = { has_state_flag = { flag = nejd_oil_developed value = 1 } }
					}
					ROOT = { activate_mission = SAU_Development_of_Al_hasa_deposits2 }
				}
			}
		}
	}
}