### search_filters = {FOCUS_FILTER_POLITICAL}
### search_filters = {FOCUS_FILTER_RESEARCH}
### search_filters = {FOCUS_FILTER_INDUSTRY}
### search_filters = {FOCUS_FILTER_STABILITY}
### search_filters = {FOCUS_FILTER_WAR_SUPPORT}
### search_filters = {FOCUS_FILTER_MANPOWER}
### search_filters = {FOCUS_FILTER_ANNEXATION}
### search_filters = {FOCUS_FILTER_SPA_CIVIL_WAR}
### search_filters = {FOCUS_FILTER_SPA_CARLIST_UPRISING}
### search_filters = {FOCUS_FILTER_SPA_ANARCHIST_UPRISING}


focus_tree = {
	id = spain_focus

	country = {
		factor = 0

		modifier = {
			add = 10
			tag = SPR
		}
	}

	default = no
	
	continuous_focus_position = { x = 50 y = 2550 }
	
	shared_focus = SPA_production_british_torpedo_bombers
	shared_focus = SPA_production_german_submarines
	shared_focus = SPA_automatic_mp38


	###########################
	#### POLITICAL SECTION ####
	###########################
	
	
	focus = {
		id = SPR_elections_second_cortes_republic
		icon = GFX_z_goal_elections
		x = 50
		y = 0
		offset = {
			x = -37
			y = 0
			trigger = {
				has_completed_focus = SPR_victory_popular_front
			}
		}
		offset = {
			x = -44
			y = 0
			trigger = {
				has_completed_focus = SPR_victory_liberal_party
			}
		}
		offset = {
			x = -54
			y = 0
			trigger = {
				has_completed_focus = SPR_victory_national_block
			}
		}
		cost = 7.72
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 500
		}
		available = {
		}
		bypass = {
		}
		
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_elections_second_cortes_republic"
			country_event = { id = NWspain.1 }
		}
	}
	
	
	## POPULAR FRONT BRANCH ##
	
	focus = {
		id = SPR_victory_popular_front
		icon = GFX_focus_eng_concessions_to_the_trade_unions
		prerequisite = { focus = SPR_elections_second_cortes_republic }
		mutually_exclusive = { focus = SPR_victory_liberal_party focus = SPR_victory_national_block }
		x = -37
		y = 1
		offset = {
			x = 37
			y = 0
			trigger = {
				has_completed_focus = SPR_victory_popular_front
			}
		}
		relative_position_id = SPR_elections_second_cortes_republic
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		allow_branch = {
			NOT = {
				has_completed_focus = SPR_victory_liberal_party
				has_completed_focus = SPR_victory_national_block
			}
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_victory_popular_front"
			set_politics = {
				ruling_party = democratic
				elections_allowed = yes
			}
			add_popularity = {
				ideology = democratic
				popularity = 0.35
			}
			add_ideas = SPR_niceto_torres
			add_country_leader_role = {
				character = SPR_diego_martinez_barrio
				country_leader = {
					desc = "POLITICS_DIEGO_MARTINEZ_BARRIO_DESC"
					ideology = social_liberalism
					traits = {
						acting_president
					}
					expire = "1965.1.1"
				}
				promote_leader = yes
			}
			hidden_effect = {
				if = {
					limit = {
						has_idea = SPR_catalon_nationalism
						has_full_control_of_state = 165
						NOT = { country_exists = CAT }
					}
					country_event = { id = NWspain.10 days = 4 random_days = 1 }
				}
				#if = {
				#	limit = {
				#		has_idea = SPR_basks_nationalism
				#		has_full_control_of_state = 791
				#		NOT = { country_exists = BAS }
				#	}
				#	country_event = { id = NWspain.11 days = 6 }
				#}
			}
			custom_effect_tooltip = TUR_focus_autocomplete_tt
			mark_focus_tree_layout_dirty = yes
		}
	}
	
	focus = {
		id = SPR_acceleration_agrarian_reform
		icon = GFX_z_goal_agrarian_reform
		prerequisite = { focus = SPR_victory_popular_front }
		x = -4
		y = 1
		relative_position_id = SPR_victory_popular_front
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			OR = {
				NOT = {
					has_global_flag = spanish_civil_war
					hidden_trigger = {
						has_global_flag = spanish_civil_war
						has_global_flag = anarcho_spanish_civil_war
						has_global_flag = expand_spanish_civil_war
						has_global_flag = liberal_spanish_civil_war
						has_global_flag = haos_liberal_spanish_civil_war
					}
				}
				has_global_flag = scw_over
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_acceleration_agrarian_reform"
			41 = {
				add_extra_state_shared_building_slots = 2
				every_neighbor_state = {
					add_extra_state_shared_building_slots = 1
				} 
			}
			every_controlled_state = {
				limit = {
					is_core_of = ROOT
				}
				add_state_modifier = {
					modifier = {
						local_supplies = 0.1
						local_manpower = 0.1
						resistance_target_on_our_occupied_states = 0.1
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_carrying_out_strikes
		icon = GFX_z_focus_the_workers
		prerequisite = { focus = SPR_acceleration_agrarian_reform }
		x = -1
		y = 1
		relative_position_id = SPR_acceleration_agrarian_reform
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_carrying_out_strikes"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			every_controlled_state = {
				limit = {
					is_core_of = ROOT
				}
				add_state_modifier = {
					modifier = {
						resistance_decay_on_our_occupied_states = -0.1
						resistance_damage_to_garrison_on_our_occupied_states = 0.1
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_nationalization_business
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = SPR_carrying_out_strikes }
		x = 0
		y = 2
		relative_position_id = SPR_carrying_out_strikes
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_nationalization_business"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_distribution_landlords_lands
		icon = GFX_goal_generic_forceful_treaty
		prerequisite = { focus = SPR_acceleration_agrarian_reform }
		x = 1
		y = 1
		relative_position_id = SPR_acceleration_agrarian_reform
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_distribution_landlords_lands"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			every_controlled_state = {
				limit = {
					is_core_of = ROOT
				}
				add_state_modifier = {
					modifier = {
						starting_compliance = 0.05
						local_manpower = 0.1
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_create_cooperatives
		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = SPR_carrying_out_strikes }
		prerequisite = { focus = SPR_distribution_landlords_lands }
		x = -1
		y = 1
		relative_position_id = SPR_distribution_landlords_lands
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_create_cooperatives"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			every_controlled_state = {
				limit = {
					is_core_of = ROOT
				}
				add_state_modifier = {
					modifier = {
						state_production_speed_buildings_factor = 0.05
						state_resources_factor = 0.05
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_land_distribution
		icon = GFX_focus_generic_concessions
		prerequisite = { focus = SPR_distribution_landlords_lands }
		x = 0
		y = 2
		relative_position_id = SPR_distribution_landlords_lands
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_land_distribution"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			every_controlled_state = {
				limit = {
					is_core_of = ROOT
				}
				add_state_modifier = {
					modifier = {
						local_building_slots = 1
						mobilization_speed = 0.1
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_break_concordat_with_vatican
		icon = GFX_focus_renounce_the_treaty_of_trianon
		prerequisite = { focus = SPR_victory_popular_front }
		x = -1
		y = 1
		relative_position_id = SPR_victory_popular_front
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
			NOT = {
				country_exists = VAT
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_break_concordat_with_vatican"
			add_popularity = {
				ideology = monarchy
				popularity = -0.05
			}
			add_opinion_modifier = { target = VAT modifier = SPR_break_concordat_with_vatican }
			VAT = { add_opinion_modifier = { target = ROOT modifier = SPR_break_concordat_with_vatican } }
		}
	}
	
	focus = {
		id = SPR_secularization_church_lands
		icon = GFX_focus_mex_triumph_over_the_cristeros
		prerequisite = { focus = SPR_break_concordat_with_vatican }
		x = 0
		y = 1
		relative_position_id = SPR_break_concordat_with_vatican
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_secularization_church_lands"
			add_political_power = 75
			add_popularity = {
				ideology = monarchy
				popularity = -0.03
			}
			add_ideas = SPR_secularization_church_lands
		}
	}
	
	focus = {
		id = SPR_amnesty_political_prisoners
		icon = GFX_z_goal_prison
		prerequisite = { focus = SPR_victory_popular_front }
		x = 1
		y = 1
		relative_position_id = SPR_victory_popular_front
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 20
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_amnesty_political_prisoners"
			add_political_power = 50
			add_popularity = {
				ideology = democratic
				popularity = 0.01
			}
			add_popularity = {
				ideology = communism
				popularity = 0.01
			}
			add_popularity = {
				ideology = trozkism
				popularity = 0.01
			}
			add_popularity = {
				ideology = anarchism
				popularity = 0.01
			}
		}
	}
	
	focus = {
		id = SPR_election_new_president
		icon = GFX_z_goal_elections
		prerequisite = { focus = SPR_victory_popular_front }
		x = 12
		y = 1
		relative_position_id = SPR_victory_popular_front
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_election_new_president"
			add_political_power = 50
			remove_ideas = SPR_niceto_torres
			SPR_diego_martinez_barrio = {
				remove_country_leader_role = { ideology = social_liberalism }
			}
			effect_tooltip = {
				add_country_leader_role = {
					character = SPR_manuel_azana
					country_leader = {
						ideology = socialism
						traits = {
							socialist_trait
							figurehead_president
						}
						expire = "1965.1.1"
					}
					promote_leader = yes
				}
			}
			hidden_effect = {
				SPR_manuel_azana = {
					promote_leader = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_support_caballerito
		icon = GFX_z_goal_democratic_side
		prerequisite = { focus = SPR_amnesty_political_prisoners }
		prerequisite = { focus = SPR_election_new_president }
		mutually_exclusive = { focus = SPR_support_stalinists }
		x = 0
		y = 1
		relative_position_id = SPR_amnesty_political_prisoners
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 2
				ARA = { has_completed_focus = ARA_propaganda_in_spain }
				is_historical_focus_on = no
			}
			modifier = {
				factor = 2
				ARA = { has_completed_focus = ARA_call_to_anarchists_spain }
				is_historical_focus_on = no
			}
			modifier = {
				factor = 0
				has_country_flag = NW_SPR_AI_COMMUNIST
			}
			modifier = {
				add = 500
				has_country_flag = NW_SPR_AI_DEMOCRATIC
			}
			modifier = {
				add = 10
				has_global_flag = SOV_covert_support_for_poum_flag
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_support_caballerito"
			custom_effect_tooltip = SPR_support_caballerito_tt
			add_popularity = {
				ideology = democratic
				popularity = -0.2
			}
			add_popularity = {
				ideology = communism
				popularity = 0.2
			}
		}
	}
	
	focus = {
		id = SPR_continued_social_transformation
		icon = GFX_z_goal_restore_rights_aristocracy
		prerequisite = { focus = SPR_support_caballerito }
		x = 0
		y = 1
		relative_position_id = SPR_support_caballerito
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_continued_social_transformation"
			remove_ideas = SPR_social_crisis
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_saving_democracy
		icon = GFX_focus_spr_maintain_the_republic
		prerequisite = { focus = SPR_continued_social_transformation }
		x = 0
		y = 1
		relative_position_id = SPR_continued_social_transformation
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_saving_democracy"
			add_political_power = 50
			add_popularity = {
				ideology = democratic
				popularity = 0.05
			}
		}
	}
	
	focus = {
		id = SPR_support_stalinists
		icon = GFX_z_goal_communist_pride
		prerequisite = { focus = SPR_election_new_president }
		mutually_exclusive = { focus = SPR_support_caballerito }
		x = 12
		y = 1
		relative_position_id = SPR_election_new_president
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 0
				has_country_flag = NW_SPR_AI_DEMOCRATIC
			}
			modifier = {
				add = 500
				has_country_flag = NW_SPR_AI_COMMUNIST
			}
			modifier = {
				factor = 0
				has_global_flag = SOV_covert_support_for_poum_flag
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_support_stalinists"
			custom_effect_tooltip = SPR_support_stalinists_tt
			add_popularity = {
				ideology = democratic
				popularity = -0.2
			}
			add_popularity = {
				ideology = trozkism
				popularity = 0.15
			}
			add_popularity = {
				ideology = anarchism
				popularity = 0.05
			}
			if = {
				limit = { country_exists = VLA }
				country_event = { id = NWspain.62 }
			}
			if = {
				limit = {
					TUR = {
						has_completed_focus = TUR_ideological_war
					}
				}
				TUR = { add_opinion_modifier = { target = ROOT modifier = TUR_traitors_of_the_revolution } }
				add_opinion_modifier = { target = TUR modifier = TUR_traitors_of_the_revolution }
				if = {
					limit = {
						is_in_faction_with = TUR
						TUR = { is_faction_leader = yes }
					}
					leave_faction = yes
					add_ai_strategy = {
						type = alliance
						id = TUR
						value = -600
					}
					add_ai_strategy = {
						type = befriend
						id = TUR
						value = -200
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_arm_the_workers_militias
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_support_stalinists }
		
		icon = GFX_z_goal_socmilirarism
		x = -3
		y = 1
		relative_position_id = SPR_support_stalinists
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_arm_the_workers_militias_tro"
			add_war_support = 0.1
			swap_ideas = {
				remove_idea = SPR_disbanded_army_1
				add_idea = SPR_disbanded_army_2
			}
			add_ideas = extensive_conscription
		}
	}
	
	focus = {
		id = SPR_curtailing_social_change
		icon = GFX_focus_rom_parties_end
		prerequisite = { focus = SPR_support_stalinists }
		x = -1
		y = 1
		relative_position_id = SPR_support_stalinists
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_curtailing_social_change"
			add_stability = 0.05
		}
	}
	
	focus = {
		id = SPR_repression_against_trotskyists
		icon = GFX_z_goal_orange_menace
		prerequisite = { focus = SPR_support_stalinists }
		x = 1
		y = 1
		relative_position_id = SPR_support_stalinists
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_repression_against_trotskyists"
			add_popularity = {
				ideology = trozkism
				popularity = -0.15
			}
			kill_ideology_leader = trozkism
			create_country_leader = {
				name = "Julián Gorkin"
				desc = "POLITICS_JULIAN_GORKIN_DESC"
				picture = "GFX_portrait_SPR_julian_gorkin"
				expire = "1965.1.1"
				ideology = marxism1
				traits = {
				}
			}
		}
	}
	
	focus = {
		id = SPR_demand_ministerial_positions
		available = {
			#NOT = { has_completed_focus = SPR_stand_junta }
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_support_stalinists }
		
		icon = GFX_focus_eng_concessions_to_the_trade_unions
		x = 3
		y = 1
		relative_position_id = SPR_support_stalinists
		cost = 7.2

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			add_ideas = SPR_demand_ministerial_positions
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SPR_dolores_ibarruri
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SPR_jesus_hernandez_tomas
		}
	}
	
#	focus = {
#		id = SPR_stand_junta
#		icon = GFX_z_goal_stand_junta
#		prerequisite = { focus = SPR_repression_against_trotskyists }
#		mutually_exclusive = { focus = SPR_transformation_people_republic }
#		x = -3
#		y = 1
#		relative_position_id = SPR_repression_against_trotskyists
#		
#		cost = 10
#		
#		cancel_if_invalid = yes
#		continue_if_invalid = no
#		available_if_capitulated = yes

#		ai_will_do = {
#			factor = 5
#			modifier = {
#				factor = 0
#				is_historical_focus_on = yes
#			}
#		}
#		available = {
#			hidden_trigger = {
#				always = no
#			}
#		}
#		bypass = {
#		}

#		completion_reward = {
#			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_stand_junta"
#			add_popularity = {
#				ideology = neutrality
#				popularity = 0.2
#			}
#			set_politics = {
#				ruling_party = neutrality
#				elections_allowed = no
#			}
#			remove_ideas = SPR_desire_for_decentralization
#			custom_effect_tooltip = TUR_focus_autocomplete_tt
#			set_cosmetic_tag = SPR_junta
#		}
#	}
	
#	focus = {
#		id = SPR_fight_against_communists
#		icon = GFX_goal_anti_comintern_pact
#		prerequisite = { focus = SPR_stand_junta }
#		x = 0
#		y = 1
#		relative_position_id = SPR_stand_junta
#		
#		cost = 5
#		
#		cancel_if_invalid = yes
#		continue_if_invalid = no
#		available_if_capitulated = yes

#		ai_will_do = {
#			factor = 5
#		}
#		available = {
#		}
#		bypass = {
#		}

#		completion_reward = {
#			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_fight_against_communists"
#			add_popularity = {
#				ideology = communism
#				popularity = -0.1
#			}
#		}
#	}
	
	focus = {
		id = SPR_elections_third_cortes_republic
		icon = GFX_z_goal_elections
		prerequisite = {
			#focus = SPR_stand_junta
			focus = SPR_saving_democracy
		}
		mutually_exclusive = { focus = SPR_save_state_emergency }
		x = -2
		y = 1
		relative_position_id = SPR_saving_democracy
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 12.5
		}
		available = {
			#has_war = no
			#has_civil_war = no
		}
		bypass = {
		}
		
		select_effect = {
			set_country_flag = spain_block_legitimacy_flag
			country_event = { id = NWspain.14 days = 10 random_days = 5 }
			country_event = { id = NWspain.15 days = 35 random_days = 5 }
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_elections_third_cortes_republic"
			country_event = { id = NWspain.16 }
			remove_ideas = SPR_desire_for_decentralization
		}
	}
	
	focus = {
		id = SPR_save_state_emergency
		icon = GFX_focus_generic_self_management
		prerequisite = {
			focus = SPR_saving_democracy
			#focus = SPR_stand_junta
		}
		mutually_exclusive = { focus = SPR_elections_third_cortes_republic }
		x = 19
		y = 1
		relative_position_id = SPR_saving_democracy
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 7.5
			modifier = {
				factor = 0
				OR = {
					AND = {
						is_historical_focus_on = yes
						has_game_rule = {
							rule = SPR_ai_behavior 
							option = DEFAULT
						}
					}
					has_country_flag = NW_SPR_AI_DEMOCRATIC
					has_game_rule = {
						rule = SPR_ai_behavior 
						option = DEMOCRATIC
					}
					has_global_flag = SOV_covert_support_for_poum_flag
				}
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_save_state_emergency"
			add_ideas = SPR_save_state_emergency
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 5
			}
			add_ideas = war_economy
		}
	}
	
	
	focus = {
		id = SPR_anarchists_victory
		icon = GFX_z_goal_generic_support_anarchism
		prerequisite = { focus = SPR_elections_third_cortes_republic }
		mutually_exclusive = { focus = SPR_independent_communists focus = SPR_victory_socialists }
		x = -10
		y = 1
		relative_position_id = SPR_elections_third_cortes_republic
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		
		allow_branch = {
			always = no
		}

		ai_will_do = {
			factor = 5
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_anarchists_victory"
			if = {
				limit = { NOT = { SPR_scw_in_progress = yes } }
				clr_country_flag = spain_block_legitimacy_flag
			}
			add_popularity = {
				ideology = anarchism
				popularity = 0.15
			}
			set_politics = {
				ruling_party = anarchism
				elections_allowed = no
			}
			set_country_flag = anarchism_left_flag
			if = {
				limit = {
					NOT = {
						has_idea = peoples_squads
						has_idea = peoples_police
						has_idea = peoples_militia
						has_active_mission = generic_anarchism_manpower_decision
					}
				}
				activate_mission = generic_anarchism_manpower_decision
			}
			if = {
				limit = {
					country_exists = ARA
					has_government = anarchism
				}
				ARA = {
					if = {
						limit = { has_war_with = ROOT }
						white_peace = ROOT
					}
					country_event = { id = NWspain.65 }
				}
				CAT = {
					if = {
						limit = { has_war_with = ROOT }
						white_peace = ROOT
					}
					country_event = { id = NWspain.65 days = 1 }
				}
			}
			if = {
				limit = { ARA = { is_subject_of = ROOT } }
				set_autonomy = {
					target = ARA
					autonomy_state = autonomy_free
				}
			}
			if = {
				limit = { ASU = { is_subject_of = ROOT } }
				set_autonomy = {
					target = ASU
					autonomy_state = autonomy_free
				}
			}
			if = {
				limit = { SNT = { is_subject_of = ROOT } }
				set_autonomy = {
					target = SNT
					autonomy_state = autonomy_free
				}
			}
			if = {
				limit = { CAT = { is_subject_of = ROOT } }
				set_autonomy = {
					target = CAT
					autonomy_state = autonomy_free
				}
			}
			if = {
				limit = { BAS = { is_subject_of = ROOT } }
				set_autonomy = {
					target = BAS
					autonomy_state = autonomy_free
				}
			}
			if = {
				limit = { GLC = { is_subject_of = ROOT } }
				set_autonomy = {
					target = GLC
					autonomy_state = autonomy_free
				}
			}
			if = {
				limit = { VLA = { is_subject_of = ROOT } }
				set_autonomy = {
					target = VLA
					autonomy_state = autonomy_free
				}
			}
			custom_effect_tooltip = TUR_focus_autocomplete_tt
		}
	}
	
	focus = {
		id = SPR_economy_gift
		icon = GFX_z_goal_economy_gift
		prerequisite = { focus = SPR_anarchists_victory }
		x = -1
		y = 1
		relative_position_id = SPR_anarchists_victory
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_economy_gift"
			add_stability = 0.1
		}
	}
	
	focus = {
		id = SPR_collectivization_business
		icon = GFX_z_goal_nationalization_heavy_industry
		prerequisite = { focus = SPR_economy_gift }
		x = -1
		y = 1
		relative_position_id = SPR_economy_gift
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_collectivization_business"
			add_ideas = SPR_collectivization_business
		}
	}
	
	focus = {
		id = SPR_preparing_to_spread_revolution
		icon = GFX_focus_spr_masters_of_our_own_fate
		prerequisite = {
			focus = SPR_economy_gift
			#focus = SPR_acceleration_social_change
		}
		x = 1
		y = 1
		relative_position_id = SPR_economy_gift
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_preparing_to_spread_revolution"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_revolution_portugal
		icon = GFX_z_goal_crush_POR
		prerequisite = { focus = SPR_preparing_to_spread_revolution }
		x = 0
		y = 1
		relative_position_id = SPR_preparing_to_spread_revolution
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
			OR = {
				NOT = { country_exists = POR }
				POR = { is_subject_of = ROOT }
				has_war_with = POR
				is_in_faction_with = POR
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_revolution_portugal"
			create_wargoal = {
				type = puppet_wargoal_focus
				target = POR
				expire = 0
			}
		}
	}
	
	focus = {
		id = SPR_revolution_andorra
		icon = GFX_z_goal_molotov
		prerequisite = { focus = SPR_revolution_portugal }
		x = 0
		y = 1
		relative_position_id = SPR_revolution_portugal
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0.1
				ADR = { is_guaranteed_by = event_target:NW_france_scope }
				strength_ratio = {
					tag = event_target:NW_france_scope
					ratio < 1
				}
			}
		}
		available = {
		}
		bypass = {
			OR = {
				NOT = { country_exists = ADR }
				ADR = { is_subject_of = ROOT }
				has_war_with = ADR
				is_in_faction_with = ADR
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_revolution_andorra"
			if = {
				limit = { ADR = { has_government = ROOT } }
				if = {
					limit = { is_faction_leader = yes }
					set_faction_name = ARA_union_anarchists_iberia
				}
				else = {
					set_rule = { can_create_factions = yes }
					create_faction = ARA_union_anarchists_iberia
				}
				ADR = { country_event = { id = generic.5 } }
			}
			else = {
				create_wargoal = {
					type = puppet_wargoal_focus
					target = ADR
					expire = 0
				}
			}
		}
	}
	
	
	### INDEPENDENT COMMUNISTS ###
	
	focus = {
		id = SPR_independent_communists
		icon = GFX_z_goal_com_reactions_nep
		prerequisite = { focus = SPR_elections_third_cortes_republic }
		mutually_exclusive = { focus = SPR_anarchists_victory focus = SPR_victory_socialists }
		x = 0
		y = 1
		relative_position_id = SPR_elections_third_cortes_republic
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_independent_communists"
			if = {
				limit = { NOT = { SPR_scw_in_progress = yes } }
				clr_country_flag = spain_block_legitimacy_flag
			}
			set_party_name = { ideology = communism long_name = SPR_trozkism_party_long name = SPR_trozkism_party }
			add_popularity = {
				ideology = communism
				popularity = 0.15
			}
			set_politics = {
				ruling_party = communism
				elections_allowed = yes
			}
			hidden_effect = {
				remove_country_leader_role = { character = SPR_andres_nin_perez		ideology = marxism1 }
				add_country_leader_role = {
					character = SPR_andres_nin_perez
					country_leader = {
						desc = "POLITICS_ANDRES_NIN_PEREZ_DESC"
						ideology = right_wing_communism
						traits = {
						}
						expire = "1965.1.1"
					}
					promote_leader = yes
				}
			}
			SOV = {
				if = {
					limit = { has_country_leader = { ruling_only = yes character = SOV_iosif_stalin } }
					add_opinion_modifier = { target = ROOT modifier = SPR_hinder_nkvd_interference }
					add_ai_strategy = {
						type = alliance
						id = ROOT
						value = -600
					}
					add_ai_strategy = {
						type = befriend
						id = ROOT
						value = -200
					}
					add_ai_strategy = {
						type = support
						id = ROOT
						value = -200
					}
					if = {
						limit = {
							ROOT = {
								has_volunteers_amount_from = {
									tag = SOV
									count > 0
								}
							}
						}
						recall_volunteers_from = ROOT
					}
				}
			}
			custom_effect_tooltip = remove_political_advisor
			show_ideas_tooltip = SPR_alexander_orlov
			set_cosmetic_tag = SPC_poum
			country_event = { id = NWspain.70 days = 2 random_days = 3 }
			custom_effect_tooltip = TUR_focus_autocomplete_tt
		}
	}
	
	focus = {
		id = SPR_strengthening_marxist_anarchist_friendship
		icon = GFX_z_marxist_anarchist_friendship
		prerequisite = {
			focus = SPR_independent_communists
			#focus = SPR_anarchists_victory
		}
		x = -7
		y = 1
		relative_position_id = SPR_independent_communists
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
			has_war_with = ARA
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_strengthening_marxist_anarchist_friendship"
			add_ideas = SPR_strengthening_marxist_anarchist_friendship
		}
	}
	
	focus = {
		id = SPR_international_brigades
		available = {
			NOT = { has_global_flag = scw_over }
		}
		bypass = {
		}
		prerequisite = {
			focus = SPR_independent_communists
			#focus = SPR_anarchists_victory
		}
		
		icon = GFX_goal_generic_allies_build_infantry
		x = -5
		y = 1
		relative_position_id = SPR_independent_communists
		cost = 5
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			create_field_marshal = {
				name = "Máté Zalka"
				gfx = "GFX_portrait_SPR_mate_zalka"
				traits = {  }
				skill = 2
				attack_skill = 2
				defense_skill = 1
				planning_skill = 2
				logistics_skill = 2
			}
			add_ideas = SPR_international_brigades
			custom_effect_tooltip = SPR_seize_public_transport_tt
		}
	}
	
	focus = {
		id = SPR_appropriate_church_riches_tro
		text = SPR_appropriate_church_riches
		available = {
		}
		bypass = {
		}
		prerequisite = {
			focus = SPR_independent_communists
			#focus = SPR_anarchists_victory
		}
		
		icon = GFX_goal_generic_construct_civilian
		x = -3
		y = 1
		relative_position_id = SPR_independent_communists
		cost = 7.2
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_timed_idea = { idea = SPR_appropriate_church_riches days = 730 }
		}
	}
	
	focus = {
		id = SPR_organization_of_revolutionary_committees
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_independent_communists }
		
		icon = GFX_z_focus_revolutionary_council
		x = 0
		y = 1
		relative_position_id = SPR_independent_communists
		cost = 5
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_organization_of_revolutionary_committees"
			add_ideas = SPR_revolutionary_committees_idea
		}
	}
	
	focus = {
		id = SPR_arm_the_workers_militias_tro
		text = SPR_arm_the_workers_militias
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_organization_of_revolutionary_committees }
		
		icon = GFX_z_goal_socmilirarism
		x = -1
		y = 1
		relative_position_id = SPR_organization_of_revolutionary_committees
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_arm_the_workers_militias_tro"
			add_war_support = 0.1
			swap_ideas = {
				remove_idea = SPR_disbanded_army_1
				add_idea = SPR_disbanded_army_2
			}
			add_ideas = extensive_conscription
		}
	}
	
	focus = {
		id = SPR_seize_the_gold_reserves
		available = {
		}
		bypass = {
			OR = {
				has_global_flag = scw_over
				has_global_flag = SPR_gold_reserves_flag
			}
		}
		prerequisite = { focus = SPR_arm_the_workers_militias_tro }
		
		icon = GFX_z_goal_gold_for_ppl
		x = -4
		y = 1
		relative_position_id = SPR_arm_the_workers_militias_tro
		cost = 5
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_timed_idea = { idea = SPR_seized_gold_reserves  days = 730 }
			set_global_flag = SPR_gold_reserves_flag
		}
	}
	
	focus = {
		id = SPR_foreign_arms_purchases
		available = {
			NOT = { has_global_flag = scw_over }
		}
		bypass = {
		}
		prerequisite = { focus = SPR_seize_the_gold_reserves }
		
		icon = GFX_z_goal_trade_weapons
		x = -2
		y = 1
		relative_position_id = SPR_seize_the_gold_reserves
		cost = 5
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPR_foreign_arms_purchases_tt
		}
	}
	
	focus = {
		id = SPR_masters_of_our_own_fate
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_seize_the_gold_reserves }
		
		icon = GFX_focus_spr_masters_of_our_own_fate
		x = 0
		y = 1
		relative_position_id = SPR_seize_the_gold_reserves
		cost = 5
		
		ai_will_do = {
			factor = 20
		}

		available_if_capitulated = yes
		completion_reward = {
			if = {
				limit = { has_government = communism }
				add_popularity = {
					ideology = fascism
					popularity = -1
				}
				add_popularity = {
					ideology = monarchy
					popularity = -1
				}
				add_popularity = {
					ideology = trozkism
					popularity = -0.25
				}
				add_popularity = {
					ideology = democratic
					popularity = -0.25
				}
			}
			else_if = {
				limit = { has_government = trozkism }
				add_popularity = {
					ideology = fascism
					popularity = -1
				}
				add_popularity = {
					ideology = monarchy
					popularity = -1
				}
				add_popularity = {
					ideology = communism
					popularity = -0.25
				}
				add_popularity = {
					ideology = democratic
					popularity = -0.25
				}
			}
			create_field_marshal = {
				name = "José Rovira"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_land_5.dds"
				traits = { infantry_officer politically_connected }
				skill = 3
				attack_skill = 2
				defense_skill = 2
				planning_skill = 2
				logistics_skill = 3
			}
			create_corps_commander = {
				name = "Carmel Rosa Baserba"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_land_1.dds"
				traits = { trait_cautious infantry_officer }
				skill = 3
				attack_skill = 2
				defense_skill = 2
				planning_skill = 2
				logistics_skill = 2
			}
			create_corps_commander = {
				name = "Luis Rastrollo"
				portrait_path = "gfx/leaders/Europe/Portrait_Europe_Generic_land_19.dds"
				traits = { politically_connected }
				skill = 1
				attack_skill = 1
				defense_skill = 2
				planning_skill = 1
				logistics_skill = 1
			}
			if = {
				limit = {
					has_global_flag = spanish_civil_war
				}
				add_timed_idea = { idea = SPR_masters_of_our_own_fate_tro days = 60 }
			}
		}
	}
	
	focus = {
		id = SPR_subvert_the_stalinists
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_arm_the_workers_militias_tro }
		
		icon = GFX_z_goal_generic_political_commissars
		x = 0
		y = 1
		relative_position_id = SPR_arm_the_workers_militias_tro
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_acceleration_social_change"
			add_stability = 0.05
			add_political_power = 120
		}
	}
	
	focus = {
		id = SPR_acceleration_social_change
		icon = GFX_z_goal_troz_federation
		prerequisite = { focus = SPR_organization_of_revolutionary_committees }
		x = 1
		y = 1
		relative_position_id = SPR_organization_of_revolutionary_committees
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_acceleration_social_change"
			add_political_power = 100
			add_stability = 0.05
			add_war_support = 0.05
		}
	}
	
	focus = {
		id = SPR_invite_socialist_intellectuals_tro
		text = SPR_invite_socialist_intellectuals
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_acceleration_social_change }
		
		icon = GFX_z_goal_brain
		x = 0
		y = 1
		relative_position_id = SPR_acceleration_social_change
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_research_slot = 1
			add_ideas = promoting_immigration
		}
	}
	
	focus = {
		id = SPR_class_war
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_subvert_the_stalinists }
		prerequisite = { focus = SPR_invite_socialist_intellectuals_tro }
		
		icon = GFX_focus_spr_class_war
		x = 1
		y = 1
		relative_position_id = SPR_subvert_the_stalinists
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_MANPOWER FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_ideas = SPR_class_war_1
			unlock_decision_category_tooltip = generic_policy_interventions_category
			unlock_decision_category_tooltip = generic_interventions_start_civil_war_category
			add_ideas = national_army
		}
	}
	
	
	###################
	### RIGHT SLOPE ###
	###################
	
	focus = {
		id = SPR_right_slope
		available = {
			has_country_leader = { ruling_only = yes name = "Joaquim Maurín" }
		}
		bypass = {
		}
		prerequisite = { focus = SPR_class_war }
		prerequisite = { focus = SPR_masters_of_our_own_fate }
		mutually_exclusive = {
			focus = SPR_united_under_socialism
			focus = SPR_left_slope
		}
		
		icon = GFX_z_communism11
		x = -7
		y = 1
		relative_position_id = SPR_class_war
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = { FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY }
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_right_slope"
			add_political_power = 100
			add_stability = 0.05
		}
	}
	
	focus = {
		id = SPR_support_for_peasantry
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_right_slope }
		
		icon = GFX_z_goal_save_farms
		x = -1
		y = 1
		relative_position_id = SPR_right_slope
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_support_for_peasantry"
			add_ideas = SPR_support_for_peasantry
		}
	}
	
	focus = {
		id = SPR_proletarian_state
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_right_slope }
		
		icon = GFX_z_goal_generic_dictatorship_of_proletariat
		x = 1
		y = 1
		relative_position_id = SPR_right_slope
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_proletarian_state"
			add_ideas = SPR_proletarian_state
		}
	}
	
	focus = {
		id = SPR_formation_of_multi_layered_economy
		available = {
			has_global_flag = scw_over
		}
		bypass = {
		}
		prerequisite = { focus = SPR_support_for_peasantry }
		prerequisite = { focus = SPR_proletarian_state }
		
		icon = GFX_z_goal_fiscal_reform
		x = 1
		y = 1
		relative_position_id = SPR_support_for_peasantry
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_formation_of_multi_layered_economy"
			add_timed_idea = { idea = SPR_formation_of_multi_layered_economy_1 days = 550 }
			set_variable = { formation_of_multi_layered_economy_var = 550 }
			custom_effect_tooltip = SPR_formation_of_multi_layered_economy_tt
		}
	}
	
	focus = {
		id = SPR_cooperative_collectivization
		available = {
		}
		bypass = {
			custom_trigger_tooltip = {
				tooltip = formation_of_multi_layered_economy_tt
				check_variable = { formation_of_multi_layered_economy_var < 1 }
			}
		}
		prerequisite = { focus = SPR_formation_of_multi_layered_economy }
		
		icon = GFX_z_goal_SH_ref
		x = -1
		y = 1
		relative_position_id = SPR_formation_of_multi_layered_economy
		cost = 10
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_cooperative_collectivization"
			every_controlled_state = {
				limit = {
					OR = {
						has_state_category = pastoral
						has_state_category = rural
						has_state_category = town
					}
				}
				add_to_variable = { cooperative_collectivization_var = 0.05 }
				add_dynamic_modifier = { modifier = cooperative_collectivization_dyn }
				effect_tooltip = {
					add_state_modifier = {
						modifier = {
							state_production_speed_infrastructure_factor = 0.1
							state_production_speed_hospital_factor = 0.1
							state_production_speed_industrial_complex_factor = 0.05
						}
					}
				}
				custom_effect_tooltip = n2_tt
			}
			if = {
				limit = { has_idea = SPR_formation_of_multi_layered_economy_2c }
				swap_ideas = {
					remove_idea = SPR_formation_of_multi_layered_economy_2c
					add_idea = SPR_formation_of_multi_layered_economy_2ac
				}
			}
			else = {
				swap_ideas = {
					remove_idea = SPR_formation_of_multi_layered_economy_1
					add_idea = SPR_formation_of_multi_layered_economy_2a
				}
			}
		}
	}
	
	focus = {
		id = SPR_electrification_of_village
		available = {
		}
		bypass = {
			custom_trigger_tooltip = {
				tooltip = formation_of_multi_layered_economy_tt
				check_variable = { formation_of_multi_layered_economy_var < 1 }
			}
		}
		prerequisite = { focus = SPR_cooperative_collectivization }
		
		icon = GFX_z_goal_build_electrostation
		x = 0
		y = 1
		relative_position_id = SPR_cooperative_collectivization
		cost = 14.3
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_electrification_of_village"
			if = {
				limit = { has_completed_focus = SPR_cooperative_collectivization }
				every_controlled_state = {
					limit = {
						has_dynamic_modifier = { modifier = cooperative_collectivization_dyn }
					}
					effect_tooltip = {
						add_state_modifier = {
							modifier = {
								state_production_speed_industrial_complex_factor = 0.05
							}
						}
					}
					add_to_variable = { cooperative_collectivization_var = 0.05 }
				}
			}
			else = {
				effect_tooltip = {
					every_controlled_state = {
						limit = {
							OR = {
								has_state_category = pastoral
								has_state_category = rural
								has_state_category = town
							}
						}
						add_state_modifier = {
							modifier = {
								state_production_speed_industrial_complex_factor = 0.05
							}
						}
					}
				}
			}
			custom_effect_tooltip = n2_tt
			add_tech_bonus = {
				name = SPR_concept_of_differential_optima
				bonus = 1.0
				uses = 1
				category = industry
			}
			if = {
				limit = { has_idea = SPR_formation_of_multi_layered_economy_2ac }
				swap_ideas = {
					remove_idea = SPR_formation_of_multi_layered_economy_2ac
					add_idea = SPR_formation_of_multi_layered_economy_2abc
				}
			}
			else = {
				swap_ideas = {
					remove_idea = SPR_formation_of_multi_layered_economy_2a
					add_idea = SPR_formation_of_multi_layered_economy_2ab
				}
			}
		}
	}
	
	focus = {
		id = SPR_concept_of_differential_optima
		available = {
		}
		bypass = {
			custom_trigger_tooltip = {
				tooltip = formation_of_multi_layered_economy_tt
				check_variable = { formation_of_multi_layered_economy_var < 1 }
			}
		}
		prerequisite = { focus = SPR_formation_of_multi_layered_economy }
		
		icon = GFX_z_goal_new_industry_standard
		x = 1
		y = 1
		relative_position_id = SPR_formation_of_multi_layered_economy
		cost = 10
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_concept_of_differential_optima"
			add_tech_bonus = {
				name = SPR_concept_of_differential_optima
				bonus = 1.0
				uses = 1
				category = construction_tech
			}
			if = {
				limit = { has_idea = SPR_formation_of_multi_layered_economy_2a }
				swap_ideas = {
					remove_idea = SPR_formation_of_multi_layered_economy_2a
					add_idea = SPR_formation_of_multi_layered_economy_2ac
				}
			}
			else_if = {
				limit = { has_idea = SPR_formation_of_multi_layered_economy_2ab }
				swap_ideas = {
					remove_idea = SPR_formation_of_multi_layered_economy_2ab
					add_idea = SPR_formation_of_multi_layered_economy_2abc
				}
			}
			else = {
				swap_ideas = {
					remove_idea = SPR_formation_of_multi_layered_economy_1
					add_idea = SPR_formation_of_multi_layered_economy_2c
				}
			}
		}
	}
	
	focus = {
		id = SPR_local_factories
		available = {
		}
		bypass = {
			custom_trigger_tooltip = {
				tooltip = formation_of_multi_layered_economy_tt
				check_variable = { formation_of_multi_layered_economy_var < 1 }
			}
		}
		prerequisite = { focus = SPR_electrification_of_village }
		prerequisite = { focus = SPR_concept_of_differential_optima }
		
		icon = GFX_z_goal_uverennaya_modernizatsia
		x = 1
		y = 1
		relative_position_id = SPR_electrification_of_village
		cost = 10
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_local_factories"
			swap_ideas = {
				remove_idea = SPR_formation_of_multi_layered_economy_2abc
				add_idea = SPR_formation_of_multi_layered_economy_3
			}
		}
	}
	
	focus = {
		id = SPR_industrialization_of_village
		available = {
		}
		bypass = {
			custom_trigger_tooltip = {
				tooltip = formation_of_multi_layered_economy_tt
				check_variable = { formation_of_multi_layered_economy_var < 1 }
			}
		}
		prerequisite = { focus = SPR_local_factories }
		
		icon = GFX_z_goal_food_prom
		x = 0
		y = 1
		relative_position_id = SPR_local_factories
		cost = 20
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_industrialization_of_village"
			swap_ideas = {
				remove_idea = SPR_formation_of_multi_layered_economy_3
				add_idea = SPR_formation_of_multi_layered_economy_4
			}
			if = {
				limit = { has_completed_focus = SPR_cooperative_collectivization }
				every_controlled_state = {
					limit = {
						has_dynamic_modifier = { modifier = cooperative_collectivization_dyn }
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			else = {
				effect_tooltip = {
					every_controlled_state = {
						limit = {
							OR = {
								has_state_category = pastoral
								has_state_category = rural
								has_state_category = town
							}
						}
						add_extra_state_shared_building_slots = 1
						add_building_construction = {
							type = industrial_complex
							level = 1
							instant_build = yes
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_wealth_redistribution
		available = {
		}
		bypass = {
		}
		prerequisite = {
			focus = SPR_right_slope
			focus = SPR_united_under_socialism
		}
		
		icon = GFX_z_goal_ekonomik_ref
		x = 3
		y = 1
		relative_position_id = SPR_right_slope
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_ideas = SPR_wealth_redistribution
		}
	}
	
	focus = {
		id = SPR_collective_recovery_efforts
		available = {
			has_global_flag = scw_over
		}
		bypass = {
		}
		prerequisite = { focus = SPR_wealth_redistribution }
		
		icon = GFX_z_goal_industry_work
		x = 0
		y = 1
		relative_position_id = SPR_wealth_redistribution
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_timed_idea = { idea = SPR_collective_recovery_efforts days = 730 }
			every_controlled_state = {
				limit = {
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPR_repair_and_expand_the_dockyards
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_collective_recovery_efforts }
		
		icon = GFX_goal_generic_construct_naval_dockyard
		x = 0
		y = 1
		relative_position_id = SPR_collective_recovery_efforts
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_repair_and_expand_the_dockyards_2DY }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
		}

		completion_reward = {
			navy_experience = 25
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = SPR_repair_and_expand_the_dockyards_2DY
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_repair_and_expand_the_dockyards_2DY }
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = SPR_repair_and_expand_the_dockyards_2DY
			}
		}
	}

	focus = {
		id = SPR_the_peoples_fleet
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_repair_and_expand_the_dockyards }
		
		icon = GFX_goal_generic_navy_doctrines_tactics
		x = 0
		y = 1
		relative_position_id = SPR_repair_and_expand_the_dockyards
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			navy_experience = 75
			add_tech_bonus = {
				name = SPR_the_peoples_fleet
				bonus = 1
				uses = 1
				category = cl_tech
				category = ca_tech
			}
			add_tech_bonus = {
				name = SPR_the_peoples_fleet
				bonus = 1
				uses = 1
				category = dd_tech
			}
			add_tech_bonus = {
				name = SPR_the_peoples_fleet
				bonus = 1
				uses = 1
				category = ss_tech
			}
			add_tech_bonus = {
				name = SPR_the_peoples_fleet
				bonus = 1
				uses = 1
				category = submarine_doctrine
			}
		}
	}
	
	
	##############################
	### UNITED UNDER SOCIALISM ###
	##############################
	
	focus = {
		id = SPR_united_under_socialism
		available = {
			has_country_leader = { ruling_only = yes name = "Julián Gorkin" }
		}
		bypass = {
		}
		prerequisite = { focus = SPR_class_war }
		prerequisite = { focus = SPR_masters_of_our_own_fate }
		mutually_exclusive = {
			focus = SPR_right_slope
			focus = SPR_left_slope
		}
		
		icon = GFX_z_goal_united_under_socialism
		x = 0
		y = 1
		relative_position_id = SPR_class_war
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_united_under_socialism"
			add_ideas = SPR_united_under_socialism
		}
	}
	
	focus = {
		id = SPR_rethinking_socialism
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_united_under_socialism }
		
		icon = GFX_z_goal_communist_discourse
		x = 0
		y = 1
		relative_position_id = SPR_united_under_socialism
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_rethinking_socialism"
			add_timed_idea = { idea = SPR_rethinking_socialism days = 120 }
			custom_effect_tooltip = SPR_rethinking_socialism_tt
		}
	}
	
	focus = {
		id = SPR_strengthening_trade_unions
		available = {
		}
		bypass = {
		}
		prerequisite = {
			focus = SPR_proletarian_state
			focus = SPR_rethinking_socialism
		}
		
		icon = GFX_z_goal_government_engineers_2
		x = -2
		y = 1
		relative_position_id = SPR_rethinking_socialism
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_strengthening_trade_unions"
			if = {
				limit = {
					OR = {
						has_country_leader = { ruling_only = yes name = "Joaquim Maurín" }
						has_completed_focus = SPR_right_slope
					}
				}
				swap_ideas = {
					remove_idea = SPR_proletarian_state
					add_idea = SPR_proletarian_state_2
				}
			}
			else = {
				add_ideas = SPR_strengthening_trade_unions
				if = {
					limit = { has_idea = SPR_rethinking_socialism }
					modify_timed_idea = { idea = SPR_rethinking_socialism days = 90 }
				}
				else = {
					add_timed_idea = { idea = SPR_rethinking_socialism days = 120 }
				}
			}
		}
	}
	
	focus = {
		id = SPR_developing_viable_strategies_for_political_struggle
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_rethinking_socialism }
		
		icon = GFX_z_goal_communist_brain
		x = 0
		y = 1
		relative_position_id = SPR_rethinking_socialism
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_developing_viable_strategies_for_political_struggle"
			add_ideas = SPR_developing_viable_strategies_for_political_struggle
			if = {
				limit = { has_idea = SPR_rethinking_socialism }
				modify_timed_idea = { idea = SPR_rethinking_socialism days = 90 }
			}
			else = {
				add_timed_idea = { idea = SPR_rethinking_socialism days = 120 }
			}
		}
	}
	
	focus = {
		id = SPR_anti_bureaucracy
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_developing_viable_strategies_for_political_struggle }
		
		icon = GFX_z_goal_stop_east_politic
		x = 0
		y = 1
		relative_position_id = SPR_developing_viable_strategies_for_political_struggle
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_anti_bureaucracy"
			add_ideas = SPR_anti_bureaucracy
			if = {
				limit = { has_idea = SPR_rethinking_socialism }
				modify_timed_idea = { idea = SPR_rethinking_socialism days = 90 }
			}
			else = {
				add_timed_idea = { idea = SPR_rethinking_socialism days = 120 }
			}
		}
	}
	
	focus = {
		id = SPR_labor_militia
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_strengthening_trade_unions }
		prerequisite = { focus = SPR_anti_bureaucracy }
		
		icon = GFX_z_focus_the_workers
		x = -1
		y = 1
		relative_position_id = SPR_anti_bureaucracy
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_labor_militia"
			add_ideas = SPR_labor_militia
			if = {
				limit = { has_idea = SPR_rethinking_socialism }
				modify_timed_idea = { idea = SPR_rethinking_socialism days = 90 }
			}
			else = {
				add_timed_idea = { idea = SPR_rethinking_socialism days = 120 }
			}
		}
	}
	
	focus = {
		id = SPR_development_of_revolutionary_culture
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_rethinking_socialism }
		
		icon = GFX_z_focus_propaganda_soviet
		x = 2
		y = 1
		relative_position_id = SPR_rethinking_socialism
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_development_of_revolutionary_culture"
			add_ideas = SPR_development_of_revolutionary_culture
			if = {
				limit = { has_idea = SPR_rethinking_socialism }
				modify_timed_idea = { idea = SPR_rethinking_socialism days = 90 }
			}
			else = {
				add_timed_idea = { idea = SPR_rethinking_socialism days = 120 }
			}
		}
	}
	
	focus = {
		id = SPR_cultural_and_educational_activities
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_development_of_revolutionary_culture }
		
		icon = GFX_z_goal_worker_press_commi
		x = 0
		y = 1
		relative_position_id = SPR_development_of_revolutionary_culture
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_cultural_and_educational_activities"
			add_ideas = SPR_cultural_and_educational_activities
			if = {
				limit = { has_idea = SPR_rethinking_socialism }
				modify_timed_idea = { idea = SPR_rethinking_socialism days = 90 }
			}
			else = {
				add_timed_idea = { idea = SPR_rethinking_socialism days = 120 }
			}
		}
	}
	
	focus = {
		id = SPR_proletarian_democracy
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_anti_bureaucracy }
		prerequisite = { focus = SPR_cultural_and_educational_activities }
		
		icon = GFX_z_goal_kamunyaki
		x = -1
		y = 1
		relative_position_id = SPR_cultural_and_educational_activities
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_proletarian_democracy"
			add_ideas = SPR_proletarian_democracy
			if = {
				limit = { has_idea = SPR_rethinking_socialism }
				modify_timed_idea = { idea = SPR_rethinking_socialism days = 90 }
			}
			else = {
				add_timed_idea = { idea = SPR_rethinking_socialism days = 120 }
			}
		}
	}
	
	focus = {
		id = SPR_triumph_of_revolutionary_socialism
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_labor_militia }
		prerequisite = { focus = SPR_proletarian_democracy }
		
		icon = GFX_z_goal_communist_pride
		x = 1
		y = 1
		relative_position_id = SPR_labor_militia
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_MANPOWER}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_triumph_of_revolutionary_socialism"
			add_country_leader_trait = militant_socialist
			if = {
				limit = {
					NOT = { has_country_flag = SPR_rethinking_socialism_flag }
				}
				swap_ideas = {
					remove_idea = SPR_strengthening_trade_unions
					add_idea = SPR_strengthening_trade_unions_2
				}
				swap_ideas = {
					remove_idea = SPR_developing_viable_strategies_for_political_struggle
					add_idea = SPR_developing_viable_strategies_for_political_struggle_2
				}
				swap_ideas = {
					remove_idea = SPR_anti_bureaucracy
					add_idea = SPR_anti_bureaucracy_2
				}
				swap_ideas = {
					remove_idea = SPR_labor_militia
					add_idea = SPR_labor_militia_2
				}
				swap_ideas = {
					remove_idea = SPR_development_of_revolutionary_culture
					add_idea = SPR_development_of_revolutionary_culture_2
				}
				swap_ideas = {
					remove_idea = SPR_cultural_and_educational_activities
					add_idea = SPR_cultural_and_educational_activities_2
				}
				swap_ideas = {
					remove_idea = SPR_proletarian_democracy
					add_idea = SPR_proletarian_democracy_2
				}
			}
			remove_ideas = SPR_rethinking_socialism
		}
	}

	focus = {
		id = SPR_land_redistribution
		available = {
		}
		bypass = {
		}
		prerequisite = {
			focus = SPR_united_under_socialism
			focus = SPR_left_slope
		}
		
		icon = GFX_z_goal_mountain_industry
		x = 5
		y = 1
		relative_position_id = SPR_united_under_socialism
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_land_redistribution_1slot }
				add_extra_state_shared_building_slots = 1
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 1
				set_state_flag = SPR_land_redistribution_1slot
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_land_redistribution_1slot }
				}
				add_extra_state_shared_building_slots = 1
				set_state_flag = SPR_land_redistribution_1slot
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_land_redistribution_1slot }
				}
				add_extra_state_shared_building_slots = 1
				set_state_flag = SPR_land_redistribution_1slot
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_land_redistribution_1slot }
				}
				add_extra_state_shared_building_slots = 1
				set_state_flag = SPR_land_redistribution_1slot
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_land_redistribution_1slot }
				}
				add_extra_state_shared_building_slots = 1
				set_state_flag = SPR_land_redistribution_1slot
			}
		}
	}
	
	focus = {
		id = SPR_expand_the_means_of_production
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_land_redistribution }
		
		icon = GFX_focus_generic_industry_3
		x = -1
		y = 1
		relative_position_id = SPR_land_redistribution
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPR_expand_the_means_of_production_2civ }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			every_state = {
				limit	= {	has_state_flag = SPR_expand_the_means_of_production_2mil }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_tech_bonus = {
				name = SPR_expand_the_means_of_production
				bonus = 1.0
				uses = 1
				category = industry
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPR_expand_the_means_of_production_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_expand_the_means_of_production_2civ }
				}
				set_state_flag = SPR_expand_the_means_of_production_2mil
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_nationalize_the_industry_tro
		text = SPR_nationalize_the_industry
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_land_redistribution }

		icon = GFX_goal_generic_construct_civ_factory
		x = 1
		y = 1
		relative_position_id = SPR_land_redistribution
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_nationalize_the_industry_1civ }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_stability = -0.1
			add_tech_bonus = {
				name = SPR_nationalize_the_industry
				bonus = 1.0
				uses = 1
				category = industry
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPR_nationalize_the_industry_1civ
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_nationalize_the_industry_1civ }
				}
				set_state_flag = SPR_nationalize_the_industry_1civ
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_nationalize_the_industry_1civ }
				}
				set_state_flag = SPR_nationalize_the_industry_1civ
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_beacon_of_socialism_tro
		text = SPR_beacon_of_socialism
		available = {
			num_of_factories > 50
		}
		bypass = {
		}
		prerequisite = { focus = SPR_nationalize_the_industry_tro }

		icon = GFX_focus_research2
		x = -2
		y = 1
		relative_position_id = SPR_nationalize_the_industry_tro
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_research_slot = 1
		}
	}
	
	focus = {
		id = SPR_increase_arms_production_tro
		text = SPR_increase_arms_production
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_nationalize_the_industry_tro }

		icon = GFX_goal_generic_construct_mil_factory
		x = 0
		y = 1
		relative_position_id = SPR_nationalize_the_industry_tro
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_increase_arms_production_1mil }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
				}
				set_state_flag = SPR_increase_arms_production_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_increase_arms_production_1mil }
				}
				set_state_flag = SPR_increase_arms_production_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_increase_arms_production_1mil }
				}
				set_state_flag = SPR_increase_arms_production_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_exploit_spains_riches_tro
		text = SPR_exploit_spains_riches
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_increase_arms_production_tro }
		
		icon = GFX_goal_generic_construction2
		x = -1
		y = 1
		relative_position_id = SPR_increase_arms_production_tro
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {}
		completion_reward = {
			if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_3
				}
				remove_ideas = SPA_recovering_from_civil_war_3
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_2
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war_2
					add_idea = SPA_recovering_from_civil_war_3
				}
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war
					add_idea = SPA_recovering_from_civil_war_2
				}
			}
			else_if = {
				limit = {
					NOT = { has_global_flag = scw_over }
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_recovering_from_civil_war
						add_idea = SPA_recovering_from_civil_war_2
					}
				}
			}
			custom_effect_tooltip = SPA_reduce_reliance_on_foreign_resources_tt
		}
	}
	
	
	##################
	### LEFT SLOPE ###
	##################
	
	focus = {
		id = SPR_left_slope
		available = {
			has_country_leader = { ruling_only = yes character = SPR_andres_nin_perez }
		}
		bypass = {
		}
		prerequisite = { focus = SPR_class_war }
		prerequisite = { focus = SPR_masters_of_our_own_fate }
		mutually_exclusive = {
			focus = SPR_right_slope
			focus = SPR_united_under_socialism
		}
		
		icon = GFX_z_communism12
		x = 11
		y = 1
		relative_position_id = SPR_class_war
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_left_slope"
			add_political_power = 100
			add_war_support = 0.05
			country_event = { id = NWspain.74 hours = 6 }
		}
	}
	
	focus = {
		id = SPR_accelerated_general_collectivization
		available = {
			has_global_flag = scw_over
		}
		bypass = {
		}
		prerequisite = { focus = SPR_left_slope }
		
		icon = GFX_z_goal_food_prom
		x = -2
		y = 1
		relative_position_id = SPR_left_slope
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_accelerated_general_collectivization"
			custom_effect_tooltip = NWspain_74a_tt2
			if = {
				limit = { has_country_flag = NWspain_74a_flag }
				set_temp_variable = { temp1 = 365 }
				set_temp_variable = { temp2 = num_battalions }
				if = {
					limit = { check_variable = { temp2 > 182 } }
					add_timed_idea = { idea = SPR_accelerated_general_collectivization days = 183 }
					add_timed_idea = { idea = SPR_army_debuff_general_collectivization days = 183 }
					subtract_from_temp_variable = { temp2 = 182 }
					multiply_temp_variable = { temp2 = 0.001 }
					every_controlled_state = {
						limit = {
							OR = {
								has_state_category = pastoral
								has_state_category = rural
								has_state_category = town
							}
						}
						add_dynamic_modifier = { modifier = accelerated_general_collectivization_dyn days = 183 }
						effect_tooltip = {
							add_state_modifier = {
								modifier = {
									recruitable_population_factor = -0.33
									state_production_speed_infrastructure_factor = 0.35
									state_production_speed_hospital_factor = 0.35
									state_production_speed_buildings_factor = -0.25
								}
							}
						}
						custom_effect_tooltip = n3_tt
					}
					add_stability = temp2
				}
				else = {
					subtract_from_temp_variable = { temp1 = temp2 }
					add_timed_idea = { idea = SPR_accelerated_general_collectivization days = temp1 }
					add_timed_idea = { idea = SPR_army_debuff_general_collectivization days = temp1 }
					every_controlled_state = {
						limit = {
							OR = {
								has_state_category = pastoral
								has_state_category = rural
								has_state_category = town
							}
						}
						add_dynamic_modifier = { modifier = accelerated_general_collectivization_dyn days = temp1 }
						effect_tooltip = {
							add_state_modifier = {
								modifier = {
									recruitable_population_factor = -0.33
									state_production_speed_infrastructure_factor = 0.35
									state_production_speed_hospital_factor = 0.35
									state_production_speed_buildings_factor = -0.25
								}
							}
						}
						#custom_effect_tooltip = n3_tt
					}
				}
			}
			else = {
				add_timed_idea = { idea = SPR_accelerated_general_collectivization days = 730 }
				every_controlled_state = {
					limit = {
						OR = {
							has_state_category = pastoral
							has_state_category = rural
							has_state_category = town
						}
					}
					add_dynamic_modifier = { modifier = accelerated_general_collectivization_dyn days = 730 }
					effect_tooltip = {
						add_state_modifier = {
							modifier = {
								recruitable_population_factor = -0.33
								state_production_speed_infrastructure_factor = 0.35
								state_production_speed_hospital_factor = 0.35
								state_production_speed_buildings_factor = -0.25
							}
						}
					}
					#custom_effect_tooltip = n3_tt
				}
			}
			hidden_effect = {
				delete_unit = { disband = yes }
			}
		}
	}
	
	focus = {
		id = SPR_new_course
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_left_slope }
		
		icon = GFX_z_goal_yang_party_of_kolombo
		x = 2
		y = 1
		relative_position_id = SPR_left_slope
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_new_course"
			add_political_power = 100
			add_popularity = {
				ideology = trozkism
				popularity = 0.1
			}
		}
	}
	
	focus = {
		id = SPR_forced_labor_service
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_accelerated_general_collectivization }
		
		icon = GFX_z_goal_focus_generic_oppression
		x = -1
		y = 1
		relative_position_id = SPR_accelerated_general_collectivization
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_forced_labor_service"
			add_ideas = SPR_forced_labor_service
		}
	}
	
	focus = {
		id = SPR_super_tax_on_the_peasantry
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_accelerated_general_collectivization }
		prerequisite = { focus = SPR_new_course }
		
		icon = GFX_z_goal_Woodhead_comission
		x = 1
		y = 1
		relative_position_id = SPR_accelerated_general_collectivization
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_super_tax_on_the_peasantry"
			add_ideas = SPR_super_tax_on_the_peasantry
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_labor_armies
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_forced_labor_service }
		prerequisite = { focus = SPR_super_tax_on_the_peasantry }
		
		icon = GFX_z_goal_soviet_civil_city1
		x = 0
		y = 1
		relative_position_id = SPR_super_tax_on_the_peasantry
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_labor_armies"
			add_ideas = SPR_labor_armies
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_peoples_courts
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_new_course }
		
		icon = GFX_z_goal_sud_ref
		x = -1
		y = 1
		relative_position_id = SPR_new_course
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_peoples_courts"
			add_stability = 0.05
			add_ideas = SPR_peoples_courts
		}
	}
	
	focus = {
		id = SPR_factionalism_of_party
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_new_course }
		
		icon = GFX_z_goal_commi_raskol
		x = 1
		y = 1
		relative_position_id = SPR_new_course
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_factionalism_of_party"
			add_ideas = SPR_factionalism_of_party
		}
	}
	
	focus = {
		id = SPR_road_to_young
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_peoples_courts }
		prerequisite = { focus = SPR_factionalism_of_party }
		
		icon = GFX_z_goal_mutual_aid
		x = 0
		y = 1
		relative_position_id = SPR_peoples_courts
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_road_to_young"
			add_stability = 0.05
			add_ideas = SPR_road_to_young
		}
	}
	
	focus = {
		id = SPR_accelerated_industrialization
		available = {
			NOT = { has_idea = SPR_accelerated_general_collectivization }
		}
		bypass = {
		}
		prerequisite = { focus = SPR_labor_armies }
		prerequisite = { focus = SPR_road_to_young }
		
		icon = GFX_z_goal_industrial_soviet
		x = 1
		y = 1
		relative_position_id = SPR_labor_armies
		cost = 14.3
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_accelerated_industrialization"
			every_owned_state = {
				limit = {
					NOT = {
						has_state_category = pastoral
						has_state_category = rural
						has_state_category = town
					}
					is_controlled_by = ROOT
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			add_ideas = SPR_accelerated_industrialization
		}
	}
	
	
	########################
	
	focus = {
		id = SPR_all_must_do_their_part
		available = {
		}
		bypass = {
		}
		prerequisite = {
			focus = SPR_triumph_of_revolutionary_socialism
			focus = SPR_accelerated_industrialization
		}

		icon = GFX_z_goal_generic_dictatorship_of_proletariat
		x = 5
		y = 1
		relative_position_id = SPR_triumph_of_revolutionary_socialism
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			custom_effect_tooltip = SPR_recovering_from_civil_war_focus_tt
			if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_3
				}
				remove_ideas = SPA_recovering_from_civil_war_3
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_2
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war_2
					add_idea = SPA_recovering_from_civil_war_3
				}
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war
					add_idea = SPA_recovering_from_civil_war_2
				}
			}
			else_if = {
				limit = {
					NOT = { has_global_flag = scw_over }
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_recovering_from_civil_war
						add_idea = SPA_recovering_from_civil_war_2
					}
				}
			}
			swap_ideas = {
				remove_idea = SPR_class_war_1
				add_idea = SPR_class_war_2
			}
		}
	}
	
	focus = {
		id = SPR_lessons_from_the_civil_war
		available = {
		}
		bypass = {
		}
		prerequisite = {
			focus = SPR_industrialization_of_village
			focus = SPR_all_must_do_their_part
		}

		icon = GFX_goal_generic_army_doctrines
		x = -1
		y = 1
		relative_position_id = SPR_all_must_do_their_part
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			remove_ideas = SPR_disbanded_army_2
			add_doctrine_cost_reduction = {
				name = SPA_doctrinal_advancements
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
		}
	}
	
	focus = {
		id = SPR_the_red_tide
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_all_must_do_their_part }

		icon = GFX_goal_generic_army_artillery
		x = 0
		y = 2
		relative_position_id = SPR_all_must_do_their_part
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			swap_ideas = {
				remove_idea = SPR_class_war_2
				add_idea = SPR_class_war_3
			}
		}
	}
	
	focus = {
		id = SPR_doctrinal_advancements
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_the_red_tide }
		prerequisite = { focus = SPR_lessons_from_the_civil_war }

		icon = GFX_goal_generic_air_doctrine
		x = -1
		y = 1
		relative_position_id = SPR_the_red_tide
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = SPA_doctrinal_advancements
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
			add_doctrine_cost_reduction = {
				name = SPA_doctrinal_advancements
				cost_reduction = 0.5
				uses = 1
				category = air_doctrine
			}
		}
	}

	focus = {
		id = SPR_arm_the_tide
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_the_red_tide }

		icon = GFX_goal_generic_small_arms
		x = 1
		y = 1
		relative_position_id = SPR_the_red_tide
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = SPR_arm_the_tide
				bonus = 1.0
				uses = 2
				category = infantry_weapons
			}
			add_tech_bonus = {
				name = SPR_arm_the_tide
				bonus = 1.0
				uses = 2
				category = artillery
			}
		}
	}
	
	focus = {
		id = SPR_against_fascism
		available = {
			any_of_scopes = {
				array = global.country_in_europe
				tooltip = country_in_europe_tt
				hidden_trigger = { NOT = { tag = ROOT } }
				capital_scope = { is_on_continent = europe }
				has_government = fascism
				exists = yes
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_the_red_tide }

		icon = GFX_focus_generic_anti_fascist_diplomacy
		x = 0
		y = 2
		relative_position_id = SPR_the_red_tide
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			every_country = {
				limit = {
					capital_scope = { is_on_continent = europe }
					has_government = fascism
				}
				ROOT = {
					create_wargoal = {
					    type = puppet_wargoal_focus
					    target = PREV
					    expire = 0
					}
				}
			}
		}
	}
	
	
	
	### DIPLOMATIC ###
	
	focus = {
		id = SPR_unify_the_london_bureau
		available = {
			is_subject = no
			OR = {
				has_completed_focus = SPR_right_slope
				has_completed_focus = SPR_united_under_socialism
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_lessons_from_the_civil_war }
		mutually_exclusive = {
			focus = SPR_iberian_union
			focus = SPR_fourth_international
		}
		icon = GFX_focus_spr_unify_the_london_bureau
		x = -5
		y = 1
		relative_position_id = SPR_lessons_from_the_civil_war
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
# ПОЧИНИТЬ ПОТОМ
		completion_reward = {
			set_rule = { can_create_factions = yes }
			if = {
				limit = {
					ENG = {
						is_faction_leader = yes
						has_government = ROOT
						NOT = { has_war_with = ROOT }
#						has_completed_focus = ENG_the_british_communist_alternative
					}
				}
				if = {
					limit = { NOT = { is_in_faction_with = ENG } }
					country_event = { id = NWspain.71 }
				}
				else = { ENG = { country_event = { id = NWspain.72 } } }
			}
			else = {
				if = {
					limit = { is_faction_leader = yes }
					set_faction_name = three_half_international
				}
				else = {
					create_faction = three_half_international
				}
				hidden_effect = { news_event = { id = trworldnews.143 hours = 6 } }
				every_other_country = {
					limit = {
						has_government = communism
						is_in_faction = no
						NOT = {
							capital_scope = {
								is_on_continent = asia
							}
						}
					}
					country_event = { id = generic.5 hours = 6 random_hours = 6 }
				}
			}
		}
	}
	
	focus = {
		id = SPR_against_trotskyism_and_stalinism
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_unify_the_london_bureau }

		icon = GFX_focus_attack_soviet
		x = 0
		y = 3
		relative_position_id = SPR_unify_the_london_bureau
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
# ПОЧИНИТЬ ПОТОМ
		completion_reward = {
			if = {
				limit = {
					MEX = {
						has_country_leader = {
							character = SOV_lev_trotsky
							ruling_only = yes
						}
					}
				}
				create_wargoal = {
					type = puppet_wargoal_focus
					target = MEX
					expire = 0
				}
			}
			if = {
				limit = {
					any_country_with_original_tag = {
						original_tag_to_check = SOV
						OR = {
							has_government = communism
							has_government = trozkism
						}
#						NOT = { has_completed_focus = SOV_the_right_opposition }
					}
				}
				hidden_effect = {
					every_other_country = {
						limit = {
							original_tag = SOV
							OR = {
								has_government = communism
								has_government = trozkism
							}
#							NOT = { has_completed_focus = SOV_the_right_opposition }
						}
						ROOT = {
							create_wargoal = {
								type = puppet_wargoal_focus
								target = PREV
								expire = 0
							}
						}
					}
				}
				custom_effect_tooltip = SPR_against_trotskyism_and_stalinism_tt
			}
		}
	}
	
	focus = {
		id = SPR_iberian_union
		icon = GFX_goal_molotov_ribbentrop_pact
		prerequisite = { focus = SPR_lessons_from_the_civil_war }
		mutually_exclusive = {
			focus = SPR_unify_the_london_bureau
			focus = SPR_fourth_international
		}
		x = -3
		y = 1
		relative_position_id = SPR_lessons_from_the_civil_war
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 1.5
		}
		available = {
			is_subject = no
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_iberian_union"
			set_rule = { can_create_factions = yes }
			create_faction = SPR_iberian_union
			if = {
				limit = { has_government = trozkism }
				add_to_variable = { global.troz_threat_var = 1.5 tooltip = troz_threat_tt }
				set_var_for_troz_threat_dyn = yes
			}
		}
	}
	
	focus = {
		id = SPR_fourth_international
		text = JAP_join_four_inter
		icon = GFX_z_focus_generic_join_tro
		prerequisite = { focus = SPR_lessons_from_the_civil_war }
		mutually_exclusive = {
			focus = SPR_unify_the_london_bureau
			focus = SPR_iberian_union
		}
		x = -1
		y = 1
		relative_position_id = SPR_lessons_from_the_civil_war
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			is_subject = no
			has_government = trozkism
			has_completed_focus = SPR_left_slope
		}
		bypass = {
			if = {
				limit = { is_in_faction = yes is_faction_leader = no }
				FACTION_LEADER = {
					has_government = trozkism
					has_country_flag = CURRENT_LEADER_FOUR_INTERNATIONAL_FLAG
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_fourth_international"
			set_rule = { can_create_factions = yes }
			if = {
				limit = { NOT = { has_global_flag = four_international_flag } }
				if = {
					limit = { is_faction_leader = yes }
					set_faction_name = SPR_section_fourth_international
				}
				else = { create_faction = SPR_section_fourth_international }
			}
			else = {
				random_other_country = {
					limit = {
						NOT = { has_war_with = ROOT }
						has_government = trozkism
						is_faction_leader = yes
						has_country_flag = CURRENT_LEADER_FOUR_INTERNATIONAL_FLAG
					}
					country_event = { id = generic.2 }
				}
			}
			add_to_variable = { global.troz_threat_var = 2 tooltip = troz_threat_tt }
			set_var_for_troz_threat_dyn = yes
		}
	}
	
	focus = {
		id = SPR_return_of_gibraltar_tro
		text = SPR_return_of_gibraltar
		icon = GFX_goal_generic_territory_or_war
		prerequisite = { focus = SPR_unify_the_london_bureau focus = SPR_fourth_international focus = SPR_iberian_union }
		x = 0
		y = 1
		relative_position_id = SPR_iberian_union
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_return_of_gibraltar_tro"
			118 = {
				add_claim_by = ROOT
				add_core_of = ROOT
			}
		}
	}
	
	focus = {
		id = SPR_support_french_communists_tro
		text = SPR_support_french_communists
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_return_of_gibraltar_tro }

		icon = GFX_focus_attack_france
		x = -1
		y = 1
		relative_position_id = SPR_return_of_gibraltar_tro
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			if = {
				limit = {
					event_target:NW_france_scope = {
						has_government = communism
						is_in_faction = no
					}
					is_in_faction = yes
				}
				event_target:NW_france_scope = { country_event = { id = generic.5 hours = 6 random_hours = 6 } }
			}
			else_if = {
				limit = {
					event_target:NW_france_scope = {
						NOT = { has_government = communism }
						communism > 0.2
					}
				}
				event_target:NW_france_scope = { country_event = { id = lar_spain.62 hours = 6 random_hours = 6 } }
			}
			else = {
				create_wargoal = {
				    type = puppet_wargoal_focus
				    target = event_target:NW_france_scope
					expire = 0
				}
			}
		}
	}
	
	focus = {
		id = SPR_a_red_iberia_tro
		available = {
		}
		bypass = {
			has_war_with = POR
		}
		prerequisite = { focus = SPR_return_of_gibraltar_tro }

		icon = GFX_focus_generic_attack_portugal
		x = 1
		y = 1
		relative_position_id = SPR_return_of_gibraltar_tro
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			if = {
				limit = { NOT = { country_exists = POR } }
				every_state = {
					limit = {
						is_core_of = POR
						NOT = { is_core_of = ROOT }
					}
					add_core_of = ROOT
				}
			}
			else = {
				if = {
					limit = {
						POR = {
							NOT = { has_government = ROOT }
						}
					}
					create_wargoal = {
						type = annex_everything
						target = POR
						expire = 0
					}
				}
				else = {
					POR = { country_event = { id = lar_spain.59 hours = 6 random_hours = 6 } }
				}
			}
		}
	}
	
	focus = {
		id = SPR_avenge_foreign_interference_tro
		text = SPR_avenge_foreign_interference
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_a_red_iberia_tro focus = SPR_support_french_communists_tro }

		icon = GFX_focus_attack_germany
		x = 1
		y = 1
		relative_position_id = SPR_support_french_communists_tro
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPR_avenge_foreign_interference_tt
			every_other_country = {
				limit = {
					has_country_flag = SPR_sent_volunteers_to_SPA_flag
				}
				ROOT = {
					create_wargoal = {
					    type = annex_everything
					    target = PREV
					    expire = 0
					}
				}
			}
		}
	}
	
	
	### DEMOCRATS ###
	
	focus = {
		id = SPR_victory_socialists
		icon = GFX_z_goal_generic_social_democracy
		prerequisite = { focus = SPR_elections_third_cortes_republic }
		mutually_exclusive = { focus = SPR_anarchists_victory focus = SPR_independent_communists }
		x = -6
		y = 1
		relative_position_id = SPR_save_state_emergency
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_victory_socialists"
			add_war_support = 0.05
			add_ideas = partial_economic_mobilisation
			if = {
				limit = { NOT = { SPR_scw_in_progress = yes } }
				clr_country_flag = spain_block_legitimacy_flag
			}
			add_popularity = {
				ideology = democratic
				popularity = 0.25
			}
			set_politics = {
				ruling_party = democratic
				elections_allowed = yes
			}
			SPR_jose_giral_pereyra = {
				remove_country_leader_role = { ideology = social_liberalism }
			}
			add_country_leader_role = {
				character = SPR_francisco_largo_caballero
				country_leader = {
					desc = "POLITICS_LARGO_CABALLERO_DESC"
					ideology = socialism
					traits = {
						socialist_trait
						short_sighted_politician
						trade_union_leader
					}
					expire = "1965.1.1"
				}
				promote_leader = yes
			}
			hidden_effect = {
				set_cosmetic_tag = SPR_socialist
			}
			set_party_name = { ideology = democratic name = SPR_soc_part long_name = SPR_soc_part_long }
			custom_effect_tooltip = TUR_focus_autocomplete_tt
		}
	}
	
	focus = {
		id = SPR_government_of_victory
		icon = GFX_z_goal_generic_communists_soldiers2
		prerequisite = { focus = SPR_victory_socialists }
		x = -1
		y = 1
		relative_position_id = SPR_victory_socialists
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 15
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_government_of_victory"
			add_stability = 0.05
			add_war_support = 0.05
			add_political_power = 75
		}
	}
	
	focus = {
		id = SPR_working_front
		icon = GFX_z_focus_the_workers
		prerequisite = { focus = SPR_government_of_victory }
		x = 0
		y = 1
		relative_position_id = SPR_government_of_victory
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_working_front"
			add_war_support = 0.05
			add_timed_idea = { idea = SPR_working_front_idea_1 days = 730 }
		}
	}
	
	focus = {
		id = SPR_the_cradle_of_partisans
		icon = GFX_focus_prc_infiltration
		prerequisite = { focus = SPR_working_front }
		x = 1
		y = 1
		relative_position_id = SPR_working_front
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes
		
		historical_ai = {
			OR = {
				NOT = { controls_province = 3938 }
				surrender_progress > 0.4
			}
		}
		ai_will_do = {
			factor = 7.5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_the_cradle_of_partisans"
			add_ideas = SPR_the_cradle_of_partisans
		}
	}
	
	focus = {
		id = SPR_new_leadership
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_victory_socialists }

		icon = GFX_goal_generic_intelligence_exchange
		x = 1
		y = 1
		relative_position_id = SPR_victory_socialists
		cost = 5
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY}
		completion_reward = {
			add_stability = 0.05
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SPR_jesus_hernandez_tomas
			country_event = { id = NWspain.69 }
		}
	}
	
	
	focus = {
		id = SPR_nationalization_heavy_industry
		icon = GFX_z_goal_nationalization_heavy_industry
		prerequisite = { focus = SPR_new_leadership }
		x = 0
		y = 1
		relative_position_id = SPR_new_leadership
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_nationalization_heavy_industry"
			if = {
				limit = {
					NOT = {
						has_idea = war_economy
						has_idea = tot_economic_mobilisation
					}
				}
				add_ideas = war_economy
			}
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 3
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_the_future_of_the_republic
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_victory_socialists focus = SPR_save_state_emergency }

		icon = GFX_goal_support_democracy
		x = 3
		y = 1
		relative_position_id = SPR_victory_socialists
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			add_political_power = 200
			add_ideas = limited_exports
		}
	}
	
	focus = {
		id = SPR_petition_for_french_aid
		available = {
			NOT = { has_war_with = event_target:NW_france_scope }
			NOT = { has_global_flag = scw_over }
			event_target:NW_france_scope = {
				OR = {
					has_government = democratic
					has_government = communism
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_the_future_of_the_republic }

		icon = GFX_focus_chi_reach_out_to_france
		x = 0
		y = 1
		relative_position_id = SPR_the_future_of_the_republic
		cost = 5
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT}

		completion_reward = {
			effect_tooltip = {
				add_war_support = 0.15
				event_target:NW_france_scope = {
					add_timed_idea = { idea = SPR_equipment_shipments days = 730 }
					add_opinion_modifier = { target = ROOT modifier = SPA_spanish_civil_war_commitments }
				}
			}
			custom_effect_tooltip = SPR_petition_for_french_aid_tt
			event_target:NW_france_scope = { country_event = { id = lar_spain.64 hours = 6 random_hours = 6 } }
		}
	}
	
	
	
	
	
	
	focus = {
		id = SPR_ensure_loyalty
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_save_state_emergency }

		icon = GFX_goal_generic_political_pressure
		x = -2
		y = 1
		relative_position_id = SPR_save_state_emergency
		cost = 10
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY}

		completion_reward = {
			add_stability = 0.1
		}
	}
	
	focus = {
		id = SPR_enlist_the_carabineros
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_save_state_emergency }

		icon = GFX_goal_generic_military_sphere
		x = 0
		y = 1
		relative_position_id = SPR_save_state_emergency
		cost = 5
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPR_enlist_the_carabineros_tt
			custom_effect_tooltip = SPR_remove_after_civil_war_tt
			hidden_effect = {
				division_template = {
					name = "Carabineros"
					template_counter = 3
					priority = 1
					division_names_group = SPR_INF_01
					is_locked = yes
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_in_home_area = yes
					}
					create_unit = {
						division = "name = \"1. Carabineros\" division_template = \"Carabineros\" start_experience_factor = 0.1" 
						owner = ROOT
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_in_home_area = yes
					}
					create_unit = {
						division = "name = \"2. Carabineros\" division_template = \"Carabineros\" start_experience_factor = 0.1" 
						owner = ROOT
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_in_home_area = yes
					}
					create_unit = {
						division = "name = \"3. Carabineros\" division_template = \"Carabineros\" start_experience_factor = 0.1" 
						owner = ROOT
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_in_home_area = yes
					}
					create_unit = {
						division = "name = \"4. Carabineros\" division_template = \"Carabineros\" start_experience_factor = 0.1" 
						owner = ROOT
					}
				}
				random_owned_controlled_state = {
					limit = {
						is_in_home_area = yes
					}
					create_unit = {
						division = "name = \"5. Carabineros\" division_template = \"Carabineros\" start_experience_factor = 0.1" 
						owner = ROOT
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_the_popular_army
		available = {
			OR = {
				has_completed_focus = SPR_victory_socialists
				AND = {
					has_completed_focus = SPR_ensure_loyalty
					has_completed_focus = SPR_enlist_the_carabineros
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_victory_socialists focus = SPR_ensure_loyalty focus = SPR_enlist_the_carabineros }

		icon = GFX_z_goal_bet_on_militia
		x = 0
		y = 1
		relative_position_id = SPR_enlist_the_carabineros
		cost = 10
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes

		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_war_support = 0.05
			add_ideas = national_army
			remove_ideas = SPR_disbanded_army_1
			add_tech_bonus = {
				name = SPR_the_popular_army
				bonus = 1
				uses = 1
				category = infantry_weapons
			}
			add_doctrine_cost_reduction = {
				name = SPR_the_popular_army
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
		}
	}
	
	focus = {
		id = SPR_institute_of_commissars
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_the_popular_army }

		icon = GFX_z_goal_getting_rid_generals
		x = -2
		y = 2
		relative_position_id = SPR_the_popular_army
		cost = 5
		
		ai_will_do = {
			factor = 10
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = SPR_institute_of_commissars
		}
	}
	
	focus = {
		id = SPR_take_the_initiative
		available = {
			NOT = { has_global_flag = scw_over }
		}
		bypass = {
		}
		prerequisite = { focus = SPR_the_popular_army }

		icon = GFX_goal_generic_major_war
		x = 1
		y = 1
		relative_position_id = SPR_the_popular_army
		cost = 5
		
		historical_ai = {
			OR = {
				NOT = { controls_province = 3938 }
				surrender_progress > 0.4
			}
		}
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 2
			}
			add_timed_idea = { idea = SPR_anti_nationalist_offensive days = 365 }
			if = {
				limit = { has_war_with = ARA }
				add_timed_idea = { idea = SPR_anti_anarchist_offensive days = 365 }
			}
			if = {
				limit = { has_war_with = CAT }
				add_timed_idea = { idea = SPR_anti_catalon_offensive days = 365 }
			}
			if = {
				limit = { has_war_with = SPB }
				add_timed_idea = { idea = SPR_anti_carlist_offensive days = 365 }
			}
		}
	}
	
	focus = {
		id = SPR_no_pasaran
		available = {
			SPR_scw_in_progress = yes
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_the_popular_army }

		icon = GFX_focus_spr_no_pasaran
		x = -1
		y = 1
		relative_position_id = SPR_the_popular_army
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = extensive_conscription
			custom_effect_tooltip = SPR_no_pasaran_tt
			hidden_effect = {
				every_controlled_state = {
					add_building_construction = {
						type = bunker
						province = {
							all_provinces = yes
							limit_to_victory_point = yes
						}
						level = 1
						instant_build = yes
					}
				}
				every_controlled_state = {
					add_building_construction = {
						type = bunker
						province = {
							all_provinces = yes
							limit_to_victory_point > 2
						}
						level = 1
						instant_build = yes
					}
				}
				every_controlled_state = {
					add_building_construction = {
						type = bunker
						province = {
							all_provinces = yes
							limit_to_victory_point > 9
						}
						level = 1
						instant_build = yes
					}
				}
				every_controlled_state = {
					add_building_construction = {
						type = bunker
						province = {
							all_provinces = yes
							limit_to_victory_point > 29
						}
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_a_frontline_suited_for_intellectuals
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_no_pasaran }

		icon = GFX_focus_research
		x = 1
		y = 1
		relative_position_id = SPR_no_pasaran
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_research_slot = 1
		}
	}
	
	focus = {
		id = SPR_abolition_autonomy
		icon = GFX_goal_demand_sudetenland
		prerequisite = { focus = SPR_save_state_emergency }
		mutually_exclusive = { focus = SPR_reaffirm_the_popular_front_strategy }
		x = 2
		y = 1
		relative_position_id = SPR_save_state_emergency
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
			NOT = {
				any_of_scopes = {
					array = global.is_literally_spain
					tooltip = is_literally_spain_tt
					hidden_trigger = { is_literally_spain = yes }
					NOT = { tag = ROOT }
					NOT = { has_war_with = ROOT }
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_abolition_autonomy"
			add_stability = 0.05
			every_other_country = {
				limit = {
					is_literally_spain = yes
					NOT = { has_war_with = ROOT }
					NOT = {
						has_government = anarchism
						has_government = trozkism
					}
				}
				hidden_effect = {
					set_rule = { can_join_factions = no }
				}
				if = {
					limit = { is_subject_of = ROOT }
					ROOT = { end_puppet = PREV }
				}
				if = {
					limit = { is_in_faction_with = ROOT }
					leave_faction = yes
				}
				ROOT = {
					create_wargoal = {
						type = annex_everything
						target = PREV
						expire = 0
					}
				}
			}
			if = {
				limit = { has_idea = SPR_desire_for_decentralization }
				remove_ideas = SPR_desire_for_decentralization
			}
		}
	}
	
	focus = {
		id = SPR_reaffirm_the_popular_front_strategy
		available = {
			#NOT = { has_completed_focus = SPR_stand_junta }
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_save_state_emergency focus = SPR_an_army_of_all_classes }
		mutually_exclusive = { focus = SPR_abolition_autonomy }
		
		icon = GFX_goal_generic_propaganda
		x = 4
		y = 1
		relative_position_id = SPR_save_state_emergency
		cost = 5
		
		ai_will_do = {
			factor = 20
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL}
		completion_reward = {
			add_war_support = 0.05
			add_timed_idea = { idea = SPR_popular_front_1 days = 730 }
		}
	}
	
	focus = {
		id = SPR_crush_the_revolution
		available = {
		}
		bypass = {
			OR = {
				has_global_flag = SPR_anarchist_uprising_flag
				has_global_flag = scw_over
				any_enemy_country = {
					is_literally_spain = yes
					OR = {
						has_government = anarchism
						has_government = trozkism
					}
				}
			}
		}
		prerequisite = { focus = SPR_abolition_autonomy focus = SPR_reaffirm_the_popular_front_strategy }
		
		icon = GFX_focus_spr_crush_the_revolution
		x = 1
		y = 1
		relative_position_id = SPR_abolition_autonomy
		cost = 5
		
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_crush_the_revolution"
			custom_effect_tooltip = remove_political_advisor
			show_ideas_tooltip = SPR_jesus_hernandez_tomas
			add_timed_idea = { idea = SPR_crush_the_revolution days = 60 }
			#if = {
			#	limit = { NOT = { has_completed_focus = SPR_stand_junta } }
				swap_ideas = {
					remove_idea = SPR_popular_front_1
					add_idea = SPR_popular_front_2
				}
			#}
			if = {
				limit = { has_idea = SPR_an_army_of_all_classes_1 }
				swap_ideas = {
					remove_idea = SPR_an_army_of_all_classes_1
					add_idea = SPR_an_army_of_all_classes_2a
				}
			}
			else_if = {
				limit = { has_idea = SPR_an_army_of_all_classes_2b }
				swap_ideas = {
					remove_idea = SPR_an_army_of_all_classes_2b
					add_idea = SPR_an_army_of_all_classes_3
				}
			}
			add_popularity = {
				ideology = anarchism
				popularity = -0.05
			}
			every_other_country = {
				limit = {
					is_literally_spain = yes
					NOT = { has_war_with = ROOT }
					OR = {
						has_government = anarchism
						has_government = trozkism
					}
					if = {
						limit = {
							tag = ARA
							has_government = anarchism
						}
						NOT = { tag = ARA }
					}
				}
				if = {
					limit = { is_in_faction_with = ROOT }
					leave_faction = yes
				}
				ROOT = {
					create_wargoal = {
						type = annex_everything
						target = PREV
						expire = 0
					}
				}
			}
			if = {
				limit = {
					country_exists = ARA
					ARA = { has_government = anarchism }
				}
				country_event = { id = NWspain.17 }
			}
		}
	}
	
	focus = {
		id = SPR_relocate_the_gold_reserves
		available = {
			OR = {
				has_completed_focus = SPR_victory_socialists
				has_completed_focus = SPR_save_state_emergency
				has_completed_focus = SPR_transformation_people_republic
			}
		}
		bypass = {
			hidden_trigger = {
				OR = {
					has_completed_focus = SPR_victory_socialists
					has_completed_focus = SPR_save_state_emergency
					has_completed_focus = SPR_transformation_people_republic
				}
			}
			OR = {
				has_global_flag = scw_over
				has_global_flag = SPR_gold_reserves_flag
			}
		}
		#prerequisite = { focus = SPR_victory_socialists focus = SPR_save_state_emergency focus = SPR_transfer_power_KPI }
		
		icon = GFX_focus_usa_reestablish_the_gold_standard
		x = 1
		y = 1
		relative_position_id = SPR_reaffirm_the_popular_front_strategy
		cost = 5
		
		ai_will_do = {
			factor = 10
		}
		
		allow_branch = {
			NOT = {
				has_completed_focus = SPR_victory_liberal_party
				has_completed_focus = SPR_victory_national_block
			}
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_stability = -0.05
			add_ideas = SPR_relocate_the_gold_reserves
			custom_effect_tooltip = SPR_relocate_the_gold_reserves_tt
			country_event = lar_spain.51
			set_global_flag = SPR_gold_reserves_flag
		}
	}
	
	focus = {
		id = SPR_strengthen_the_euzko_gudarostea
		available = {
			has_full_control_of_state = 792
			NOT = { has_global_flag = scw_over }
		}
		bypass = {
		}
		prerequisite = { focus = SPR_relocate_the_gold_reserves }
		
		icon = GFX_goal_generic_allies_build_infantry
		x = 1
		y = 1
		relative_position_id = SPR_relocate_the_gold_reserves
		cost = 5
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {}
		completion_reward = {
			custom_effect_tooltip = SPR_strengthen_the_euzko_gudarostea_tt
			hidden_effect = {
				division_template = {
					name = "Euzko Gudarosteko Eskuadroia"
					priority = 1
					division_names_group = SPD_INF_05
					regiments = {
						infantry = { x = 0 y = 0 }
						infantry = { x = 0 y = 1 }
						infantry = { x = 0 y = 2 }
					}
				}
				# Basque
				792 = {
					create_unit = {
						division = "division_template = \"Euzko Gudarosteko Eskuadroia\" start_experience_factor = 0.1" 
						owner = ROOT
					}
					create_unit = {
						division = "division_template = \"Euzko Gudarosteko Eskuadroia\" start_experience_factor = 0.1" 
						owner = ROOT
					}
					create_unit = {
						division = "division_template = \"Euzko Gudarosteko Eskuadroia\" start_experience_factor = 0.1" 
						owner = ROOT
					}
					create_unit = {
						division = "division_template = \"Euzko Gudarosteko Eskuadroia\" start_experience_factor = 0.1" 
						owner = ROOT
					}
					create_unit = {
						division = "division_template = \"Euzko Gudarosteko Eskuadroia\" start_experience_factor = 0.1" 
						owner = ROOT
					}
					create_unit = {
						division = "division_template = \"Euzko Gudarosteko Eskuadroia\" start_experience_factor = 0.1" 
						owner = ROOT
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_fortify_the_iron_ring
		available = {
			has_full_control_of_state = 792
			NOT = { has_global_flag = scw_over }
		}
		bypass = {
		}
		prerequisite = { focus = SPR_strengthen_the_euzko_gudarostea }
		
		icon = GFX_goal_generic_fortify_city
		x = 0
		y = 1
		relative_position_id = SPR_strengthen_the_euzko_gudarostea
		cost = 5
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			add_timed_idea = { idea = SPR_fortify_the_iron_ring days = 730 }
			792 = {
				add_building_construction = {
					type = bunker
					province = {
						id = 740
					}
					level = 3
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_expand_soviet_aid
		available = {
			NOT = { has_global_flag = scw_over }
			OR = {
				AND = {
					SOV = {
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
					has_volunteers_amount_from = {
						tag = SOV
						count > 0
					}
				}
				AND = {
					GRF = {
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
					has_volunteers_amount_from = {
						tag = GRF
						count > 0
					}
				}
			}
			#NOT = { has_completed_focus = SPR_stand_junta }
		}
		bypass = {
			AND = {
				has_completed_focus = SPR_transformation_people_republic
				has_global_flag = scw_over
			}
		}
		prerequisite = { focus = SPR_relocate_the_gold_reserves }
		prerequisite = { focus = SPR_crush_the_revolution }
		
		icon = GFX_goal_support_communism
		x = 1
		y = 2
		relative_position_id = SPR_crush_the_revolution
		cost = 5

		ai_will_do = {
			base = 1
			modifier = {
				factor = 3
				is_historical_focus_on = no
				SOV = {
					is_ai = no
				}
			}
			modifier = {
				factor = 3
				is_historical_focus_on = no
				GRF = {
					is_ai = no
				}
			}
			modifier = {
				factor = 3
				surrender_progress > 0.4
				is_historical_focus_on = no
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				SOV = {
					is_ai = yes
				}
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				GRF = {
					is_ai = yes
				}
			}
			modifier = {
				factor = 0
				surrender_progress < 0.4
			}
		}

		available_if_capitulated = yes

		completion_reward = {
			add_popularity = {
			    ideology = communism
			    popularity = 0.05
			}
			if = {
				limit = {
					OR = {
						AND = {
							SOV = {
								exists = yes
								has_government = communism
								has_civil_war = no
								NOT = { has_war_with = ROOT }
							}
							has_volunteers_amount_from = {
								tag = SOV
								count > 0
							}
						}
						AND = {
							GRF = {
								exists = yes
								has_government = communism
								has_civil_war = no
								NOT = { has_war_with = ROOT }
							}
							has_volunteers_amount_from = {
								tag = GRF
								count > 0
							}
						}
					}
				}
				every_other_country = {
					limit = {
						OR = {
							original_tag = SOV
							original_tag = GER
						}
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
						ROOT = {
							has_volunteers_amount_from = {
								tag = PREV
								count > 0
							}
						}
					}
					add_timed_idea = { idea = SPA_spanish_civil_war_commitments days = 730 }
					add_opinion_modifier = { target = ROOT modifier = SPA_spanish_civil_war_commitments }
				}
			}
			else = {
				effect_tooltip = {
					SOV = {
						add_timed_idea = { idea = SPA_spanish_civil_war_commitments days = 730 }
						add_opinion_modifier = { target = ROOT modifier = SPA_spanish_civil_war_commitments }
					}
					GRF = {
						add_timed_idea = { idea = SPA_spanish_civil_war_commitments days = 730 }
						add_opinion_modifier = { target = ROOT modifier = SPA_spanish_civil_war_commitments }
					}
				}
			}
			custom_effect_tooltip = SPR_expand_soviet_aid_tt
		}
	}

	focus = {
		id = SPR_soviet_equipment_shipments
		available = {
			OR = {
				AND = {
					SOV = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
				AND = {
					GRF = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
			}
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_expand_soviet_aid }

		icon = GFX_z_goal_sov_ammunitions4
		x = -1
		y = 1
		relative_position_id = SPR_expand_soviet_aid
		cost = 5

		available_if_capitulated = yes

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_popularity = {
			    ideology = communism
			    popularity = 0.05
			}
			every_other_country = {
				limit = {
					OR = {
						original_tag = SOV
						original_tag = GER
					}
					has_government = communism
					has_civil_war = no
					NOT = { has_war_with = ROOT }
				}
				add_timed_idea = { idea = SPR_equipment_shipments days = 730 }
				add_ai_strategy = { type = send_lend_lease_desire id = SPR value = 200 }
			}
			add_timed_idea = { idea = SPR_equipment_shipments_spain days = 730 }
			if = {
				limit = {
					SOV = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
						}
						is_core_of = ROOT
					}
					set_state_flag = SPR_soviet_equipment_shipments_1mil
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
						}
						is_core_of = ROOT
						NOT = { has_state_flag = SPR_soviet_equipment_shipments_1mil }
					}
					set_state_flag = SPR_soviet_equipment_shipments_1mil
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
						}
						is_core_of = ROOT
						NOT = { has_state_flag = SPR_soviet_equipment_shipments_1mil }
					}
					set_state_flag = SPR_soviet_equipment_shipments_1mil
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					GRF = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
						}
						is_core_of = ROOT
					}
					set_state_flag = SPR_soviet_equipment_shipments_1mil
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
						}
						is_core_of = ROOT
						NOT = { has_state_flag = SPR_soviet_equipment_shipments_1mil }
					}
					set_state_flag = SPR_soviet_equipment_shipments_1mil
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = arms_factory
							size > 0
						}
						is_core_of = ROOT
						NOT = { has_state_flag = SPR_soviet_equipment_shipments_1mil }
					}
					set_state_flag = SPR_soviet_equipment_shipments_1mil
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SPR_soviet_military_advisors
		available = {
			OR = {
				AND = {
					SOV = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
				AND = {
					GRF = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
			}
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_expand_soviet_aid }

		icon = GFX_z_goal_socialist_stratocracy
		x = 1
		y = 1
		relative_position_id = SPR_expand_soviet_aid
		cost = 5

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			army_experience = 25
			add_war_support = 0.1
			add_ideas = SPR_soviet_military_advisors
			custom_effect_tooltip = SPR_seize_public_transport_tt
		}
	}
	
	focus = {
		id = SPR_soviet_technological_advancements
		available = {
			OR = {
				AND = {
					SOV = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
				AND = {
					GRF = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
			}
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_soviet_equipment_shipments focus = SPR_soviet_military_advisors }

		icon = GFX_focus_generic_socialist_science
		x = 0
		y = 1
		relative_position_id = SPR_soviet_equipment_shipments
		cost = 5

		available_if_capitulated = yes

		completion_reward = {
			add_popularity = {
			    ideology = communism
			    popularity = 0.05
			}
			add_to_tech_sharing_group = spr_research
			every_other_country = {
				limit = {
					OR = {
						original_tag = SOV
						original_tag = GER
					}
					has_government = communism
					has_civil_war = no
					NOT = { has_war_with = ROOT }
				}
				add_to_tech_sharing_group = spr_research
			}
			if = {
				limit = {
					SOV = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
				add_tech_bonus = {
					name = SPR_soviet_technological_advancements
					bonus = 1
					uses = 1
					category = infantry_weapons
				}
				add_tech_bonus = {
					name = SPR_soviet_technological_advancements
					bonus = 1
					uses = 1
					category = artillery
				}
			}
			if = {
				limit = {
					GRF = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
				add_doctrine_cost_reduction = {
					name = SPR_soviet_technological_advancements
					cost_reduction = 0.5
					uses = 1
					category = land_doctrine
				}
				add_tech_bonus = {
					name = SPR_soviet_technological_advancements
					bonus = 1
					uses = 1
					category = armor
				}
			}
		}
	}

	focus = {
		id = SPR_soviet_industrial_aid
		available = {
			OR = {
				AND = {
					SOV = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
				AND = {
					GRF = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
			}
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_soviet_equipment_shipments focus = SPR_soviet_military_advisors }

		icon = GFX_z_goal_communist_factories
		x = 0
		y = 1
		relative_position_id = SPR_soviet_military_advisors
		cost = 5

		available_if_capitulated = yes

		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_tech_bonus = {
				name = SPR_soviet_industrial_aid
				bonus = 1.0
				uses = 1
				category = industry
			}
			add_timed_idea = { idea = SPR_soviet_industrial_aid days = 730 }
			if = {
				limit = {
					SOV = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
						}
						is_core_of = ROOT
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					GRF = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
						}
						is_core_of = ROOT
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SPR_soviet_recovery_aid
		available = {
			has_global_flag = scw_over
			OR = {
				AND = {
					SOV = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
				AND = {
					GRF = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_soviet_industrial_aid }
		prerequisite = { focus = SPR_soviet_technological_advancements }

		icon = GFX_goal_generic_soviet_construction
		x = 1
		y = 1
		relative_position_id = SPR_soviet_technological_advancements
		cost = 10

		available_if_capitulated = yes

		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_timed_idea = { idea = SPR_soviet_recovery_aid days = 1095 }
			if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_3
				}
				remove_ideas = SPA_recovering_from_civil_war_3
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_2
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war_2
					add_idea = SPA_recovering_from_civil_war_3
				}
			}
			else = {
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war
					add_idea = SPA_recovering_from_civil_war_2
				}
			}
			if = {
				limit = {
					SOV = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
						}
						is_core_of = ROOT
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
			if = {
				limit = {
					GRF = {
						exists = yes
						has_government = communism
						has_civil_war = no
						NOT = { has_war_with = ROOT }
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = industrial_complex
							size > 1
						}
						is_core_of = ROOT
					}
					add_extra_state_shared_building_slots = 2
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_strengthen_the_anti_fascist_coalition
		available = {
			OR = {
				AND = {
					has_completed_focus = SPR_no_pasaran
					has_completed_focus = SPR_working_front
				}
				AND = {
					has_completed_focus = SPR_no_pasaran
					has_completed_focus = SPR_crush_the_revolution
				}
			}
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPR_no_pasaran focus = SPR_crush_the_revolution }

		icon = GFX_goal_generic_national_unity
		x = 3
		y = 1
		relative_position_id = SPR_no_pasaran
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			add_stability = 0.05
			add_war_support = 0.1
			if = {
				limit = { has_completed_focus = SPR_working_front }
				swap_ideas = {
					remove_idea = SPR_working_front_idea_1
					add_idea = SPR_working_front_idea_2
				}
			}
		}
	}
	
	focus = {
		id = SPR_oppose_the_communists
		available = {
			OR = {
				has_country_leader = { character = SPR_manuel_azana ruling_only = yes }
				has_country_leader = { name = "Segismundo Casado" ruling_only = yes }
				has_country_leader = { character = SPR_indalecio_prieto ruling_only = yes }
				has_country_leader = { character = SPR_francisco_largo_caballero ruling_only = yes }
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_strengthen_the_anti_fascist_coalition }
		mutually_exclusive = { focus = SPR_end_fascism_at_all_costs }

		icon = GFX_z_goal_broken_red_star
		x = -1
		y = 1
		relative_position_id = SPR_strengthen_the_anti_fascist_coalition
		cost = 10
		
		ai_will_do = {
			factor = 50
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}
		completion_reward = {
			add_popularity = {
			    ideology = communism
			    popularity = -0.1
			}
			if = {
				limit = { has_completed_focus = SPR_reaffirm_the_popular_front_strategy }
				remove_ideas = SPR_popular_front_2
			}
			if = {
				limit = { has_completed_focus = SPR_working_front }
				swap_ideas = {
					remove_idea = SPR_working_front_idea_2
					add_idea = SPR_working_front_idea_3a
				}
			}
			add_timed_idea = { idea = SPR_oppose_the_communists days = 730 }
			if = {
				limit = { has_country_leader_with_trait = figurehead_president }
				remove_country_leader_trait = figurehead_president
			}
			add_country_leader_trait = great_survivor
			custom_effect_tooltip = remove_political_advisor
			show_ideas_tooltip = SPR_alexander_orlov
		}
	}
	
	focus = {
		id = SPR_fortify_the_central_government
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_oppose_the_communists }

		icon = GFX_z_goal_generic_state1
		x = 0
		y = 1
		relative_position_id = SPR_oppose_the_communists
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL}
		completion_reward = {
			add_stability = 0.1
			add_political_power = 120
		}
	}
	
	focus = {
		id = SPR_secure_democratic_principles
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_fortify_the_central_government }

		icon = GFX_z_goal_generic_bastion_of_democracy
		x = 1
		y = 1
		relative_position_id = SPR_fortify_the_central_government
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		search_filters = {FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL}

		completion_reward = {
			add_stability = 0.1
			add_popularity = {
				ideology = democratic
				popularity = 0.1
			}
		}
	}
	
	focus = {
		id = SPR_subvert_soviet_control
		available = {
			has_global_flag = scw_over
		}
		bypass = {
		}
		prerequisite = { focus = SPR_soviet_recovery_aid }
		prerequisite = { focus = SPR_secure_democratic_principles }

		icon = GFX_z_goal_broken_red_star
		x = -1
		y = 1
		relative_position_id = SPR_secure_democratic_principles
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			SOV = { add_opinion_modifier = { target = ROOT modifier = SPR_subvert_soviet_control } }
			remove_ideas = SPR_soviet_military_advisors
			remove_ideas = SPR_soviet_industrial_aid
			remove_ideas = SPR_soviet_recovery_aid
			remove_ideas = SPR_provide_for_the_people
			remove_ideas = SPR_the_five_year_plan
			add_timed_idea = { idea = SPR_subvert_soviet_control days = 1095 }
			custom_effect_tooltip = SPR_subvert_soviet_control_tt
		}
	}
	
	focus = {
		id = SPR_war_of_independence
		available = {
		}
		bypass = {
			is_subject = no
		}
		will_lead_to_war_with = SOV
		prerequisite = { focus = SPR_subvert_soviet_control }

		icon = GFX_focus_spr_war_of_independence
		x = 0
		y = 1
		relative_position_id = SPR_subvert_soviet_control
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}

		completion_reward = {
			if = {
				limit = {
					NOT = {
						has_government = democratic
					}
				}
				set_politics = {
					ruling_party = democratic
				}
			}
			add_popularity = {
			    ideology = democratic
			    popularity = 0.1
			}
			effect_tooltip = {
				SOV = {
					end_puppet = ROOT
					remove_from_faction = ROOT
				}
			}
			SOV = {
				country_event = lar_spain.67
			}
			custom_effect_tooltip = SPR_war_of_independence_tt
		}
	}
	
	focus = {
		id = SPR_enemies_of_our_enemy
		available = {
			NOT = {
				has_war_with = GER
				has_war_with = ITA
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_war_of_independence }
		mutually_exclusive = { focus = SPR_those_who_would_not_help_us focus = SPR_socialist_international }

		icon = GFX_goal_generic_dangerous_deal
		x = -1
		y = 1
		relative_position_id = SPR_war_of_independence
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			effect_tooltip = {
				every_other_country = {
					limit = {
						OR = {
							tag = GER
							tag = ITA
						}
						exists = yes
						has_capitulated = no
					}
					diplomatic_relation = {
					    country = ROOT
					    relation = non_aggression_pact
					    active = yes
					}
				}
			}
			custom_effect_tooltip = SPR_those_who_would_not_help_us_tt
			every_other_country = {
					limit = {
					OR = {
						tag = GER
						tag = ITA
					}
					exists = yes
					has_capitulated = no
				}
				country_event = { id = lar_spain.71 hours = 6 random_hours = 6 }
			}
		}
	}
	
	focus = {
		id = SPR_deal_with_the_devil
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_enemies_of_our_enemy }

		icon = GFX_focus_chi_mission_to_germany
		x = -1
		y = 1
		relative_position_id = SPR_enemies_of_our_enemy
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			effect_tooltip = {
				add_timed_idea = { idea = SPR_deal_with_the_devil days = 730 }
			}
			custom_effect_tooltip = SPR_deal_with_the_devil_tt
			GER = { country_event = { id = lar_spain.74 hours = 6 random_hours = 6 } }
		}
	}
	
	focus = {
		id = SPR_foreign_industrial_aid
		available = {
			OR = {
				ENG = {
					has_idea = SPR_equipment_shipments
				}
				USA = {
					has_idea = SPR_equipment_shipments
				}
				event_target:NW_france_scope = {
					has_idea = SPR_equipment_shipments
				}
				AND = {
					has_completed_focus = SPR_enemies_of_our_enemy
					OR = {
						has_non_aggression_pact_with = GER
						has_non_aggression_pact_with = ITA
					}
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_those_who_would_not_help_us focus = SPR_enemies_of_our_enemy }

		icon = GFX_focus_generic_industry_2
		x = 1
		y = 1
		relative_position_id = SPR_enemies_of_our_enemy
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_foreign_industrial_aid_2civ }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			every_state = {
				limit = { has_state_flag = SPR_foreign_industrial_aid_2mil }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_3
				}
				remove_ideas = SPA_recovering_from_civil_war_3
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_2
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war_2
					add_idea = SPA_recovering_from_civil_war_3
				}
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war
					add_idea = SPA_recovering_from_civil_war_2
				}
			}
			else_if = {
				limit = {
					NOT = { has_global_flag = scw_over }
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_recovering_from_civil_war
						add_idea = SPA_recovering_from_civil_war_2
					}
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPR_foreign_industrial_aid_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_foreign_industrial_aid_2civ }
				}
				set_state_flag = SPR_foreign_industrial_aid_2mil
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_those_who_would_not_help_us
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_war_of_independence }
		mutually_exclusive = { focus = SPR_enemies_of_our_enemy }

		icon = GFX_z_goal_democratic_war
		x = 1
		y = 1
		relative_position_id = SPR_war_of_independence
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			effect_tooltip = {
				every_other_country = {
					limit = {
						OR = {
							tag = ENG
							tag = USA
							tag = event_target:NW_france_scope
						}
						exists = yes
						has_capitulated = no
					}
					add_timed_idea = { idea = SPR_equipment_shipments days = 730 }
				}
			}
			custom_effect_tooltip = SPR_those_who_would_not_help_us_tt
			every_other_country = {
					limit = {
					OR = {
						tag = ENG
						tag = USA
						tag = event_target:NW_france_scope
					}
					exists = yes
					has_capitulated = no
				}
				country_event = { id = lar_spain.68 hours = 6 random_hours = 6 }
			}
		}
	}
	
	focus = {
		id = SPR_ideological_allies
		available = {
			if = {
				limit = { has_completed_focus = SPR_socialist_international }
				any_of_scopes = {
					array = global.is_democratic
					NOT = { tag = ROOT }
					is_in_faction = no
				}
				is_faction_leader = yes
			}
			else = {
				any_of_scopes = {
					array = global.is_democratic
					NOT = { tag = ROOT }
					is_faction_leader = yes
				}
				is_in_faction = no
			}
			NOT = { has_global_flag = POR_iberian_summit_in_progress_flag }
		}
		bypass = {
		}
		prerequisite = { focus = SPR_those_who_would_not_help_us }

		ai_will_do = {
			factor = 1
		}

		icon = GFX_z_goal_democratic_side
		x = 1
		y = 1
		relative_position_id = SPR_those_who_would_not_help_us
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			if = {
				limit = { has_completed_focus = SPR_socialist_international }
				every_other_country = {
					limit = {
						is_in_faction = no
						OR = {
							has_government = communism
							has_government = democratic
							has_government = trozkism
						}
					}
				}
			}
			else = {
				if = {
					limit = {
						ENG = {
							has_government = democratic
							is_faction_leader = yes
							NOT = { has_war_with = ROOT }
						}
					}
					ENG = {
						country_event = generic.2
					}
				}
				else_if = {
					limit = {
						USA = {
							has_government = democratic
							is_faction_leader = yes
							NOT = { has_war_with = ROOT }
						}
					}
					USA = {
						country_event = generic.2
					}
				}
				else_if = {
					limit = {
						FRA = {
							has_government = democratic
							is_faction_leader = yes
							NOT = { has_war_with = ROOT }
						}
					}
					FRA = {
						country_event = generic.2
					}
				}
				else_if = {
					limit = {
						any_of_scopes = {
							array = global.majors
							has_government = democratic
							is_faction_leader = yes
							NOT = { has_war_with = ROOT }
						}
					}
					random_country = {
						limit = {
							has_government = democratic
							is_faction_leader = yes
							NOT = { has_war_with = ROOT }
							is_major = yes
						}
						country_event = generic.2
					}
				}
				else = {
					random_country = {
						limit = {
							has_government = democratic
							is_faction_leader = yes
							NOT = { has_war_with = ROOT }
						}
						country_event = generic.2
					}
				}
			}
		}
	}

	focus = {
		id = SPR_stabilize_the_nation
		available = {
			has_global_flag = scw_over
		}
		bypass = {
		}
		prerequisite = { focus = SPR_fortify_the_central_government focus = SPR_communists_in_the_government }

		icon = GFX_z_goal_brutality_is_bringing_people_together
		x = -1
		y = 1
		relative_position_id = SPR_fortify_the_central_government
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY}
		completion_reward = {
			add_stability = 0.2
		}
	}

	focus = {
		id = SPR_end_fascism_at_all_costs
		available = {
			NOT = { has_country_leader = { character = SPR_indalecio_prieto ruling_only = yes } }
		}
		bypass = {
		}
		prerequisite = { focus = SPR_strengthen_the_anti_fascist_coalition }
		mutually_exclusive = { focus = SPR_oppose_the_communists }

		icon = GFX_z_goal_fascist_coup_lost
		x = -3
		y = 1
		relative_position_id = SPR_strengthen_the_anti_fascist_coalition
		cost = 10
		
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_completed_focus = SPR_save_state_emergency
			}
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			if = {
				limit = { has_completed_focus = SPR_working_front }
				swap_ideas = {
					remove_idea = SPR_working_front_idea_2
					add_idea = SPR_working_front_idea_3b
				}
			}
			else = {
				swap_ideas = {
					remove_idea = SPR_popular_front_2
					add_idea = SPR_popular_front_3
				}
			}
		}
	}

	focus = {
		id = SPR_communists_in_the_government
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_end_fascism_at_all_costs }

		icon = GFX_focus_generic_soviet_politics
		x = 0
		y = 1
		relative_position_id = SPR_end_fascism_at_all_costs
		cost = 10
		
		ai_will_do = {
			factor = 5
			modifier = {
				factor = 30
				has_country_leader = { character = SPR_francisco_largo_caballero ruling_only = yes }
			}
		}

		available_if_capitulated = yes

		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			if = {
				limit = { has_completed_focus = SPR_victory_socialists }
				add_country_leader_role = {
					character = SPR_juan_negrin
					country_leader = {
						desc = "POLITICS_JUAN_NEGRIN_DESC"
						ideology = right_wing_communism
						traits = {
							gran_carabinero
						}
						expire = "1965.1.1"
					}
					promote_leader = yes
				}
			}
			set_temp_variable = {
				var = temp1
				value = party_popularity@democratic
			}
			multiply_temp_variable = { temp1 = -0.5 }
			add_popularity = {
				ideology = democratic
				popularity = temp1
			}
			multiply_temp_variable = { temp1 = -1 }
			add_popularity = {
				ideology = communism
				popularity = temp1
			}
			set_politics = {
				ruling_party = communism
			}
			set_party_name = { ideology = communism name = SPR_soc_part long_name = SPR_soc_part_long }
			if = {
				limit = { has_completed_focus = SPR_working_front }
				swap_ideas = {
					remove_idea = SPR_working_front_idea_3b
					add_idea = SPR_working_front_idea_4
				}
			}
			else = {
				swap_ideas = {
					remove_idea = SPR_popular_front_3
					add_idea = SPR_popular_front_4
				}
			}
			unlock_national_focus = SPR_red_bulwark_in_the_west
			unlock_national_focus = SPR_soviet_recovery_aid
			custom_effect_tooltip = SPR_communists_in_the_government_tt
			# Stalinist
			# SPR_ignacio_hidalgo_de_cisneros
			# SPR_etelvino_vega
			# SPR_francisco_ciutat_de_miguel
			# SPR_dolores_ibarruri
			####
			# Democratic
			# SPR_domenec_batet
			# SPR_toribio_martinez_cabrera
			# SPR_antonio_azarola_y_gresillon
			# SPR_luis_gonzalez_ubieta
			# SPR_indalegio_prieto
			# SPR_nicolas_molero
			# SPR_juan_negrin
			# SPR_francisco_largo_caballero
			# SPR_augusto_barcia_trelles
			# SPR_diego_martinez_barrio
			
			if = {
				limit = {
					TUR = {
						has_completed_focus = TUR_ideological_war
					}
				}
				TUR = { add_opinion_modifier = { target = ROOT modifier = TUR_traitors_of_the_revolution } }
				add_opinion_modifier = { target = TUR modifier = TUR_traitors_of_the_revolution }
				if = {
					limit = {
						is_in_faction_with = TUR
						TUR = { is_faction_leader = yes }
					}
					leave_faction = yes
					add_ai_strategy = {
						type = alliance
						id = TUR
						value = -600
					}
					add_ai_strategy = {
						type = befriend
						id = TUR
						value = -200
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_repression_against_trotskyists_2
		text = SPR_repression_against_trotskyists
		icon = GFX_z_goal_orange_menace
		prerequisite = {
			focus = SPR_communists_in_the_government
			focus = SPR_fortify_the_central_government
		}
		x = -3
		y = 1
		relative_position_id = SPR_communists_in_the_government
		
		cost = 5
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_repression_against_trotskyists_2"
			add_popularity = {
				ideology = trozkism
				popularity = -0.15
			}
			kill_ideology_leader = trozkism
			create_country_leader = {
				name = "Julián Gorkin"
				desc = "POLITICS_JULIAN_GORKIN_DESC"
				picture = "GFX_portrait_SPR_julian_gorkin"
				expire = "1965.1.1"
				ideology = marxism1
				traits = {
				}
			}
		}
	}

	focus = {
		id = SPR_restore_higher_education
		available = {
			num_of_factories > 50
			has_global_flag = scw_over
		}
		bypass = {
		}
		prerequisite = { focus = SPR_fortify_the_central_government focus = SPR_communists_in_the_government }

		icon = GFX_z_goal_great_science
		x = -3
		y = 1
		relative_position_id = SPR_fortify_the_central_government
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = SPR_engineering_advances
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_stabilize_the_nation focus = SPR_restore_higher_education }

		icon = GFX_goal_generic_production
		x = -1
		y = 1
		relative_position_id = SPR_stabilize_the_nation
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}

		completion_reward = {
			if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_3
				}
				remove_ideas = SPA_recovering_from_civil_war_3
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_2
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war_2
					add_idea = SPA_recovering_from_civil_war_3
				}
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war
					add_idea = SPA_recovering_from_civil_war_2
				}
			}
			else_if = {
				limit = {
					NOT = { has_global_flag = scw_over }
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_recovering_from_civil_war
						add_idea = SPA_recovering_from_civil_war_2
					}
				}
			}
			add_tech_bonus = {
				name = SPR_engineering_advances
				bonus = 1
				uses = 1
				category = industry
			}
			add_tech_bonus = {
				name = SPR_engineering_advances
				bonus = 1
				uses = 1
				category = light_fighter
			}
			add_tech_bonus = {
				name = SPR_engineering_advances
				bonus = 1
				uses = 1
				category = armor
			}
		}
	}

	focus = {
		id = SPR_rebuild_the_nation
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_engineering_advances }

		icon = GFX_goal_generic_construct_civ_factory
		x = 0
		y = 1
		relative_position_id = SPR_engineering_advances
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_rebuild_the_nation_2civ }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPR_rebuild_the_nation_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_rebuild_the_nation_2civ }
				}
				set_state_flag = SPR_rebuild_the_nation_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPR_reprofessionalize_the_military
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_strengthen_the_anti_fascist_coalition }

		icon = GFX_goal_generic_army_artillery2
		x = -5
		y = 1
		relative_position_id = SPR_strengthen_the_anti_fascist_coalition
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			add_ideas = SPR_professional_military_1
		}
	}

	focus = {
		id = SPR_experiences_from_the_civil_war
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_reprofessionalize_the_military }

		icon = GFX_goal_generic_army_doctrines
		x = 0
		y = 1
		relative_position_id = SPR_reprofessionalize_the_military
		cost = 7.2
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			army_experience = 15
			add_doctrine_cost_reduction = {
				name = SPR_engineering_advances
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
		}
	}

	focus = {
		id = SPR_a_new_military_academy
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_experiences_from_the_civil_war }
		prerequisite = { focus = SPR_restore_higher_education }

		icon = GFX_focus_generic_military_academy
		x = 0
		y = 2
		relative_position_id = SPR_experiences_from_the_civil_war
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			army_experience = 25
			swap_ideas = {
				remove_idea = SPR_professional_military_1
				add_idea = SPR_professional_military_2
			}
		}
	}

	focus = {
		id = SPR_revive_the_republican_navy
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_strengthen_the_anti_fascist_coalition }

		icon = GFX_goal_generic_construct_naval_dockyard
		x = -7
		y = 1
		relative_position_id = SPR_strengthen_the_anti_fascist_coalition
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_revive_the_republican_navy_1DY }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
		}

		completion_reward = {
			navy_experience = 25
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
				set_state_flag = SPR_revive_the_republican_navy_1DY
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_revive_the_republican_navy_1DY }
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
				set_state_flag = SPR_revive_the_republican_navy_1DY
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 0
						include_locked = yes
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_revive_the_republican_navy_1DY }
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
				set_state_flag = SPR_revive_the_republican_navy_1DY
			}
		}
	}

	focus = {
		id = SPR_navy_modernization
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_revive_the_republican_navy }

		icon = GFX_focus_generic_cruiser2
		x = 0
		y = 1
		relative_position_id = SPR_revive_the_republican_navy
		cost = 7.2
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			navy_experience = 25
			add_tech_bonus = {
				name = SPR_navy_modernization
				bonus = 1
				uses = 2
				category = dd_tech
			}
			add_tech_bonus = {
				name = SPR_navy_modernization
				bonus = 1
				uses = 2
				category = cl_tech
				category = ca_tech
			}
		}
	}

	focus = {
		id = SPR_expand_the_naval_academy
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_navy_modernization }
		prerequisite = { focus = SPR_restore_higher_education }

		icon = GFX_goal_generic_navy_doctrines_tactics
		x = 0
		y = 2
		relative_position_id = SPR_navy_modernization
		cost = 7.2
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			navy_experience = 50
			add_doctrine_cost_reduction = {
				name = SPR_navy_modernization
				cost_reduction = 0.5
				uses = 3
				category = naval_doctrine
			}
		}
	}

	focus = {
		id = SPR_prepare_for_the_next_war
		available = {
		}
		bypass = {
		}
		prerequisite = {
			focus = SPR_a_new_military_academy
			focus = SPR_expand_the_naval_academy
		}

		icon = GFX_goal_generic_build_tank
		x = -1
		y = 1
		relative_position_id = SPR_a_new_military_academy
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_prepare_for_the_next_war_2mil }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}

		search_filters = {FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_war_support = 0.1
			add_doctrine_cost_reduction = {
				name = SPR_prepare_for_the_next_war
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
				set_state_flag = SPR_prepare_for_the_next_war_2mil
			}
		}
	}

	focus = {
		id = SPR_wartime_industry
		available = {
			has_war = yes
		}
		bypass = {
		}
		prerequisite = { focus = SPR_prepare_for_the_next_war }

		icon = GFX_goal_generic_construct_mil_factory
		x = -1
		y = 1
		relative_position_id = SPR_prepare_for_the_next_war
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_wartime_industry_1mil }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
				}
				set_state_flag = SPR_wartime_industry_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_wartime_industry_1mil }
				}
				set_state_flag = SPR_wartime_industry_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_wartime_industry_1mil }
				}
				set_state_flag = SPR_wartime_industry_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_wartime_industry_1mil }
				}
				set_state_flag = SPR_wartime_industry_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPR_fuel_for_the_war_machine
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_wartime_industry }
		
		icon = GFX_goal_generic_construction2
		x = 0
		y = 1
		relative_position_id = SPR_wartime_industry
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = SPR_fuel_for_the_war_machine
				bonus = 1.5
				uses = 2
				category = excavation_tech
			}
			custom_effect_tooltip = SPA_reduce_reliance_on_foreign_resources_tt
		}
	}

	
	
	focus = {
		id = SPR_socialist_international
		available = {
			is_subject = no
			OR = {
				is_in_faction = no
				is_faction_leader = yes
			}
		}
		bypass = {
			is_in_faction = yes
		}
		prerequisite = { focus = SPR_prepare_for_the_next_war }
		mutually_exclusive = { focus = SPR_enemies_of_our_enemy }
		
		#icon = GFX_z_goal_generic_social_democracy
		icon = GFX_z_goal_generic_labor_democracy
		x = 1
		y = 1
		relative_position_id = SPR_prepare_for_the_next_war
		cost = 10
		
		ai_will_do = {
			factor = 15
		}
		historical_ai = {
			always = no
		}

		available_if_capitulated = yes

		completion_reward = {
			set_rule = { can_create_factions = yes }
			if = {
				limit = { is_faction_leader = yes }
				set_faction_name = socialist_international
			}
			else = { create_faction = socialist_international }
			every_other_country = {
				limit = {
					is_subject = no
					NOT = { is_in_faction_with = ROOT }
					OR = {
						has_government = communism
						has_government = democratic
					}
					if = {
						limit = { has_government = communism }
						is_in_faction = no
					}
					if = {
						limit = { has_government = democratic }
						OR = {
							has_country_leader_with_trait = socialist_trait
							has_country_leader_ideology = socialism
							has_country_leader_ideology = democratic_communism
							has_country_leader_ideology = democratic_socialism
						}
					}
				}
				country_event = { id = NWspain.75 hours = 3 random_hours = 3 }
			}
		}
	}
	
	focus = {
		id = SPR_join_the_global_fight_against_fascism
		available = {
			any_of_scopes = {
				array = global.is_major
				tooltip = is_major_tt
				exists = yes
				is_subject = no
				NOT = { is_in_faction_with = ROOT }
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_socialist_international }

		icon = GFX_focus_generic_anti_fascist_diplomacy
		x = 0
		y = 1
		relative_position_id = SPR_socialist_international
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			every_country = {
				limit = {
					has_government = fascism
					is_major = yes
					NOT = { is_in_faction_with = ROOT }
				}
				ROOT = {
					create_wargoal = {
						target = PREV
						type = topple_government
						expire = 0
					}
				}
			}
		}
	}

	focus = {
		id = SPR_the_anti_fascist_crusade
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_join_the_global_fight_against_fascism }

		icon = GFX_focus_generic_strike_at_democracy1
		x = 0
		y = 1
		relative_position_id = SPR_join_the_global_fight_against_fascism
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = SPR_the_anti_fascist_crusade
		}
	}
	
	
	focus = {
		id = SPR_transformation_people_republic
		icon = GFX_z_focus_revolutionary_government
		prerequisite = { focus = SPR_repression_against_trotskyists }
		prerequisite = { focus = SPR_demand_ministerial_positions }
		#mutually_exclusive = { focus = SPR_stand_junta }
		x = 1
		y = 1
		relative_position_id = SPR_repression_against_trotskyists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 20
		}
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_transformation_people_republic"
			add_political_power = 100
			add_stability = -0.1
			add_war_support = 0.05
			if = {
				limit = { has_idea = SPR_desire_for_decentralization }
				remove_ideas = SPR_desire_for_decentralization
			}
			SOV = { add_opinion_modifier = { target = ROOT modifier = SPR_the_stalinist_doctrine } }
			custom_effect_tooltip = available_military_high_command
			show_ideas_tooltip = SPR_wilhelm_zaisser
		}
	}
	
	focus = {
		id = SPR_appropriate_church_riches
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_transformation_people_republic }
		
		icon = GFX_goal_generic_construct_civilian
		x = -1
		y = 1
		relative_position_id = SPR_transformation_people_republic
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_timed_idea = { idea = SPR_appropriate_church_riches days = 730 }
		}
	}
	
	focus = {
		id = SPR_an_army_of_all_classes
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_transformation_people_republic }
		
		icon = GFX_focus_YUG_pan_slavic_congress
		x = 1
		y = 1
		relative_position_id = SPR_transformation_people_republic
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_an_army_of_all_classes"
			add_ideas = SPR_an_army_of_all_classes_1
			add_ideas = national_army
		}
	}
	
	focus = {
		id = SPR_invite_socialist_intellectuals
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_an_army_of_all_classes }
		
		icon = GFX_z_goal_brain
		x = 1
		y = 1
		relative_position_id = SPR_an_army_of_all_classes
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			add_research_slot = 1
			add_ideas = promoting_immigration
		}
	}
	
	focus = {
		id = SPR_transfer_power_KPI
		icon = GFX_focus_generic_soviet_politics
		prerequisite = { focus = SPR_an_army_of_all_classes }
		x = -1
		y = 1
		relative_position_id = SPR_an_army_of_all_classes
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 20
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				date < 1939.04.01
			}
			modifier = {
				factor = 6
				is_historical_focus_on = yes
				date > 1939.04.01
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_transfer_power_KPI"
			add_stability = 0.1
			add_popularity = {
				ideology = democratic
				popularity = -0.3
			}
			add_popularity = {
				ideology = communism
				popularity = 0.3
			}
			set_politics = {
				ruling_party = communism
				elections_allowed = no
			}
			add_ideas = limited_exports
		}
	}
	
	focus = {
		id = SPR_reeducate_the_bourgeoisie
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_invite_socialist_intellectuals }
		prerequisite = { focus = SPR_transfer_power_KPI }
		
		icon = GFX_goal_generic_political_pressure
		x = 1
		y = 1
		relative_position_id = SPR_transfer_power_KPI
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_STABILITY}
		completion_reward = {
			add_popularity = {
				ideology = communism
				popularity = 0.05
			}
			add_stability = 0.05
			add_political_power = 60
			if = {
				limit = { has_idea = SPR_an_army_of_all_classes_1 }
				swap_ideas = {
					remove_idea = SPR_an_army_of_all_classes_1
					add_idea = SPR_an_army_of_all_classes_2b
				}
			}
			else_if = {
				limit = { has_idea = SPR_an_army_of_all_classes_2a }
				swap_ideas = {
					remove_idea = SPR_an_army_of_all_classes_2a
					add_idea = SPR_an_army_of_all_classes_3
				}
			}
		}
	}
	
	focus = {
		id = SPR_the_spanish_red_army
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_reeducate_the_bourgeoisie }
		
		icon = GFX_goal_generic_army_doctrines
		x = 0
		y = 4
		relative_position_id = SPR_reeducate_the_bourgeoisie
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			army_experience = 25
			remove_ideas = SPR_disbanded_army_2
			add_tech_bonus = {
				name = SPR_the_spanish_red_army
				bonus = 1
				uses = 1
				category = motorized_equipment
			}
			add_doctrine_cost_reduction = {
				name = SPR_the_spanish_red_army
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
		}
	}
	
	focus = {
		id = SPR_collapse_capitalist_transformation
		icon = GFX_z_goal_socialist_industry
		prerequisite = { focus = SPR_reeducate_the_bourgeoisie }
		x = 1
		y = 1
		relative_position_id = SPR_reeducate_the_bourgeoisie
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_collapse_capitalist_transformation"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_nationalize_the_industry
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_collapse_capitalist_transformation }

		icon = GFX_goal_generic_construct_civ_factory
		x = 1
		y = 1
		relative_position_id = SPR_collapse_capitalist_transformation
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_nationalize_the_industry_1civ }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_stability = -0.1
			add_tech_bonus = {
				name = SPR_nationalize_the_industry
				bonus = 1.0
				uses = 1
				category = industry
			}
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 7
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPR_nationalize_the_industry_1civ
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_nationalize_the_industry_1civ }
				}
				set_state_flag = SPR_nationalize_the_industry_1civ
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_nationalize_the_industry_1civ }
				}
				set_state_flag = SPR_nationalize_the_industry_1civ
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_beacon_of_socialism
		available = {
			num_of_factories > 50
		}
		bypass = {
		}
		prerequisite = { focus = SPR_nationalize_the_industry }

		icon = GFX_focus_research2
		x = -1
		y = 1
		relative_position_id = SPR_nationalize_the_industry
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = SPR_increase_arms_production
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_nationalize_the_industry }

		icon = GFX_goal_generic_construct_mil_factory
		x = 1
		y = 1
		relative_position_id = SPR_nationalize_the_industry
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_increase_arms_production_1mil }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
				}
				set_state_flag = SPR_increase_arms_production_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_increase_arms_production_1mil }
				}
				set_state_flag = SPR_increase_arms_production_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_increase_arms_production_1mil }
				}
				set_state_flag = SPR_increase_arms_production_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_exploit_spains_riches
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_beacon_of_socialism }
		prerequisite = { focus = SPR_increase_arms_production }
		
		icon = GFX_goal_generic_construction2
		x = 1
		y = 1
		relative_position_id = SPR_beacon_of_socialism
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {}
		completion_reward = {
			if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_3
				}
				remove_ideas = SPA_recovering_from_civil_war_3
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_2
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war_2
					add_idea = SPA_recovering_from_civil_war_3
				}
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war
					add_idea = SPA_recovering_from_civil_war_2
				}
			}
			else_if = {
				limit = {
					NOT = { has_global_flag = scw_over }
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_recovering_from_civil_war
						add_idea = SPA_recovering_from_civil_war_2
					}
				}
			}
			custom_effect_tooltip = SPA_reduce_reliance_on_foreign_resources_tt
		}
	}
	
	focus = {
		id = SPR_red_bulwark_in_the_west
		available = {
			#is_in_faction_with = SOV
			#SOV = { has_government = communism }
			has_full_control_of_state = 172
			has_full_control_of_state = 166
			has_full_control_of_state = 794
			NOT = {
				any_of_scopes = {
					array = ROOT.core_states
					tooltip = any_of_core_states_tt
					is_in_home_area = yes
					is_coastal = yes
					NOT = { is_controlled_by = ROOT }
				}
			}
			has_global_flag = scw_over
		}
		bypass = {
		}
		prerequisite = { focus = SPR_the_spanish_red_army }
		prerequisite = { focus = SPR_soviet_industrial_aid }

		icon = GFX_goal_generic_construct_military
		x = 0
		y = 1
		relative_position_id = SPR_the_spanish_red_army
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPA_prepare_the_pyrenees_defenses_tt
			hidden_effect = {
				792 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 6756
						}
						level = 2
						instant_build = yes
					}
				}
				172 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 3737
							id = 3931
						}
						level = 2
						instant_build = yes
					}
				}
				166 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 11838
						}
						level = 2
						instant_build = yes
					}
				}
				794 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 915
							id = 899
						}
						level = 2
						instant_build = yes
					}
				}
				165 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 3899
							id = 3898
							id = 11779
							id = 9824
						}
						level = 2
						instant_build = yes
					}
				}
			}
			custom_effect_tooltip = SPA_defenses_against_invasion_tt
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_building_construction = {
					type = coastal_bunker
					province = {
						all_provinces = yes
						limit_to_naval_base = yes
					}
					level = 2
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					province = {
						all_provinces = yes
						limit_to_naval_base = yes
					}
					level = 1
					instant_build = yes
				}
			}
			swap_ideas = {
				remove_idea = SPR_an_army_of_all_classes_3
				add_idea = SPR_an_army_of_all_classes_4
			}
		}
	}
	
	focus = {
		id = SPR_appeal_for_increased_autonomy
		available = {
			is_in_faction_with = SOV
			is_subject_of = SOV
		}
		bypass = {
			NOT = { is_subject_of = SOV }
		}
		prerequisite = { focus = SPR_red_bulwark_in_the_west }
		prerequisite = { focus = SPR_soviet_recovery_aid }

		icon = GFX_focus_CZE_german_puppet
		x = 0
		y = 1
		relative_position_id = SPR_red_bulwark_in_the_west
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			SOV = { country_event = { id = lar_spain.56 hours = 6 random_hours = 6 } }
		}
	}
	
	focus = {
		id = SPR_modernize_the_armed_forces
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_increase_arms_production }

		icon = GFX_goal_generic_build_tank
		x = 0
		y = 2
		relative_position_id = SPR_increase_arms_production
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = SPR_modernize_the_armed_forces
				bonus = 1.0
				uses = 1
				category = infantry_weapons
			}
			add_tech_bonus = {
				name = SPR_modernize_the_armed_forces
				bonus = 1.0
				uses = 1
				category = artillery
			}
			add_tech_bonus = {
				name = SPR_modernize_the_armed_forces
				bonus = 1.0
				uses = 1
				category = light_fighter
			}
			add_tech_bonus = {
				name = SPR_modernize_the_armed_forces
				bonus = 1.0
				uses = 1
				category = armor
			}
		}
	}
	
	focus = {
		id = SPR_join_comintern
		icon = GFX_focus_generic_join_comintern
		prerequisite = { focus = SPR_appeal_for_increased_autonomy }
		mutually_exclusive = { focus = SPR_iberian_union_communists }
		x = 0
		y = 1
		relative_position_id = SPR_appeal_for_increased_autonomy
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				date < 1945.01.01
			}
		}
		available = {
			has_global_flag = scw_over
	 		is_subject = no
			is_in_faction = no
			has_government = communism
			any_of_scopes = {
				array = global.majors
				tooltip = is_major_tt
				has_government = communism
				is_faction_leader = yes
				NOT = { has_war_with = ROOT }
			}
		}
		
		bypass = {
			any_of_scopes = {
				array = global.majors
				tooltip = is_major_tt
				has_government = communism
				is_faction_leader = yes
				is_in_faction_with = ROOT
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_join_comintern"
			if = {
				limit = {
					event_target:NW_comintern_leader_scope = {
						is_faction_leader = yes
						has_government = communism
						NOT = { has_war_with = ROOT }
					}	
				}
				event_target:NW_comintern_leader_scope = {
					country_event = generic.2
				}
			}
			else = {
                get_best_alliance_match_communism_effect = yes
                var:best_leader = {
                    country_event = generic.2
                }
            }
		}
	}
	
	focus = {
		id = SPR_iberian_union_communists
		icon = GFX_focus_spr_war_of_independence
		prerequisite = { focus = SPR_appeal_for_increased_autonomy }
		mutually_exclusive = { focus = SPR_join_comintern }
		x = 2
		y = 1
		relative_position_id = SPR_appeal_for_increased_autonomy
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		available = {
			has_global_flag = scw_over
		}
		bypass = {
			OR = {
				is_faction_leader = yes
				is_in_faction = yes
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_iberian_union_communists"
			set_rule = { can_create_factions = yes }
			create_faction = SPR_iberian_union_communists
		}
	}
	
	focus = {
		id = SPR_return_of_gibraltar
		icon = GFX_goal_generic_territory_or_war
		prerequisite = { focus = SPR_join_comintern focus = SPR_iberian_union_communists }
		x = 1
		y = 1
		relative_position_id = SPR_join_comintern
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_return_of_gibraltar"
			118 = {
				add_claim_by = ROOT
				add_core_of = ROOT
			}
		}
	}
	
	focus = {
		id = SPR_support_french_communists
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_return_of_gibraltar }

		icon = GFX_focus_attack_france
		x = -1
		y = 1
		relative_position_id = SPR_return_of_gibraltar
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			if = {
				limit = {
					event_target:NW_france_scope = {
						has_government = communism
						is_in_faction = no
					}
					is_in_faction = yes
				}
				event_target:NW_france_scope = { country_event = { id = generic.5 hours = 6 random_hours = 6 } }
			}
			else_if = {
				limit = {
					event_target:NW_france_scope = {
						NOT = { has_government = communism }
						communism > 0.2
					}
				}
				event_target:NW_france_scope = { country_event = { id = lar_spain.62 hours = 6 random_hours = 6 } }
			}
			else = {
				create_wargoal = {
				    type = puppet_wargoal_focus
				    target = event_target:NW_france_scope
				}
			}
		}
	}
	
	focus = {
		id = SPR_a_red_iberia
		available = {
		}
		bypass = {
			has_war_with = POR
		}
		prerequisite = { focus = SPR_return_of_gibraltar }

		icon = GFX_focus_generic_attack_portugal
		x = 1
		y = 1
		relative_position_id = SPR_return_of_gibraltar
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			if = {
				limit = {
					POR = {
						NOT = { has_government = communism }
					}
				}
				create_wargoal = {
					type = annex_everything
					target = POR
					expire = 0
				}
			}
			else = {
				POR = { country_event = { id = lar_spain.59 hours = 6 random_hours = 6 } }
			}
		}
	}
	
	focus = {
		id = SPR_avenge_foreign_interference
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPR_a_red_iberia focus = SPR_support_french_communists }

		icon = GFX_focus_attack_germany
		x = 1
		y = 1
		relative_position_id = SPR_support_french_communists
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPR_avenge_foreign_interference_tt
			every_other_country = {
				limit = {
					has_country_flag = SPR_sent_volunteers_to_SPA_flag
				}
				ROOT = {
					create_wargoal = {
					    type = annex_everything
					    target = PREV
					    expire = 0
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_provide_for_the_people
		available = {
			OR = {
				AND = {
					is_in_faction_with = SOV
					SOV = { has_government = communism }
				}
				AND = {
					is_in_faction_with = GRF
					GRF = { has_government = communism }
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_soviet_recovery_aid }

		icon = GFX_focus_prc_agrarian_socialism
		x = 0
		y = 1
		relative_position_id = SPR_soviet_recovery_aid
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_STABILITY}
		completion_reward = {
			add_ideas = SPR_provide_for_the_people
		}
	}
	
	focus = {
		id = SPR_connect_the_country
		available = {
			OR = {
				AND = {
					is_in_faction_with = SOV
					SOV = { has_government = communism }
				}
				AND = {
					is_in_faction_with = GRF
					GRF = { has_government = communism }
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_provide_for_the_people }

		icon = GFX_goal_generic_construct_infrastructure
		x = -1
		y = 1
		relative_position_id = SPR_provide_for_the_people
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 10
			}
			every_state = {
				limit	= {	has_state_flag = SPR_connect_the_country_1inf }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 10
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					is_core_of = ROOT
				}
				set_state_flag = SPR_connect_the_country_1inf
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_connect_the_country_1inf }
				}
				set_state_flag = SPR_connect_the_country_1inf
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_connect_the_country_1inf }
				}
				set_state_flag = SPR_connect_the_country_1inf
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_connect_the_country_1inf }
				}
				set_state_flag = SPR_connect_the_country_1inf
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_connect_the_country_1inf }
				}
				set_state_flag = SPR_connect_the_country_1inf
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPR_collectivize_industry
		available = {
			OR = {
				AND = {
					is_in_faction_with = SOV
					SOV = { has_government = communism }
				}
				AND = {
					is_in_faction_with = GRF
					GRF = { has_government = communism }
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_provide_for_the_people }

		icon = GFX_z_goal_socialist_industry
		x = 1
		y = 1
		relative_position_id = SPR_provide_for_the_people
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_collectivize_industry_2civ }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPR_collectivize_industry_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_collectivize_industry_2civ }
				}
				set_state_flag = SPR_collectivize_industry_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPR_transplant_soviet_industry
		available = {
			OR = {
				AND = {
					is_in_faction_with = SOV
					SOV = { has_government = communism }
				}
				AND = {
					is_in_faction_with = GRF
					GRF = { has_government = communism }
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_collectivize_industry }
		prerequisite = { focus = SPR_connect_the_country }

		icon = GFX_goal_generic_construct_mil_factory
		x = 1
		y = 1
		relative_position_id = SPR_connect_the_country
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_transplant_soviet_industry_2mil }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPR_transplant_soviet_industry_2mil
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_transplant_soviet_industry_2mil }
				}
				set_state_flag = SPR_transplant_soviet_industry_2mil
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPR_the_five_year_plan
		available = {
			OR = {
				AND = {
					is_in_faction_with = SOV
					SOV = { has_government = communism }
				}
				AND = {
					is_in_faction_with = GRF
					GRF = { has_government = communism }
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_transplant_soviet_industry }

		icon = GFX_z_goal_new_industry_standard
		x = 0
		y = 2
		relative_position_id = SPR_transplant_soviet_industry
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_timed_idea = { idea = SPR_the_five_year_plan days = 1825 }
			remove_ideas = SPR_social_crisis
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_3
				}
				remove_ideas = SPA_recovering_from_civil_war_3
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_2
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war_2
					add_idea = SPA_recovering_from_civil_war_3
				}
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war
					add_idea = SPA_recovering_from_civil_war_2
				}
			}
			else_if = {
				limit = {
					NOT = { has_global_flag = scw_over }
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_recovering_from_civil_war
						add_idea = SPA_recovering_from_civil_war_2
					}
				}
			}
		}
	}

	focus = {
		id = SPR_slipway_enlargement
		available = {
			OR = {
				AND = {
					is_in_faction_with = SOV
					SOV = { has_government = communism }
				}
				AND = {
					is_in_faction_with = GRF
					GRF = { has_government = communism }
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_collectivize_industry }
		prerequisite = { focus = SPR_connect_the_country }

		icon = GFX_goal_generic_construct_naval_dockyard
		x = 1
		y = 1
		relative_position_id = SPR_collectivize_industry
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPR_slipway_enlargement_2DY }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}

		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			navy_experience = 25
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPR_slipway_enlargement_2DY
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPR_slipway_enlargement_2DY }
				}
				set_state_flag = SPR_slipway_enlargement_2DY
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPR_a_red_fleet
		available = {
			OR = {
				AND = {
					is_in_faction_with = SOV
					SOV = { has_government = communism }
				}
				AND = {
					is_in_faction_with = GRF
					GRF = { has_government = communism }
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPR_slipway_enlargement }

		icon = GFX_goal_generic_navy_doctrines_tactics
		x = -1
		y = 1
		relative_position_id = SPR_slipway_enlargement
		cost = 10
		
		ai_will_do = {
			factor = 5
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}

		completion_reward = {
			navy_experience = 50
			add_tech_bonus = {
				name = SPR_a_red_fleet
				bonus = 1
				uses = 1
				category = dd_tech
			}
			add_tech_bonus = {
				name = SPR_a_red_fleet
				bonus = 1
				uses = 1
				category = cl_tech
				category = ca_tech
			}
			add_tech_bonus = {
				name = SPR_a_red_fleet
				bonus = 1
				uses = 1
				category = bb_tech
			}
		}
	}
	
	
	## LIBERAL BRANCH ##
	
	focus = {
		id = SPR_victory_liberal_party
		icon = GFX_z_goal_liberty
		prerequisite = { focus = SPR_elections_second_cortes_republic }
		mutually_exclusive = { focus = SPR_victory_popular_front focus = SPR_victory_national_block }
		x = 0
		y = 1
		relative_position_id = SPR_elections_second_cortes_republic
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		allow_branch = {
			NOT = {
				has_completed_focus = SPR_victory_popular_front
				has_completed_focus = SPR_victory_national_block
			}
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_victory_liberal_party"
			set_politics = {
				ruling_party = neutrality
				elections_allowed = yes
			}
			add_popularity = {
				ideology = neutrality
				popularity = 0.25
			}
			hidden_effect = {
				if = {
					limit = { NOT = { country_exists = ASU } }
					country_event = { id = NWspain.53 days = 7 }
				}
				if = {
					limit = { NOT = { country_exists = SNT } }
					country_event = { id = NWspain.54 days = 10 }
				}
				if = {
					limit = { NOT = { country_exists = CAT } }
					country_event = { id = NWspain.55 days = 13 }
				}
				if = {
					limit = { NOT = { country_exists = BAS } }
					country_event = { id = NWspain.56 days = 16 }
				}
				if = {
					limit = { NOT = { country_exists = GLC } }
					country_event = { id = NWspain.57 days = 19 }
				}
				if = {
					limit = { NOT = { country_exists = VLA } }
					country_event = { id = NWspain.59 days = 22 }
				}
				set_variable = { spain_minor = 0 }
			}
			custom_effect_tooltip = TUR_focus_autocomplete_tt
			mark_focus_tree_layout_dirty = yes
		}
	}
	
	focus = {
		id = SPR_continuation_agrarian_reform
		icon = GFX_goal_agrarian
		prerequisite = { focus = SPR_victory_liberal_party }
		x = -3
		y = 1
		relative_position_id = SPR_victory_liberal_party
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_continuation_agrarian_reform"
			every_controlled_state = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_modernization_industrial_enterprises
		icon = GFX_goal_generic_construction
		prerequisite = { focus = SPR_continuation_agrarian_reform }
		x = -2
		y = 1
		relative_position_id = SPR_continuation_agrarian_reform
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_modernization_industrial_enterprises"
			add_ideas = SPR_modernization_industrial_enterprises
		}
	}
	
	focus = {
		id = SPR_getting_rid_feudal_system
		icon = GFX_focus_renounce_the_treaty_of_trianon
		prerequisite = { focus = SPR_modernization_industrial_enterprises }
		x = 0
		y = 1
		relative_position_id = SPR_modernization_industrial_enterprises
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_getting_rid_feudal_system"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_give_land_peasants
		icon = GFX_z_goal_agrarian_reform
		prerequisite = { focus = SPR_continuation_agrarian_reform }
		x = 0
		y = 1
		relative_position_id = SPR_continuation_agrarian_reform
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_give_land_peasants"
			every_controlled_state = {
				add_extra_state_shared_building_slots = 2
			}
		}
	}
	
	focus = {
		id = SPR_cancellation_state_emergency
		icon = GFX_z_dangerous_laws
		prerequisite = { focus = SPR_give_land_peasants }
		x = 0
		y = 2
		relative_position_id = SPR_give_land_peasants
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_cancellation_state_emergency"
			add_stability = 0.05
			if = {
				limit = { has_country_flag = libarals_loyality_flag }
				country_event = { id = NWspain.30 }
			}
		}
	}
	
	focus = {
		id = SPR_overcoming_social_crisis
		icon = GFX_z_goal_pluralism_of_opinions
		prerequisite = { focus = SPR_cancellation_state_emergency }
		prerequisite = { focus = SPR_getting_rid_feudal_system }
		x = 0
		y = 1
		relative_position_id = SPR_cancellation_state_emergency
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_overcoming_social_crisis"
			remove_ideas = SPR_social_crisis
		}
	}
	
	focus = {
		id = SPR_reconciliation_socialists
		icon = GFX_goal_generic_dangerous_deal
		prerequisite = { focus = SPR_victory_liberal_party }
		mutually_exclusive = { focus = SPR_reconciliation_conservatives }
		x = -1
		y = 1
		relative_position_id = SPR_victory_liberal_party
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_reconciliation_socialists"
			add_popularity = {
				ideology = democratic
				popularity = -0.05
			}
			
			if = {
				limit = { has_country_flag = libarals_loyality_flag }
				custom_effect_tooltip = sd_agressive_level_down_tt
				add_to_variable = { sd_agressive_level_var = 1 }
				clamp_variable = {
					var = sd_agressive_level_var
					min = 1
					max = 3
				}
			}
		}
	}
	
	focus = {
		id = SPR_repression_against_right
		icon = GFX_focus_generic_anti_fascist_diplomacy
		prerequisite = { focus = SPR_reconciliation_socialists }
		x = 0
		y = 2
		relative_position_id = SPR_reconciliation_socialists
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_repression_against_right"
			add_popularity = {
				ideology = fascism
				popularity = -0.03
			}
			add_popularity = {
				ideology = monarchy
				popularity = -0.03
			}
			
			if = {
				limit = { has_country_flag = libarals_loyality_flag }
				custom_effect_tooltip = right_agressive_level_up_tt
				subtract_from_variable = { f_agressive_level_var = 1 }
				subtract_from_variable = { karl_agressive_level_var = 1 }
				subtract_from_variable = { nk_agressive_level_var = 1 }
				clamp_variable = {
					var = f_agressive_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = karl_agressive_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = nk_agressive_level_var
					min = 1
					max = 3
				}
				
				custom_effect_tooltip = right_influence_level_down_tt
				subtract_from_variable = { f_influence_level_var = 1 }
				subtract_from_variable = { karl_influence_level_var = 1 }
				subtract_from_variable = { nk_influence_level_var = 1 }
				clamp_variable = {
					var = f_influence_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = karl_influence_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = nk_influence_level_var
					min = 1
					max = 3
				}
			}
		}
	}
	
	focus = {
		id = SPR_stop_secularization
		icon = GFX_z_goal_monarchism_7
		prerequisite = { focus = SPR_victory_liberal_party }
		x = 0
		y = 2
		relative_position_id = SPR_victory_liberal_party
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_stop_secularization"
			add_popularity = {
				ideology = monarchy
				popularity = -0.05
			}
			add_ideas = SPR_stop_secularization
		}
	}
	
	focus = {
		id = SPR_reconciliation_conservatives
		icon = GFX_goal_generic_improve_relations
		prerequisite = { focus = SPR_victory_liberal_party }
		mutually_exclusive = { focus = SPR_reconciliation_socialists }
		x = 1
		y = 1
		relative_position_id = SPR_victory_liberal_party
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_reconciliation_conservatives"
			add_popularity = {
				ideology = monarchy
				popularity = -0.05
			}
			
			if = {
				limit = { has_country_flag = libarals_loyality_flag }
				custom_effect_tooltip = nk_agressive_level_down_tt
				add_to_variable = { nk_agressive_level_var = 1 }
				clamp_variable = {
					var = nk_agressive_level_var
					min = 1
					max = 3
				}
			}
		}
	}
	
	focus = {
		id = SPR_repression_against_left
		icon = GFX_z_goal_generic_political_commissars
		prerequisite = { focus = SPR_reconciliation_conservatives }
		x = 0
		y = 2
		relative_position_id = SPR_reconciliation_conservatives
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_repression_against_left"
			add_popularity = {
				ideology = communism
				popularity = -0.03
			}
			add_popularity = {
				ideology = trozkism
				popularity = -0.03
			}
			
			if = {
				limit = { has_country_flag = libarals_loyality_flag }
				custom_effect_tooltip = left_agressive_level_up_tt
				subtract_from_variable = { f_agressive_level_var = 1 }
				subtract_from_variable = { karl_agressive_level_var = 1 }
				subtract_from_variable = { nk_agressive_level_var = 1 }
				clamp_variable = {
					var = f_agressive_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = karl_agressive_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = nk_agressive_level_var
					min = 1
					max = 3
				}
				
				custom_effect_tooltip = left_influence_level_down_tt
				subtract_from_variable = { comm_influence_level_var = 1 }
				subtract_from_variable = { sd_influence_level_var = 1 }
				subtract_from_variable = { a_influence_level_var = 1 }
				clamp_variable = {
					var = comm_influence_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = sd_influence_level_var
					min = 1
					max = 3
				}
				clamp_variable = {
					var = a_influence_level_var
					min = 1
					max = 3
				}
			}
		}
	}
	
	focus = {
		id = SPR_create_powerful_center
		icon = GFX_z_goal_government_2
		prerequisite = { focus = SPR_repression_against_right focus = SPR_repression_against_left }
		x = 1
		y = 1
		relative_position_id = SPR_repression_against_right
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_create_powerful_center"
			add_popularity = {
				ideology = neutrality
				popularity = 0.06
			}
		}
	}
	
	focus = {
		id = SPR_empowering_president
		icon = GFX_goal_generic_demand_territory
		prerequisite = { focus = SPR_victory_liberal_party }
		x = 3
		y = 1
		relative_position_id = SPR_victory_liberal_party
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_empowering_president"
			add_ideas = SPR_empowering_president
		}
	}
	
	focus = {
		id = SPR_development_new_social_laws
		icon = GFX_z_goal_production
		prerequisite = { focus = SPR_empowering_president }
		x = 2
		y = 1
		relative_position_id = SPR_empowering_president
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_development_new_social_laws"
			add_ideas = SPR_development_new_social_laws_idea
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_expanding_workers_rights
		icon = GFX_z_focus_the_workers
		prerequisite = { focus = SPR_development_new_social_laws }
		x = 0
		y = 1
		relative_position_id = SPR_development_new_social_laws
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_expanding_workers_rights"
			add_ideas = SPR_expanding_workers_rights
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_expanding_role_unions
		icon = GFX_z_goal_soviet_civil_city1
		prerequisite = { focus = SPR_empowering_president }
		x = 0
		y = 1
		relative_position_id = SPR_empowering_president
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_expanding_role_unions"
			add_stability = 0.05
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_expansion_trade_with_neighbors
		icon = GFX_goal_generic_positive_trade_relations
		prerequisite = { focus = SPR_expanding_role_unions }
		x = 0
		y = 2
		relative_position_id = SPR_expanding_role_unions
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_expansion_trade_with_neighbors"
			add_ideas = SPR_expansion_trade_with_neighbors
		}
	}
	
	
	focus = {
		id = SPR_alliance_portugal
		icon = GFX_z_goal_friend_portugal
		prerequisite = { focus = SPR_create_powerful_center }
		mutually_exclusive = { focus = SPR_trade_france focus = SPR_trade_italy }
		x = -1
		y = 1
		relative_position_id = SPR_create_powerful_center
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 100
				is_in_faction_with = POR
			}
		}
		available = {
			country_exists = POR
			NOT = { has_war_with = POR }
		}
		bypass = {
			has_guaranteed = POR
			is_guaranteed_by = POR
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_alliance_portugal"
			POR = { country_event = { id = NWspain.19 } }
		}
	}
	
	focus = {
		id = SPR_trade_france
		icon = GFX_z_goal_economic_integration_france
		prerequisite = { focus = SPR_expansion_trade_with_neighbors }
		prerequisite = { focus = SPR_create_powerful_center }
		mutually_exclusive = { focus = SPR_alliance_portugal focus = SPR_trade_italy }
		x = 1
		y = 1
		relative_position_id = SPR_create_powerful_center
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 100
				is_in_faction_with = event_target:NW_france_scope
			}
		}
		available = {
			country_exists = event_target:NW_france_scope
			NOT = { has_war_with = event_target:NW_france_scope }
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_trade_france"
			add_opinion_modifier = { target = event_target:NW_france_scope modifier = SPR_trade_france }
			event_target:NW_france_scope = { add_opinion_modifier = { target = ROOT modifier = SPR_trade_france } }
		}
	}
	
	focus = {
		id = SPR_trade_italy
		icon = GFX_z_goal_economic_integration_italy
		prerequisite = { focus = SPR_expansion_trade_with_neighbors }
		prerequisite = { focus = SPR_create_powerful_center }
		mutually_exclusive = { focus = SPR_alliance_portugal focus = SPR_trade_france }
		x = 3
		y = 1
		relative_position_id = SPR_create_powerful_center
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 100
				is_in_faction_with = ITA
			}
		}
		available = {
			country_exists = ITA
			NOT = { has_war_with = ITA }
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_trade_italy"
			add_opinion_modifier = { target = ITA modifier = SPR_trade_italy }
			ITA = { add_opinion_modifier = { target = ROOT modifier = SPR_trade_italy } }
		}
	}
	
	
	## NATIONAL BLOCK BRANCH ##
	
	focus = {
		id = SPR_victory_national_block
		icon = GFX_z_goal_government_2
		prerequisite = { focus = SPR_elections_second_cortes_republic }
		mutually_exclusive = { focus = SPR_victory_popular_front focus = SPR_victory_liberal_party }
		x = 17
		y = 1
		offset = {
			x = -17
			y = 0
			trigger = {
				has_completed_focus = SPR_victory_national_block
			}
		}
		relative_position_id = SPR_elections_second_cortes_republic
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		allow_branch = {
			NOT = {
				has_completed_focus = SPR_victory_popular_front
				has_completed_focus = SPR_victory_liberal_party
			}
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_victory_national_block"
			set_politics = {
				ruling_party = monarchy
				elections_allowed = no
			}
			add_popularity = {
				ideology = monarchy
				popularity = 0.25
			}
			clr_country_flag = spain_block_legitimacy_flag
			custom_effect_tooltip = TUR_focus_autocomplete_tt
			mark_focus_tree_layout_dirty = yes
		}
	}
	
	focus = {
		id = SPR_give_way_renewal_spain
		icon = GFX_goal_tripartite_pact
		prerequisite = { focus = SPR_victory_national_block }
		mutually_exclusive = { focus = SPR_dictatorship_icnp }
		x = -6
		y = 1
		relative_position_id = SPR_victory_national_block
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_country_flag = NW_SPR_AI_MONARCHY_ALTERNATE
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_give_way_renewal_spain"
			add_political_power = 50
			set_party_name = { ideology = monarchy name = SPR_renewal_spain long_name = SPR_renewal_spain }
		}
	}
	
	focus = {
		id = SPR_guarantee_autonomy_minorities
		icon = GFX_z_guarantee_autonomy_minorities
		prerequisite = { focus = SPR_give_way_renewal_spain }
		x = -2
		y = 1
		relative_position_id = SPR_give_way_renewal_spain
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_guarantee_autonomy_minorities"
			set_temp_variable = { total_spa_manpower = 0 }
			remove_ideas = {
				#SPR_catalon_nationalism
				SPR_basks_nationalism
				SPR_desire_for_decentralization
			}
			if = {
				limit = {
					country_exists = BAS
					BAS = { NOT = { is_subject_of = ROOT } }
				}
				set_autonomy = {
					target = BAS
					autonomous_state = puppet
				}
				add_to_temp_variable = { total_spa_manpower = 25000 }
			}
			else_if = {
				limit = { NOT = { country_exists = BAS } }
				release_puppet = BAS
				hidden_effect = {
					BAS = {
						set_popularities = {
							democratic = 40
							fascism = 40
							communism = 20
						}
						set_politics = {
							ruling_party = democratic
							last_election = "1935.1.1"
							election_frequency = 36
							elections_allowed = yes
						}
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 1000
						}
						BAS = { country_event = { id = NWspain.902 } }
					}
					add_to_temp_variable = { total_spa_manpower = 50000 }
				}
			}
			
			if = {
				limit = {
					country_exists = GLC
					GLC = { NOT = { is_subject_of = ROOT } }
				}
				set_autonomy = {
					target = GLC
					autonomous_state = puppet
				}
				add_to_temp_variable = { total_spa_manpower = 25000 }
			}
			else_if = {
				limit = { NOT = { country_exists = GLC } }
				release_puppet = GLC
				hidden_effect = {
					GLC = {
						set_popularities = {
							democratic = 40
							fascism = 40
							communism = 20
						}
						set_politics = {
							ruling_party = democratic
							last_election = "1935.1.1"
							election_frequency = 36
							elections_allowed = yes
						}
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 1000
						}
						GLC = { country_event = { id = NWspain.903 } }
					}
					add_to_temp_variable = { total_spa_manpower = 50000 }
				}
			}
			
			if = {
				limit = {
					country_exists = ASU
					ASU = { NOT = { is_subject_of = ROOT } }
				}
				set_autonomy = {
					target = ASU
					autonomous_state = puppet
				}
				add_to_temp_variable = { total_spa_manpower = 25000 }
			}
			else_if = {
				limit = { NOT = { country_exists = ASU } }
				release_puppet = ASU
				hidden_effect = {
					ASU = {
						set_popularities = {
							democratic = 40
							fascism = 40
							communism = 20
						}
						set_politics = {
							ruling_party = democratic
							last_election = "1935.1.1"
							election_frequency = 36
							elections_allowed = yes
						}
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 1000
						}
						ASU = { country_event = { id = NWspain.904 } }
					}
					add_to_temp_variable = { total_spa_manpower = 50000 }
				}
			}
			
			if = {
				limit = {
					country_exists = SNT
					SNT = { NOT = { is_subject_of = ROOT } }
				}
				set_autonomy = {
					target = SNT
					autonomous_state = puppet
				}
				add_to_temp_variable = { total_spa_manpower = 25000 }
			}
			else_if = {
				limit = { NOT = { country_exists = SNT } }
				release_puppet = SNT
				hidden_effect = {
					SNT = {
						set_popularities = {
							democratic = 40
							fascism = 40
							communism = 20
						}
						set_politics = {
							ruling_party = democratic
							last_election = "1935.1.1"
							election_frequency = 36
							elections_allowed = yes
						}
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 1000
						}
						SNT = { country_event = { id = NWspain.905 } }
					}
					add_to_temp_variable = { total_spa_manpower = 50000 }
				}
			}
			
			if = {
				limit = {
					country_exists = VLA
					VLA = { NOT = { is_subject_of = ROOT } }
				}
				set_autonomy = {
					target = VLA
					autonomous_state = puppet
				}
				add_to_temp_variable = { total_spa_manpower = 25000 }
			}
			else_if = {
				limit = { NOT = { country_exists = VLA } }
				release_puppet = VLA
				hidden_effect = {
					VLA = {
						set_popularities = {
							democratic = 40
							fascism = 40
							communism = 20
						}
						set_politics = {
							ruling_party = democratic
							last_election = "1935.1.1"
							election_frequency = 36
							elections_allowed = yes
						}
						add_equipment_to_stockpile = {
							type = infantry_equipment
							amount = 1000
						}
						VLA = { country_event = { id = NWspain.906 } }
					}
					add_to_temp_variable = { total_spa_manpower = 50000 }
				}
			}
			
			#if = {
			#	limit = {
			#		CAT = { exists = yes }
			#		has_war = no
			#		has_civil_war = no
			#	}
			#	set_autonomy = {
			#		target = CAT
			#		autonomous_state = puppet
			#	}
			#}
			#if = {
			#	limit = {
			#		CAT = { exists = no }
			#		has_war = no
			#		has_civil_war = no
			#	}
			#	release_puppet = CAT
			#	hidden_effect = {
			#		CAT = {
			#			set_country_flag = catalonia_focus_democrat_flag
			#			load_focus_tree = catalonia_focus_democrat
			#		}
			#	}
			#}
			if = {
				limit = {
					OR = {
						has_war = yes
						has_civil_war = yes
					}
				}
				set_country_flag = SPR_guarantee_autonomy_minorities_flag
			}
			if = {
				limit = { country_exists = CAT }
				set_country_flag = SPR_guarantee_autonomy_minorities_cat_flag
			}
			custom_effect_tooltip = SPR_guarantee_autonomy_minorities_tt
			hidden_effect = { add_manpower = total_spa_manpower }
		}
	}
	
	focus = {
		id = SPR_coronation_juan_barcelona
		icon = GFX_z_coronation_juan_barcelona
		prerequisite = { focus = SPR_give_way_renewal_spain }
		x = 0
		y = 1
		relative_position_id = SPR_give_way_renewal_spain
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_coronation_juan_barcelona"
			add_ideas = SPR_coronation_juan_barcelona
			create_country_leader = {
				name = "Juan III"
				desc = "POLITICS_JUAN_I_DESC"
				picture = "gfx/leaders/SPR/Portrait_Juan_III.dds"
				expire = "1965.1.1"
				ideology = liberalism
				traits = {
					democratic_sympathies
					the_legitimist
				}
			}
			set_party_name = { ideology = democratic name = SPR_center long_name = SPR_center }
		}
	}
	
	focus = {
		id = SPR_policy_liberalisation
		icon = GFX_z_goal_authoritarian_democracy_focus
		prerequisite = { focus = SPR_coronation_juan_barcelona }
		x = 0
		y = 1
		relative_position_id = SPR_coronation_juan_barcelona
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_policy_liberalisation"
			add_political_power = 100
			add_timed_idea = { idea = SPR_policy_liberalisation days = 150 }
			hidden_effect = { set_cosmetic_tag = SPR_juan }
		}
	}
	
	focus = {
		id = SPR_democratization_regime_salazar
		icon = GFX_z_goal_give_democracy
		prerequisite = { focus = SPR_policy_liberalisation }
		x = -2
		y = 1
		relative_position_id = SPR_policy_liberalisation
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			country_exists = POR
			POR = {
				NOT = {
					has_completed_focus = POR_maintain_neutrality_in_spanish_war
					is_subject_of = ROOT
					has_war_with = ROOT
					is_in_faction_with = ROOT
				}
			}
		}
		will_lead_to_war_with = POR
		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_democratization_regime_salazar"
			create_wargoal = {
				type = puppet_wargoal_focus
				target = POR
				expire = 0
			}
		}
	}
	
	focus = {
		id = SPR_spanish_union
		icon = GFX_goal_generic_alliance
		prerequisite = { focus = SPR_policy_liberalisation }
		mutually_exclusive = { focus = SPR_alliance_britain }
		x = 0
		y = 1
		relative_position_id = SPR_policy_liberalisation
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_spanish_union"
			set_rule = { can_create_factions = yes }
			create_faction = SPR_spanish_union
		}
	}
	
	focus = {
		id = SPR_alliance_britain
		icon = GFX_focus_chi_british_cooperation
		prerequisite = { focus = SPR_policy_liberalisation }
		mutually_exclusive = { focus = SPR_spanish_union }
		x = 2
		y = 1
		relative_position_id = SPR_policy_liberalisation
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			country_exists = ENG
			ENG = { is_faction_leader = yes }
			NOT = { has_war_with = ENG }
		}
		bypass = {
			is_in_faction_with = ENG
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_spanish_union"
			ENG = { country_event = { id = generic.2 } }
			hidden_effect = {
				ENG = {
					add_ai_strategy = {
						type = alliance
						id = ROOT
						value = 200
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_agreement_united_states
		icon = GFX_focus_chi_mission_to_the_us
		prerequisite = { focus = SPR_spanish_union }
		x = -1
		y = 1
		relative_position_id = SPR_spanish_union
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		 country_exists = USA
		 NOT = { has_war_with = USA }
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_agreement_united_states"
			add_opinion_modifier = { target = USA modifier = SPR_agreement_united_states }
			USA = { add_opinion_modifier = { target = ROOT modifier = SPR_agreement_united_states } }
		}
	}
	
	focus = {
		id = SPR_return_america
		icon = GFX_goal_generic_territory_or_war
		prerequisite = { focus = SPR_spanish_union focus = SPR_alliance_britain }
		x = 1
		y = 1
		relative_position_id = SPR_spanish_union
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_return_america"
			if = {
				limit = { VEN = { NOT = { has_government = democratic } } }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = VEN
					expire = 0
				}
			}
			if = {
				limit = { DOM = { NOT = { has_government = democratic } } }
				create_wargoal = {
					type = puppet_wargoal_focus
					target = DOM
					expire = 0
				}
			}
			if = {
				limit = {
					VEN = { has_government = democratic }
					DOM = { has_government = democratic }
				}
				every_state = {
					limit = {
						OR = {
							is_core_of = DOM
							is_core_of = VEN
						}
					}
					add_claim_by = ROOT
				}
			}
		}
	}
	
	focus = {
		id = SPR_invite_mexico
		icon = GFX_goal_generic_major_alliance
		prerequisite = { focus = SPR_spanish_union }
		x = 0
		y = 2
		relative_position_id = SPR_spanish_union
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			MEX = {
				is_in_faction = no
				NOT = {
					has_government = communism
					has_government = trozkism
				}
			}
			NOT = { has_war_with = MEX }
		}
		bypass = {
			MEX = { is_in_faction_with = ROOT }
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_invite_mexico"
			MEX = { country_event = { id = generic.5 } }
			hidden_effect = {
				MEX = {
					add_ai_strategy = {
						type = alliance
						id = ROOT
						value = 200
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_dictatorship_icnp
		icon = GFX_focus_generic_support_the_left_right
		prerequisite = { focus = SPR_victory_national_block }
		mutually_exclusive = { focus = SPR_give_way_renewal_spain }
		x = -2
		y = 1
		relative_position_id = SPR_victory_national_block
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				has_country_flag = NW_SPR_AI_MONARCHY
			}
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_dictatorship_icnp"
			add_political_power = 50
			set_politics = {
				ruling_party = fascism
				elections_allowed = no
			}
			promote_character = SPR_jose_gil_robles
			create_country_leader = {
				name = "Juan III"
				desc = "POLITICS_JUAN_I_DESC"
				picture = "gfx/leaders/SPR/Portrait_Juan_III.dds"
				expire = "1965.1.1"
				ideology = dual_monarchy
				traits = {
					democratic_sympathies
					the_legitimist
				}	
			}
			set_party_name = { ideology = monarchy name = SPR_renewal_spain long_name = SPR_renewal_spain }
			custom_effect_tooltip = SPR_dictatorship_icnp_tt

			hidden_effect = {
				set_variable = { spr_king = party_popularity@monarchy }
				set_variable = { zero_king = 0 }
				subtract_from_variable = { zero_king = spr_king }
				add_popularity = {
					ideology = monarchy
					popularity = zero_king
				}
				add_popularity = {
					ideology = fascism
					popularity = spr_king
				}
				clear_variable = spr_king
				clear_variable = zero_king
			}
		}
	}
	
	focus = {
		id = SPR_restore_position_church_in_state
		icon = GFX_z_goal_monarchism_11
		prerequisite = { focus = SPR_give_way_renewal_spain focus = SPR_dictatorship_icnp }
		x = -2
		y = 1
		relative_position_id = SPR_dictatorship_icnp
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_restore_position_church_in_state"
			add_opinion_modifier = {
				target = VAT
				modifier = SPR_restore_position_church_in_state
			}
			VAT = {
				add_opinion_modifier = {
					target = ROOT
					modifier = SPR_restore_position_church_in_state
				}
			}
		}
	}
	
	focus = {
		id = SPR_get_rid_supporters_monarchy
		icon = GFX_z_goal_monarchism_7
		prerequisite = { focus = SPR_dictatorship_icnp }
		x = 0
		y = 1
		relative_position_id = SPR_dictatorship_icnp
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_get_rid_supporters_monarchy"
			add_stability = 0.1
		}
	}
	
	focus = {
		id = SPR_seek_support_in_spanish_phalanga
		icon = GFX_focus_spa_the_phalanx_ascendant
		prerequisite = { focus = SPR_get_rid_supporters_monarchy }
		x = -1
		y = 1
		relative_position_id = SPR_get_rid_supporters_monarchy
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_seek_support_in_spanish_phalanga"
			add_ideas = SPR_support_in_spanish_phalanga
		}
	}
	
	focus = {
		id = SPR_expand_rights_president
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = SPR_get_rid_supporters_monarchy }
		x = 0
		y = 2
		relative_position_id = SPR_get_rid_supporters_monarchy
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_expand_rights_president"
			add_ideas = SPR_expand_rights_president
		}
	}
	
	focus = {
		id = SPR_great_spain
		icon = GFX_z_goal_great_spain
		prerequisite = { focus = SPR_get_rid_supporters_monarchy }
		x = 1
		y = 1
		relative_position_id = SPR_get_rid_supporters_monarchy
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_great_spain"
			add_stability = 0.05
			add_war_support = 0.05
		}
	}
	
	focus = {
		id = SPR_former_borders_aragon
		icon = GFX_goal_generic_more_territorial_claims
		prerequisite = { focus = SPR_expand_rights_president }
		x = -1
		y = 1
		relative_position_id = SPR_expand_rights_president
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_former_borders_aragon"
			every_state = {
				limit = {
					OR = {
						state = 1
						state = 114
						state = 115
						state = 117
						state = 156
						state = 157
					}
				}
				add_claim_by = ROOT
				add_core_of = ROOT
			
				hidden_effect = {
					controller = {
						ROOT = {
							add_ai_strategy = {
								type = antagonize
								id = PREV
								value = 200
							}
						}
					}
				}
			}
		}
	}
	
	focus = {
		id = SPR_spanish_netherlands
		icon = GFX_goal_generic_major_war
		prerequisite = { focus = SPR_expand_rights_president }
		x = 1
		y = 1
		relative_position_id = SPR_expand_rights_president
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_spanish_netherlands"
			every_state = {
				limit = {
					OR = {
						is_core_of = BEL
						state = 29
						state = 1037
						state = 1038
					}
				}
				add_claim_by = ROOT
			}
			add_ai_strategy = {
				type = antagonize
				id = "BEL"
				value = 200
			}
		}
	}
	
	focus = {
		id = SPR_march_in_madrid
		icon = GFX_z_goal_rabgosudarstvo
		prerequisite = { focus = SPR_victory_national_block }
		x = 0
		y = 1
		relative_position_id = SPR_victory_national_block
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_march_in_madrid"
			add_political_power = 150
			country_event = { id = NWspain.21 days = 0 }
		}
	}
	
	focus = {
		id = SPR_expansion_ties_centre
		icon = GFX_goal_generic_improve_relations
		prerequisite = { focus = SPR_march_in_madrid }
		x = 0
		y = 1
		relative_position_id = SPR_march_in_madrid
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_expansion_ties_centre"
			add_popularity = {
				ideology = neutrality
				popularity = -0.05
			}
			add_popularity = {
				ideology = monarchy
				popularity = 0.05
			}
		}
	}
	
	focus = {
		id = SPR_prohibition_left_wing_parties
		icon = GFX_goal_generic_war_with_comintern
		prerequisite = { focus = SPR_victory_national_block }
		x = 2
		y = 1
		relative_position_id = SPR_victory_national_block
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_prohibition_left_wing_parties"
			add_popularity = {
				ideology = democratic
				popularity = -0.1
			}
			add_popularity = {
				ideology = communism
				popularity = -0.1
			}
			add_popularity = {
				ideology = trozkism
				popularity = -0.1
			}
			add_popularity = {
				ideology = anarchism
				popularity = -0.1
			}
		}
	}
	
	focus = {
		id = SPR_repression_against_leftists
		icon = GFX_z_goal_broken_red_star
		prerequisite = { focus = SPR_prohibition_left_wing_parties }
		x = 0
		y = 1
		relative_position_id = SPR_prohibition_left_wing_parties
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_repression_against_leftists"
			add_popularity = {
				ideology = communism
				popularity = -0.05
			}
			add_popularity = {
				ideology = trozkism
				popularity = -0.05
			}
			add_popularity = {
				ideology = anarchism
				popularity = -0.05
			}
			if = {
				limit = { NOT = { has_global_flag = anarcho_spanish_civil_war } }
				custom_effect_tooltip = SPR_repression_against_leftists_tt
			}
		}
	}
	
	focus = {
		id = SPR_collapse_secularization
		icon = GFX_z_goal_monarchism_6
		prerequisite = { focus = SPR_victory_national_block }
		x = 4
		y = 1
		relative_position_id = SPR_victory_national_block
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_collapse_secularization"
			add_ideas = SPR_collapse_secularization
		}
	}
	
	focus = {
		id = SPR_return_land_landowners
		icon = GFX_focus_renounce_the_treaty_of_trianon
		prerequisite = { focus = SPR_collapse_secularization }
		x = 0
		y = 1
		relative_position_id = SPR_collapse_secularization
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_return_land_landowners"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_limiting_power_oligarchy
		icon = GFX_focus_rom_parties_end
		prerequisite = { focus = SPR_return_land_landowners }
		x = -2
		y = 1
		relative_position_id = SPR_return_land_landowners
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_limiting_power_oligarchy"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_introduction_progressive_tax_rent
		icon = GFX_z_goal_gold_up
		prerequisite = { focus = SPR_return_land_landowners }
		x = 0
		y = 1
		relative_position_id = SPR_return_land_landowners
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_introduction_progressive_tax_rent"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_overcome_crisis
		icon = GFX_z_goal_final_anticrisis
		prerequisite = { focus = SPR_expansion_ties_centre }
		prerequisite = { focus = SPR_limiting_power_oligarchy }
		prerequisite = { focus = SPR_introduction_progressive_tax_rent }
		x = -1
		y = 1
		relative_position_id = SPR_limiting_power_oligarchy
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 20
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_overcome_crisis"
			remove_ideas = SPR_social_crisis
			if = {
				limit = { has_idea = SPR_catalon_nationalism }
				remove_ideas = SPR_catalon_nationalism
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_construction_new_railways
		icon = GFX_goal_generic_construct_infrastructure
		prerequisite = { focus = SPR_overcome_crisis }
		x = 0
		y = 1
		relative_position_id = SPR_overcome_crisis
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_construction_new_railways"
			capital_scope = {
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
				every_neighbor_state = {
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				} 
			}
		}
	}
	
	focus = {
		id = SPR_preparing_for_wars_conquest
		icon = GFX_z_goal_authority
		prerequisite = { focus = SPR_construction_new_railways }
		x = 1
		y = 1
		relative_position_id = SPR_construction_new_railways
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_preparing_for_wars_conquest"
			add_war_support = 0.03
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_ports_barcelona
		icon = GFX_goal_generic_construct_naval_dockyard
		prerequisite = { focus = SPR_construction_new_railways }
		x = -1
		y = 1
		relative_position_id = SPR_construction_new_railways
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
		}
		bypass = {
			165 = {
				free_building_slots = {
					building = dockyard
					size < 1
					include_locked = yes
				}
			}
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_ports_barcelona"
			165 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = dockyard
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	##########################
	#### INDUSTRY SECTION ####
	##########################
	
	focus = {
		id = SPR_economic_reform
		icon = GFX_focus_hol_the_foundations_of_defense
		x = 8
		y = -3
		offset = {
			x = 9
			y = 2
			trigger = {
				has_completed_focus = SPR_victory_popular_front
			}
		}
		offset = {
			x = -16
			y = 0
			trigger = {
				has_completed_focus = SPR_victory_liberal_party
			}
		}
		offset = {
			x = 0
			y = 0
			trigger = {
				has_completed_focus = SPR_victory_national_block
			}
		}
		relative_position_id = SPR_ports_barcelona
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			if = {
				limit = { tag = SPR }
				has_completed_focus = SPR_elections_second_cortes_republic
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_economic_reform"
			add_tech_bonus = {
				name = industrial_bonus
				bonus = 1.0
				uses = 2
				category = industry
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_development_catalonia
		icon = GFX_goal_generic_construct_mil_factory
		prerequisite = { focus = SPR_economic_reform }
		x = -2
		y = 1
		relative_position_id = SPR_economic_reform
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			165 = {
				controller = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_development_catalonia"
			165 = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_development_capital_industry
		icon = GFX_goal_generic_construct_civ_factory
		prerequisite = { focus = SPR_economic_reform }
		x = 0
		y = 1
		relative_position_id = SPR_economic_reform
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			capital_scope = {
				ROOT = { has_full_control_of_state = PREV }
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_development_capital_industry"
			capital_scope = {
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_development_north_spain
		icon = GFX_z_goal_factory_complex
		prerequisite = { focus = SPR_economic_reform }
		x = 2
		y = 1
		relative_position_id = SPR_economic_reform
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			982 = {
				controller = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
			790 = {
				controller = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_development_north_spain"
			982 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			790 = {
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = SPR_university_madrid
		icon = GFX_z_goal_vienna_circle
		#prerequisite = { focus = SPR_development_catalonia }
		#prerequisite = { focus = SPR_development_capital_industry }
		#prerequisite = { focus = SPR_development_north_spain }
		x = 0
		y = 1
		relative_position_id = SPR_development_capital_industry
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
		}
		allow_branch = {
			always = no
		}
		available = {
			41 = {
				owner = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_university_madrid"
			add_research_slot = 1
		}
	}
	
	focus = {
		id = SPR_university_barselon
		icon = GFX_z_goal_great_science
		prerequisite = {
			focus = SPR_university_madrid
		}
		x = 0
		y = 1
		relative_position_id = SPR_university_madrid
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
		}
		available = {
			num_of_factories > 25
			165 = {
				owner = {
					OR = {
						tag = ROOT
						is_subject_of = ROOT
					}
				}
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_university_madrid"
			add_research_slot = 1
		}
	}
	
	focus = {
		id = SPR_bridging_gap
		icon = GFX_z_goal_atlantic_cooperation_program
		prerequisite = {
			focus = SPR_university_barselon
		}
		x = 0
		y = 1
		relative_position_id = SPR_university_barselon
		
		cost = 7.2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
		}
		available = {
			num_of_factories > 50
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPR_bridging_gap"
			add_research_slot = 1
		}
	}
}
