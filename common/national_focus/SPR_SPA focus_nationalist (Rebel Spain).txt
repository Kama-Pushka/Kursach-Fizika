### search_filters = {FOCUS_FILTER_POLITICAL}
### search_filters = {FOCUS_FILTER_RESEARCH}
### search_filters = {FOCUS_FILTER_INDUSTRY}
### search_filters = {FOCUS_FILTER_STABILITY}
### search_filters = {FOCUS_FILTER_WAR_SUPPORT}
### search_filters = {FOCUS_FILTER_MANPOWER}
### search_filters = {FOCUS_FILTER_ANNEXATION}
### search_filters = {FOCUS_FILTER_SPA_CIVIL_WAR}
### search_filters = {FOCUS_FILTER_SPA_CARLIST_UPRISING}
### search_filters = {FOCUS_FILTER_SPA_ANARCHIST_UPRISING}

focus_tree = {
	id = national_spain_focus
	
	country = {
		factor = 0
		
		modifier = {
			add = 10
			tag = SPA
		}
	}

	default = no

	continuous_focus_position = { x = 50 y = 2500 }

	initial_show_position = {
		x = 17
		y = 0
	}

#  #  ##  ### ###  ##  #  #  ##  #   ###  ## ###     ###  #  # ### #   ###     #  # ###  
## # #  #  #   #  #  # ## # #  # #    #  #    #      #  # #  #  #  #   #  #    #  # #  # 
# ## ####  #   #  #  # # ## #### #    #   #   #      ###  #  #  #  #   #  # ## #  # ###  
#  # #  #  #   #  #  # #  # #  # #    #    #  #      #  # #  #  #  #   #  #    #  # #    
#  # #  #  #  ###  ##  #  # #  # ### ### ##   #      ###   ##  ### ### ###      ##  #    

### BRANCH

	focus = {
		id = SPA_create_coordinating_junta
		icon = GFX_z_goal_government
		x = 17
		y = 0
		cost = 2
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 100
		}
		available = {
		}
		bypass = {
		}
		
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPA_create_coordinating_junta"
			add_political_power = 200
			add_ideas = extensive_conscription
			add_ideas = partial_economic_mobilisation
		}
	}

#  #  ##  ### ###  ##  #  #  ##  #   ###  ## ###  ##            ###  ##   ##  ##  ###  ## ###  ## 
## # #  #  #   #  #  # ## # #  # #    #  #    #  #              #   #  # #   #  #  #  #    #  #   
# ## ####  #   #  #  # # ## #### #    #   #   #   #      ##     ##  ####  #  #     #   #   #   #  
#  # #  #  #   #  #  # #  # #  # #    #    #  #    #            #   #  #   # #  #  #    #  #    # 
#  # #  #  #  ###  ##  #  # #  # ### ### ##   #  ##             #   #  # ##   ##  ### ##   #  ##  

### BRANCH

	focus = {
		id = SPA_the_phalanx_ascendant
		available = {
			has_global_flag = spanish_civil_war
		}
		bypass = {
		}
		prerequisite = { focus = SPA_create_coordinating_junta }
		mutually_exclusive = { focus = SPA_unify_the_nationalist_front focus = SPA_supremacy_of_the_communion }
		
		icon = GFX_focus_spa_the_phalanx_ascendant
		x = -11
		y = 1
		relative_position_id = SPA_create_coordinating_junta
		cost = 5
		
		ai_will_do = {
			factor = 30
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			add_popularity = {
			    ideology = fascism
			    popularity = 0.1
			}
			activate_mission = SPA_carlist_uprising_mission
		}
	}

	focus = {
		id = SPA_bolster_offensive_infrastructure
		available = {
			NOT = { has_global_flag = scw_over }
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_phalanx_ascendant }
		
		icon = GFX_z_goal_city_road_cei
		x = -3
		y = 1
		relative_position_id = SPA_the_phalanx_ascendant
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPA_bolster_offensive_infrastructure_1inf }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 5
			}
			if = {
				limit = {
					NOT = {
						has_global_flag = spanish_civil_war
					}
				}
				custom_effect_tooltip = SPA_bolster_offensive_infrastructure_tt
			}
			if = {
				limit = {
					has_global_flag = spanish_civil_war
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 0
						}
						is_core_of = ROOT
						any_neighbor_state = {
							owner = { has_war_with = ROOT }
						}
					}
					set_state_flag = SPA_bolster_offensive_infrastructure_1inf
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 0
						}
						is_core_of = ROOT
						NOT = { has_state_flag = SPA_bolster_offensive_infrastructure_1inf }
						any_neighbor_state = {
							owner = { has_war_with = ROOT }
						}
					}
					set_state_flag = SPA_bolster_offensive_infrastructure_1inf
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
				random_owned_controlled_state = {
					limit = {
						free_building_slots = {
							building = infrastructure
							size > 0
						}
						is_core_of = ROOT
						NOT = { has_state_flag = SPA_bolster_offensive_infrastructure_1inf }
						any_neighbor_state = {
							owner = { has_war_with = ROOT }
						}
					}
					set_state_flag = SPA_bolster_offensive_infrastructure_1inf
					add_building_construction = {
						type = infrastructure
						level = 1
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SPA_the_fifth_column
		available = {
			NOT = { has_global_flag = scw_over }
		}
		bypass = {
		}
		prerequisite = { focus = SPA_bolster_offensive_infrastructure }
		
		icon = GFX_focus_prc_infiltration
		x = -1
		y = 1
		relative_position_id = SPA_bolster_offensive_infrastructure
		cost = 5

		available_if_capitulated = yes

		completion_reward = {
			division_template = {
				name = "Fifth Columnist Brigade"
				template_counter = 33
				priority = 1
				division_names_group = SPR_INF_01
				is_locked = yes
				regiments = {
					infantry = { x = 0 y = 0 }
					infantry = { x = 0 y = 1 }
					infantry = { x = 0 y = 2 }
				}
			}
			custom_effect_tooltip = SPA_the_fifth_column_tt
		}
	}

	focus = {
		id = SPA_emergency_munitions_corporations
		available = {
			NOT = { has_global_flag = scw_over }
		}
		bypass = {
		}
		prerequisite = { focus = SPA_bolster_offensive_infrastructure }
		prerequisite = { focus = SPA_secure_the_national_defense_council }
		
		icon = GFX_goal_generic_construct_mil_factory
		x = 1
		y = 1
		relative_position_id = SPA_bolster_offensive_infrastructure
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			add_ideas = war_economy
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 7
			}
			every_state = {
				limit = { has_state_flag = SPA_emergency_munitions_corporations_1mil }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_ideas = war_economy
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 7
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_emergency_munitions_corporations_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_emergency_munitions_corporations_1mil }
				}
				set_state_flag = SPA_emergency_munitions_corporations_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_emergency_munitions_corporations_1mil }
				}
				set_state_flag = SPA_emergency_munitions_corporations_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPA_the_corpo_truppe_volontarie
		available = {
			NOT = { has_global_flag = scw_over }
			has_volunteers_amount_from = {
				tag = ITA
				count > 0
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_phalanx_ascendant focus = SPA_unify_the_nationalist_front }
		
		icon = GFX_focus_ITA_a_colonial_empire
		x = 4
		y = 1
		relative_position_id = SPA_the_phalanx_ascendant
		cost = 5

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			ITA = {
				add_timed_idea = { idea = SPA_spanish_civil_war_commitments days = 730 }
				add_opinion_modifier = { target = ROOT modifier = SPA_spanish_civil_war_commitments }
				hidden_effect = {
					if = {
						limit = {
							is_ai = yes
							ROOT = { has_volunteers_amount_from = { tag = PREV count > 0 } }
						}
						recall_volunteers_from = ROOT
					}
					add_ai_strategy = { type = send_volunteers_desire id = ROOT value = 200 }
					add_ai_strategy = { type = support id = ROOT value = 200 }
				}
			}
			add_tech_bonus = {
				name = SPA_the_corpo_truppe_volontarie
				bonus = 1.0
				uses = 1
				category = infantry_weapons
			}
			add_tech_bonus = {
				name = SPA_the_corpo_truppe_volontarie
				bonus = 1.0
				uses = 1
				category = artillery
			}
		}
	}

	focus = {
		id = SPA_the_condor_legion
		available = {
			NOT = { has_global_flag = scw_over }
			has_volunteers_amount_from = {
				tag = GER
				count > 0
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_phalanx_ascendant focus = SPA_unify_the_nationalist_front }
		
		icon = GFX_z_goal_expansion_of_wehrmacht
		x = 6
		y = 1
		relative_position_id = SPA_the_phalanx_ascendant
		cost = 5

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			GER = {
				add_timed_idea = { idea = SPA_spanish_civil_war_commitments days = 730 }
				add_opinion_modifier = { target = ROOT modifier = SPA_spanish_civil_war_commitments }
				hidden_effect = {
					if = {
						limit = {
							is_ai = yes
							ROOT = { has_volunteers_amount_from = { tag = PREV count > 0 } }
						}
						recall_volunteers_from = ROOT
					}
					add_ai_strategy = { type = send_volunteers_desire id = ROOT value = 200 }
					add_ai_strategy = { type = support id = ROOT value = 200 }
				}
			}
			add_tech_bonus = {
				name = SPA_the_condor_legion
				bonus = 1.0
				uses = 1
				category = light_fighter
			}
			add_tech_bonus = {
				name = SPA_the_condor_legion
				bonus = 1.0
				uses = 1
				category = cas_bomber
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SPA_wilhelm_ritter_von_thoma
		}
	}

	focus = {
		id = SPA_equipment_shipments
		available = {
			NOT = { has_global_flag = scw_over }
			OR = {
				has_volunteers_amount_from = {
					tag = ITA
					count > 0
				}
				has_volunteers_amount_from = {
					tag = GER
					count > 0
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_corpo_truppe_volontarie }
		prerequisite = { focus = SPA_the_condor_legion }
		
		icon = GFX_z_goal_Armored_control
		x = 1
		y = 1
		relative_position_id = SPA_the_corpo_truppe_volontarie
		cost = 5

		available_if_capitulated = yes

		completion_reward = {
			GER = {
				add_timed_idea = { idea = SPR_equipment_shipments days = 730 }
				add_ai_strategy = { type = send_lend_lease_desire id = SPA value = 200 }
			}
			ITA = {
				add_timed_idea = { idea = SPR_equipment_shipments days = 730 }
				add_ai_strategy = { type = send_lend_lease_desire id = SPA value = 200 }
			}
			add_timed_idea = { idea = SPR_equipment_shipments_spain days = 730 }
		}
	}

	focus = {
		id = SPA_obtain_training_staff
		available = {
			NOT = { has_global_flag = scw_over }
			OR = {
				has_volunteers_amount_from = {
					tag = ITA
					count > 0
				}
				has_volunteers_amount_from = {
					tag = GER
					count > 0
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_equipment_shipments }
		
		icon = GFX_focus_generic_military_academy
		x = -1
		y = 1
		relative_position_id = SPA_equipment_shipments
		cost = 5

		available_if_capitulated = yes

		completion_reward = {
			army_experience = 50
			add_timed_idea = { idea = SPA_foreign_training_staff days = 730 }
		}
	}

	focus = {
		id = SPA_doctrinal_advancements
		available = {
			NOT = { has_global_flag = scw_over }
			OR = {
				has_volunteers_amount_from = {
					tag = ITA
					count > 0
				}
				has_volunteers_amount_from = {
					tag = GER
					count > 0
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_equipment_shipments }
		
		icon = GFX_goal_generic_army_doctrines
		x = 1
		y = 1
		relative_position_id = SPA_equipment_shipments
		cost = 5

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = SPA_doctrinal_advancements
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
			add_doctrine_cost_reduction = {
				name = SPA_doctrinal_advancements
				cost_reduction = 0.5
				uses = 1
				category = air_doctrine
			}
		}
	}

	focus = {
		id = SPA_secure_the_national_defense_council
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_the_phalanx_ascendant }
		
		icon = GFX_goal_generic_political_pressure
		x = 0
		y = 1
		relative_position_id = SPA_the_phalanx_ascendant
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY}
		completion_reward = {
			add_stability = 0.2
			add_ideas = national_army
		}
	}

	focus = {
		id = SPA_suspend_the_constitution
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_secure_the_national_defense_council }
		
		icon = GFX_z_goal_end_allies
		x = 0
		y = 1
		relative_position_id = SPA_secure_the_national_defense_council
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			add_ideas = limited_exports
			add_ideas = severe_migration_control
			add_political_power = 120
			add_popularity = {
			    ideology = democratic
			    popularity = -1
			}
			hidden_effect = {
				set_temp_variable = {
					var = suspend_the_constitution_var
					value = party_popularity@democratic
				}
				multiply_temp_variable = {
					var = suspend_the_constitution_var
					value = -0.5
				}
			}
			custom_effect_tooltip = ENG_alliance_with_germany_tt
			add_stability = suspend_the_constitution_var
		}
	}

	focus = {
		id = SPA_primo_de_rivera_prisoner_exchange
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_secure_the_national_defense_council }
		
		icon = GFX_z_goal_generic_papers
		x = 2
		y = 1
		relative_position_id = SPA_secure_the_national_defense_council
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			unlock_decision_tooltip = SPR_exchange_primo_de_rivera
		}
	}

	focus = {
		id = SPA_eliminate_the_carlists
		available = {
		}
		bypass = {
			OR = {
				has_war_with = SPB
				has_global_flag = SPR_carlist_uprising_flag
				has_global_flag = scw_over
			}
		}
		prerequisite = { focus = SPA_suspend_the_constitution }
		
		icon = GFX_focus_spa_eliminate_the_carlists
		x = -1
		y = 1
		relative_position_id = SPA_suspend_the_constitution
		cost = 5

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_SPA_CIVIL_WAR}
		completion_reward = {
			add_timed_idea = { idea = SPA_eliminate_the_carlists days = 60 }
			custom_effect_tooltip = SPA_eliminate_the_carlists_tt
			if = {
				limit = {
					NOT = { has_war_with = SPB }
				}
				hidden_effect = { country_event = lar_spain.7 }
			}
		}
	}

	focus = {
		id = SPA_absorb_carlist_remnants
		available = {
			NOT = {
				any_country_with_original_tag = {
					original_tag_to_check = SPA
					exists = yes
					has_completed_focus = SPA_supremacy_of_the_communion
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_eliminate_the_carlists }
		
		icon = GFX_z_goal_repress_carlists
		x = -1
		y = 1
		relative_position_id = SPA_eliminate_the_carlists
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_MANPOWER}
		completion_reward = {
			add_popularity = {
			    ideology = neutrality
			    popularity = 0.1
			}
			add_popularity = {
			    ideology = monarchy
			    popularity = -0.1
			}
			add_manpower = 25000
			add_political_power = 60
		}
	}

	focus = {
		id = SPA_establish_the_directory
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_suspend_the_constitution }
		prerequisite = { focus = SPA_primo_de_rivera_prisoner_exchange }
		
		icon = GFX_z_goal_lose_democracy
		x = 1
		y = 1
		relative_position_id = SPA_suspend_the_constitution
		cost = 5

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY}
		completion_reward = {
			add_stability = 0.05
			custom_effect_tooltip = SPA_establish_the_directory_tt
			hidden_effect = {
				drop_cosmetic_tag = yes
				set_cosmetic_tag = SPA_directory
			}
			if = {
				limit = {
					NOT = { has_global_flag = spanish_civil_war }
				}
				effect_tooltip = {
					create_country_leader = {
						name = "Emilio Mola"
						desc = "POLITICS_EMILIO_MOLA_DESC"
						picture = "GFX_portrait_emilio_mola"
						expire = "1965.1.1"
						ideology = despotism
						traits = {
							the_director
						}
					}
				}
			}
			if = {
				limit = {
					has_government = neutrality
				}
				add_country_leader_role = {
					character = SPA_emilio_mola
					country_leader = {
						ideology = despotism
						traits = { the_director }
						expire = "1965.1.1"
					}
					promote_leader = yes 
				}
				hidden_effect = {
					add_country_leader_role = {
						character = SPA_emilio_mola
						country_leader = {
							ideology = falangism
							traits = { the_director }
							expire = "1965.1.1"
						}
						promote_leader = yes 
					}
				}
			}
			if = {
				limit = {
					has_government = fascism
				}
				add_country_leader_role = {
					character = SPA_emilio_mola
					country_leader = {
						ideology = falangism
						traits = { the_director }
						expire = "1965.1.1"
					}
					promote_leader = yes 
				}
				hidden_effect = {
					add_country_leader_role = {
						character = SPA_emilio_mola
						country_leader = {
							ideology = despotism
							traits = { the_director }
							expire = "1965.1.1"
						}
						promote_leader = yes 
					}
				}
			}
		}
	}

	focus = {
		id = SPA_a_one_party_state
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_establish_the_directory }
		prerequisite = { focus = SPA_eliminate_the_carlists }
		
		icon = GFX_focus_generic_strike_at_democracy2
		x = -1
		y = 1
		relative_position_id = SPA_establish_the_directory
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			set_politics = {
				ruling_party = fascism
			}
			set_party_name = { ideology = fascism long_name = SPR_fascism_falange_party_long name = SPR_fascism_falange_party }
			add_popularity = {
			    ideology = fascism
			    popularity = 1
			}
			hidden_effect = {
				set_temp_variable = {
					var = a_one_party_state_var
					value = party_popularity@democratic
				}
				add_to_temp_variable = {
					var = a_one_party_state_var
					value = party_popularity@neutrality
				}
				add_to_temp_variable = {
					var = a_one_party_state_var
					value = party_popularity@communism
				}
				add_to_temp_variable = {
					var = a_one_party_state_var
					value = party_popularity@trozkism
				}
				add_to_temp_variable = {
					var = a_one_party_state_var
					value = party_popularity@anarchism
				}
				add_to_temp_variable = {
					var = a_one_party_state_var
					value = party_popularity@monarchy
				}
				multiply_temp_variable = {
					var = a_one_party_state_var
					value = -0.5
				}
			}
			custom_effect_tooltip = SPA_a_one_party_state_tt
			add_stability = a_one_party_state_var
		}
	}

	focus = {
		id = SPA_expand_conscription
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_establish_the_directory focus = SPA_extol_the_martyrs_of_the_war }
		
		icon = GFX_goal_generic_axis_build_infantry
		x = 3
		y = 1
		relative_position_id = SPA_establish_the_directory
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			add_ideas = SPA_expand_conscription
		}
	}

	focus = {
		id = SPA_safeguard_the_freedom_of_worship
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_establish_the_directory focus = SPA_extol_the_martyrs_of_the_war }
		
		icon = GFX_z_goal_religious_consensus
		x = 5
		y = 1
		relative_position_id = SPA_establish_the_directory
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL}
		completion_reward = {
			add_popularity = {
			    ideology = monarchy
			    popularity = 0.05
			}
			add_stability = 0.1
			add_political_power = 60
		}
	}

	focus = {
		id = SPA_prepare_the_pyrenees_defenses
		available = {
			has_full_control_of_state = 792
			has_full_control_of_state = 172
			has_full_control_of_state = 166
			has_full_control_of_state = 794
			has_full_control_of_state = 165
		}
		bypass = {
		}
		prerequisite = { focus = SPA_establish_the_directory focus = SPA_extol_the_martyrs_of_the_war }
		
		icon = GFX_goal_generic_fortify_city
		x = 4
		y = 2
		relative_position_id = SPA_establish_the_directory
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPA_prepare_the_pyrenees_defenses_tt
			hidden_effect = {
				792 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 6756
						}
						level = 2
						instant_build = yes
					}
				}
				172 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 3737
							id = 3931
						}
						level = 2
						instant_build = yes
					}
				}
				166 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 11838
						}
						level = 2
						instant_build = yes
					}
				}
				794 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 915
							id = 899
						}
						level = 2
						instant_build = yes
					}
				}
				165 = {
					add_building_construction = {
						type = bunker
						province = {
							id = 3899
							id = 3898
							id = 11779
							id = 9824
						}
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SPA_develop_all_talent
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_a_one_party_state }
		
		icon = GFX_focus_research
		x = -3
		y = 1
		relative_position_id = SPA_a_one_party_state
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = SPA_regional_agrarian_commissions
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_a_one_party_state }
		
		icon = GFX_goal_generic_consumer_goods
		x = -1
		y = 1
		relative_position_id = SPA_a_one_party_state
		cost = 10

		available_if_capitulated = yes
		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPA_regional_agrarian_commissions_1civ }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}

		completion_reward = {
			add_ideas = SPA_regional_agrarian_commissions
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_regional_agrarian_commissions_1civ
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_regional_agrarian_commissions_1civ }
				}
				set_state_flag = SPA_regional_agrarian_commissions_1civ
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPA_the_national_syndicalist_state
		available = {
			has_global_flag = scw_over
		}
		bypass = {
		}
		prerequisite = { focus = SPA_a_one_party_state }
		
		icon = GFX_z_goal_power_fascist_council
		x = 1
		y = 1
		relative_position_id = SPA_a_one_party_state
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			add_political_power = 100
			custom_effect_tooltip = SPA_the_national_syndicalist_state_tt
			hidden_effect = {
				drop_cosmetic_tag = yes
				set_cosmetic_tag = SPA_spanish_empire
				SPA_emilio_mola = {
					remove_country_leader_role = { ideology = despotism }
					remove_country_leader_role = { ideology = falangism }
				}
			}
			SPA_jose_antonio_primo_de_rivera = {
				add_country_leader_role = {
					country_leader = {
						expire = "1965.1.1"
						ideology = falangism
						traits = {
							sins_of_the_father
						}	
					}
					promote_leader = yes
				}
			}
		}
	}

	focus = {
		id = SPA_syndicalize_production
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_national_syndicalist_state }
		
		icon = GFX_z_goal_principles_of_corporatism
		x = -1
		y = 1
		relative_position_id = SPA_the_national_syndicalist_state
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPA_syndicalize_production_1civ }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			every_state = {
				limit	= {	has_state_flag = SPA_syndicalize_production_1mil }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_tech_bonus = {
				name = SPA_syndicalize_production
				bonus = 1.0
				uses = 1
				category = industry
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_syndicalize_production_1civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_syndicalize_production_1civ }
				}
				set_state_flag = SPA_syndicalize_production_1mil
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPA_strengthen_the_supreme_reality_of_spain
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_national_syndicalist_state }
		
		icon = GFX_focus_spa_strengthen_the_supreme_reality_of_spain
		x = -3
		y = 1
		relative_position_id = SPA_the_national_syndicalist_state
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY}
		completion_reward = {
			custom_effect_tooltip = SPR_recovering_from_civil_war_focus_tt
			add_stability = 0.1
			every_owned_state = {
				limit = {
					OR = {
						state = 165
						state = 171
						state = 792
					}
				}
				add_state_modifier = {
					modifier = {
						local_supplies = 0.25
						local_manpower = 0.25
					}
				}
			}
		}
	}

	focus = {
		id = SPA_glory_and_wealth_on_the_sea_lanes
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_strengthen_the_supreme_reality_of_spain }
		
		icon = GFX_goal_generic_navy_doctrines_tactics
		x = -2
		y = 1
		relative_position_id = SPA_strengthen_the_supreme_reality_of_spain
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			navy_experience = 25
			add_tech_bonus = {
				name = SPA_glory_and_wealth_on_the_sea_lanes
				bonus = 1
				uses = 1
				category = cl_tech
				category = ca_tech
			}
			add_tech_bonus = {
				name = SPA_glory_and_wealth_on_the_sea_lanes
				bonus = 1
				uses = 1
				category = dd_tech
			}
			add_tech_bonus = {
				name = SPA_glory_and_wealth_on_the_sea_lanes
				bonus = 1
				uses = 1
				category = ss_tech
			}
		}
	}

	focus = {
		id = SPA_improve_domestic_naval_facilities
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_glory_and_wealth_on_the_sea_lanes }
		
		icon = GFX_goal_generic_construct_naval_dockyard
		x = -2
		y = 1
		relative_position_id = SPA_glory_and_wealth_on_the_sea_lanes
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPA_improve_domestic_naval_facilities_3DY }
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
			}
		}

		completion_reward = {
			navy_experience = 25
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
				set_state_flag = SPA_improve_domestic_naval_facilities_3DY
			}
		}
	}

	focus = {
		id = SPA_a_great_maritime_power
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_improve_domestic_naval_facilities }
		
		icon = GFX_goal_generic_navy_battleship
		x = 0
		y = 1
		relative_position_id = SPA_improve_domestic_naval_facilities
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPA_a_great_maritime_power_4DY }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			navy_experience = 50
			add_tech_bonus = {
				name = SPA_a_great_maritime_power
				bonus = 1
				uses = 1
				category = bb_tech
			}
			add_tech_bonus = {
				name = SPA_a_great_maritime_power
				bonus = 1
				uses = 1
				category = cv_tech
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 1
						include_locked = yes
					}
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = dockyard
					level = 2
					instant_build = yes
				}
				set_state_flag = SPA_a_great_maritime_power_4DY
			}
		}
	}

	focus = {
		id = SPA_commerce_protection
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_glory_and_wealth_on_the_sea_lanes }
		
		icon = GFX_goal_generic_navy_cruiser
		x = 0
		y = 1
		relative_position_id = SPA_glory_and_wealth_on_the_sea_lanes
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = SPA_commerce_protection
				bonus = 1
				uses = 1
				category = cl_tech
				category = ca_tech
			}
			add_doctrine_cost_reduction = {
				name = SPA_commerce_protection
				cost_reduction = 0.5
				uses = 2
				category = convoy_defense_tree
			}
		}
	}

	focus = {
		id = SPA_exemplify_the_art_and_science_of_warfare
		available = {
			num_of_factories > 50
		}
		bypass = {
		}
		prerequisite = { focus = SPA_strengthen_the_supreme_reality_of_spain }
		
		icon = GFX_focus_research2
		x = 1
		y = 1
		relative_position_id = SPA_strengthen_the_supreme_reality_of_spain
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = SPA_the_will_to_empire
		available = {
			has_full_control_of_state = 290
			has_country_leader = {
				character = SPA_jose_antonio_primo_de_rivera
				ruling_only = yes
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_strengthen_the_supreme_reality_of_spain }
		
		icon = GFX_z_national_greatness
		x = 0
		y = 2
		relative_position_id = SPA_strengthen_the_supreme_reality_of_spain
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			add_political_power = 200
			290 = {
				if = {
					limit = {
						290 = {
							free_building_slots = {
								building = industrial_complex
								size > 0
								include_locked = yes
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = industrial_complex
						level = 1
						instant_build = yes
					}
				}
			}
			add_country_leader_trait = empire_builder
		}
	}

	focus = {
		id = SPA_unite_iberia
		available = {
			OR = {
				AND = {
					country_exists = POR
					POR = {
						NOT = { is_in_faction_with = ROOT }
						NOT = { is_subject_of = ROOT }
						NOT = { has_war_with = ROOT }
						all_core_state = { is_owned_by = THIS }
					}
				}
				AND = {
					ENG = { owns_state = 118 }
					NOT = { is_in_faction_with = ENG }
				}
			}
		}
		bypass = {
			NOT = { country_exists = POR }
		}
		prerequisite = { focus = SPA_the_will_to_empire }
		
		icon = GFX_focus_generic_attack_portugal
		x = -2
		y = 1
		relative_position_id = SPA_the_will_to_empire
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			if = {
				limit = {
					POR = {
						NOT = { is_in_faction_with = ROOT }
						NOT = { is_subject_of = ROOT }
						NOT = { has_war_with = ROOT }
					}
				}
				create_wargoal = {
				    type = annex_everything
				    target = POR
				    expire = 0
				}
			}
			if = {
				limit = {
					ENG = {
						owns_state = 118
					}
				}
				create_wargoal = {
					type = take_state_focus
					target = ENG
					generator = { 118 }
					expire = 0
				}
			}
		}
	}

	focus = {
		id = SPA_absorb_the_portuguese_empire
		available = {
			OR = {
				AND = {
					country_exists = MZB
					MZB = {
						NOT = { is_subject_of = ROOT }
						NOT = { is_in_faction_with = ROOT }
					}
				}
				AND = {
					country_exists = ANG
					ANG = {
						NOT = { is_subject_of = ROOT }
						NOT = { is_in_faction_with = ROOT }
					}
				}
				AND = {
					country_exists = GNB
					GNB = {
						NOT = { is_subject_of = ROOT }
						NOT = { is_in_faction_with = ROOT }
					}
				}
				AND = {
					country_exists = BRA
					BRA = {
						NOT = { is_subject_of = ROOT }
						NOT = { is_in_faction_with = ROOT }
					}
				}
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_unite_iberia }
		
		icon = GFX_goal_generic_forceful_treaty
		x = 1
		y = 1
		relative_position_id = SPA_unite_iberia
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			if = {
				limit = {
					country_exists = BRA
					BRA = {
						NOT = { is_subject_of = ROOT }
						NOT = { is_in_faction_with = ROOT }
					}
				}
				create_wargoal = {
				    type = annex_everything
				    target = BRA
				    expire = 0
				}
			}
			if = {
				limit = {
					country_exists = MZB
					MZB = {
						NOT = { is_subject_of = ROOT }
						NOT = { is_in_faction_with = ROOT }
					}
				}
				create_wargoal = {
				    type = annex_everything
				    target = MZB
				    expire = 0
				}
			}
			if = {
				limit = {
					country_exists = ANG
					ANG = {
						NOT = { is_subject_of = ROOT }
						NOT = { is_in_faction_with = ROOT }
					}
				}
				create_wargoal = {
				    type = annex_everything
				    target = ANG
				    expire = 0
				}
			}
			if = {
				limit = {
					country_exists = GNB
					GNB = {
						NOT = { is_subject_of = ROOT }
						NOT = { is_in_faction_with = ROOT }
					}
				}
				create_wargoal = {
				    type = annex_everything
				    target = GNB
				    expire = 0
				}
			}
		}
	}

	focus = {
		id = SPA_claim_the_aragonese_possessions
		available = {
			NOT = {
				is_in_faction_with = ITA
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_unite_iberia }
		
		icon = GFX_goal_generic_territory_or_war
		x = 0
		y = 2
		relative_position_id = SPA_unite_iberia
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			add_state_claim = 1
			add_state_claim = 116
			add_state_claim = 182
			add_state_claim = 183
			add_state_claim = 114
			add_state_claim = 115
			add_state_claim = 156
			add_state_claim = 117
			add_state_claim = 448
			add_state_claim = 449
			add_state_claim = 450
			add_state_claim = 451
			add_state_claim = 661
			add_state_claim = 662
			add_state_claim = 663
			create_wargoal = {
				type = take_state_focus
				target = ITA
				generator = { 114 115 156 117 448 449 450 451 661 662 663 }
				expire = 0
			}
		}
	}

	focus = {
		id = SPA_reclaim_spanish_africa
		available = {
			NOT = {
				is_in_faction_with = FRA
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_will_to_empire }
		
		icon = GFX_goal_generic_occupy_states_ongoing_war
		x = 0
		y = 1
		relative_position_id = SPA_the_will_to_empire
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			add_state_claim = 461
			add_state_claim = 462
			add_state_claim = 459
			add_state_claim = 460
			add_state_claim = 513
			add_state_claim = 458
			add_state_claim = 665
			create_wargoal = {
				type = take_state_focus
				target = FRA
				generator = { 461 462 459 460 513 458 665 }
				expire = 0
			}
		}
	}

	focus = {
		id = SPA_reassert_american_dominance
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_will_to_empire }
		
		icon = GFX_goal_generic_political_pressure
		x = 1
		y = 2
		relative_position_id = SPA_the_will_to_empire
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPA_reassert_american_dominance_tt
		}
	}

	focus = {
		id = SPA_retake_the_americas
		available = {
			OR = {
				NOT = { is_in_faction_with = ARG }
				NOT = { is_in_faction_with = CHL }
				NOT = { is_in_faction_with = PRU }
				NOT = { is_in_faction_with = VEN }
				NOT = { is_in_faction_with = COL }
				NOT = { is_in_faction_with = BOL }
				NOT = { is_in_faction_with = MEX }
				NOT = { is_in_faction_with = USA }
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_reassert_american_dominance }
		
		icon = GFX_focus_spa_the_war_of_vengeance
		x = 0
		y = 1
		relative_position_id = SPA_reassert_american_dominance
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			if = {
				limit = {
					NOT = { is_in_faction_with = ARG }
				}
				create_wargoal = {
				    type = annex_everything
				    target = ARG
				    expire = 0
				}
			}
			if = {
				limit = {
					NOT = { is_in_faction_with = CHL }
				}
				create_wargoal = {
				    type = annex_everything
				    target = CHL
				    expire = 0
				}
			}
			if = {
				limit = {
					NOT = { is_in_faction_with = PRU }
				}
				create_wargoal = {
				    type = annex_everything
				    target = PRU
				    expire = 0
				}
			}
			if = {
				limit = {
					NOT = { is_in_faction_with = VEN }
				}
				create_wargoal = {
				    type = annex_everything
				    target = VEN
				    expire = 0
				}
			}
			if = {
				limit = {
					NOT = { is_in_faction_with = COL }
				}
				create_wargoal = {
				    type = annex_everything
				    target = COL
				    expire = 0
				}
			}
			if = {
				limit = {
					NOT = { is_in_faction_with = BOL }
				}
				create_wargoal = {
				    type = annex_everything
				    target = BOL
				    expire = 0
				}
			}
			if = {
				limit = {
					NOT = { is_in_faction_with = MEX }
				}
				create_wargoal = {
				    type = annex_everything
				    target = MEX
				    expire = 0
				}
			}
			if = {
				limit = {
					NOT = { is_in_faction_with = USA }
				}
				create_wargoal = {
				    type = take_state_focus
				    target = USA
				    generator = { 378 379 380 377 376 375 }
				    expire = 0
				}
			}
		}
	}

	focus = {
		id = SPA_embrace_the_spanish_destiny
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_will_to_empire }
		
		icon = GFX_goal_demand_sudetenland
		x = 2
		y = 1
		relative_position_id = SPA_the_will_to_empire
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = SPA_embrace_the_spanish_destiny
		}
	}

	focus = {
		id = SPA_the_national_and_popular_army_of_spain
		available = {
			has_global_flag = scw_over
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_national_syndicalist_state focus = SPA_fuse_the_parties }
		
		icon = GFX_goal_generic_army_doctrines
		x = 2
		y = 1
		relative_position_id = SPA_the_national_syndicalist_state
		cost = 10

		available_if_capitulated = yes
		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPA_the_national_and_popular_army_of_spain_2mil }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			army_experience = 10
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_the_national_and_popular_army_of_spain_2mil
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPA_mandatory_pre_military_training
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_national_syndicalist_state }
		prerequisite = { focus = SPA_the_national_and_popular_army_of_spain }
		
		icon = GFX_focus_generic_military_academy
		x = 0
		y = 2
		relative_position_id = SPA_the_national_syndicalist_state
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = SPA_mandatory_pre_military_training_1
		}
	}

	focus = {
		id = SPA_all_shall_serve
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_mandatory_pre_military_training }
		
		icon = GFX_focus_generic_military_mission
		x = 0
		y = 1
		relative_position_id = SPA_mandatory_pre_military_training
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_MANPOWER}
		completion_reward = {
			add_war_support = 0.1
			swap_ideas = {
				remove_idea = SPA_mandatory_pre_military_training_1
				add_idea = SPA_mandatory_pre_military_training_2
			}
		}
	}

	focus = {
		id = SPA_the_army_of_africa_model
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_national_and_popular_army_of_spain }
		
		icon = GFX_goal_generic_army_artillery
		x = 1
		y = 1
		relative_position_id = SPA_the_national_and_popular_army_of_spain
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			army_experience = 25
			add_doctrine_cost_reduction = {
				name = SPA_the_army_of_africa_model
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
		}
	}

	focus = {
		id = SPA_equipment_modernization
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_army_of_africa_model }
		
		icon = GFX_goal_generic_small_arms
		x = -1
		y = 2
		relative_position_id = SPA_the_army_of_africa_model
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = SPA_equipment_modernization
				bonus = 1.0
				uses = 2
				category = infantry_weapons
			}
		}
	}

	focus = {
		id = SPA_artillery_modernization
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_equipment_modernization }
		
		icon = GFX_goal_generic_army_artillery2
		x = -1
		y = 1
		relative_position_id = SPA_equipment_modernization
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = SPA_artillery_modernization
				bonus = 1.0
				uses = 2
				category = artillery
			}
		}
	}

	focus = {
		id = SPA_expand_the_air_branch
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_equipment_modernization }
		
		icon = GFX_goal_generic_air_doctrine
		x = 0
		y = 2
		relative_position_id = SPA_equipment_modernization
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			air_experience = 50
			add_doctrine_cost_reduction = {
				name = SPA_expand_the_air_branch
				cost_reduction = 0.5
				uses = 1
				category = air_doctrine
			}
			add_tech_bonus = {
				name = SPA_expand_the_air_branch
				bonus = 1.0
				uses = 1
				category = light_fighter
				category = cas_bomber
			}
		}
	}

	focus = {
		id = SPA_expand_the_special_forces
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_equipment_modernization }
		
		icon = GFX_goal_generic_special_forces
		x = 1
		y = 1
		relative_position_id = SPA_equipment_modernization
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = SPA_expand_the_special_forces
				bonus = 1.0
				uses = 1
				category = marine_tech
			}
			add_tech_bonus = {
				name = SPA_expand_the_special_forces
				bonus = 1.0
				uses = 1
				category = mountaineers_tech
			}
		}
	}

	focus = {
		id = SPA_motorization
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_army_of_africa_model }
		
		icon = GFX_goal_generic_army_motorized
		x = 0
		y = 1
		relative_position_id = SPA_the_army_of_africa_model
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = SPA_equipment_modernization
				bonus = 2.0
				uses = 1
				category = motorized_equipment
			}
		}
	}

	focus = {
		id = SPA_an_armored_corps
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_motorization }
		prerequisite = { focus = SPA_join_the_axis }
		
		icon = GFX_goal_generic_army_tanks
		x = 1
		y = 1
		relative_position_id = SPA_motorization
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = SPA_an_armored_corps
				bonus = 1.0
				uses = 1
				category = armor
			}
		}
	}

	focus = {
		id = SPA_join_the_axis
		available = {
			has_global_flag = scw_over
			is_in_faction = no
			OR = {
				AND = {
					GFA = {
						has_government = fascism
						is_faction_leader = yes
					}
				}
				AND = {
					ITA = {
						has_government = fascism
						is_faction_leader = yes
					}
				}
			}
			NOT = { has_completed_focus = SPA_the_latin_bloc }
			NOT = { has_global_flag = POR_iberian_summit_in_progress_flag }
		}
		bypass = {
			OR = {
				AND = {
					NOT = { GFA = { has_government = fascism } }
					NOT = { ITA = { has_government = fascism } }
				}
				is_in_faction_with = GFA
				is_in_faction_with = ITA
			}
		}
		prerequisite = { focus = SPA_the_national_syndicalist_state focus = SPA_fuse_the_parties }

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
			modifier = {
				factor = 0.1
				GFA = { has_civil_war = yes }
			}
		}
		
		icon = GFX_goal_support_fascism
		x = 4
		y = 1
		relative_position_id = SPA_the_national_syndicalist_state
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			if = {
				limit = {
					GFA = {
						has_government = fascism
						is_faction_leader = yes
					}
				}
				GFA = { country_event = { id = NWspain.110 hours = 3 } }
			}
			if = {
				limit = {
					ITA = {
						has_government = fascism
						is_faction_leader = yes
					}
				}
				ITA = { country_event = { id = generic.2 hours = 3 } }
			}
		}
	}

	focus = {
		id = SPA_fascist_economic_aid
		available = {
			any_allied_country = {
				is_major = yes
				has_government = fascism
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_join_the_axis }
		prerequisite = { focus = SPA_national_recovery }
		mutually_exclusive = { focus = SPA_autarky }
		
		icon = GFX_goal_generic_construction
		x = 1
		y = 1
		relative_position_id = SPA_join_the_axis
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_ideas = SPA_fascist_economic_aid
			swap_ideas = {
				remove_idea = SPA_recovering_from_civil_war
				add_idea = SPA_recovering_from_civil_war_2
			}
			add_tech_bonus = {
				name = SPA_fascist_economic_aid
				bonus = 1.0
				uses = 1
				category = industry
			}
		}
	}

	focus = {
		id = SPA_facilitate_pyrenees_freight_transports
		available = {
			has_full_control_of_state = 793
			has_full_control_of_state = 794
			has_full_control_of_state = 165
			has_full_control_of_state = 176
			has_full_control_of_state = 792
			has_full_control_of_state = 41
			any_allied_country = {
				is_major = yes
				has_government = fascism
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_fascist_economic_aid }
		
		icon = GFX_goal_generic_construct_infrastructure
		x = 0
		y = 1
		relative_position_id = SPA_fascist_economic_aid
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 15
			}
			custom_effect_tooltip = SPA_facilitate_pyrenees_freight_transports_tt
			hidden_effect = {
				793 = {
					add_building_construction = {
						type = infrastructure
						level = 5
						instant_build = yes
					}
				}
				794 = {
					add_building_construction = {
						type = infrastructure
						level = 5
						instant_build = yes
					}
				}
				165 = {
					add_building_construction = {
						type = infrastructure
						level = 5
						instant_build = yes
					}
				}
				176 = {
					add_building_construction = {
						type = infrastructure
						level = 5
						instant_build = yes
					}
				}
				792 = {
					add_building_construction = {
						type = infrastructure
						level = 5
						instant_build = yes
					}
				}
				41 = {
					add_building_construction = {
						type = infrastructure
						level = 5
						instant_build = yes
					}
				}
			}
			build_railway = { #Madrid - Zaragoza - Pyrinnes
				path = {
					3938 9767 6993 9785 11766 813 3816 9813 11821 915
				}
			}
			build_railway = { #Zaragoza - Barcelona - French Border
				path = {
					3816 3954 13223 6966 6812 9764 854 9824 
				}
			}
			build_railway = { #Madrid - Valladolid - Burgos - Bilbao - French Border
				path = {
					3938 3794 9800 9846 11825 6936 903 885 11852 13233 740 6756
				}
			}
		}
	}

	focus = {
		id = SPA_improve_cross_country_railways
		available = {
			any_allied_country = {
				is_major = yes
				has_government = fascism
			}
			has_full_control_of_state = 169
			has_full_control_of_state = 789
			has_full_control_of_state = 175
			has_full_control_of_state = 170
			has_full_control_of_state = 173
			has_full_control_of_state = 168
		}
		bypass = {
		}
		prerequisite = { focus = SPA_fascist_economic_aid focus = SPA_spanish_austerity }
		
		icon = GFX_goal_generic_construct_infrastructure
		x = 1
		y = 2
		relative_position_id = SPA_fascist_economic_aid
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			build_railway = { #Madrid - Crodoba - Sevilla
				path = {
					3938 13224 13229 6800 6832 6948 3810 3871 875 1178 7183
				}
			}
			build_railway = { #Madrid - Granada
				path = {
					13229 9778 9828 12083 4095 1176
				}
			}
			build_railway = { #Madrid - Murcia - Valencia
				path = {
					3938 6914 9757 942 832 9903 1093 10024 4098 9889 6959 6906
				}
			}
		}
	}

	focus = {
		id = SPA_support_the_war_industry
		available = {
			any_allied_country = {
				is_major = yes
				has_government = fascism
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_facilitate_pyrenees_freight_transports }
		prerequisite = { focus = SPA_improve_cross_country_railways }
		
		icon = GFX_goal_generic_construct_civ_factory
		x = 0
		y = 2
		relative_position_id = SPA_facilitate_pyrenees_freight_transports
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPA_support_the_war_industry_1civ }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			swap_ideas = {
				remove_idea = SPA_recovering_from_civil_war_2
				add_idea = SPA_recovering_from_civil_war_3
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_support_the_war_industry_1civ
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_support_the_war_industry_1civ }
				}
				set_state_flag = SPA_support_the_war_industry_1civ
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_support_the_war_industry_1civ }
				}
				set_state_flag = SPA_support_the_war_industry_1civ
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = SPA_reduce_reliance_on_foreign_resources_tt
		}
	}

	focus = {
		id = SPA_italian_shipbuilding_expertise
		available = {
			is_in_faction_with = ITA
		}
		bypass = {
		}
		prerequisite = { focus = SPA_support_the_war_industry }
		
		icon = GFX_focus_generic_navy_battleship2
		x = -1
		y = 1
		relative_position_id = SPA_support_the_war_industry
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_ideas = SPA_italian_shipbuilding_expertise
			add_tech_bonus = {
				name = SPA_italian_shipbuilding_expertise
				bonus = 1
				uses = 1
				category = bb_tech
			}
		}
	}

	focus = {
		id = SPA_the_duty_to_work
		available = {
			any_allied_country = {
				is_major = yes
				has_government = fascism
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_support_the_war_industry }
		
		icon = GFX_goal_generic_construct_military
		x = 0
		y = 2
		relative_position_id = SPA_support_the_war_industry
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_ideas = SPA_the_duty_to_work
		}
	}

	focus = {
		id = SPA_expand_the_war_industry
		available = {
			any_allied_country = {
				is_major = yes
				has_government = fascism
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_support_the_war_industry focus = SPA_expand_the_axis_gold_trade }
		
		icon = GFX_goal_generic_construct_mil_factory
		x = 1
		y = 1
		relative_position_id = SPA_support_the_war_industry
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPA_expand_the_war_industry_2mil }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_expand_the_war_industry_2mil
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_expand_the_war_industry_2mil }
				}
				set_state_flag = SPA_expand_the_war_industry_2mil
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPA_national_recovery
		available = {
			has_global_flag = scw_over
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_national_syndicalist_state focus = SPA_fuse_the_parties }
		
		icon = GFX_goal_generic_consumer_goods
		x = 6
		y = 1
		relative_position_id = SPA_the_national_syndicalist_state
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPA_national_recovery_2civ }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
		completion_reward = {
			add_timed_idea = { idea = SPA_national_recovery_1 days = 1825 }
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_national_recovery_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPA_autarky
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_national_recovery }
		mutually_exclusive = { focus = SPA_fascist_economic_aid }
		
		icon = GFX_goal_generic_oil_refinery
		x = 1
		y = 1
		relative_position_id = SPA_national_recovery
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			if = {
				limit = {
					NOT = { has_idea = closed_economy }
				}
				add_ideas = closed_economy
			}
			swap_ideas = {
				remove_idea = SPA_national_recovery_1
				add_idea = SPA_national_recovery_2
			}
			add_tech_bonus = {
				name = HOL_make_use_of_our_riches
				bonus = 1.0
				uses = 2
				category = excavation_tech
			}
			add_tech_bonus = {
				name = HOL_expand_curacao_oil_refineries
				bonus = 1.0
				uses = 1
				category = synth_resources
			}
		}
	}

	focus = {
		id = SPA_spanish_austerity
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_autarky }

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		
		icon = GFX_goal_generic_construct_civilian
		x = 0
		y = 1
		relative_position_id = SPA_autarky
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			swap_ideas = {
				remove_idea = SPA_national_recovery_2
				add_idea = SPA_national_recovery_3
			}
			if = {
				limit = {
					NOT = {
						has_idea = SPA_recovering_from_civil_war
						has_idea = SPA_recovering_from_civil_war_2
					}
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_recovering_from_civil_war
						add_idea = SPA_recovering_from_civil_war_2
					}
				}
			}
			if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war
					add_idea = SPA_recovering_from_civil_war_2
				}
			}
			if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_2
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war_2
					add_idea = SPA_recovering_from_civil_war_3
				}
			}
		}
	}

	focus = {
		id = SPA_reduce_reliance_on_foreign_resources
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_spanish_austerity }
		
		icon = GFX_goal_generic_construction2
		x = 1
		y = 1
		relative_position_id = SPA_spanish_austerity
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_tech_bonus = {
				name = SPA_reduce_reliance_on_foreign_resources
				bonus = 1.5
				uses = 2
				category = excavation_tech
			}
			custom_effect_tooltip = SPA_reduce_reliance_on_foreign_resources_tt
		}
	}

	focus = {
		id = SPA_expand_the_axis_gold_trade
		available = {
			NOT = { has_completed_focus = SPA_the_stabilization_plan }
		}
		bypass = {
		}
		prerequisite = { focus = SPA_spanish_austerity }
		mutually_exclusive = { focus = SPA_capitalist_economic_aid }
		
		icon = GFX_focus_usa_reestablish_the_gold_standard
		x = 0
		y = 2
		relative_position_id = SPA_spanish_austerity
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = SPA_expand_the_axis_gold_trade
		}
	}

	focus = {
		id = SPA_ensure_agricultural_self_sufficiency
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_expand_the_axis_gold_trade }
		
		icon = GFX_z_goal_save_farms
		x = 0
		y = 2
		relative_position_id = SPA_expand_the_axis_gold_trade
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPA_ensure_agricultural_self_sufficiency_2civ }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			remove_ideas = SPA_recovering_from_civil_war_3
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_ensure_agricultural_self_sufficiency_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_ensure_agricultural_self_sufficiency_2civ }
				}
				set_state_flag = SPA_ensure_agricultural_self_sufficiency_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}

			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_ensure_agricultural_self_sufficiency_2civ }
				}
				set_state_flag = SPA_ensure_agricultural_self_sufficiency_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
	}

#  #  ##  ### ###  ##  #  #  ##  #   ###  ## ###  ##            ### ###   ##  #  #  ##   ##  
## # #  #  #   #  #  # ## # #  # #    #  #    #  #              #   #  # #  # ## # #  # #  # 
# ## ####  #   #  #  # # ## #### #    #   #   #   #      ##     ##  ###  #### # ## #    #  # 
#  # #  #  #   #  #  # #  # #  # #    #    #  #    #            #   #  # #  # #  # #  # #  # 
#  # #  #  #  ###  ##  #  # #  # ### ### ##   #  ##             #   #  # #  # #  #  ##   ##  

### BRANCH

	focus = {
		id = SPA_unify_the_nationalist_front
		available = {
			has_global_flag = spanish_civil_war
		}
		bypass = {
		}
		prerequisite = { focus = SPA_create_coordinating_junta }
		mutually_exclusive = { focus = SPA_the_phalanx_ascendant focus = SPA_supremacy_of_the_communion }
		
		icon = GFX_focus_spa_unify_the_nationalist_front
		x = 0
		y = 1
		relative_position_id = SPA_create_coordinating_junta
		cost = 5
		
		ai_will_do = {
			factor = 30
			modifier = {
				factor = 10
				is_historical_focus_on = yes
			}
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY}
		completion_reward = {
			add_stability = 0.1
			add_ideas = severe_migration_control
			activate_mission = SPA_carlist_uprising_mission
		}
	}

	focus = {
		id = SPA_save_the_alcazar
		available = {
		}
		bypass = {
			OR = {
				controls_province = 858
				has_global_flag = scw_over
			}
		}
		prerequisite = { focus = SPA_unify_the_nationalist_front }
		
		icon = GFX_focus_spa_save_the_alcazar
		x = -2
		y = 1
		relative_position_id = SPA_unify_the_nationalist_front
		cost = 5

		available_if_capitulated = yes

		completion_reward = {
			activate_mission = SPA_save_the_alcazar_mission
		}
	}

	focus = {
		id = SPA_martyrdom_for_primo_de_rivera
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_save_the_alcazar }
		
		icon = GFX_z_focus_propaganda_fascism
		x = -1
		y = 1
		relative_position_id = SPA_save_the_alcazar
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_POLITICAL}
		completion_reward = {
			add_war_support = 0.1
			add_popularity = {
			    ideology = fascism
			    popularity = 0.05
			}
		}
	}

	focus = {
		id = SPA_caudillo_of_spain
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_save_the_alcazar }
		
		icon = GFX_focus_spa_caudillo_of_spain
		x = 1
		y = 1
		relative_position_id = SPA_save_the_alcazar
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY}
		completion_reward = {
			add_stability = 0.05
			hidden_effect = {
				kill_country_leader = yes
				kill_ideology_leader = fascism
			}
			add_country_leader_role = {
				character = SPA_francisco_franco
				country_leader = {
					ideology=despotism
					traits = { caudillo_1 }
					expire="1965.1.1"
				}
				promote_leader = yes
			}
			add_country_leader_role = {
				character = SPA_francisco_franco
				country_leader = {
					ideology=fascism_corporatism
					traits = { caudillo_1 }
					expire="1965.1.1"
				}
				promote_leader = yes
			}
			SPA_francisco_franco = { promote_leader = yes }
			set_cosmetic_tag = SPR_nationalist_spain
		}
	}

	focus = {
		id = SPA_extol_the_martyrs_of_the_war
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_martyrdom_for_primo_de_rivera }
		prerequisite = { focus = SPA_caudillo_of_spain }
		
		icon = GFX_goal_generic_propaganda
		x = 1
		y = 1
		relative_position_id = SPA_martyrdom_for_primo_de_rivera
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_SPA_CARLIST_UPRISING}
		completion_reward = {
			add_war_support = 0.1
		}
	}

	focus = {
		id = SPA_consolidate_the_north
		available = {
			controls_state = 982
			controls_state = 172
			controls_state = 176
			controls_state = 792
			controls_state = 790
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_unify_the_nationalist_front }
		
		icon = GFX_goal_generic_position_armies
		x = 0
		y = 1
		relative_position_id = SPA_unify_the_nationalist_front
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_ideas = war_economy
			add_equipment_to_stockpile = {
				type = train_equipment
				amount = 5
			}
			982 = {
				if = {
					limit = {
						982 = {
							free_building_slots = {
								building = arms_factory
								size > 0
								include_locked = yes
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			172 = {
				if = {
					limit = {
						172 = {
							free_building_slots = {
								building = arms_factory
								size > 0
								include_locked = yes
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			176 = {
				if = {
					limit = {
						176 = {
							free_building_slots = {
								building = arms_factory
								size > 0
								include_locked = yes
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			792 = {
				if = {
					limit = {
						792 = {
							free_building_slots = {
								building = arms_factory
								size > 0
								include_locked = yes
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			790 = {
				if = {
					limit = {
						790 = {
							free_building_slots = {
								building = arms_factory
								size > 0
								include_locked = yes
							}
						}
					}
					add_extra_state_shared_building_slots = 1
					add_building_construction = {
						type = arms_factory
						level = 1
						instant_build = yes
					}
				}
			}
			add_days_mission_timeout = {
				mission = SPA_carlist_uprising_mission
				days = 70
			}
		}
	}

	focus = {
		id = SPA_foment_a_carlist_split
		available = {
		}
		bypass = {
			has_global_flag = SPR_carlist_uprising_flag
		}
		prerequisite = { focus = SPA_consolidate_the_north }
		
		icon = GFX_z_goal_generic_political_correctness
		x = 0
		y = 2
		relative_position_id = SPA_consolidate_the_north
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY FOCUS_FILTER_SPA_CARLIST_UPRISING}
		completion_reward = {
			swap_ideas = {
				remove_idea = SPA_carlism_1
				add_idea = SPA_carlism_2
			}
			add_days_mission_timeout = {
				mission = SPA_carlist_uprising_mission
				days = 140
			}
		}
	}

	focus = {
		id = SPA_a_methodical_approach
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_unify_the_nationalist_front }
		
		icon = GFX_z_goal_generic_offensive_strategy
		x = 2
		y = 1
		relative_position_id = SPA_unify_the_nationalist_front
		cost = 5

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = SPA_a_methodical_approach
			custom_effect_tooltip = SPR_seize_public_transport_tt
			add_ideas = limited_exports
		}
	}

	focus = {
		id = SPA_tackle_the_vulnerable_fronts
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_a_methodical_approach }
		
		icon = GFX_goal_generic_major_war
		x = -1
		y = 1
		relative_position_id = SPA_a_methodical_approach
		cost = 5

		available_if_capitulated = yes

		completion_reward = {
			add_timed_idea = { idea = SPA_anti_republican_offensive days = 365 }
			if = {
				limit = { has_war_with = ARA }
				add_timed_idea = { idea = SPA_anti_anarchist_offensive days = 365 }
			}
			if = {
				limit = { has_war_with = CAT }
				add_timed_idea = { idea = SPA_anti_catalon_offensive days = 365 }
			}
			if = {
				limit = { has_war_with = SPB }
				add_timed_idea = { idea = SPA_anti_carlist_offensive days = 365 }
			}
		}
	}

	focus = {
		id = SPA_integrate_the_requetes
		available = {
			NOT = { has_active_mission = SPA_carlist_uprising_mission }
		}
		bypass = {
			has_global_flag = SPR_carlist_uprising_flag
		}
		prerequisite = { focus = SPA_tackle_the_vulnerable_fronts }
		prerequisite = { focus = SPA_foment_a_carlist_split }
		
		icon = GFX_z_goal_repress_carlists
		x = 0
		y = 2
		relative_position_id = SPA_tackle_the_vulnerable_fronts
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			add_to_array = { coalition_array = token:monarchy }
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): add_to_array coalition_array = monarchy (SPA_integrate_the_requetes)"
			NW_legitimacy_check = yes
			custom_effect_tooltip = add_mon_in_coalition
			
			add_popularity = {
			    ideology = neutrality
			    popularity = 0.1
			}
			add_popularity = {
			    ideology = monarchy
			    popularity = -0.1
			}
			if = {
				limit = {
					NOT = {
						has_idea = SPA_carlism_2
						has_idea = SPA_carlism_5
					}
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_carlism_2
						add_idea = SPA_carlism_3
					}
				}
			}
			if = {
				limit = {
					has_idea = SPA_carlism_2
				}
				swap_ideas = {
					remove_idea = SPA_carlism_2
					add_idea = SPA_carlism_3
				}
			}
			if = {
				limit = {
					has_idea = SPA_carlism_5
				}
				swap_ideas = {
					remove_idea = SPA_carlism_5
					add_idea = SPA_carlism_4
				}
			}
		}
	}

	focus = {
		id = SPA_portuguese_aid
		available = {
			NOT = { has_war_with = POR }
			any_enemy_country = {
				NOT = {
					has_volunteers_amount_from = {
						tag = POR
						count > 0
					}
				}
			}
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_a_methodical_approach }
		
		icon = GFX_focus_generic_befriend_portugal
		x = 1
		y = 1
		relative_position_id = SPA_a_methodical_approach
		cost = 5

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			effect_tooltip = {
				add_manpower = 20000
				add_equipment_to_stockpile = {
					type = train_equipment
					amount = 3
				}
				POR = {
					add_timed_idea = { idea = SPA_spanish_civil_war_commitments days = 730 }
					add_opinion_modifier = { target = ROOT modifier = SPA_spanish_civil_war_commitments }
				}
			}
			custom_effect_tooltip = SPA_the_iberian_pact_tt_2
			POR = { country_event = { id = lar_spain.22 hours = 12 random_hours = 36 } }
		}
	}

	focus = {
		id = SPA_the_iberian_pact
		available = {
			has_global_flag = scw_over
			has_war = no
			is_in_faction = no
			POR = {
				has_war = no
				is_in_faction = no
			}
			NOT = { has_global_flag = POR_iberian_summit_in_progress_flag }
		}
		bypass = {
			POR = { is_in_faction = yes }
		}
		prerequisite = { focus = SPA_portuguese_aid }
		
		icon = GFX_goal_generic_major_alliance
		x = 0
		y = 1
		relative_position_id = SPA_portuguese_aid
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPA_the_iberian_pact_tt
			custom_effect_tooltip = SPA_the_iberian_pact_tt_2
			POR = { country_event = { id = lar_spain.25 hours = 12 random_hours = 36 } }
		}
	}

	focus = {
		id = SPA_the_latin_bloc
		available = {
			has_global_flag = scw_over
			NOT = { has_completed_focus = SPA_join_the_axis }
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_iberian_pact }
		
		icon = GFX_focus_spa_strengthen_the_supreme_reality_of_spain
		x = 0
		y = 1
		relative_position_id = SPA_the_iberian_pact
		cost = 10

		available_if_capitulated = yes

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}

		completion_reward = {
			set_rule = {
				can_create_factions = yes
			}
			create_faction = SPA_latin_bloc
			every_other_country = {
				limit = {
					OR = {
						original_tag = POR
						original_tag = CAT
						original_tag = NAV
						original_tag = GLC
						tag = VIC
						original_tag = ITA
					}
					is_in_faction = no
				}
				country_event = { id = lar_spain.30 hours = 12 random_hours = 36 }
			}
			hidden_effect = { news_event = { id = trworldnews.200 hours = 6 } }
		}
	}

	focus = {
		id = SPA_utilize_the_intellectuals
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_integrate_the_requetes focus = SPA_confirm_the_fueros }
		
		icon = GFX_focus_research
		x = 3
		y = 1
		relative_position_id = SPA_integrate_the_requetes
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = SPA_banish_the_party_leaders
		available = {
		}
		bypass = {
			has_global_flag = SPR_carlist_uprising_flag
		}
		prerequisite = { focus = SPA_extol_the_martyrs_of_the_war }
		prerequisite = { focus = SPA_foment_a_carlist_split }
		
		icon = GFX_z_goal_getting_rid_generals
		x = 1
		y = 1
		relative_position_id = SPA_extol_the_martyrs_of_the_war
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL FOCUS_FILTER_SPA_CARLIST_UPRISING}
		completion_reward = {
			add_political_power = 200
			custom_effect_tooltip = remove_political_advisor
			show_ideas_tooltip = SPA_manuel_hedilla
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SPA_raimundo_fernandez_cuesta
			add_days_mission_timeout = {
				mission = SPA_carlist_uprising_mission
				days = 140
			}
		}
	}

	focus = {
		id = SPA_fuse_the_parties
		available = {
		}
		bypass = {
			has_global_flag = SPR_carlist_uprising_flag
		}
		prerequisite = { focus = SPA_banish_the_party_leaders }
		prerequisite = { focus = SPA_safeguard_the_freedom_of_worship }
		
		icon = GFX_focus_spa_fuse_the_parties
		x = -1
		y = 1
		relative_position_id = SPA_banish_the_party_leaders
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			add_to_array = { coalition_array = token:neutrality }
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): add_to_array coalition_array = neutrality (SPA_fuse_the_parties)"
			# NW_legitimacy_check = yes
			custom_effect_tooltip = add_aut_in_coalition
			
			add_to_array = { coalition_array = token:fascism }
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): add_to_array coalition_array = fascism (SPA_fuse_the_parties)"
			NW_legitimacy_check = yes
			custom_effect_tooltip = add_fasc_in_coalition
			
			set_party_name = { ideology = fascism long_name = SPR_fascism_francoist_party_long name = SPR_fascism_francoist_party }
			set_party_name = { ideology = neutrality long_name = SPR_fascism_francoist_party_long name = SPR_fascism_francoist_party }
			if = {
				limit = {
					NOT = {
						has_idea = SPA_carlism_2
						has_idea = SPA_carlism_3
					}
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_carlism_2
						add_idea = SPA_carlism_3
					}
				}
			}
			if = {
				limit = {
					has_idea = SPA_carlism_2
				}
				swap_ideas = {
					remove_idea = SPA_carlism_2
					add_idea = SPA_carlism_5
				}
			}
			if = {
				limit = {
					has_idea = SPA_carlism_3
				}
				swap_ideas = {
					remove_idea = SPA_carlism_3
					add_idea = SPA_carlism_4
				}
			}
			custom_effect_tooltip = SPA_fuse_the_parties_tt
			if = {
				limit = {
					has_global_flag = scw_early_end
				}
				set_global_flag = nationalist_victory
				set_global_flag = scw_over
				country_event = { id = trworldnews.69 hours = 6 }
			}
		}
	}

	focus = {
		id = SPA_join_the_allies
		available = {
			has_global_flag = scw_over
			is_in_faction = no
			OR = {
				AND = {
					ENG = {
						has_government = democratic
						is_faction_leader = yes
					}
				}
				AND = {
					USA = {
						has_government = democratic
						is_faction_leader = yes
					}
				}
			}
			NOT = { has_completed_focus = SPA_the_latin_bloc }
			NOT = { has_government = fascism }
			fascism < 0.4		
			NOT = { has_global_flag = POR_iberian_summit_in_progress_flag }
		}
		bypass = {
			OR = {
				AND = {
					NOT = { USA = { has_government = democratic } }
					NOT = { ENG = { has_government = democratic } }
				}
				is_in_faction_with = USA
				is_in_faction_with = ENG
			}
		}
		prerequisite = { focus = SPA_fuse_the_parties }

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		
		icon = GFX_goal_support_democracy
		x = 0
		y = 1
		relative_position_id = SPA_fuse_the_parties
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			if = {
				limit = {
					ENG = {
						has_government = democratic
						is_faction_leader = yes
					}
				}
				ENG = { country_event = { id = generic.2 hours = 6 } }
			}
			if = {
				limit = {
					USA = {
						has_government = democratic
						is_faction_leader = yes
					}
				}
				USA = { country_event = { id = generic.2 hours = 6 } }
			}
			hidden_effect = { news_event = { id = trworldnews.201 days = 1 } }
		}
	}

	focus = {
		id = SPA_the_stabilization_plan
		available = {
			NOT = { has_completed_focus = SPA_expand_the_axis_gold_trade }
			OR = {
				is_in_faction_with = ENG
				is_in_faction_with = USA
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_join_the_allies }
		prerequisite = { focus = SPA_national_recovery }
		
		icon = GFX_goal_generic_neutrality_focus
		x = 2
		y = 1
		relative_position_id = SPA_join_the_allies
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = {
					NOT = {
						has_idea = SPA_recovering_from_civil_war
						has_idea = SPA_recovering_from_civil_war_2
					}
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_recovering_from_civil_war
						add_idea = SPA_recovering_from_civil_war_2
					}
				}
			}
			if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war
					add_idea = SPA_recovering_from_civil_war_2
				}
			}
			if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_2
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war_2
					add_idea = SPA_recovering_from_civil_war_3
				}
			}
		}
	}

	focus = {
		id = SPA_expand_spanish_bases
		available = {
			OR = {
				is_in_faction_with = ENG
				is_in_faction_with = USA
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_stabilization_plan }
		
		icon = GFX_goal_generic_construct_military
		x = 0
		y = 1
		relative_position_id = SPA_the_stabilization_plan
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			171 = { #Galicia
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 1
					province = 758
					instant_build = yes
				}							
			}
			790 = { #Asturias
				add_building_construction = {
					type = naval_base
					level = 1
					province = 11707
					instant_build = yes
				}							
			}
			792 = { #Basque
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 1
					province = 740
					instant_build = yes
				}							
			}
			165 = { #Catalonia
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 1
					province = 9764
					instant_build = yes
				}							
			}
			167 = { #Valencia
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 1
					province = 6906
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 1
					province = 4098
					instant_build = yes
				}						
			}
			168 = { #Murcia
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 1
					province = 10024
					instant_build = yes
				}							
			}
			173 = { #Granada
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 1
					province = 747
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 1
					province = 9979
					instant_build = yes
				}						
			}
			169 = { #Sevilla
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 1
					province = 1048
					instant_build = yes
				}							
			}
			41 = { #Madrid
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}							
			}
			177 = { #Baleares
				add_building_construction = {
					type = naval_base
					level = 1
					province = 9793
					instant_build = yes
				}
				add_building_construction = {
					type = naval_base
					level = 1
					province = 7114
					instant_build = yes
				}							
			}
			178 = { #Canary Islands
				add_building_construction = {
					type = naval_base
					level = 1
					province = 13071
					instant_build = yes
				}							
			}
		}
	}

	focus = {
		id = SPA_capitalist_economic_aid
		available = {
			OR = {
				is_in_faction_with = ENG
				is_in_faction_with = USA
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_expand_spanish_bases }
		prerequisite = { focus = SPA_reduce_reliance_on_foreign_resources }
		mutually_exclusive = { focus = SPA_expand_the_axis_gold_trade }
		
		icon = GFX_focus_generic_the_giant_wakes
		x = 0
		y = 2
		relative_position_id = SPA_expand_spanish_bases
		cost = 10

		available_if_capitulated = yes
		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPA_capitalist_economic_aid_2civ }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_tech_bonus = {
				name = SPA_capitalist_economic_aid
				bonus = 1.0
				uses = 1
				category = industry
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_capitalist_economic_aid_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			remove_ideas = SPA_recovering_from_civil_war_3
			swap_ideas = {
				remove_idea = SPA_national_recovery_3
				add_idea = SPA_national_recovery_4
			}
		}
	}

	focus = {
		id = SPA_improve_living_standards
		available = {
			OR = {
				is_in_faction_with = ENG
				is_in_faction_with = USA
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_capitalist_economic_aid }
		
		icon = GFX_goal_generic_consumer_goods
		x = -1
		y = 1
		relative_position_id = SPA_capitalist_economic_aid
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY FOCUS_FILTER_POLITICAL FOCUS_FILTER_INDUSTRY }
		completion_reward = {
			add_stability = 0.15
			add_political_power = 120
			if = {
				limit = {
					NOT = {
						has_idea = SPA_national_recovery_4
						has_idea = SPA_national_recovery_6
					}
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_national_recovery_4
						add_idea = SPA_national_recovery_5
					}
				}
			}
			if = {
				limit = {
					has_idea = SPA_national_recovery_4
				}
				swap_ideas = {
					remove_idea = SPA_national_recovery_4
					add_idea = SPA_national_recovery_5
				}
			}
			if = {
				limit = {
					has_idea = SPA_national_recovery_6
				}
				swap_ideas = {
					remove_idea = SPA_national_recovery_6
					add_idea = SPA_national_recovery_7
				}
			}
		}
	}

	focus = {
		id = SPA_domestic_industrial_developments
		available = {
			OR = {
				is_in_faction_with = ENG
				is_in_faction_with = USA
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_capitalist_economic_aid }
		
		icon = GFX_goal_generic_production
		x = 1
		y = 1
		relative_position_id = SPA_capitalist_economic_aid
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = {
					NOT = {
						has_idea = SPA_national_recovery_4
						has_idea = SPA_national_recovery_5
					}
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_national_recovery_4
						add_idea = SPA_national_recovery_6
					}
				}
			}
			if = {
				limit = {
					has_idea = SPA_national_recovery_4
				}
				swap_ideas = {
					remove_idea = SPA_national_recovery_4
					add_idea = SPA_national_recovery_6
				}
			}
			if = {
				limit = {
					has_idea = SPA_national_recovery_5
				}
				swap_ideas = {
					remove_idea = SPA_national_recovery_5
					add_idea = SPA_national_recovery_7
				}
			}
		}
	}

	focus = {
		id = SPA_the_spanish_miracle
		available = {
			OR = {
				is_in_faction_with = ENG
				is_in_faction_with = USA
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_improve_living_standards }
		prerequisite = { focus = SPA_domestic_industrial_developments }
		
		icon = GFX_focus_spa_the_spanish_miracle
		x = 1
		y = 1
		relative_position_id = SPA_improve_living_standards
		cost = 20

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPA_the_spanish_miracle_2civ }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			every_state = {
				limit	= {	has_state_flag = SPA_the_spanish_miracle_2mil }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_the_spanish_miracle_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_the_spanish_miracle_2civ }
				}
				set_state_flag = SPA_the_spanish_miracle_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_the_spanish_miracle_2civ }
				}
				set_state_flag = SPA_the_spanish_miracle_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_the_spanish_miracle_2mil
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_the_spanish_miracle_2mil }
				}
				set_state_flag = SPA_the_spanish_miracle_2mil
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPA_adopt_the_26_points
		available = {
			has_global_flag = scw_over
		}
		bypass = {
		}
		prerequisite = { focus = SPA_fuse_the_parties }
		
		icon = GFX_focus_generic_treaty
		x = 6
		y = 1
		relative_position_id = SPA_fuse_the_parties
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			add_popularity = {
			    ideology = fascism
			    popularity = 0.1
			}
			if = {
				limit = {
					NOT = {
						has_idea = war_economy
						has_idea = tot_economic_mobilisation
					}
				}
				add_ideas = war_economy
			}
			if = {
				limit = {
					has_idea = limited_conscription
				}
				add_ideas = extensive_conscription
			}
			if = {
				limit = {
					has_idea = volunteer_only
				}
				add_ideas = limited_conscription
			}
			every_owned_state = {
				limit = {
					OR = {
						state = 165
						state = 171
						state = 792
					}
				}
				add_state_modifier = {
					modifier = {
						local_supplies = 0.25
						local_manpower = 0.25
					}
				}
			}
		}
	}

	focus = {
		id = SPA_direct_the_universities
		available = {
			num_of_factories > 50
		}
		bypass = {
		}
		prerequisite = { focus = SPA_adopt_the_26_points }
		
		icon = GFX_focus_research2
		x = -1
		y = 1
		relative_position_id = SPA_adopt_the_26_points
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = SPA_dictator_for_life
		available = {
			has_country_leader = {
				character = SPA_francisco_franco
				ruling_only = yes
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_adopt_the_26_points }
		mutually_exclusive = { focus = SPA_restore_the_monarchy }
		
		icon = GFX_goal_generic_political_pressure
		x = 1
		y = 1
		relative_position_id = SPA_adopt_the_26_points
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY}
		completion_reward = {
			add_stability = 0.05
			swap_ruler_traits = { remove = caudillo_1 add = caudillo_2 }
			hidden_effect = {
				if = {
					limit = {
						has_government = neutrality
					}
					remove_trait = {
						character = SPA_francisco_franco
						ideology = fascism_corporatism
						trait = caudillo_1
					}
					add_trait = {
						character = SPA_francisco_franco
						ideology = fascism_corporatism
						trait = caudillo_2
					}
				}
				if = {
					limit = {
						has_government = fascism
					}
					remove_trait = {
						character = SPA_francisco_franco
						ideology = despotism
						trait = caudillo_1
					}
					add_trait = {
						character = SPA_francisco_franco
						ideology = despotism
						trait = caudillo_2
					}
				}
			}
		}
	}

	focus = {
		id = SPA_invest_in_naval_infrastructure
		available = {
			has_completed_focus = SPA_unify_the_nationalist_front
		}
		bypass = {
		}
		prerequisite = { focus = SPA_expand_spanish_bases focus = SPA_dictator_for_life focus = SPA_restore_the_monarchy }
		
		icon = GFX_goal_generic_navy_doctrines_tactics
		x = -3
		y = 2
		relative_position_id = SPA_dictator_for_life
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPA_invest_in_naval_infrastructure_3DY }
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
			}
		}

		completion_reward = {
			navy_experience = 25
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
				set_state_flag = SPA_invest_in_naval_infrastructure_3DY
			}
		}
	}

	focus = {
		id = SPA_expand_the_slipways
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_invest_in_naval_infrastructure }
		
		icon = GFX_goal_generic_construct_naval_dockyard
		x = 0
		y = 1
		relative_position_id = SPA_invest_in_naval_infrastructure
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPA_expand_the_slipways_3DY }
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
			}
		}

		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
				set_state_flag = SPA_expand_the_slipways_3DY
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_expand_the_slipways_3DY }
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
				set_state_flag = SPA_expand_the_slipways_3DY
			}
		}
	}

	focus = {
		id = SPA_the_plan_imperial
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_expand_the_slipways }
		
		icon = GFX_goal_generic_navy_battleship
		x = 0
		y = 2
		relative_position_id = SPA_expand_the_slipways
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			navy_experience = 50
			add_ideas = SPA_the_plan_imperial
			add_tech_bonus = {
				name = SPA_glory_and_wealth_on_the_sea_lanes
				bonus = 1
				uses = 1
				category = bb_tech
			}
			add_tech_bonus = {
				name = SPA_glory_and_wealth_on_the_sea_lanes
				bonus = 1
				uses = 1
				category = cv_tech
			}
		}
	}

	focus = {
		id = SPA_restart_small_scale_shipbuilding
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_invest_in_naval_infrastructure }
		
		icon = GFX_focus_generic_destroyer
		x = 1
		y = 2
		relative_position_id = SPA_invest_in_naval_infrastructure
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			navy_experience = 25
			add_tech_bonus = {
				name = SPA_restart_small_scale_shipbuilding
				bonus = 1
				uses = 1
				category = cl_tech
				category = ca_tech
			}
			add_tech_bonus = {
				name = SPA_restart_small_scale_shipbuilding
				bonus = 1
				uses = 1
				category = dd_tech
			}
			add_tech_bonus = {
				name = SPA_restart_small_scale_shipbuilding
				bonus = 1
				uses = 1
				category = ss_tech
			}
		}
	}

	focus = {
		id = SPA_la_division_azul
		available = {
			has_completed_focus = SPA_adopt_the_26_points
		}
		bypass = {
		}
		prerequisite = { focus = SPA_dictator_for_life focus = SPA_restore_the_monarchy }
		
		icon = GFX_goal_rhineland
		x = 0
		y = 1
		relative_position_id = SPA_dictator_for_life
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			add_ideas = SPA_la_division_azul
			if = {
				limit = {
					has_government = neutrality
				}
				set_rule = {
					can_send_volunteers = yes
				}
			}
		}
	}

	focus = {
		id = SPA_the_tangiers_enclave
		available = {
			has_full_control_of_state = 1042
		}
		bypass = {
		}
		prerequisite = { focus = SPA_la_division_azul }
		prerequisite = { focus = SPA_stamp_out_the_maquis }
		
		icon = GFX_goal_generic_position_armies
		x = 0
		y = 1
		relative_position_id = SPA_la_division_azul
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = {
					ENG = { has_government = democratic }
				}
				effect_tooltip = {
					1042 = {
						add_extra_state_shared_building_slots = 3
						add_building_construction = {
							type = industrial_complex
							level = 2
							instant_build = yes
						}
					}
				}
				custom_effect_tooltip = SPA_the_tangiers_enclave_tt
				ENG = { country_event = { id = lar_spain.36 hours = 6 random_hours = 18 } }
			}
			else = {
				1042 = {
					add_extra_state_shared_building_slots = 3
					add_building_construction = {
						type = industrial_complex
						level = 2
						instant_build = yes
					}
				}
			}
		}
	}

	focus = {
		id = SPA_demand_french_north_africa
		available = {
			VIC = {
				owns_state = 461
				owns_state = 462
				owns_state = 459
				owns_state = 460
				owns_state = 513
				owns_state = 514
				owns_state = 458
				owns_state = 665
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_tangiers_enclave }

		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		
		icon = GFX_goal_generic_territory_or_war
		x = 0
		y = 1
		relative_position_id = SPA_the_tangiers_enclave
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			random_other_country = {
				limit = {
					original_tag = FRA
					has_focus_tree = vichy_french_focus
					owns_state = 461
					owns_state = 462
					owns_state = 459
					owns_state = 460
					owns_state = 513
					owns_state = 514
					owns_state = 458
					owns_state = 665
				}
				country_event = { id = lar_spain.39 hours = 6 random_hours = 18 }
			}
		}
	}

	focus = {
		id = SPA_restore_the_monarchy
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_adopt_the_26_points focus = SPA_settle_the_succession_question }
		mutually_exclusive = { focus = SPA_dictator_for_life }
		
		icon = GFX_goal_tfv_strengthen_commonwealth_ties
		x = 3
		y = 1
		relative_position_id = SPA_adopt_the_26_points
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			add_political_power = 75
			add_popularity = { ideology = monarchy popularity = 0.05 }
			if = {
				limit = {
					has_completed_focus = SPA_supremacy_of_the_communion
				}
				custom_effect_tooltip = SPA_restore_the_monarchy_tt
				hidden_effect = {
					drop_cosmetic_tag = yes
					set_cosmetic_tag = SPB_kingdom
					news_event = { id = trworldnews.202 hours = 6 }
				}
			}
			if = {
				limit = {
					NOT = { has_completed_focus = SPA_supremacy_of_the_communion }
				}
				hidden_effect = {
					news_event = { id = trworldnews.203 hours = 6 }
				}
			}
		}
	}

	focus = {
		id = SPA_stamp_out_the_maquis
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_dictator_for_life focus = SPA_restore_the_monarchy }
		
		icon = GFX_goal_generic_more_territorial_claims
		x = 2
		y = 1
		relative_position_id = SPA_dictator_for_life
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPR_recovering_from_civil_war_focus_tt
		}
	}

	focus = {
		id = SPA_defenses_against_strategic_bombing
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_stamp_out_the_maquis }
		
		icon = GFX_focus_generic_air_defense
		x = 0
		y = 1
		relative_position_id = SPA_stamp_out_the_maquis
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_building_construction = {
					type = anti_air_building
					level = 1
					instant_build = yes
				}
			}
			171 = { #Galicia
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}						
			}
			792 = { #Basque
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}						
			}
			41 = { #Madrid
				add_building_construction = {
					type = air_base
					level = 1
					instant_build = yes
				}						
			}
		}
	}

	focus = {
		id = SPA_defenses_against_invasion
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_defenses_against_strategic_bombing }
		
		icon = GFX_focus_generic_coastal_fort
		x = 0
		y = 1
		relative_position_id = SPA_defenses_against_strategic_bombing
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			custom_effect_tooltip = SPA_defenses_against_invasion_tt
			every_owned_state = {
				limit = {
					is_controlled_by = ROOT
					is_core_of = ROOT
					is_in_home_area = yes
				}
				add_building_construction = {
					type = coastal_bunker
					province = {
						all_provinces = yes
						limit_to_naval_base = yes
					}
					level = 2
					instant_build = yes
				}
				add_building_construction = {
					type = bunker
					province = {
						all_provinces = yes
						limit_to_naval_base = yes
					}
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPA_retake_gibraltar
		available = {
			NOT = {
				is_in_faction_with = ENG
				has_war_with = ENG
				controls_state = 118
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_demand_french_north_africa }
		prerequisite = { focus = SPA_defenses_against_invasion }
		
		icon = GFX_focus_attack_britain
		x = 1
		y = 1
		relative_position_id = SPA_demand_french_north_africa
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			create_wargoal = {
				type = take_state_focus
				target = ENG
				generator = { 118 }
				expire = 0
			}
		}
	}

	focus = {
		id = SPA_claim_west_africa
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_retake_gibraltar }
		
		icon = GFX_goal_generic_occupy_states_ongoing_war
		x = 0
		y = 1
		relative_position_id = SPA_retake_gibraltar
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			add_state_claim = 557
			add_state_claim = 272
			add_state_claim = 780
			add_state_claim = 556
			add_state_claim = 779
			add_state_claim = 778
			add_state_claim = 781
			add_state_claim = 777
			add_state_claim = 776
			add_state_claim = 773
			add_state_claim = 774
			add_state_claim = 660
			add_state_claim = 539
			add_state_claim = 772
			if = {
				limit = {
					FRA = {
						OR = {
							owns_state = 557
							owns_state = 272
							owns_state = 780
							owns_state = 556
							owns_state = 779
							owns_state = 778
							owns_state = 781
							owns_state = 777
							owns_state = 776
							owns_state = 773
							owns_state = 774
							owns_state = 660
							owns_state = 539
							owns_state = 772
						}
					}
				}
				create_wargoal = {
					type = take_state_focus
					target = FRA
					generator = { 557 272 780 556 779 778 781 777 776 773 774 660 539 772 }
					expire = 0
				}
			}
			if = {
				limit = {
					VIC = {
						OR = {
							owns_state = 557
							owns_state = 272
							owns_state = 780
							owns_state = 556
							owns_state = 779
							owns_state = 778
							owns_state = 781
							owns_state = 777
							owns_state = 776
							owns_state = 773
							owns_state = 774
							owns_state = 660
							owns_state = 539
							owns_state = 772
						}
					}
				}
				create_wargoal = {
					type = take_state_focus
					target = VIC
					generator = { 557 272 780 556 779 778 781 777 776 773 774 660 539 772 }
					expire = 0
				}
			}
		}
	}
	
	focus = {
		id = SPA_facing_the_sun
		icon = GFX_z_goal_flames_of_rebellion
		prerequisite = {
			focus = SPA_unify_the_nationalist_front
			focus = SPA_supremacy_of_the_communion
		}
		x = 5
		y = 1
		relative_position_id = SPA_unify_the_nationalist_front
		
		cost = 10
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 10
		}
		available = {
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName] ([Root.GetTag]): Focus SPA_facing_the_sun"
			add_ideas = SPA_facing_the_sun
			add_ideas = national_army
			hidden_effect = {
				if = {
					limit = { NOT = { has_template = "Elite Division" } }
					division_template = {
						name = "Elite Division"
						priority = 2
						is_locked = yes
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
							infantry = { x = 0 y = 2 }

							infantry = { x = 1 y = 0 }
							infantry = { x = 1 y = 1 }
							infantry = { x = 1 y = 2 }

							artillery_brigade = { x = 2 y = 0 }
							artillery_brigade = { x = 2 y = 1 }
							infantry = { x = 2 y = 2 }
						}
						support = {
							artillery = { x = 0 y = 0 }
							engineer = { x = 0 y = 1 }
							recon = { x = 0 y = 2 }
						}
					}
				}
			}
			capital_scope = {
				create_unit = {
					division = "name = \"Elite Division\" division_template = \"Elite Division\" start_experience_factor = 0.6" 
					owner = ROOT
				}
				create_unit = {
					division = "name = \"Elite Division\" division_template = \"Elite Division\" start_experience_factor = 0.6" 
					owner = ROOT
				}
				create_unit = {
					division = "name = \"Elite Division\" division_template = \"Elite Division\" start_experience_factor = 0.6" 
					owner = ROOT
				}
			}
		}
	}

#  #  ##  ### ###  ##  #  #  ##  #   ###  ## ###  ##             ##   ##  ###  #   ###  ## ###  ## 
## # #  #  #   #  #  # ## # #  # #    #  #    #  #              #  # #  # #  # #    #  #    #  #   
# ## ####  #   #  #  # # ## #### #    #   #   #   #      ##     #    #### ###  #    #   #   #   #  
#  # #  #  #   #  #  # #  # #  # #    #    #  #    #            #  # #  # #  # #    #    #  #    # 
#  # #  #  #  ###  ##  #  # #  # ### ### ##   #  ##              ##  #  # #  # ### ### ##   #  ##  

### BRANCH

	focus = {
		id = SPA_supremacy_of_the_communion
		available = {
			has_global_flag = spanish_civil_war
		}
		bypass = {
		}
		prerequisite = { focus = SPA_create_coordinating_junta }
		mutually_exclusive = { focus = SPA_the_phalanx_ascendant focus = SPA_unify_the_nationalist_front }
		
		icon = GFX_focus_spa_supremacy_of_the_communion
		x = 10
		y = 1
		relative_position_id = SPA_create_coordinating_junta
		cost = 5
		
		ai_will_do = {
			factor = 30
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			if = {
				limit = { NOT = { has_government = monarchy } }
				set_politics = {
					ruling_party = monarchy
					elections_allowed = no
				}
			}
			hidden_effect = {
				random_other_country = {
					limit = { has_character = SPR_manuel_fal_conde }
					SPR_manuel_fal_conde = {
						set_nationality = ROOT
					}
				}
			}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SPA_luis_hernando_de_larramendi
			show_ideas_tooltip = SPA_martin_de_riquer
			show_ideas_tooltip = SPA_mauricio_de_sivatte
			show_ideas_tooltip = SPA_tomas_dominguez_arevalo
			
			if = {
				limit = {
					OR = {
						has_character = SPA_agustin_munoz_grandes
						has_character = SPA_juan_yague
						has_character = SPA_jose_antonio_giron
						has_character = SPA_manuel_hedilla
						has_character = SPA_diego_hidalgo_y_duran
						has_character = SPA_miguel_ponte
						has_character = SPA_joaquin_garcia_morato
						has_character = SPA_enrique_canovas_lacruz
					}
				}
				custom_effect_tooltip = remove_theorist
				show_ideas_tooltip = SPA_agustin_munoz_grandes
				show_ideas_tooltip = SPA_juan_yague
				show_ideas_tooltip = SPA_jose_antonio_giron
				show_ideas_tooltip = SPA_manuel_hedilla
				show_ideas_tooltip = SPA_diego_hidalgo_y_duran
				show_ideas_tooltip = SPA_miguel_ponte
				show_ideas_tooltip = SPA_joaquin_garcia_morato
				show_ideas_tooltip = SPA_enrique_canovas_lacruz
			}
			
			add_field_marshal_role = {
				character = SPR_manuel_fal_conde
				traits = { trait_SPA_carlist_loyalties }
				skill = 3
				attack_skill = 2
				defense_skill = 3
				planning_skill = 2
				logistics_skill = 3
			}
			add_war_support = 0.05
			swap_ideas = {
				remove_idea = SPA_carlism_1
				add_idea = SPA_disjointed_carlist_juntas
			}
			activate_mission = SPA_fascist_crackdown_mission
			#remove_ideas = SPA_carlism_1
			#add_ideas = SPA_disjointed_carlist_juntas
		}
	}

	focus = {
		id = SPA_prepare_the_carlist_insurrection
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_supremacy_of_the_communion }
		
		icon = GFX_goal_generic_occupy_states_ongoing_war
		x = -3
		y = 1
		relative_position_id = SPA_supremacy_of_the_communion
		cost = 5

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_SPA_CARLIST_UPRISING}
		completion_reward = {
			custom_effect_tooltip = SPA_prepare_the_carlist_insurrection_tt
			hidden_effect = {
				if = {
					limit = {
						OR = {
							controls_state = 172
							controls_state = 176
						}
					}
					every_state = {
						limit = {
							OR = {
								state = 172
								state = 176
							}
							NOT = { has_state_flag = SPA_carlist_cell_flag }
							is_controlled_by = ROOT
						}
						set_state_flag = SPA_carlist_cell_flag
					}
				}
			}
		}
	}

	focus = {
		id = SPA_contact_the_union_militar_espanola
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_prepare_the_carlist_insurrection }
		
		icon = GFX_goal_generic_major_alliance
		x = 0
		y = 1
		relative_position_id = SPA_prepare_the_carlist_insurrection
		cost = 5

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = SPA_contact_the_union_militar_espanola
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
			country_event = { id = lar_spain.33 hours = 6 random_hours = 6 }
		}
	}

	focus = {
		id = SPA_head_the_junta_nacional
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_supremacy_of_the_communion }
		
		icon = GFX_goal_generic_political_pressure
		x = -1
		y = 1
		relative_position_id = SPA_supremacy_of_the_communion
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			add_stability = 0.05
			add_country_leader_role = {
				character = SPR_manuel_fal_conde
				country_leader = {
					desc = "POLITICS_MANUEL_FAL_CONDE_DESC"
					ideology = dual_monarchy
					traits = {
						jefe
					}
					expire = "1965.1.1"
				}
				promote_leader = yes
			}
			add_ideas = limited_exports
			add_ideas = severe_migration_control
		}
	}

	focus = {
		id = SPA_unite_the_requetes
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_head_the_junta_nacional }
		
		icon = GFX_z_goal_requete
		x = 0
		y = 1
		relative_position_id = SPA_head_the_junta_nacional
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			remove_ideas = SPA_disjointed_carlist_juntas
		}
	}

	focus = {
		id = SPA_the_war_in_the_north
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_supremacy_of_the_communion }
		
		icon = GFX_z_goal_Counter_attack
		x = 1
		y = 1
		relative_position_id = SPA_supremacy_of_the_communion
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_doctrine_cost_reduction = {
				name = SPA_the_war_in_the_north
				cost_reduction = 0.5
				uses = 2
				category = land_doctrine
			}
			790 = {
				create_unit = {
					division = "division_template = \"Requeté Carlista\" start_experience_factor = 0.3" 
					owner = SPB
					allow_spawning_on_enemy_provs = yes
					count = 3
				}
			}
			792 = {
				create_unit = {
					division = "division_template = \"Requeté Carlista\" start_experience_factor = 0.3" 
					owner = SPB
					allow_spawning_on_enemy_provs = yes
					count = 3
				}
			}
		}
	}

	focus = {
		id = SPA_revive_the_spirit_of_the_carlist_wars
		available = {
		}
		bypass = {
			has_global_flag = scw_over
		}
		prerequisite = { focus = SPA_the_war_in_the_north }
		
		icon = GFX_z_goal_empire_power
		x = 0
		y = 1
		relative_position_id = SPA_the_war_in_the_north
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			add_war_support = 0.1
			add_ideas = SPA_revive_the_spirit_of_the_carlist_wars
			if = {
				limit = { has_war_with = SPR }
				add_timed_idea = { idea = SPA_anti_republican_offensive days = 365 }
			}
			if = {
				limit = { has_war_with = SPA }
				add_timed_idea = { idea = SPA_anti_nationalist_offensive days = 365 }
			}
			if = {
				limit = { has_war_with = ARA }
				add_timed_idea = { idea = SPA_anti_anarchist_offensive days = 365 }
			}
			if = {
				limit = { has_war_with = CAT }
				add_timed_idea = { idea = SPA_anti_catalon_offensive days = 365 }
			}
		}
	}

	focus = {
		id = SPA_arms_modernization
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_revive_the_spirit_of_the_carlist_wars }
		
		icon = GFX_goal_generic_build_tank
		x = 2
		y = 1
		relative_position_id = SPA_revive_the_spirit_of_the_carlist_wars
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_WAR_SUPPORT}
		completion_reward = {
			add_tech_bonus = {
				name = SPA_arms_modernization
				bonus = 1.0
				uses = 1
				category = infantry_weapons
			}
			add_tech_bonus = {
				name = SPA_arms_modernization
				bonus = 1.0
				uses = 1
				category = artillery
			}
		}
	}

	focus = {
		id = SPA_no_compromise_on_carlist_ideals
		available = {
		}
		bypass = {
			OR = {
				has_war_with = SPA
				has_global_flag = SPR_carlist_uprising_flag
				has_global_flag = scw_over
			}
		}
		prerequisite = { focus = SPA_contact_the_union_militar_espanola }
		prerequisite = { focus = SPA_unite_the_requetes }
		
		icon = GFX_focus_spa_no_compromise_on_carlist_ideals
		x = 1
		y = 1
		relative_position_id = SPA_contact_the_union_militar_espanola
		cost = 5

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_SPA_CIVIL_WAR FOCUS_FILTER_SPA_CARLIST_UPRISING}
		completion_reward = {
			add_timed_idea = { idea = SPA_no_compromise_on_carlist_ideals days = 60 }
			custom_effect_tooltip = SPA_no_compromise_on_carlist_ideals_tt_2
			custom_effect_tooltip = SPA_no_compromise_on_carlist_ideals_tt
			if = {
				limit = {
					NOT = { has_war_with = SPA }
				}
				hidden_effect = { country_event = lar_spain.8 }
			}
		}
	}

	focus = {
		id = SPA_the_crusade_against_democracy
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_unite_the_requetes }
		prerequisite = { focus = SPA_revive_the_spirit_of_the_carlist_wars }
		
		icon = GFX_focus_generic_strike_at_democracy2
		x = 1
		y = 1
		relative_position_id = SPA_unite_the_requetes
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			set_country_flag = { flag = SPA_the_crusade_against_democracy_timer_flag value = 1 days = 69 }
			add_ideas = SPA_crusade_against_democracy_1
			add_doctrine_cost_reduction = {
				name = SPA_the_crusade_against_democracy
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
		}
	}

	focus = {
		id = SPA_expand_the_requetes
		available = {
			custom_trigger_tooltip = {
			    tooltip = SPA_the_crusade_against_democracy_timer_tt
			   	NOT = { has_country_flag = SPA_the_crusade_against_democracy_timer_flag }
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_crusade_against_democracy }
		prerequisite = { focus = SPA_no_compromise_on_carlist_ideals }
		
		icon = GFX_focus_generic_manpower
		x = -1
		y = 1
		relative_position_id = SPA_the_crusade_against_democracy
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			set_country_flag = { flag = SPA_the_crusade_against_democracy_timer_flag value = 1 days = 69 }
			if = {
				limit = {
					NOT = {
						has_idea = SPA_crusade_against_democracy_1
						has_idea = SPA_crusade_against_democracy_4
						has_idea = SPA_crusade_against_democracy_5
					}
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_crusade_against_democracy_1
						add_idea = SPA_crusade_against_democracy_2
					}
				}
			}
			if = {
				limit = {
					has_idea = SPA_crusade_against_democracy_1
				}
				swap_ideas = {
					remove_idea = SPA_crusade_against_democracy_1
					add_idea = SPA_crusade_against_democracy_2
				}
			}
			if = {
				limit = {
					has_idea = SPA_crusade_against_democracy_4
				}
				swap_ideas = {
					remove_idea = SPA_crusade_against_democracy_4
					add_idea = SPA_crusade_against_democracy_6
				}
			}
			if = {
				limit = {
					has_idea = SPA_crusade_against_democracy_5
				}
				swap_ideas = {
					remove_idea = SPA_crusade_against_democracy_5
					add_idea = SPA_crusade_against_democracy_8
				}
			}
		}
	}

	focus = {
		id = SPA_militarize_the_masses
		available = {
			custom_trigger_tooltip = {
			    tooltip = SPA_the_crusade_against_democracy_timer_tt
			   	NOT = { has_country_flag = SPA_the_crusade_against_democracy_timer_flag }
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_expand_the_requetes }
		
		icon = GFX_goal_generic_axis_build_infantry
		x = 0
		y = 1
		relative_position_id = SPA_expand_the_requetes
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			set_country_flag = { flag = SPA_the_crusade_against_democracy_timer_flag value = 1 days = 69 }
			if = {
				limit = {
					NOT = {
						has_idea = SPA_crusade_against_democracy_2
						has_idea = SPA_crusade_against_democracy_6
						has_idea = SPA_crusade_against_democracy_8
					}
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_crusade_against_democracy_2
						add_idea = SPA_crusade_against_democracy_3
					}
				}
			}
			if = {
				limit = {
					has_idea = SPA_crusade_against_democracy_2
				}
				swap_ideas = {
					remove_idea = SPA_crusade_against_democracy_2
					add_idea = SPA_crusade_against_democracy_3
				}
			}
			if = {
				limit = {
					has_idea = SPA_crusade_against_democracy_6
				}
				swap_ideas = {
					remove_idea = SPA_crusade_against_democracy_6
					add_idea = SPA_crusade_against_democracy_7
				}
			}
			if = {
				limit = {
					has_idea = SPA_crusade_against_democracy_8
				}
				swap_ideas = {
					remove_idea = SPA_crusade_against_democracy_8
					add_idea = SPA_crusade_against_democracy_9
				}
			}
		}
	}

	focus = {
		id = SPA_defenders_of_catholicism
		available = {
			custom_trigger_tooltip = {
			    tooltip = SPA_the_crusade_against_democracy_timer_tt
			   	NOT = { has_country_flag = SPA_the_crusade_against_democracy_timer_flag }
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_crusade_against_democracy }
		
		icon = GFX_focus_mex_restore_the_army_of_christ
		x = 1
		y = 1
		relative_position_id = SPA_the_crusade_against_democracy
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_POLITICAL}
		completion_reward = {
			set_country_flag = { flag = SPA_the_crusade_against_democracy_timer_flag value = 1 days = 69 }
			if = {
				limit = {
					NOT = {
						has_idea = SPA_crusade_against_democracy_1
						has_idea = SPA_crusade_against_democracy_2
						has_idea = SPA_crusade_against_democracy_3
					}
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_crusade_against_democracy_1
						add_idea = SPA_crusade_against_democracy_4
					}
				}
			}
			if = {
				limit = {
					has_idea = SPA_crusade_against_democracy_1
				}
				swap_ideas = {
					remove_idea = SPA_crusade_against_democracy_1
					add_idea = SPA_crusade_against_democracy_4
				}
			}
			if = {
				limit = {
					has_idea = SPA_crusade_against_democracy_2
				}
				swap_ideas = {
					remove_idea = SPA_crusade_against_democracy_2
					add_idea = SPA_crusade_against_democracy_6
				}
			}
			if = {
				limit = {
					has_idea = SPA_crusade_against_democracy_3
				}
				swap_ideas = {
					remove_idea = SPA_crusade_against_democracy_3
					add_idea = SPA_crusade_against_democracy_7
				}
			}
		}
	}

	focus = {
		id = SPA_battle_rites
		available = {
			custom_trigger_tooltip = {
			    tooltip = SPA_the_crusade_against_democracy_timer_tt
			   	NOT = { has_country_flag = SPA_the_crusade_against_democracy_timer_flag }
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_defenders_of_catholicism }
		
		icon = GFX_z_goal_spain_nobody

		x = 0
		y = 1
		relative_position_id = SPA_defenders_of_catholicism
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			set_country_flag = { flag = SPA_the_crusade_against_democracy_timer_flag value = 1 days = 69 }
			if = {
				limit = {
					NOT = {
						has_idea = SPA_crusade_against_democracy_4
						has_idea = SPA_crusade_against_democracy_6
						has_idea = SPA_crusade_against_democracy_7
					}
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_crusade_against_democracy_4
						add_idea = SPA_crusade_against_democracy_5
					}
				}
			}
			if = {
				limit = {
					has_idea = SPA_crusade_against_democracy_4
				}
				swap_ideas = {
					remove_idea = SPA_crusade_against_democracy_4
					add_idea = SPA_crusade_against_democracy_5
				}
			}
			if = {
				limit = {
					has_idea = SPA_crusade_against_democracy_6
				}
				swap_ideas = {
					remove_idea = SPA_crusade_against_democracy_6
					add_idea = SPA_crusade_against_democracy_8
				}
			}
			if = {
				limit = {
					has_idea = SPA_crusade_against_democracy_7
				}
				swap_ideas = {
					remove_idea = SPA_crusade_against_democracy_7
					add_idea = SPA_crusade_against_democracy_9
				}
			}
		}
	}

	focus = {
		id = SPA_cultivate_fanaticism
		available = {
			custom_trigger_tooltip = {
			    tooltip = SPA_the_crusade_against_democracy_timer_tt
			   	NOT = { has_country_flag = SPA_the_crusade_against_democracy_timer_flag }
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_militarize_the_masses }
		prerequisite = { focus = SPA_battle_rites }
		
		icon = GFX_z_goal_appeal_youngmens
		x = 1
		y = 1
		relative_position_id = SPA_militarize_the_masses
		cost = 20

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_MANPOWER}
		completion_reward = {
			swap_ideas = {
				remove_idea = SPA_crusade_against_democracy_9
				add_idea = SPA_crusade_against_democracy_10
			}
			if = { 
				limit = {
					has_dlc = "Waking the Tiger"
				}
				custom_effect_tooltip = cost_reduced_last_stand 
			}
		}
	}

	focus = {
		id = SPA_the_third_dimension_of_warfare
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_crusade_against_democracy }
		prerequisite = { focus = SPA_arms_modernization }
		
		icon = GFX_goal_generic_air_fighter2
		x = 3
		y = 1
		relative_position_id = SPA_the_crusade_against_democracy
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			air_experience = 25
			add_doctrine_cost_reduction = {
				name = SPA_the_third_dimension_of_warfare
				cost_reduction = 0.5
				uses = 2
				category = air_doctrine
			}
		}
	}

	focus = {
		id = SPA_a_modern_fighter_fleet
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_the_third_dimension_of_warfare }
		
		icon = GFX_goal_generic_air_fighter
		x = 0
		y = 1
		relative_position_id = SPA_the_third_dimension_of_warfare
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			air_experience = 50
			add_tech_bonus = {
				name = SPA_a_modern_fighter_fleet
				bonus = 1.0
				uses = 2
				category = light_fighter
				category = cat_heavy_fighter
			}
		}
	}

	focus = {
		id = SPA_confirm_the_fueros
		available = {
			OR = {
				controls_state = 165
				controls_state = 171
				controls_state = 792
			}
		}
		bypass = {
		}
		prerequisite = { focus = SPA_no_compromise_on_carlist_ideals }
		
		icon = GFX_z_guarantee_autonomy_minorities
		x = -1
		y = 1
		relative_position_id = SPA_no_compromise_on_carlist_ideals
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY}
		completion_reward = {
			add_stability = 0.1
			every_controlled_state = {
				limit = {
					OR = {
						state = 165
						state = 171
						state = 792
					}
				}
				add_state_modifier = {
					modifier = {
						local_supplies = 0.25
						local_manpower = 0.25
					}
				}
			}
		}
	}

	focus = {
		id = SPA_encourage_local_industrialization
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_confirm_the_fueros }
		
		icon = GFX_goal_generic_construct_civ_factory
		x = -1
		y = 1
		relative_position_id = SPA_confirm_the_fueros
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPA_encourage_local_industrialization_1civ }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_RESEARCH FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_tech_bonus = {
				name = SPA_encourage_local_industrialization
				bonus = 1.0
				uses = 1
				category = industry
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_encourage_local_industrialization_1civ
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_encourage_local_industrialization_1civ }
				}
				set_state_flag = SPA_encourage_local_industrialization_1civ
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_encourage_local_industrialization_1civ }
				}
				set_state_flag = SPA_encourage_local_industrialization_1civ
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPA_encourage_local_mining
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_encourage_local_industrialization }
		
		icon = GFX_goal_generic_construction2
		x = 0
		y = 1
		relative_position_id = SPA_encourage_local_industrialization
		cost = 10

		available_if_capitulated = yes
		search_filters = {}
		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPA_encourage_local_mining_1inf }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					is_core_of = ROOT
					OR = {
						state = 792
						state = 166
						state = 173
						state = 788
						state = 791
						state = 171
						state = 170
						state = 41
					}
				}
				set_state_flag = SPA_encourage_local_mining_1inf
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_encourage_local_mining_1inf }
					OR = {
						state = 792
						state = 166
						state = 173
						state = 788
						state = 791
						state = 171
						state = 170
						state = 41
					}
				}
				set_state_flag = SPA_encourage_local_mining_1inf
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			custom_effect_tooltip = SPA_reduce_reliance_on_foreign_resources_tt
		}
	}

	focus = {
		id = SPA_settle_the_succession_question
		available = {
			has_global_flag = scw_over
		}
		bypass = {
		}
		prerequisite = { focus = SPA_confirm_the_fueros }
		
		icon = GFX_goal_generic_forceful_treaty
		x = 1
		y = 2
		relative_position_id = SPA_confirm_the_fueros
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			add_stability = 0.1
			country_event = { id = lar_spain.34 hours = 6 random_hours = 6 }
		}
	}

	focus = {
		id = SPA_dios_patria_rey
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_settle_the_succession_question }
		
		icon = GFX_goal_generic_national_unity
		x = 3
		y = 1
		relative_position_id = SPA_settle_the_succession_question
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_STABILITY FOCUS_FILTER_WAR_SUPPORT FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			add_stability = 0.05
			add_war_support = 0.05
			swap_ideas = {
				remove_idea = SPA_recovering_from_civil_war
				add_idea = SPA_recovering_from_civil_war_2
			}
		}
	}

	focus = {
		id = SPA_restore_the_empire
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_dios_patria_rey }
		
		icon = GFX_z_goal_national_freedom
		x = 0
		y = 1
		relative_position_id = SPA_dios_patria_rey
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPA_restore_the_empire_1mil }
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_restore_the_empire_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_restore_the_empire_1mil }
				}
				set_state_flag = SPA_restore_the_empire_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_restore_the_empire_1mil }
				}
				set_state_flag = SPA_restore_the_empire_1mil
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPA_strengthen_the_empire
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_restore_the_empire }
		
		icon =  GFX_z_goal_monarchy_power
		x = -2
		y = 1
		relative_position_id = SPA_restore_the_empire
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPA_restore_the_empire_2mil }
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_restore_the_empire_2civ
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_restore_the_empire_2civ }
				}
				set_state_flag = SPA_restore_the_empire_2mil
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPA_prosperity_of_the_empire
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_strengthen_the_empire }
		
		icon =  GFX_z_goal_monarchism_principles_of_dualism
		x = 0
		y = 1
		relative_position_id = SPA_strengthen_the_empire
		cost = 10

		available_if_capitulated = yes

		search_filters = {}
		complete_tooltip = {
			every_state = {
				limit	= {	has_state_flag = SPA_prosperity_of_the_empire_1inf }
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_INDUSTRY}
		completion_reward = {
			if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_3
				}
				remove_ideas = SPA_recovering_from_civil_war_3
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war_2
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war_2
					add_idea = SPA_recovering_from_civil_war_3
				}
			}
			else_if = {
				limit = {
					has_idea = SPA_recovering_from_civil_war
				}
				swap_ideas = {
					remove_idea = SPA_recovering_from_civil_war
					add_idea = SPA_recovering_from_civil_war_2
				}
			}
			else_if = {
				limit = {
					NOT = { has_global_flag = scw_over }
				}
				effect_tooltip = {
					swap_ideas = {
						remove_idea = SPA_recovering_from_civil_war
						add_idea = SPA_recovering_from_civil_war_2
					}
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					is_core_of = ROOT
				}
				set_state_flag = SPA_prosperity_of_the_empire_1inf
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_prosperity_of_the_empire_1inf }
				}
				set_state_flag = SPA_prosperity_of_the_empire_1inf
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = infrastructure
						size > 0
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_prosperity_of_the_empire_1inf }
				}
				set_state_flag = SPA_prosperity_of_the_empire_1inf
				add_building_construction = {
					type = infrastructure
					level = 1
					instant_build = yes
				}
			}
		}
	}

	focus = {
		id = SPA_press_the_gibraltar_claim
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_restore_the_empire }
		
		icon = GFX_focus_attack_britain
		x = -1
		y = 3
		relative_position_id = SPA_restore_the_empire
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			create_wargoal = {
				type = take_state_focus
				target = ENG
				generator = { 118 }
				expire = 0
			}
		}
	}

	focus = {
		id = SPA_claim_the_french_throne
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_restore_the_empire }
		
		icon = GFX_focus_chi_reach_out_to_france
		x = 0
		y = 1
		relative_position_id = SPA_restore_the_empire
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			if = {
				limit = {
					event_target:NW_france_scope = {
						OR = {
							has_government = monarchy
							has_completed_focus = FRA_enlightened_absolutism
						}
					}
				}
				event_target:NW_france_scope = { country_event = { id = lar_spain.42 hours = 6 random_hours = 6 } }
			}
			else = {
				create_wargoal = {
					type = annex_everything
					target = event_target:NW_france_scope
				}
			}
		}
	}

	focus = {
		id = SPA_retake_the_spanish_netherlands
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_claim_the_french_throne }
		
		icon = GFX_goal_generic_occupy_states_ongoing_war
		x = 0
		y = 1
		relative_position_id = SPA_claim_the_french_throne
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			create_wargoal = {
			    type = annex_everything
			    target = HOL
			    expire = 0
			}
			create_wargoal = {
			    type = annex_everything
			    target = BEL
			    expire = 0
			}
			create_wargoal = {
			    type = annex_everything
			    target = LUX
			    expire = 0
			}
		}
	}

	focus = {
		id = SPA_restore_the_iberian_union
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_restore_the_empire }
		
		icon = GFX_focus_generic_befriend_portugal
		x = 1
		y = 3
		relative_position_id = SPA_restore_the_empire
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			POR = { country_event = { id = lar_spain.45 hours = 6 random_hours = 6 } }
		}
	}

	focus = {
		id = SPA_the_war_of_vengeance
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_press_the_gibraltar_claim }
		prerequisite = { focus = SPA_restore_the_iberian_union }
		
		icon = GFX_focus_spa_the_war_of_vengeance
		x = 1
		y = 1
		relative_position_id = SPA_press_the_gibraltar_claim
		cost = 10

		available_if_capitulated = yes

		completion_reward = {
			create_wargoal = {
			    type = take_state_focus
			    target = USA
			    generator = { 378 379 380 377 376 375 }
			    expire = 0
			}
			create_wargoal = {
			    type = puppet_wargoal_focus
			    target = PHI
			    expire = 0
			}
			create_wargoal = {
			    type = annex_everything
			    target = CUB
			    expire = 0
			}
		}
	}

	focus = {
		id = SPA_found_the_academia_vazquez_de_mella
		available = {
			num_of_factories > 50
		}
		bypass = {
		}
		prerequisite = { focus = SPA_dios_patria_rey }
		
		icon = GFX_focus_research2
		x = 2
		y = 1
		relative_position_id = SPA_dios_patria_rey
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_research_slot = 1
		}
	}

	focus = {
		id = SPA_a_fleet_worthy_of_a_king
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_restore_the_empire }
		
		icon = GFX_goal_generic_construct_naval_dockyard
		x = 3
		y = 1
		relative_position_id = SPA_restore_the_empire
		cost = 10

		available_if_capitulated = yes

		complete_tooltip = {
			every_state = {
				limit = { has_state_flag = SPA_a_fleet_worthy_of_a_king_3DY }
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
			}
		}
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			navy_experience = 25
			add_tech_bonus = {
				name = SPA_a_fleet_worthy_of_a_king
				bonus = 1
				uses = 1
				category = dd_tech
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
					is_core_of = ROOT
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
				set_state_flag = SPA_a_fleet_worthy_of_a_king_3DY
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = dockyard
						size > 2
						include_locked = yes
					}
					is_core_of = ROOT
					NOT = { has_state_flag = SPA_a_fleet_worthy_of_a_king_3DY }
				}
				add_extra_state_shared_building_slots = 3
				add_building_construction = {
					type = dockyard
					level = 3
					instant_build = yes
				}
				set_state_flag = SPA_a_fleet_worthy_of_a_king_3DY
			}
		}
	}

	focus = {
		id = SPA_rebuild_the_battlefleet
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_a_fleet_worthy_of_a_king }
		
		icon = GFX_goal_generic_navy_battleship
		x = 0
		y = 1
		relative_position_id = SPA_a_fleet_worthy_of_a_king
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			add_ideas = SPA_rebuild_the_battlefleet
			add_tech_bonus = {
				name = SPA_rebuild_the_battlefleet
				bonus = 1
				uses = 2
				category = bb_tech
			}
		}
	}

	focus = {
		id = SPA_imperial_security
		available = {
		}
		bypass = {
		}
		prerequisite = { focus = SPA_rebuild_the_battlefleet }
		
		icon = GFX_goal_generic_navy_doctrines_tactics
		x = 0
		y = 1
		relative_position_id = SPA_rebuild_the_battlefleet
		cost = 10

		available_if_capitulated = yes
		search_filters = {FOCUS_FILTER_RESEARCH}
		completion_reward = {
			navy_experience = 50
			add_tech_bonus = {
				name = SPA_imperial_security
				bonus = 1
				uses = 2
				category = cl_tech
				category = ca_tech
			}
			add_doctrine_cost_reduction = {
				name = SPA_imperial_security
				cost_reduction = 0.5
				uses = 1
				category = naval_doctrine
			}
		}
	}

}
