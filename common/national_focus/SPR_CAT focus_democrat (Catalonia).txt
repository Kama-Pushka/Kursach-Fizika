focus_tree = {
	id = catalonia_focus_democrat

	country = {
		factor = 0

		modifier = {
			add = 10
			tag = CAT
			has_country_flag = catalonia_focus_democrat_flag
		}
	}

	default = no
	
	continuous_focus_position = { x = 50 y = 1550 }

	######################
	#### ARMY SECTION ####
	######################
	
	
	focus = {
		id = CAT_militia_formations
		icon = GFX_z_goal_socmilirarism
		x = 3
		y = 0
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 3
				is_historical_focus_on = yes
				date < 1937.05.01
			}
		}
		available = {
		}
		bypass = {
		}
		
		select_effect = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_militia_formations"
			add_ideas = ARA_militia_formations
		}
	}
	
	focus = {
		id = CAT_federation_anarchists_iberia
		icon = GFX_z_goal_federation_anarchists
		prerequisite = { focus = CAT_militia_formations }
		x = -2
		y = 1
		relative_position_id = CAT_militia_formations
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				date < 1937.05.01
			}
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_federation_anarchists_iberia"
			add_ideas = ARA_federation_anarchists_iberia_idea
		}
	}
	
	focus = {
		id = CAT_creation_centralized_army
		icon = GFX_z_goal_conscription
		prerequisite = { focus = CAT_militia_formations }
		x = 0
		y = 1
		relative_position_id = CAT_militia_formations
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 3
				is_historical_focus_on = yes
				date < 1937.05.01
			}
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_creation_centralized_army"
			add_ideas = CAT_creation_centralized_army
		}
	}
	
	focus = {
		id = CAT_mujeres_libres
		icon = GFX_focus_mex_soldaderas
		prerequisite = { focus = CAT_militia_formations }
		x = 2
		y = 1
		relative_position_id = CAT_militia_formations
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_mujeres_libres"
			add_ideas = ARA_mujeres_libres
		}
	}
	
	focus = {
		id = CAT_revival_fleet
		icon = GFX_goal_generic_navy_battleship
		prerequisite = { focus = CAT_mujeres_libres }
		x = 0
		y = 1
		relative_position_id = CAT_mujeres_libres
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_revival_fleet"
			navy_experience = 10
			add_tech_bonus = {
				name = CAT_revival_fleet
				bonus = 1.0
				uses = 3
				category = ss_tech
				category = cl_tech
				category = ca_tech
				category = dd_tech
				category = bc_tech
				category = bb_tech
				category = cv_tech
			}
			add_doctrine_cost_reduction = {
				name = CAT_revival_fleet
				cost_reduction = 0.5
				uses = 1
				technology = convoy_interdiction_ti
				technology = unrestricted_submarine_warfare
				technology = wolfpacks
				technology = advanced_submarine_warfare
				technology = combined_operations_raiding
				category = fleet_in_being_tree
			}
		}
	}

	
	##########################
	#### ECONOMIC SECTION ####
	##########################
	
	focus = {
		id = CAT_collectivization
		icon = GFX_focus_eng_concessions_to_the_trade_unions
		mutually_exclusive = { focus = CAT_nationalization }
		x = 7
		y = 0
		relative_position_id = CAT_militia_formations
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_collectivization"
			add_popularity = {
				ideology = anarchism
				popularity = 0.03
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			add_to_variable = { ROOT.anarchist_score = 1 }
		}
	}
	
	focus = {
		id = CAT_nationalization
		icon = GFX_z_goal_nationalization_heavy_industry
		mutually_exclusive = { focus = CAT_collectivization }
		x = 2
		y = 0
		relative_position_id = CAT_collectivization
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 2
				is_historical_focus_on = yes
			}
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_nationalization"
			add_popularity = {
				ideology = communism
				popularity = 0.03
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			add_to_variable = { ROOT.communist_score = 1 }
		}
	}
	
	focus = {
		id = CAT_law_collectivization_and_workers_control
		icon = GFX_focus_generic_treaty
		prerequisite = { focus = CAT_collectivization }
		x = -2
		y = 1
		relative_position_id = CAT_collectivization
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_law_collectivization_and_workers_control"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = CAT_creating_committees
		icon = GFX_focus_generic_self_management
		prerequisite = { focus = CAT_law_collectivization_and_workers_control }
		x = 0
		y = 1
		relative_position_id = CAT_law_collectivization_and_workers_control
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_creating_committees"
			random_owned_controlled_state = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = CAT_union_in_commune
		icon = GFX_z_goal_council_anarchism
		prerequisite = { focus = CAT_collectivization focus = CAT_nationalization }
		mutually_exclusive = { focus = CAT_support_individual_entrepreneurs }
		x = 0
		y = 1
		relative_position_id = CAT_collectivization
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_union_in_commune"
			add_popularity = {
				ideology = anarchism
				popularity = 0.03
			}
			random_owned_controlled_state = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			add_to_variable = { ROOT.anarchist_score = 1 }
		}
	}
	
	focus = {
		id = CAT_support_individual_entrepreneurs
		icon = GFX_z_goal_council_communism
		prerequisite = { focus = CAT_collectivization focus = CAT_nationalization }
		mutually_exclusive = { focus = CAT_union_in_commune }
		x = 0
		y = 1
		relative_position_id = CAT_nationalization
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 2
				is_historical_focus_on = yes
			}
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_support_individual_entrepreneurs"
			add_popularity = {
				ideology = communism
				popularity = 0.03
			}
			random_owned_controlled_state = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
			add_to_variable = { ROOT.communist_score = 1 }
		}
	}
	
	focus = {
		id = CAT_decentralized_planning
		icon = GFX_z_goal_planning_decentralized
		prerequisite = { focus = CAT_union_in_commune focus = CAT_support_individual_entrepreneurs }
		mutually_exclusive = { focus = CAT_central_planning }
		x = 0
		y = 1
		relative_position_id = CAT_union_in_commune
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_decentralized_planning"
			add_popularity = {
				ideology = anarchism
				popularity = 0.03
			}
			add_ideas = CAT_decentralized_planning
			add_to_variable = { ROOT.anarchist_score = 1 }
		}
	}
	
	focus = {
		id = CAT_central_planning
		icon = GFX_z_goal_planning_central
		prerequisite = { focus = CAT_union_in_commune focus = CAT_support_individual_entrepreneurs }
		mutually_exclusive = { focus = CAT_decentralized_planning }
		x = 0
		y = 1
		relative_position_id = CAT_support_individual_entrepreneurs
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 2
				is_historical_focus_on = yes
			}
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_central_planning"
			add_popularity = {
				ideology = communism
				popularity = 0.03
			}
			add_ideas = CAT_central_planning
			add_to_variable = { ROOT.communist_score = 1 }
		}
	}
	
	focus = {
		id = CAT_voluntary_creation_of_collective
		icon = GFX_z_goal_voluntary_creation_of_collective
		prerequisite = { focus = CAT_decentralized_planning focus = CAT_central_planning }
		mutually_exclusive = { focus = CAT_voluntary_membership_of_collective }
		x = 0
		y = 1
		relative_position_id = CAT_decentralized_planning
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_voluntary_creation_of_collective"
			add_popularity = {
				ideology = anarchism
				popularity = 0.03
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = industrial_complex
					level = 2
					instant_build = yes
				}
			}
			add_to_variable = { ROOT.anarchist_score = 1 }
		}
	}
	
	focus = {
		id = CAT_voluntary_membership_of_collective
		icon = GFX_z_goal_soviet_civil_city1
		prerequisite = { focus = CAT_decentralized_planning focus = CAT_central_planning }
		mutually_exclusive = { focus = CAT_voluntary_creation_of_collective }
		x = 0
		y = 1
		relative_position_id = CAT_central_planning
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 2
				is_historical_focus_on = yes
			}
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_voluntary_membership_of_collective"
			add_popularity = {
				ideology = communism
				popularity = 0.03
			}
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 1
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 2
				add_building_construction = {
					type = arms_factory
					level = 2
					instant_build = yes
				}
			}
			add_to_variable = { ROOT.communist_score = 1 }
		}
	}
	
	focus = {
		id = CAT_university_barcelona
		icon = GFX_z_goal_vienna_circle
		prerequisite = { focus = CAT_voluntary_creation_of_collective focus = CAT_voluntary_membership_of_collective }
		x = 1
		y = 1
		relative_position_id = CAT_voluntary_creation_of_collective
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_university_barcelona"
			add_research_slot = 1
		}
	}
	
	focus = {
		id = CAT_law_nationalisation_and_support_workers
		icon = GFX_goal_generic_forceful_treaty
		prerequisite = { focus = CAT_nationalization }
		x = 2
		y = 1
		relative_position_id = CAT_nationalization
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_law_nationalisation_and_support_workers"
			random_owned_controlled_state = {
				limit = {
					free_building_slots = {
						building = arms_factory
						size > 0
						include_locked = yes
					}
				}
				add_extra_state_shared_building_slots = 1
				add_building_construction = {
					type = arms_factory
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
			random_owned_controlled_state = {
				limit = {
					hospital < 5
				}
				add_building_construction = {
					type = hospital
					level = 1
					instant_build = yes
				}
			}
		}
	}
	
	focus = {
		id = CAT_controlled_unions
		icon = GFX_z_goal_controlled_unions
		prerequisite = { focus = CAT_law_nationalisation_and_support_workers }
		x = 0
		y = 1
		relative_position_id = CAT_law_nationalisation_and_support_workers
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_controlled_unions"
			random_owned_controlled_state = {
				add_building_construction = {
					type = infrastructure
					level = 2
					instant_build = yes
				}
			}
		}
	}
	
	
	###########################
	#### POLITICAL SECTION ####
	###########################
	
	focus = {
		id = CAT_may_events
		icon = GFX_z_goal_big_news
		x = -2
		y = 5
		relative_position_id = CAT_collectivization
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 500
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_may_events"
			add_political_power = 50
			add_stability = -0.05
			custom_effect_tooltip = TUR_focus_autocomplete_tt
		}
	}
	
	focus = {
		id = CAT_winning_kpi
		icon = GFX_goal_support_communism
		prerequisite = { focus = CAT_may_events }
		mutually_exclusive = { focus = CAT_winning_iwa focus = CAT_winning_poum focus = CAT_save_power_jeneralitet }
		x = -6
		y = 1
		relative_position_id = CAT_may_events
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_winning_kpi"
			add_popularity = {
				ideology = communism
				popularity = 0.25
			}
			set_politics = {
				ruling_party = communism
				elections_allowed = no
			}
			custom_effect_tooltip = TUR_focus_autocomplete_tt
			custom_effect_tooltip = CAT_winning_kpi_tt
		}
	}
	
	focus = {
		id = CAT_repression_against_anarchists
		icon = GFX_focus_spr_crush_the_revolution
		prerequisite = { focus = CAT_winning_kpi }
		x = -2
		y = 1
		relative_position_id = CAT_winning_kpi
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_repression_against_anarchists"
			add_popularity = {
				ideology = anarchism
				popularity = -0.07
			}
		}
	}
	
	focus = {
		id = CAT_military_investigation_service
		icon = GFX_z_goal_secret_agents
		prerequisite = { focus = CAT_winning_kpi }
		x = 0
		y = 1
		relative_position_id = CAT_winning_kpi
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_military_investigation_service"
			army_experience = 10
		}
	}
	
	focus = {
		id = CAT_destruction_rural_communities
		icon = GFX_focus_generic_military_academy
		prerequisite = { focus = CAT_military_investigation_service }
		x = -1
		y = 1
		relative_position_id = CAT_military_investigation_service
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_destruction_rural_communities"
			add_stability = 0.05
		}
	}
	
	focus = {
		id = CAT_destruction_opponents_parliament
		icon = GFX_goal_generic_demand_territory
		prerequisite = { focus = CAT_military_investigation_service }
		x = 1
		y = 1
		relative_position_id = CAT_military_investigation_service
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_destruction_opponents_parliament"
			add_political_power = 100
		}
	}
	
	focus = {
		id = CAT_prescribe_leadership_communist_party_in_constitution
		icon = GFX_z_goal_order_army2
		prerequisite = { focus = CAT_destruction_rural_communities }
		prerequisite = { focus = CAT_destruction_opponents_parliament }
		x = 1
		y = 1
		relative_position_id = CAT_destruction_rural_communities
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_prescribe_leadership_communist_party_in_constitution"
			add_popularity = {
				ideology = communism
				popularity = 0.15
			}
			if = {
				limit = { is_subject_of = SPR }
				swap_ideas = {
					remove_idea = SPR_spain_subject_idea
					add_idea = SPR_spain_subject_idea_2
				}
			}
		}
	}
	
	focus = {
		id = CAT_introduction_censorship
		icon = GFX_z_goal_big_news
		prerequisite = { focus = CAT_prescribe_leadership_communist_party_in_constitution }
		x = -1
		y = 1
		relative_position_id = CAT_prescribe_leadership_communist_party_in_constitution
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_introduction_censorship"
			add_popularity = {
				ideology = communism
				popularity = 0.1
			}
		}
	}
	
	focus = {
		id = CAT_advisers_from_kremlin
		icon = GFX_focus_chi_mission_to_the_soviet_union
		prerequisite = { focus = CAT_prescribe_leadership_communist_party_in_constitution }
		x = 1
		y = 1
		relative_position_id = CAT_prescribe_leadership_communist_party_in_constitution
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_advisers_from_kremlin"
			army_experience = 20
		}
	}
	
	focus = {
		id = CAT_winning_iwa
		icon = GFX_z_goal_generic_support_anarchism
		prerequisite = { focus = CAT_may_events }
		mutually_exclusive = { focus = CAT_winning_kpi focus = CAT_winning_poum focus = CAT_save_power_jeneralitet }
		x = -2
		y = 1
		relative_position_id = CAT_may_events
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_winning_iwa"
			add_popularity = {
				ideology = anarchism
				popularity = 0.25
			}
			set_politics = {
				ruling_party = anarchism
				elections_allowed = yes
			}
			set_country_flag = anarchism_left_flag
			if = {
				limit = {
					NOT = {
						has_idea = peoples_squads
						has_idea = peoples_police
						has_idea = peoples_militia
						has_active_mission = generic_anarchism_manpower_decision
					}
				}
				activate_mission = generic_anarchism_manpower_decision
			}
			custom_effect_tooltip = TUR_focus_autocomplete_tt
			custom_effect_tooltip = CAT_winning_iwa_tt
		}
	}
	
	focus = {
		id = CAT_repression_against_marxists
		icon = GFX_z_goal_orange_menace
		prerequisite = { focus = CAT_winning_kpi focus = CAT_winning_iwa }
		x = -2
		y = 1
		relative_position_id = CAT_winning_iwa
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_repression_against_marxists"
			add_popularity = {
				ideology = trozkism
				popularity = -0.07
			}
		}
	}
	
	focus = {
		id = CAT_continued_collectivization
		icon = GFX_z_goal_rabgosudarstvo
		prerequisite = { focus = CAT_winning_iwa }
		x = 0
		y = 1
		relative_position_id = CAT_winning_iwa
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_continued_collectivization"
			add_popularity = {
				ideology = anarchism
				popularity = 0.1
			}
			if = {
				limit = { is_subject_of = SPR }
				swap_ideas = {
					remove_idea = SPR_spain_subject_idea
					add_idea = SPR_spain_subject_idea_2
				}
			}
		}
	}
	
	focus = {
		id = CAT_protection_spanish_revolution
		icon = GFX_focus_spr_no_pasaran
		prerequisite = { focus = CAT_continued_collectivization }
		x = -1
		y = 1
		relative_position_id = CAT_continued_collectivization
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_protection_spanish_revolution"
			add_war_support = 0.05
		}
	}
	
	focus = {
		id = CAT_propaganda_in_spain
		icon = GFX_z_goal_spain_dzin
		prerequisite = { focus = CAT_continued_collectivization }
		x = 1
		y = 1
		relative_position_id = CAT_continued_collectivization
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
			SPR = { exists = no }
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_propaganda_in_spain"
			SPR = { add_timed_idea = { idea = ARA_propaganda_in_spain_idea days = 60 } }
		}
	}
	
	focus = {
		id = CAT_support_from_madrid
		icon = GFX_focus_generic_diplomatic_treaty
		prerequisite = { focus = CAT_protection_spanish_revolution }
		prerequisite = { focus = CAT_propaganda_in_spain }
		x = 1
		y = 1
		relative_position_id = CAT_protection_spanish_revolution
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_support_from_madrid"
			add_tech_bonus = {
				name = CAT_support_from_madrid
				bonus = 1.0
				uses = 3
				category = infantry_weapons
				category = artillery
			}
		}
	}
	
	focus = {
		id = CAT_new_revolution
		icon = GFX_z_goal_revolution
		prerequisite = { focus = CAT_support_from_madrid }
		mutually_exclusive = { focus = CAT_spanish_autonomy }
		x = -1
		y = 1
		relative_position_id = CAT_support_from_madrid
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0
				is_historical_focus_on = yes
			}
		}
		available = {
			if = {
				limit = { country_exists = SPR }
				SPR = { NOT = { has_government = ROOT } }
			}
			if = {
				limit = { country_exists = SPA }
				SPA = { NOT = { has_government = ROOT } }
			}
		}
		bypass = {
			SPR = { exists = no }
			SPA = { exists = no }
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_new_revolution"
			if = {
				limit = { is_subject = yes }
				OVERLORD = {
					set_autonomy = {
						target = ROOT
						autonomy_state = autonomy_free
					}
				}
			}
			if = {
				limit = { country_exists = SPR }
				create_wargoal = {
					type = annex_everything
					target = SPR
				}
			}
			if = {
				limit = { country_exists = SPA }
				create_wargoal = {
					type = annex_everything
					target = SPA
				}
			}
			hidden_effect = {
				if = {
					limit = { SPR = { has_completed_focus = SPR_support_stalinists } }
					SPR = { country_event = { id = NWspain.201 days = 1 } }
				}
			}
		}
	}
	
	focus = {
		id = CAT_spanish_autonomy
		icon = GFX_goal_generic_dangerous_deal
		prerequisite = { focus = CAT_support_from_madrid }
		mutually_exclusive = { focus = CAT_new_revolution }
		x = 1
		y = 1
		relative_position_id = CAT_support_from_madrid
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			SPR = { exists = yes }
			NOT = { SPR = { has_completed_focus = SPR_support_stalinists } }
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_spanish_autonomy"
			ROOT = { add_to_tech_sharing_group = CAT_spain_cat_group }
			SPR = { add_to_tech_sharing_group = CAT_spain_cat_group }
			add_opinion_modifier = {
				target = SPR
				modifier = CAT_spanish_autonomy
			}
			SPR = {
				add_opinion_modifier = {
					target = ROOT
					modifier = CAT_spanish_autonomy
				}
			}
		}
	}
	
	focus = {
		id = CAT_winning_poum
		icon = GFX_z_goal_support_trozkism3
		prerequisite = { focus = CAT_may_events }
		mutually_exclusive = { focus = CAT_winning_kpi focus = CAT_winning_iwa focus = CAT_save_power_jeneralitet }
		x = 2
		y = 1
		relative_position_id = CAT_may_events
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_winning_poum"
			add_popularity = {
				ideology = trozkism
				popularity = 0.25
			}
			set_politics = {
				ruling_party = trozkism
				elections_allowed = yes
			}
			custom_effect_tooltip = TUR_focus_autocomplete_tt
			custom_effect_tooltip = CAT_winning_poum_tt
		}
	}
	
	focus = {
		id = CAT_repression_against_communists
		icon = GFX_z_goal_generic_political_commissars
		prerequisite = { focus = CAT_winning_poum focus = CAT_winning_iwa }
		x = -2
		y = 1
		relative_position_id = CAT_winning_poum
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_repression_against_communists"
			add_popularity = { ideology = communism popularity = -0.07 }
		}
	}
	
	focus = {
		id = CAT_defending_bourgeois_revolution
		icon = GFX_z_goal_socmilirarism
		prerequisite = { focus = CAT_winning_poum }
		x = 0
		y = 1
		relative_position_id = CAT_winning_poum
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_defending_bourgeois_revolution"
			add_war_support = 0.05
		}
	}
	
	focus = {
		id = CAT_transformation_bourgeois_revolution_into_socialist
		icon = GFX_z_goal_communist_pride
		prerequisite = { focus = CAT_defending_bourgeois_revolution }
		x = 0
		y = 1
		relative_position_id = CAT_defending_bourgeois_revolution
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_transformation_bourgeois_revolution_into_socialist"
			add_popularity = { ideology = trozkism popularity = 0.1 }
			if = {
				limit = { is_subject_of = SPR }
				swap_ideas = {
					remove_idea = SPR_spain_subject_idea
					add_idea = SPR_spain_subject_idea_2
				}
			}
		}
	}
	
	focus = {
		id = CAT_revolution_in_madrid
		icon = GFX_z_goal_flames_of_rebellion
		prerequisite = { focus = CAT_transformation_bourgeois_revolution_into_socialist }
		x = -1
		y = 1
		relative_position_id = CAT_transformation_bourgeois_revolution_into_socialist
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			SPR = { NOT = { has_government = trozkism } }
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_revolution_in_madrid"
			if = {
				limit = { SPR = { has_completed_focus = SPR_support_stalinists } }
				OVERLORD = {
					set_autonomy = {
						target = ROOT
						autonomy_state = autonomy_free
					}
				}
				if = {
					limit = { SPR = { NOT = { has_government = trozkism } } }
					declare_war_on = {
						type = civil_war
						target = SPR
					}
					add_civil_war_target = SPR
				}
			}
			if = {
				limit = {
					SPR = {
						OR = {
							has_completed_focus = SPR_support_caballerito
							AND = {
								NOT = { has_completed_focus = SPR_support_stalinists }
								NOT = { has_completed_focus = SPR_support_caballerito }
							}
						}
					}
				}
				SPR = { add_timed_idea = { idea = CAT_influence_catalan_marxists_idea days = 60 } }
			}
		}
	}
	
	focus = {
		id = CAT_behalf_of_spanish_people
		icon = GFX_z_goal_permrevolt
		prerequisite = { focus = CAT_revolution_in_madrid }
		x = 0
		y = 1
		relative_position_id = CAT_revolution_in_madrid
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_behalf_of_spanish_people"
			if = {
				limit = { SPR = { exists = yes } }
				every_state = {
					limit = {
						OR = {
							is_core_of = SPR
							is_core_of = ARA
							is_core_of = BAS
							is_core_of = GLC
							is_core_of = ASU
							is_core_of = SNT
						}
					}
					add_core_of = ROOT
				}
			}
			if = {
				limit = { SPR = { exists = no } }
				every_state = {
					limit = {
						OR = {
							is_core_of = SPA
							is_core_of = ARA
							is_core_of = BAS
							is_core_of = GLC
							is_core_of = ASU
							is_core_of = SNT
						}
					}
					add_core_of = ROOT
				}
			}
		}
	}
	
	focus = {
		id = CAT_save_power_jeneralitet
		icon = GFX_goal_support_democracy
		prerequisite = { focus = CAT_may_events }
		mutually_exclusive = { focus = CAT_winning_kpi focus = CAT_winning_iwa focus = CAT_winning_poum }
		x = 6
		y = 1
		relative_position_id = CAT_may_events
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			hidden_trigger = {
				always = no
			}
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_save_power_jeneralitet"
			add_popularity = { ideology = democratic popularity = 0.25 }
			set_politics = {
				ruling_party = democratic
				elections_allowed = yes
			}
			custom_effect_tooltip = TUR_focus_autocomplete_tt
			custom_effect_tooltip = CAT_save_power_jeneralitet_tt
		}
	}
	
	focus = {
		id = CAT_repression_against_nationalists
		icon = GFX_focus_generic_anti_fascist_diplomacy
		prerequisite = { focus = CAT_winning_poum focus = CAT_save_power_jeneralitet }
		x = -2
		y = 1
		relative_position_id = CAT_save_power_jeneralitet
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_repression_against_nationalists"
			add_popularity = {
				ideology = fascism
				popularity = -0.07
			}
		}
	}
	
	focus = {
		id = CAT_ban_communist_parties
		icon = GFX_z_goal_broken_red_star
		prerequisite = { focus = CAT_save_power_jeneralitet }
		x = 0
		y = 1
		relative_position_id = CAT_save_power_jeneralitet
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_ban_communist_parties"
			add_popularity = {
				ideology = communism
				popularity = -0.05
			}
			add_popularity = {
				ideology = trozkism
				popularity = -0.05
			}
			add_popularity = {
				ideology = anarchism
				popularity = -0.05
			}
		}
	}
	
	focus = {
		id = CAT_referendum_on_independence
		icon = GFX_z_goal_elections
		prerequisite = { focus = CAT_ban_communist_parties }
		mutually_exclusive = { focus = CAT_remain_loyalty_republic }
		x = -1
		y = 1
		relative_position_id = CAT_ban_communist_parties
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 50
		}
		available = {
			SPR = { has_completed_focus = SPR_support_stalinists }
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_referendum_on_independence"
			OVERLORD = {
				set_autonomy = {
					target = ROOT
					autonomy_state = autonomy_free
				}
			}
			SPR = { country_event = { id = NWspain.203 days = 0 } }
		}
	}
	
	focus = {
		id = CAT_free_aragonese
		icon = GFX_focus_generic_strike_at_democracy1
		prerequisite = { focus = CAT_referendum_on_independence focus = CAT_transformation_bourgeois_revolution_into_socialist }
		mutually_exclusive = { focus = CAT_save_neutrality }
		x = -1
		y = 2
		relative_position_id = CAT_referendum_on_independence
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
			modifier = {
				factor = 0.1
				ARA = { has_government = democratic }
			}
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_free_aragonese"
			every_state = {
				limit = {
					OR = {
						state = 166
						state = 794
						state = 790
						state = 792
					}
				}
				add_claim_by = ROOT
			}
			if = {
				limit = { ARA = { NOT = { has_government = ROOT } } }
				create_wargoal = {
					type = annex_everything
					target = ARA
				}
			}
		}
	}
	
	focus = {
		id = CAT_save_neutrality
		icon = GFX_goal_generic_neutrality_focus
		prerequisite = { focus = CAT_referendum_on_independence }
		mutually_exclusive = { focus = CAT_free_aragonese }
		x = 1
		y = 2
		relative_position_id = CAT_referendum_on_independence
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_save_neutrality"
			add_ideas = neutrality_idea
		}
	}
	
	focus = {
		id = CAT_remain_loyalty_republic
		icon = GFX_goal_molotov_ribbentrop_pact
		prerequisite = { focus = CAT_ban_communist_parties }
		mutually_exclusive = { focus = CAT_referendum_on_independence }
		x = 1
		y = 1
		relative_position_id = CAT_ban_communist_parties
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_remain_loyalty_republic"
			add_stability = 0.05
		}
	}
	
	focus = {
		id = CAT_defence_democracy
		icon = GFX_z_national_liber
		prerequisite = { focus = CAT_remain_loyalty_republic }
		x = 0
		y = 1
		relative_position_id = CAT_remain_loyalty_republic
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_defence_democracy"
			add_tech_bonus = {
				name = ARA_formation_militia
				bonus = 1.0
				uses = 2
				category = infantry_weapons
				category = artillery
			}
			add_doctrine_cost_reduction = {
				name = ARA_formation_militia
				cost_reduction = 0.5
				uses = 1
				category = land_doctrine
			}
		}
	}
	
	focus = {
		id = CAT_repression_against_monarchists
		icon = GFX_focus_rom_abdicate
		prerequisite = { focus = CAT_save_power_jeneralitet }
		x = 2
		y = 1
		relative_position_id = CAT_save_power_jeneralitet
		
		cost = 7.15
		
		cancel_if_invalid = yes
		continue_if_invalid = no
		available_if_capitulated = yes

		ai_will_do = {
			factor = 5
		}
		available = {
			
		}
		bypass = {
		}

		completion_reward = {
			log = "[GetDateText]: [Root.GetName]: Focus CAT_repression_against_monarchists"
			add_popularity = {
				ideology = monarchy
				popularity = -0.07
			}
		}
	}
	
}
