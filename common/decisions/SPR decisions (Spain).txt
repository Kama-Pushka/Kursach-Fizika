spain_civil_war_north_category = {

	SPR_north_asu = {

		icon = generic_operation

		available = {
			ASU = { exists = no }
			790 = {
				controller = {
					OR = {
						tag = ROOT
						AND = {
							NOT = { tag = ROOT }
							NOT = { has_full_control_of_state = PREV }
						}
					}
				}
			}
		}

		highlight_states = { highlight_state_targets = { state = 790 } }

		#on_map_mode = map_only

		cost = 10

		fire_only_once = yes

		visible = {
			ASU = { exists = no }
		}

		cancel_if_not_visible = yes

		complete_effect = {
			release_puppet = ASU
			hidden_effect = {
				174 = { add_core_of = ASU }
				if = {
					limit = { SPR = { controls_state = 174 } }
					ASU = { transfer_state = 174 }
				}
				ASU = {
					transfer_state = 790
					set_popularities = {
						democratic = 40
						fascism = 40
						communism = 20
					}
					set_politics = {
						ruling_party = democratic
						last_election = "1935.1.1"
						election_frequency = 36
						elections_allowed = yes
					}
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 1000
					}
					ASU = { country_event = { id = NWspain.904 } }
					set_cosmetic_tag = ASU_interprov
				}
			}
			every_enemy_country = {
				ASU = {
					add_to_war = { targeted_alliance = ROOT enemy = PREV hostility_reason = asked_to_join }
				}
			}
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				num_of_controlled_states > 12
			}
		}
	}
	
	SPR_north_snt = {

		icon = generic_operation

		available = {
			SNT = { exists = no }
			982 = {
				controller = {
					OR = {
						tag = ROOT
						AND = {
							NOT = { tag = ROOT }
							NOT = { has_full_control_of_state = PREV }
						}
					}
				}
			}
		}

		highlight_states = { highlight_state_targets = { state = 982 } }

		#on_map_mode = map_only

		cost = 10

		fire_only_once = yes

		visible = {
			SNT = { exists = no }
		}

		cancel_if_not_visible = yes

		complete_effect = {
			release_puppet = SNT
			hidden_effect = {
				SNT = {
					transfer_state = 982
					add_equipment_to_stockpile = {
						type = infantry_equipment
						amount = 1000
					}
					SNT = { country_event = { id = NWspain.905 } }
					set_cosmetic_tag = SNT_interprov
				}
			}
			every_enemy_country = {
				ASU = {
					add_to_war = { targeted_alliance = ROOT enemy = PREV hostility_reason = asked_to_join }
				}
			}
		}

		ai_will_do = {
			factor = 10
			modifier = {
				factor = 0
				num_of_controlled_states > 12
			}
		}
	}
}

spain_civil_war_category = {

	#Предложить националистам мир // ARA
	ARA_SPA_make_peace = {

		icon = decision_hol_exchange_intelligence_data
		
		allowed = {
			original_tag = ARA
		}

		available = {
			has_war_with = SPA
			is_subject = no
			OR = {
				has_government = democratic
				has_government = fascism
				has_government = neutrality
				has_government = monarchy
			}
		}

		visible = {
			has_war_with = SPA
		}
		
		days_re_enable = 30
		
		cost = 10
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decisions ARA_SPA_make_peace"
			SPA = { country_event = { id = NWspain.206 } }
		}
		
		ai_will_do = {
			factor = 200
		}
	}
	
	#Предложить националистам мир // CAT
	CAT_SPA_make_peace = {

		icon = decision_hol_exchange_intelligence_data
		
		allowed = {
			original_tag = CAT
		}

		available = {
			has_war_with = SPA
			is_subject = no
			OR = {
				has_government = democratic
				has_government = fascism
				has_government = neutrality
				has_government = monarchy
			}
		}

		visible = {
			has_war_with = SPA
		}
		
		days_re_enable = 30
		
		cost = 10
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decisions CAT_SPA_make_peace"
			SPA = { country_event = { id = NWspain.307 } }
		}
		
		ai_will_do = {
			factor = 200
		}
	}
	
	#Активизировать Пятую колонну // SPA
	SPA_activate_fifth_column = {

		icon = decision_eng_propaganda_campaigns
		
		allowed = {
			original_tag = SPA
		}

		available = {
			has_war_with = SPR
			SPR = { surrender_progress < 0.5 }
		}

		visible = {
			has_war_with = SPR
			country_exists = SPR
			SPR_scw_in_progress = yes
		}
		
		days_re_enable = 30
		cost = SPA_activate_fifth_column_var?25
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decisions SPA_activate_fifth_column"
			SPR = { add_war_support = -0.04 }
			if = {
				limit = {
					check_variable = {
						var = SPA_activate_fifth_column_var
						value = 25
						compare = less_than
					}
				}
				set_variable = {
					var = SPA_activate_fifth_column_var
					value = 25
				}
			}
			add_to_variable = {
				var = SPA_activate_fifth_column_var
				value = 5
			}
			
			if = {
				limit = {
					check_variable = {
						var = SPA_activate_fifth_column_var
						value = 50
						compare = greater_than_or_equals
					}
					check_variable = {
						var = SPA_activate_fifth_column_var_stability_var
						value = -0.015
						compare = greater_than
					}
				}
				set_variable = {
					var = SPA_activate_fifth_column_var_stability_var
					value = -0.015
				}
			}
			if = {
				limit = {
					check_variable = {
						var = SPA_activate_fifth_column_var_stability_var
						value = -0.015
						compare = less_than_or_equals
					}
				}
				add_to_variable = {
					var = SPA_activate_fifth_column_var_stability_var
					value = -0.015
				}
				add_stability = SPA_activate_fifth_column_var_stability_var
			}
		}
		
		ai_will_do = {
			factor = 200
			modifier = {
				factor = 0.01
				SPR = { has_capitulated = yes }
			}
		}
	}
		
	#Организация народной милиции // SPR
	SPR_organization_peoples_militia = {

		icon = decision_generic_prepare_civil_war
		
		allowed = {
			original_tag = SPR
		}

		available = {
			has_war_with = SPA
		}

		visible = {
			has_war_with = SPA
			SPR_scw_in_progress = yes
		}
		
		fire_only_once = no
		days_re_enable = 90
		cost = SPR_organization_peoples_militia_var?50
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decisions SPR_organization_peoples_militia"
			if = {
				limit = {
					check_variable = {
						var = SPR_organization_peoples_militia_var
						value = 50
						compare = less_than
					}
				}
				set_variable = {
					var = SPR_organization_peoples_militia_var
					value = 50
				}
			}
			add_to_variable = {
				var = SPR_organization_peoples_militia_var
				value = 25
			}
			if = {
				limit = {
					check_variable = {
						var = SPR_organization_peoples_militia_var
						value = 100
						compare = greater_than_or_equals
					}
					check_variable = {
						var = SPR_organization_peoples_militia_war_support_var
						value = -0.05
						compare = greater_than
					}
				}
				set_variable = {
					var = SPR_organization_peoples_militia_war_support_var
					value = -0.05
				}
			}
			if = {
				limit = {
					check_variable = {
						var = SPR_organization_peoples_militia_war_support_var
						value = -0.05
						compare = less_than_or_equals
					}
				}
				add_to_variable = {
					var = SPR_organization_peoples_militia_war_support_var
					value = -0.025
				}
				add_war_support = SPR_organization_peoples_militia_war_support_var
			}
			hidden_effect = {
				if = {
					limit = { NOT = {  has_template = "People Militia" } }
					division_template = {
						name = "People Militia"
						is_locked = yes
						regiments = {
							infantry = { x = 0 y = 0 }
							infantry = { x = 0 y = 1 }
						}
					}
				}
			}
			random_owned_controlled_state = {
				create_unit = {
					division = "name = \"People Militia\" division_template = \"People Militia\" start_experience_factor = 0.1" 
					owner = ROOT
					allow_spawning_on_enemy_provs = yes
					count = 5
				}
			}
			every_subject_country = {
				limit = {
					has_capitulated = no
				}
				hidden_effect = {
					if = {
						limit = { NOT = {  has_template = "People Militia" } }
						division_template = {
							name = "People Militia"
							is_locked = yes
							regiments = {
								infantry = { x = 0 y = 0 }
								infantry = { x = 0 y = 1 }
								infantry = { x = 0 y = 2 }
							}
						}
					}
				}
				add_war_support = 0.025
				random_owned_state = {
					create_unit = {
						division = "name = \"People Militia\" division_template = \"People Militia\" start_experience_factor = 0.1" 
						owner = PREV
						allow_spawning_on_enemy_provs = yes
						count = 2
					}
				}
			}
			custom_effect_tooltip = SPR_remove_after_civil_war_tt
		}
		
		ai_will_do = {
			factor = 15
			modifier = {
				factor = 100
				check_variable = { var = SPR_organization_peoples_militia_var value = 50 compare = less_than }
			}
			modifier = {
				factor = 5
				surrender_progress > 0.25
			}
			modifier = {
				factor = 10
				surrender_progress > 0.5
			}
			modifier = {
				factor = 0
				is_historical_focus_on = yes
				check_variable = {
					var = SPR_organization_peoples_militia_var
					value = 100
					compare = greater_than_or_equals
				}
			}
		}
	}
}

spain_decision_category = {

	#Возродить Испанскую империю // SPA
	SPA_revive_spanish_empire = {

		icon = decision_generic_form_nation
		
		allowed = {
			original_tag = SPA
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = form_country_ven_required_states_tt
				all_of_scopes = {
					array = VEN.core_states
					is_controlled_by = ROOT
				}
			}
			custom_trigger_tooltip = {
				tooltip = form_country_col_required_states_tt
				all_of_scopes = {
					array = COL.core_states
					is_controlled_by = ROOT
				}
			}
		}
		
		fire_only_once = yes
		cost = 200
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decisions SPA_revive_spanish_empire"
			set_cosmetic_tag = SPA_empire
			every_state = {
				limit = {
					OR = {
						is_core_of = VEN
						is_core_of = COL
					}
				}
				add_core_of = ROOT
			}
		}
		
		ai_will_do = {
			factor = 100
		}
	}
	
	#Создание Священной Римской империи // SPA
	SPA_creation_holy_roman_empire = {

		icon = decision_generic_form_nation
		
		allowed = {
			original_tag = SPA
		}

		available = {
			custom_trigger_tooltip = {
				tooltip = form_country_aus_required_states_tt
				all_of_scopes = {
					array = AUS.core_states
					is_controlled_by = ROOT
				}
			}
			OR = {
				has_country_leader = { name = "Javier I" ruling_only = yes }
				has_country_leader = { name = "Otto von Habsburg" ruling_only = yes }
				has_country_leader = { character = SPA_otto_von_habsburg ruling_only = yes }
			}
		}

		visible = {
		}
		
		fire_only_once = yes
		cost = 100
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decisions SPA_creation_holy_roman_empire"
			set_cosmetic_tag = SPA_hre
			every_state = {
				limit = {
					is_core_of = AUS
				}
				add_core_of = ROOT
			}
		}
		
		ai_will_do = {
			factor = 200
		}
	}
	
	#Оккупировать Танжер // Оба
	SPR_occupy_tangier = {

		icon = decision_oppression
		
		available = {
			1042 = { is_fully_controlled_by = TNR }
			OR = {
				event_target:NW_france_scope = { is_subject = yes }
				event_target:NW_france_scope = { has_capitulated = yes }
				NOT = { country_exists = event_target:NW_france_scope }
			}
			threat > 0.4
		}

		visible = {
			country_exists = TNR
			OR = {
				has_government = neutrality
				has_government = fascism
				has_government = monarchy
			}
		}
		
		fire_only_once = yes
		cost = 0
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decisions SPR_occupy_tangier"
			annex_country = {
				target = TNR
				transfer_troops = yes
			}
		}
		
		ai_will_do = {
			factor = 200
		}
	}
	
	#Обменять Примо де Риверу // SPA
	SPR_exchange_primo_de_rivera = {

		icon = hol_exchange_intelligence_data
		
		allowed = {
			original_tag = SPA
		}

		available = {
			NOT = { has_country_flag = SPA_edilas_presidency_flag }
		}

		visible = {
			has_completed_focus = SPA_primo_de_rivera_prisoner_exchange
		}
		
		fire_only_once = yes
		cost = 50
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decisions SPR_exchange_primo_de_rivera"
			SPR = { add_manpower = 500 }
			SPA = { add_manpower = -500 }
			add_popularity = {
				ideology = fascism
				popularity = 0.05
			}
			add_war_support = 0.03
			#effect_tooltip = {
			#	unlock_national_focus = SPA_edilas_presidency
			#}
			custom_effect_tooltip = available_political_advisor
			show_ideas_tooltip = SPA_jose_antonio_primo_de_rivera
			set_country_flag = SPR_exchange_primo_de_rivera_flag
		}
		
		ai_will_do = {
			factor = 0.5
			modifier = {
				factor = 0
				NOT = { has_country_flag = NW_SPR_AI_FASCIST_ALTERNATE }
				OR = {
					is_historical_focus_on = yes
					has_country_flag = NW_SPR_AI_FASCIST
				}
			}
			modifier = {
				add = 500
				has_country_flag = NW_SPR_AI_FASCIST_ALTERNATE
			}
		}
	}
}

spain_liberal_loyality_category = {

	SPR_infotable_liberal_loyality = {

		icon = decision_generic_decision

		available = {
			always = no
		}

		fire_only_once = yes
		cost = 0
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decisions SPR_infotable_liberal_loyality"
		}
		
		ai_will_do = {
			factor = 0
		}
	}
}

catalon_decision_category = {

	CAT_integrate_catalon_lands = {

		icon = decision_generic_civil_support
		
		available = {
			has_full_control_of_state = 1043
			has_full_control_of_state = 167
			has_full_control_of_state = 177
		}

		visible = {
		}
		
		fire_only_once = yes
		cost = 100
		
		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decisions CAT_integrate_catalon_lands"
			set_cosmetic_tag = CAT_great
			every_state = {
				limit = {
					state = 1043
					state = 167
					state = 177					
				}
				add_core_of = ROOT
			}
		}
		
		ai_will_do = {
			factor = 200
		}
	}
}


SPR_foreign_arms_purchases = {

	SPR_purchase_infantry_equipment = {

		icon = generic_prepare_civil_war

		available = {
			
		}

		cost = 25

		fire_only_once = no

		days_remove = 20

		modifier = {
			
		}

		complete_effect = {
		}

		remove_effect = {
			random_list = {
				10 = {
					modifier = {
						factor = 0
						has_war_with = ENG
					}
					add_equipment_to_stockpile = {
					    type = infantry_equipment
					    amount = 1000
					    producer = ENG
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = FRA
					}
					modifier = {
						factor = 0
						FRA = { NOT = { has_completed_focus = FRA_intervention_in_spanish_war } }
						country_exists = SPR
						SPR = {
							OR = {
								has_government = communism
								has_government = democratic
							}
						}
					}
					add_equipment_to_stockpile = {
					    type = infantry_equipment
					    amount = 1000
					    producer = FRA
					}
				}
				15 = {
					modifier = {
						factor = 0
						has_war_with = FRC
					}
					modifier = {
						factor = 0
						FRC = { NOT = { has_government = ROOT } }
						country_exists = SPR
						SPR = {
							FRC = {
								has_government = PREV
							}
						}
					}
					modifier = {
						factor = 4
						FRC = { has_government = ROOT }
					}
					add_equipment_to_stockpile = {
					    type = infantry_equipment
					    amount = 1000
					    producer = FRC
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = SOV
					}
					modifier = {
						factor = 0.1
						country_exists = SPR
						SPR = {
							SOV = {
								has_government = PREV
							}
						}
					}
					modifier = {
						factor = 6
						OR = {
							NOT = { country_exists = SPR }
							SPR = {
								OR = {
									has_government = fascism
									has_government = monarchy
									has_government = trozkism
								}
							}
						}
					}
					add_equipment_to_stockpile = {
					    type = infantry_equipment
					    amount = 1000
					    producer = SOV
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = USA
					}
					add_equipment_to_stockpile = {
					    type = infantry_equipment
					    amount = 1000
					    producer = USA
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = SWE
					}
					add_equipment_to_stockpile = {
					    type = infantry_equipment
					    amount = 1000
					    producer = SWE
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = GER
					}
					add_equipment_to_stockpile = {
					    type = infantry_equipment
					    amount = 1000
					    producer = GER
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = ITA
					}
					add_equipment_to_stockpile = {
					    type = infantry_equipment
					    amount = 1000
					    producer = ITA
					}
				}
			}
			effect_tooltip = {
				add_equipment_to_stockpile = {
				    type = infantry_equipment
				    amount = 1000
				    producer = ENG
				}
			}
		}

	}

	SPR_purchase_support_equipment = {

		icon = generic_prepare_civil_war

		available = {
			
		}

		cost = 25

		fire_only_once = no

		days_remove = 20

		modifier = {
			
		}

		complete_effect = {
		}

		remove_effect = {
			random_list = {
				10 = {
					modifier = {
						factor = 0
						has_war_with = ENG
					}
					add_equipment_to_stockpile = {
					    type = support_equipment
					    amount = 200
					    producer = ENG
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = FRA
					}
					modifier = {
						factor = 0
						FRA = { NOT = { has_completed_focus = FRA_intervention_in_spanish_war } }
						country_exists = SPR
						SPR = {
							OR = {
								has_government = communism
								has_government = democratic
							}
						}
					}
					add_equipment_to_stockpile = {
					    type = support_equipment
					    amount = 200
					    producer = FRA
					}
				}
				15 = {
					modifier = {
						factor = 0
						has_war_with = FRC
					}
					modifier = {
						factor = 0
						FRC = { NOT = { has_government = ROOT } }
						country_exists = SPR
						SPR = {
							FRC = {
								has_government = PREV
							}
						}
					}
					modifier = {
						factor = 4
						FRC = { has_government = ROOT }
					}
					add_equipment_to_stockpile = {
					    type = infantry_equipment
					    amount = 1000
					    producer = FRC
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = SOV
					}
					modifier = {
						factor = 0.1
						country_exists = SPR
						SPR = {
							SOV = {
								has_government = PREV
							}
						}
					}
					modifier = {
						factor = 6
						OR = {
							NOT = { country_exists = SPR }
							SPR = {
								OR = {
									has_government = fascism
									has_government = monarchy
									has_government = trozkism
								}
							}
						}
					}
					add_equipment_to_stockpile = {
					    type = support_equipment
					    amount = 200
					    producer = SOV
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = USA
					}
					add_equipment_to_stockpile = {
					    type = support_equipment
					    amount = 200
					    producer = USA
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = SWE
					}
					add_equipment_to_stockpile = {
					    type = support_equipment
					    amount = 200
					    producer = SWE
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = GER
					}
					add_equipment_to_stockpile = {
					    type = support_equipment
					    amount = 200
					    producer = GER
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = ITA
					}
					add_equipment_to_stockpile = {
					    type = support_equipment
					    amount = 200
					    producer = ITA
					}
				}
			}
			effect_tooltip = {
				add_equipment_to_stockpile = {
				    type = support_equipment
				    amount = 200
				    producer = ENG
				}
			}
		}

	}

	SPR_purchase_artillery_equipment = {

		icon = generic_prepare_civil_war

		available = {
			
		}

		cost = 25

		fire_only_once = no

		days_remove = 20

		modifier = {
			
		}

		complete_effect = {
		}

		remove_effect = {
			random_list = {
				10 = {
					modifier = {
						factor = 0
						has_war_with = ENG
					}
					add_equipment_to_stockpile = {
					    type = artillery_equipment
					    amount = 200
					    producer = ENG
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = FRA
					}
					modifier = {
						factor = 0
						FRA = { NOT = { has_completed_focus = FRA_intervention_in_spanish_war } }
						country_exists = SPR
						SPR = {
							OR = {
								has_government = communism
								has_government = democratic
							}
						}
					}
					add_equipment_to_stockpile = {
					    type = artillery_equipment
					    amount = 200
					    producer = FRA
					}
				}
				15 = {
					modifier = {
						factor = 0
						has_war_with = FRC
					}
					modifier = {
						factor = 0
						FRC = { NOT = { has_government = ROOT } }
						country_exists = SPR
						SPR = {
							FRC = {
								has_government = PREV
							}
						}
					}
					modifier = {
						factor = 4
						FRC = { has_government = ROOT }
					}
					add_equipment_to_stockpile = {
					    type = infantry_equipment
					    amount = 1000
					    producer = FRC
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = SOV
					}
					modifier = {
						factor = 0.1
						country_exists = SPR
						SPR = {
							SOV = {
								has_government = PREV
							}
						}
					}
					modifier = {
						factor = 6
						OR = {
							NOT = { country_exists = SPR }
							SPR = {
								OR = {
									has_government = fascism
									has_government = monarchy
									has_government = trozkism
								}
							}
						}
					}
					add_equipment_to_stockpile = {
					    type = artillery_equipment
					    amount = 200
					    producer = SOV
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = USA
					}
					add_equipment_to_stockpile = {
					    type = artillery_equipment
					    amount = 200
					    producer = USA
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = SWE
					}
					add_equipment_to_stockpile = {
					    type = artillery_equipment
					    amount = 200
					    producer = SWE
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = GER
					}
					add_equipment_to_stockpile = {
					    type = artillery_equipment
					    amount = 200
					    producer = GER
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = ITA
					}
					add_equipment_to_stockpile = {
					    type = artillery_equipment
					    amount = 200
					    producer = ITA
					}
				}
			}
			effect_tooltip = {
				add_equipment_to_stockpile = {
				    type = artillery_equipment
				    amount = 200
				    producer = ENG
				}
			}
		}

	}

	SPR_purchase_aircraft = {

		icon = generic_air

		available = {
			
		}

		cost = 25

		fire_only_once = no

		days_remove = 20

		modifier = {
			
		}

		complete_effect = {
		}

		remove_effect = {
			random_list = {
				10 = {
					modifier = {
						factor = 0
						has_war_with = ENG
					}
					add_equipment_to_stockpile = {
					    type = small_plane_airframe
					    amount = 25
					    producer = ENG
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = FRA
					}
					modifier = {
						factor = 0
						FRA = { NOT = { has_completed_focus = FRA_intervention_in_spanish_war } }
						country_exists = SPR
						SPR = {
							OR = {
								has_government = communism
								has_government = democratic
							}
						}
					}
					add_equipment_to_stockpile = {
					    type = small_plane_airframe
					    amount = 25
					    producer = FRA
					}
				}
				15 = {
					modifier = {
						factor = 0
						has_war_with = FRC
					}
					modifier = {
						factor = 0
						FRC = { NOT = { has_government = ROOT } }
						country_exists = SPR
						SPR = {
							FRC = {
								has_government = PREV
							}
						}
					}
					modifier = {
						factor = 4
						FRC = { has_government = ROOT }
					}
					add_equipment_to_stockpile = {
					    type = infantry_equipment
					    amount = 1000
					    producer = FRC
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = SOV
					}
					modifier = {
						factor = 0.1
						country_exists = SPR
						SPR = {
							SOV = {
								has_government = PREV
							}
						}
					}
					modifier = {
						factor = 6
						OR = {
							NOT = { country_exists = SPR }
							SPR = {
								OR = {
									has_government = fascism
									has_government = monarchy
									has_government = trozkism
								}
							}
						}
					}
					add_equipment_to_stockpile = {
					    type = small_plane_airframe
					    amount = 25
					    producer = SOV
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = USA
					}
					add_equipment_to_stockpile = {
					    type = small_plane_airframe
					    amount = 25
					    producer = USA
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = SWE
					}
					add_equipment_to_stockpile = {
					    type = small_plane_airframe
					    amount = 25
					    producer = SWE
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = GER
					}
					add_equipment_to_stockpile = {
					    type = small_plane_airframe
					    amount = 25
					    producer = GER
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = ITA
					}
					add_equipment_to_stockpile = {
					    type = small_plane_airframe
					    amount = 25
					    producer = ITA
					}
				}
			}
			effect_tooltip = {
				add_equipment_to_stockpile = {
				    type = small_plane_airframe
				    amount = 25
				    producer = ENG
				}
			}
		}
	}

	SPR_purchase_trucks = {

		icon = generic_prepare_civil_war

		available = {
			
		}

		cost = 25

		fire_only_once = no

		days_remove = 20

		modifier = {
			
		}

		complete_effect = {
		}

		remove_effect = {
			random_list = {
				10 = {
					modifier = {
						factor = 0
						has_war_with = ENG
					}
					add_equipment_to_stockpile = {
					    type = motorized_equipment
					    amount = 100
					    producer = ENG
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = FRA
					}
					modifier = {
						factor = 0
						FRA = { NOT = { has_completed_focus = FRA_intervention_in_spanish_war } }
						country_exists = SPR
						SPR = {
							OR = {
								has_government = communism
								has_government = democratic
							}
						}
					}
					add_equipment_to_stockpile = {
					    type = motorized_equipment
					    amount = 100
					    producer = FRA
					}
				}
				15 = {
					modifier = {
						factor = 0
						has_war_with = FRC
					}
					modifier = {
						factor = 0
						FRC = { NOT = { has_government = ROOT } }
						country_exists = SPR
						SPR = {
							FRC = {
								has_government = PREV
							}
						}
					}
					modifier = {
						factor = 4
						FRC = { has_government = ROOT }
					}
					add_equipment_to_stockpile = {
					    type = infantry_equipment
					    amount = 1000
					    producer = FRC
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = SOV
					}
					modifier = {
						factor = 0.1
						country_exists = SPR
						SPR = {
							SOV = {
								has_government = PREV
							}
						}
					}
					modifier = {
						factor = 6
						OR = {
							NOT = { country_exists = SPR }
							SPR = {
								OR = {
									has_government = fascism
									has_government = monarchy
									has_government = trozkism
								}
							}
						}
					}
					add_equipment_to_stockpile = {
					    type = motorized_equipment
					    amount = 100
					    producer = SOV
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = USA
					}
					add_equipment_to_stockpile = {
					    type = motorized_equipment
					    amount = 100
					    producer = USA
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = SWE
					}
					add_equipment_to_stockpile = {
					    type = motorized_equipment
					    amount = 100
					    producer = SWE
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = GER
					}
					add_equipment_to_stockpile = {
					    type = motorized_equipment
					    amount = 100
					    producer = GER
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = ITA
					}
					add_equipment_to_stockpile = {
					    type = motorized_equipment
					    amount = 100
					    producer = ITA
					}
				}
			}
			effect_tooltip = {
				add_equipment_to_stockpile = {
				    type = motorized_equipment
				    amount = 100
				    producer = ENG
				}
			}
		}
	}

	SPR_purchase_tanks = {

		icon = generic_tank

		available = {
			
		}

		cost = 25

		fire_only_once = no

		days_remove = 20

		modifier = {
			
		}

		complete_effect = {
		}

		remove_effect = {
			random_list = {
				10 = {
					modifier = {
						factor = 0
						has_war_with = ENG
					}
					add_equipment_to_stockpile = {
					    type = light_tank_chassis
					    amount = 50
					    producer = ENG
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = FRA
					}
					modifier = {
						factor = 0
						FRA = { NOT = { has_completed_focus = FRA_intervention_in_spanish_war } }
						country_exists = SPR
						SPR = {
							OR = {
								has_government = communism
								has_government = democratic
							}
						}
					}
					add_equipment_to_stockpile = {
					    type = light_tank_chassis
					    amount = 50
					    producer = FRA
					}
				}
				15 = {
					modifier = {
						factor = 0
						has_war_with = FRC
					}
					modifier = {
						factor = 0
						FRC = { NOT = { has_government = ROOT } }
						country_exists = SPR
						SPR = {
							FRC = {
								has_government = PREV
							}
						}
					}
					modifier = {
						factor = 4
						FRC = { has_government = ROOT }
					}
					add_equipment_to_stockpile = {
					    type = infantry_equipment
					    amount = 1000
					    producer = FRC
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = SOV
					}
					modifier = {
						factor = 0.1
						country_exists = SPR
						SPR = {
							SOV = {
								has_government = PREV
							}
						}
					}
					modifier = {
						factor = 6
						OR = {
							NOT = { country_exists = SPR }
							SPR = {
								OR = {
									has_government = fascism
									has_government = monarchy
									has_government = trozkism
								}
							}
						}
					}
					add_equipment_to_stockpile = {
					    type = light_tank_chassis
					    amount = 50
					    producer = SOV
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = USA
					}
					add_equipment_to_stockpile = {
					    type = light_tank_chassis
					    amount = 50
					    producer = USA
					}
				}
				10 = {
					modifier = {
						factor = 0
						has_war_with = SWE
					}
					add_equipment_to_stockpile = {
					    type = light_tank_chassis
					    amount = 50
					    producer = SWE
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = GER
					}
					add_equipment_to_stockpile = {
					    type = light_tank_chassis
					    amount = 50
					    producer = GER
					}
				}
				5 = {
					modifier = {
						factor = 0
						has_war_with = ITA
					}
					add_equipment_to_stockpile = {
					    type = light_tank_chassis
					    amount = 50
					    producer = ITA
					}
				}
			}
			effect_tooltip = {
				add_equipment_to_stockpile = {
				    type = light_tank_chassis
				    amount = 50
				    producer = ENG
				}
			}
		}
	}
}

SPR_the_seeds_of_revolution = {
	SPR_ignite_uprising = {

		icon = generic_ignite_civil_war

		allowed = {
			OR = {
				original_tag = SPR
				original_tag = ARA
			}
		}
		
		visible = {
			OR = {
				original_tag = SPR
				original_tag = ARA
			}
			has_completed_focus = SPR_plant_the_seeds_of_revolution
			FROM = {
				exists = yes
			}
		}

		available = {
			FROM = {
				has_civil_war = no
				any_controlled_state = {
					is_in_home_area = yes
					is_capital = no
				}
			}
			has_equipment = {
			    infantry_equipment > 19999
			}
			any_controlled_state = {
				NOT = { has_state_flag = anarchist_uprising }
			}
		}
		
		target_root_trigger = {
			has_completed_focus = SPR_plant_the_seeds_of_revolution
			has_equipment = {
			    infantry_equipment > 19999
			}
		}

		target_trigger = {
			FROM = {
				exists = yes
				has_war_with = ROOT
				any_controlled_state = {
					is_in_home_area = yes
					any_neighbor_state = {
						is_controlled_by = ROOT
					}
				}
			}
		}

		cost = 150

		fire_only_once = yes

		days_remove = 90

		modifier = {
			
		}

		complete_effect = {
			add_equipment_to_stockpile = {
			    type = infantry_equipment
			    amount = -20000
			}
			hidden_effect = {
				FROM = {
					set_country_flag = SPR_ignite_uprising_timer_flag
					activate_mission = SPR_ignite_uprising_timer_mission
				}
			}
		}

		remove_effect = {
			if = {
				limit = {
					FROM = {
						any_controlled_state = {
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
									PREV.PREV = {
										distance_to = {
											target = PREV
											value < 750
										}
									}
								}
							}
						}
					}
				}
				random_state = {
					limit = {
						is_controlled_by = FROM
						is_in_home_area = yes
						is_capital = no
						NOT = { has_state_flag = anarchist_uprising }
						ROOT = {
							any_controlled_state = {
								NOT = { has_state_flag = anarchist_uprising }
								PREV.PREV = {
									distance_to = {
										target = PREV
										value < 750
									}
								}
							}
						}
					}
					set_state_flag = anarchist_uprising
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
			else_if = {
				limit = {
					FROM = {
						any_controlled_state = {
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
									PREV.PREV = {
										distance_to = {
											target = PREV
											value < 1500
										}
									}
								}
							}
						}
					}
				}
				random_state = {
					limit = {
						is_controlled_by = FROM
						is_in_home_area = yes
						is_capital = no
						NOT = { has_state_flag = anarchist_uprising }
						ROOT = {
							any_controlled_state = {
								NOT = { has_state_flag = anarchist_uprising }
								PREV.PREV = {
									distance_to = {
										target = PREV
										value < 1500
									}
								}
							}
						}
					}
					set_state_flag = anarchist_uprising
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
				}
			}
			else = {
				random_state = {
					limit = {
						is_controlled_by = FROM
						is_in_home_area = yes
						is_capital = no
						NOT = { has_state_flag = anarchist_uprising }
						ROOT = {
							any_controlled_state = {
								NOT = { has_state_flag = anarchist_uprising }
							}
						}
					}
					set_state_flag = anarchist_uprising
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
					create_unit = {
						division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
						owner = ROOT
						allow_spawning_on_enemy_provs = yes
					}
				}
			}

			if = {
				limit = {
					FROM = { num_of_controlled_states > 4 }
				}
				if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								ROOT = {
									any_controlled_state = {
										NOT = { has_state_flag = anarchist_uprising }
										PREV.PREV = {
											distance_to = {
												target = PREV
												value < 750
											}
										}
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
									PREV.PREV = {
										distance_to = {
											target = PREV
											value < 750
										}
									}
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else_if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								ROOT = {
									any_controlled_state = {
										NOT = { has_state_flag = anarchist_uprising }
										PREV.PREV = {
											distance_to = {
												target = PREV
												value < 1500
											}
										}
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
									PREV.PREV = {
										distance_to = {
											target = PREV
											value < 1500
										}
									}
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else = {
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
			}
			if = {
				limit = {
					FROM = { num_of_controlled_states > 7 }
				}
				if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								ROOT = {
									any_controlled_state = {
										NOT = { has_state_flag = anarchist_uprising }
										PREV.PREV = {
											distance_to = {
												target = PREV
												value < 750
											}
										}
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
									PREV.PREV = {
										distance_to = {
											target = PREV
											value < 750
										}
									}
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else_if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								ROOT = {
									any_controlled_state = {
										NOT = { has_state_flag = anarchist_uprising }
										PREV.PREV = {
											distance_to = {
												target = PREV
												value < 1500
											}
										}
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
									PREV.PREV = {
										distance_to = {
											target = PREV
											value < 1500
										}
									}
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else = {
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
			}
			if = {
				limit = {
					FROM = { num_of_controlled_states > 11 }
				}
				if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								ROOT = {
									any_controlled_state = {
										NOT = { has_state_flag = anarchist_uprising }
										PREV.PREV = {
											distance_to = {
												target = PREV
												value < 750
											}
										}
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
									PREV.PREV = {
										distance_to = {
											target = PREV
											value < 750
										}
									}
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
									PREV.PREV = {
										distance_to = {
											target = PREV
											value < 750
										}
									}
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else_if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								ROOT = {
									any_controlled_state = {
										NOT = { has_state_flag = anarchist_uprising }
										PREV.PREV = {
											distance_to = {
												target = PREV
												value < 1500
											}
										}
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
									PREV.PREV = {
										distance_to = {
											target = PREV
											value < 1500
										}
									}
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
									PREV.PREV = {
										distance_to = {
											target = PREV
											value < 1500
										}
									}
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else = {
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
			}
			if = {
				limit = {
					FROM = { num_of_controlled_states > 19 }
				}
				if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								ROOT = {
									any_controlled_state = {
										NOT = { has_state_flag = anarchist_uprising }
										PREV.PREV = {
											distance_to = {
												target = PREV
												value < 750
											}
										}
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
									PREV.PREV = {
										distance_to = {
											target = PREV
											value < 750
										}
									}
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
									PREV.PREV = {
										distance_to = {
											target = PREV
											value < 750
										}
									}
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else_if = {
					limit = {
						FROM = {
							any_controlled_state = {
								is_in_home_area = yes
								is_capital = no
								NOT = { has_state_flag = anarchist_uprising }
								ROOT = {
									any_controlled_state = {
										NOT = { has_state_flag = anarchist_uprising }
										PREV.PREV = {
											distance_to = {
												target = PREV
												value < 1500
											}
										}
									}
								}
							}
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
									PREV.PREV = {
										distance_to = {
											target = PREV
											value < 1500
										}
									}
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
									PREV.PREV = {
										distance_to = {
											target = PREV
											value < 1500
										}
									}
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
				else = {
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
					random_state = {
						limit = {
							is_controlled_by = FROM
							is_in_home_area = yes
							is_capital = no
							NOT = { has_state_flag = anarchist_uprising }
							ROOT = {
								any_controlled_state = {
									NOT = { has_state_flag = anarchist_uprising }
								}
							}
						}
						set_state_flag = anarchist_uprising
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
						create_unit = {
							division = "division_template = \"Anarchist Militia\" start_experience_factor = 0.1" 
							owner = ROOT
							allow_spawning_on_enemy_provs = yes
						}
					}
				}
			}
		}
	}

	SPR_ignite_uprising_timer_mission = {
		icon = generic_ignite_civil_war
		allowed = {
			always = no
		}
		activation = {
			always = no
		}
		available = {
			hidden_trigger = { always = no }
		}

		days_mission_timeout = 90

		fire_only_once = yes

		visible = {
			has_country_flag = SPR_ignite_uprising_timer_flag
		}

		cancel_if_not_visible = no

		is_good = yes

		timeout_effect = {
			clr_country_flag = SPR_ignite_uprising_timer_flag
			custom_effect_tooltip = SPR_ignite_uprising_timer_mission_tt
		}
	}
}